{"/home/travis/build/npmtest/node-npmtest-lazo/test.js":"/* istanbul instrument in package npmtest_lazo */\n/*jslint\n    bitwise: true,\n    browser: true,\n    maxerr: 8,\n    maxlen: 96,\n    node: true,\n    nomen: true,\n    regexp: true,\n    stupid: true\n*/\n(function () {\n    'use strict';\n    var local;\n\n\n\n    // run shared js-env code - init-before\n    (function () {\n        // init local\n        local = {};\n        // init modeJs\n        local.modeJs = (function () {\n            try {\n                return typeof navigator.userAgent === 'string' &&\n                    typeof document.querySelector('body') === 'object' &&\n                    typeof XMLHttpRequest.prototype.open === 'function' &&\n                    'browser';\n            } catch (errorCaughtBrowser) {\n                return module.exports &&\n                    typeof process.versions.node === 'string' &&\n                    typeof require('http').createServer === 'function' &&\n                    'node';\n            }\n        }());\n        // init global\n        local.global = local.modeJs === 'browser'\n            ? window\n            : global;\n        switch (local.modeJs) {\n        // re-init local from window.local\n        case 'browser':\n            local = local.global.utility2.objectSetDefault(\n                local.global.utility2_rollup || local.global.local,\n                local.global.utility2\n            );\n            break;\n        // re-init local from example.js\n        case 'node':\n            local = (local.global.utility2_rollup || require('utility2'))\n                .requireReadme();\n            break;\n        }\n        // export local\n        local.global.local = local;\n    }());\n\n\n\n    // run shared js-env code - function\n    (function () {\n        return;\n    }());\n    switch (local.modeJs) {\n\n\n\n    // run browser js-env code - function\n    case 'browser':\n        break;\n\n\n\n    // run node js-env code - function\n    case 'node':\n        break;\n    }\n\n\n\n    // run shared js-env code - init-after\n    (function () {\n        return;\n    }());\n    switch (local.modeJs) {\n\n\n\n    // run browser js-env code - init-after\n    case 'browser':\n        local.testCase_browser_nullCase = local.testCase_browser_nullCase || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test browsers's null-case handling-behavior-behavior\n         */\n            onError(null, options);\n        };\n\n        // run tests\n        local.nop(local.modeTest &&\n            document.querySelector('#testRunButton1') &&\n            document.querySelector('#testRunButton1').click());\n        break;\n\n\n\n    // run node js-env code - init-after\n    /* istanbul ignore next */\n    case 'node':\n        local.testCase_buildApidoc_default = local.testCase_buildApidoc_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test buildApidoc's default handling-behavior-behavior\n         */\n            options = { modulePathList: module.paths };\n            local.buildApidoc(options, onError);\n        };\n\n        local.testCase_buildApp_default = local.testCase_buildApp_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test buildApp's default handling-behavior-behavior\n         */\n            local.testCase_buildReadme_default(options, local.onErrorThrow);\n            local.testCase_buildLib_default(options, local.onErrorThrow);\n            local.testCase_buildTest_default(options, local.onErrorThrow);\n            local.testCase_buildCustomOrg_default(options, local.onErrorThrow);\n            options = [];\n            local.buildApp(options, onError);\n        };\n\n        local.testCase_buildCustomOrg_default = local.testCase_buildCustomOrg_default ||\n            function (options, onError) {\n            /*\n             * this function will test buildCustomOrg's default handling-behavior\n             */\n                options = {};\n                local.buildCustomOrg(options, onError);\n            };\n\n        local.testCase_buildLib_default = local.testCase_buildLib_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test buildLib's default handling-behavior\n         */\n            options = {};\n            local.buildLib(options, onError);\n        };\n\n        local.testCase_buildReadme_default = local.testCase_buildReadme_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test buildReadme's default handling-behavior-behavior\n         */\n            options = {};\n            local.buildReadme(options, onError);\n        };\n\n        local.testCase_buildTest_default = local.testCase_buildTest_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test buildTest's default handling-behavior\n         */\n            options = {};\n            local.buildTest(options, onError);\n        };\n\n        local.testCase_webpage_default = local.testCase_webpage_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test webpage's default handling-behavior\n         */\n            options = { modeCoverageMerge: true, url: local.serverLocalHost + '?modeTest=1' };\n            local.browserTest(options, onError);\n        };\n\n        // run test-server\n        local.testRunServer(local);\n        break;\n    }\n}());\n","/home/travis/build/npmtest/node-npmtest-lazo/lib.npmtest_lazo.js":"/* istanbul instrument in package npmtest_lazo */\n/*jslint\n    bitwise: true,\n    browser: true,\n    maxerr: 8,\n    maxlen: 96,\n    node: true,\n    nomen: true,\n    regexp: true,\n    stupid: true\n*/\n(function () {\n    'use strict';\n    var local;\n\n\n\n    // run shared js-env code - init-before\n    (function () {\n        // init local\n        local = {};\n        // init modeJs\n        local.modeJs = (function () {\n            try {\n                return typeof navigator.userAgent === 'string' &&\n                    typeof document.querySelector('body') === 'object' &&\n                    typeof XMLHttpRequest.prototype.open === 'function' &&\n                    'browser';\n            } catch (errorCaughtBrowser) {\n                return module.exports &&\n                    typeof process.versions.node === 'string' &&\n                    typeof require('http').createServer === 'function' &&\n                    'node';\n            }\n        }());\n        // init global\n        local.global = local.modeJs === 'browser'\n            ? window\n            : global;\n        // init utility2_rollup\n        local = local.global.utility2_rollup || local;\n        // init lib\n        local.local = local.npmtest_lazo = local;\n        // init exports\n        if (local.modeJs === 'browser') {\n            local.global.utility2_npmtest_lazo = local;\n        } else {\n            module.exports = local;\n            module.exports.__dirname = __dirname;\n            module.exports.module = module;\n        }\n    }());\n}());\n","/home/travis/build/npmtest/node-npmtest-lazo/example.js":"/*\nexample.js\n\nquickstart example\n\ninstruction\n    1. save this script as example.js\n    2. run the shell command:\n        $ npm install npmtest-lazo && PORT=8081 node example.js\n    3. play with the browser-demo on http://127.0.0.1:8081\n*/\n\n\n\n/* istanbul instrument in package npmtest_lazo */\n/*jslint\n    bitwise: true,\n    browser: true,\n    maxerr: 8,\n    maxlen: 96,\n    node: true,\n    nomen: true,\n    regexp: true,\n    stupid: true\n*/\n(function () {\n    'use strict';\n    var local;\n\n\n\n    // run shared js-env code - init-before\n    (function () {\n        // init local\n        local = {};\n        // init modeJs\n        local.modeJs = (function () {\n            try {\n                return typeof navigator.userAgent === 'string' &&\n                    typeof document.querySelector('body') === 'object' &&\n                    typeof XMLHttpRequest.prototype.open === 'function' &&\n                    'browser';\n            } catch (errorCaughtBrowser) {\n                return module.exports &&\n                    typeof process.versions.node === 'string' &&\n                    typeof require('http').createServer === 'function' &&\n                    'node';\n            }\n        }());\n        // init global\n        local.global = local.modeJs === 'browser'\n            ? window\n            : global;\n        // init utility2_rollup\n        local = local.global.utility2_rollup || (local.modeJs === 'browser'\n            ? local.global.utility2_npmtest_lazo\n            : global.utility2_moduleExports);\n        // export local\n        local.global.local = local;\n    }());\n    switch (local.modeJs) {\n\n\n\n    // init-after\n    // run browser js-env code - init-after\n    /* istanbul ignore next */\n    case 'browser':\n        local.testRunBrowser = function (event) {\n            if (!event || (event &&\n                    event.currentTarget &&\n                    event.currentTarget.className &&\n                    event.currentTarget.className.includes &&\n                    event.currentTarget.className.includes('onreset'))) {\n                // reset output\n                Array.from(\n                    document.querySelectorAll('body > .resettable')\n                ).forEach(function (element) {\n                    switch (element.tagName) {\n                    case 'INPUT':\n                    case 'TEXTAREA':\n                        element.value = '';\n                        break;\n                    default:\n                        element.textContent = '';\n                    }\n                });\n            }\n            switch (event && event.currentTarget && event.currentTarget.id) {\n            case 'testRunButton1':\n                // show tests\n                if (document.querySelector('#testReportDiv1').style.display === 'none') {\n                    document.querySelector('#testReportDiv1').style.display = 'block';\n                    document.querySelector('#testRunButton1').textContent =\n                        'hide internal test';\n                    local.modeTest = true;\n                    local.testRunDefault(local);\n                // hide tests\n                } else {\n                    document.querySelector('#testReportDiv1').style.display = 'none';\n                    document.querySelector('#testRunButton1').textContent = 'run internal test';\n                }\n                break;\n            // custom-case\n            default:\n                break;\n            }\n            if (document.querySelector('#inputTextareaEval1') && (!event || (event &&\n                    event.currentTarget &&\n                    event.currentTarget.className &&\n                    event.currentTarget.className.includes &&\n                    event.currentTarget.className.includes('oneval')))) {\n                // try to eval input-code\n                try {\n                    /*jslint evil: true*/\n                    eval(document.querySelector('#inputTextareaEval1').value);\n                } catch (errorCaught) {\n                    console.error(errorCaught);\n                }\n            }\n        };\n        // log stderr and stdout to #outputTextareaStdout1\n        ['error', 'log'].forEach(function (key) {\n            console[key + '_original'] = console[key];\n            console[key] = function () {\n                var element;\n                console[key + '_original'].apply(console, arguments);\n                element = document.querySelector('#outputTextareaStdout1');\n                if (!element) {\n                    return;\n                }\n                // append text to #outputTextareaStdout1\n                element.value += Array.from(arguments).map(function (arg) {\n                    return typeof arg === 'string'\n                        ? arg\n                        : JSON.stringify(arg, null, 4);\n                }).join(' ') + '\\n';\n                // scroll textarea to bottom\n                element.scrollTop = element.scrollHeight;\n            };\n        });\n        // init event-handling\n        ['change', 'click', 'keyup'].forEach(function (event) {\n            Array.from(document.querySelectorAll('.on' + event)).forEach(function (element) {\n                element.addEventListener(event, local.testRunBrowser);\n            });\n        });\n        // run tests\n        local.testRunBrowser();\n        break;\n\n\n\n    // run node js-env code - init-after\n    /* istanbul ignore next */\n    case 'node':\n        // export local\n        module.exports = local;\n        // require modules\n        local.fs = require('fs');\n        local.http = require('http');\n        local.url = require('url');\n        // init assets\n        local.assetsDict = local.assetsDict || {};\n        /* jslint-ignore-begin */\n        local.assetsDict['/assets.index.template.html'] = '\\\n<!doctype html>\\n\\\n<html lang=\"en\">\\n\\\n<head>\\n\\\n<meta charset=\"UTF-8\">\\n\\\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\\n\\\n<title>{{env.npm_package_name}} (v{{env.npm_package_version}})</title>\\n\\\n<style>\\n\\\n/*csslint\\n\\\n    box-sizing: false,\\n\\\n    universal-selector: false\\n\\\n*/\\n\\\n* {\\n\\\n    box-sizing: border-box;\\n\\\n}\\n\\\nbody {\\n\\\n    background: #dde;\\n\\\n    font-family: Arial, Helvetica, sans-serif;\\n\\\n    margin: 2rem;\\n\\\n}\\n\\\nbody > * {\\n\\\n    margin-bottom: 1rem;\\n\\\n}\\n\\\n.utility2FooterDiv {\\n\\\n    margin-top: 20px;\\n\\\n    text-align: center;\\n\\\n}\\n\\\n</style>\\n\\\n<style>\\n\\\n/*csslint\\n\\\n*/\\n\\\ntextarea {\\n\\\n    font-family: monospace;\\n\\\n    height: 10rem;\\n\\\n    width: 100%;\\n\\\n}\\n\\\ntextarea[readonly] {\\n\\\n    background: #ddd;\\n\\\n}\\n\\\n</style>\\n\\\n</head>\\n\\\n<body>\\n\\\n<!-- utility2-comment\\n\\\n<div id=\"ajaxProgressDiv1\" style=\"background: #d00; height: 2px; left: 0; margin: 0; padding: 0; position: fixed; top: 0; transition: background 0.5s, width 1.5s; width: 25%;\"></div>\\n\\\nutility2-comment -->\\n\\\n<h1>\\n\\\n<!-- utility2-comment\\n\\\n    <a\\n\\\n        {{#if env.npm_package_homepage}}\\n\\\n        href=\"{{env.npm_package_homepage}}\"\\n\\\n        {{/if env.npm_package_homepage}}\\n\\\n        target=\"_blank\"\\n\\\n    >\\n\\\nutility2-comment -->\\n\\\n        {{env.npm_package_name}} (v{{env.npm_package_version}})\\n\\\n<!-- utility2-comment\\n\\\n    </a>\\n\\\nutility2-comment -->\\n\\\n</h1>\\n\\\n<h3>{{env.npm_package_description}}</h3>\\n\\\n<!-- utility2-comment\\n\\\n<h4><a download href=\"assets.app.js\">download standalone app</a></h4>\\n\\\n<button class=\"onclick onreset\" id=\"testRunButton1\">run internal test</button><br>\\n\\\n<div id=\"testReportDiv1\" style=\"display: none;\"></div>\\n\\\nutility2-comment -->\\n\\\n\\n\\\n\\n\\\n\\n\\\n<label>stderr and stdout</label>\\n\\\n<textarea class=\"resettable\" id=\"outputTextareaStdout1\" readonly></textarea>\\n\\\n<!-- utility2-comment\\n\\\n{{#if isRollup}}\\n\\\n<script src=\"assets.app.js\"></script>\\n\\\n{{#unless isRollup}}\\n\\\nutility2-comment -->\\n\\\n<script src=\"assets.utility2.rollup.js\"></script>\\n\\\n<script src=\"jsonp.utility2._stateInit?callback=window.utility2._stateInit\"></script>\\n\\\n<script src=\"assets.npmtest_lazo.rollup.js\"></script>\\n\\\n<script src=\"assets.example.js\"></script>\\n\\\n<script src=\"assets.test.js\"></script>\\n\\\n<!-- utility2-comment\\n\\\n{{/if isRollup}}\\n\\\nutility2-comment -->\\n\\\n<div class=\"utility2FooterDiv\">\\n\\\n    [ this app was created with\\n\\\n    <a href=\"https://github.com/kaizhu256/node-utility2\" target=\"_blank\">utility2</a>\\n\\\n    ]\\n\\\n</div>\\n\\\n</body>\\n\\\n</html>\\n\\\n';\n        /* jslint-ignore-end */\n        if (local.templateRender) {\n            local.assetsDict['/'] = local.templateRender(\n                local.assetsDict['/assets.index.template.html'],\n                {\n                    env: local.objectSetDefault(local.env, {\n                        npm_package_description: 'the greatest app in the world!',\n                        npm_package_name: 'my-app',\n                        npm_package_nameAlias: 'my_app',\n                        npm_package_version: '0.0.1'\n                    })\n                }\n            );\n        } else {\n            local.assetsDict['/'] = local.assetsDict['/assets.index.template.html']\n                .replace((/\\{\\{env\\.(\\w+?)\\}\\}/g), function (match0, match1) {\n                    // jslint-hack\n                    String(match0);\n                    switch (match1) {\n                    case 'npm_package_description':\n                        return 'the greatest app in the world!';\n                    case 'npm_package_name':\n                        return 'my-app';\n                    case 'npm_package_nameAlias':\n                        return 'my_app';\n                    case 'npm_package_version':\n                        return '0.0.1';\n                    }\n                });\n        }\n        // run the cli\n        if (local.global.utility2_rollup || module !== require.main) {\n            break;\n        }\n        local.assetsDict['/assets.example.js'] =\n            local.assetsDict['/assets.example.js'] ||\n            local.fs.readFileSync(__filename, 'utf8');\n        // bug-workaround - long $npm_package_buildCustomOrg\n        /* jslint-ignore-begin */\n        local.assetsDict['/assets.npmtest_lazo.rollup.js'] =\n            local.assetsDict['/assets.npmtest_lazo.rollup.js'] ||\n            local.fs.readFileSync(\n                local.npmtest_lazo.__dirname + '/lib.npmtest_lazo.js',\n                'utf8'\n            ).replace((/^#!/), '//');\n        /* jslint-ignore-end */\n        local.assetsDict['/favicon.ico'] = local.assetsDict['/favicon.ico'] || '';\n        // if $npm_config_timeout_exit exists,\n        // then exit this process after $npm_config_timeout_exit ms\n        if (Number(process.env.npm_config_timeout_exit)) {\n            setTimeout(process.exit, Number(process.env.npm_config_timeout_exit));\n        }\n        // start server\n        if (local.global.utility2_serverHttp1) {\n            break;\n        }\n        process.env.PORT = process.env.PORT || '8081';\n        console.error('server starting on port ' + process.env.PORT);\n        local.http.createServer(function (request, response) {\n            request.urlParsed = local.url.parse(request.url);\n            if (local.assetsDict[request.urlParsed.pathname] !== undefined) {\n                response.end(local.assetsDict[request.urlParsed.pathname]);\n                return;\n            }\n            response.statusCode = 404;\n            response.end();\n        }).listen(process.env.PORT);\n        break;\n    }\n}());\n","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/index.js":"var _ = require('lodash');\nvar commands = {\n    start: require('./start'),\n    stop: require('./stop'),\n    version: require('./version')\n}\n\nmodule.exports = function (cmd, options) {\n    if (cmd === 'version') {\n        return commands.version();\n    }\n\n    commands[cmd](_.extend(options || {}, { version: commands.version() }));\n};","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/start.js":"var fs = require('fs');\nvar path = require('path');\nvar lazoPath = path.dirname(module.filename);\nvar os = require('os');\n\nfunction setEnv(options) {\n    process.env['BASE_PATH'] = lazoPath;\n    process.env['BASE_REPO_DIR'] = path.join(lazoPath, 'base');\n    process.env['LAZO_VERSION'] = options.version;\n    process.env['FILE_REPO_DIR'] = options.app_dir;\n    process.env['PORT'] = options.port;\n\n    for (var k in options) {\n        process.env[k.toUpperCase()] = options[k];\n    }\n}\n\nfunction daemon() {\n    var fsx = require('fs-extra');\n    var forever = require('forever');\n\n    fsx.mkdirs(lazoPath + '/logs', function (err) {\n        if (!err) {\n            forever.load({ root: lazoPath + '/logs', pidPath: lazoPath });\n            forever.startDaemon('./lib/server/app.js', {\n                logFile: 'lazo.log',\n                pidFile: 'lazo.pid',\n                errFile: 'lazo.err',\n                sourceDir: lazoPath,\n                a: true\n            });\n        } else {\n            console.error(err);\n        }\n    });\n}\n\nmodule.exports = function (options) {\n    setEnv(options);\n    if (options.daemon) {\n        return daemon();\n    }\n\n    console.log('Starting Lazo! Please wait...');\n    // starts application server\n    var lazo = require('./lib/server/app.js');\n}","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/stop.js":"module.exports = function () {\n    var forever = require('forever');\n    var fsx = require('fs-extra');\n\n    if (fsx.existsSync(lazoPath + '/lazo.pid')) {\n        try {\n            forever.stop('lib/server/app.js', true);\n            forever.cleanUp();\n            fsx.remove(lazoPath + '/lazo.pid');\n            console.log('Lazo! stopped');\n        } catch (err) {\n            console.log('Error stopping Lazo!');\n            process.exit(1);\n        }\n    }\n};","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/version.js":"module.exports = function () {\n    var path = require('path');\n    var fs = require('fs');\n    var lazoPath = path.dirname(module.filename);\n    var packageJson = JSON.parse(fs.readFileSync(path.normalize(lazoPath + '/package.json'), 'utf8'));\n    return 'v' + packageJson.version;\n}","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/Gruntfile.js":"module.exports = function (grunt) {\n\n    var fs = require('fs');\n    var path = require('path');\n    var reqConf = grunt.file.readJSON('lib/common/resolver/paths.json');\n    var lazoReqConf = grunt.file.readJSON('conf.json');\n\n    function getPaths(conf, env) {\n        var paths = grunt.util._.extend({}, conf.common, (conf[env] || conf.client));\n        for (var key in paths) {\n            paths[key] = paths[key].replace('{env}', (env || 'client'));\n        }\n\n        return paths;\n    }\n\n    grunt.registerTask('configure-intern', 'Create intern configuration for runner', function () {\n        var env = this.args[0] === 'client-local' ? 'client' : this.args[0];\n        var paths = getPaths(reqConf, env);\n        var specs = grunt.file.expand([\n            'test/unit/' + env + '/**/*.js',\n            'test/unit/client-server/**/*.js',\n            '!**/*.skip.js'\n        ]);\n        specs = specs.map(function (spec) {\n            return spec.substr(0, spec.lastIndexOf('.js'));\n        });\n        var conf = grunt.config.get('intern');\n        conf[this.args[0]].options.suites = specs;\n        if (env === 'client' && this.args[0] !== 'client-local') {\n            conf[this.args[0]].options.config = 'test/unit/conf.client.phantomjs';\n        }\n\n        grunt.config.set('intern', conf);\n    });\n\n    // ci and local; if local or unsecure pull request uses phantomjs and selenium;\n    // if secure pull request then it uses sauce labs\n    grunt.registerTask('test', ['test-server', 'test-client']);\n    // local\n    grunt.registerTask('test-local', ['test-server', 'test-client-local']);\n\n    grunt.registerTask('test-server', ['configure-intern:server', 'intern:server']);\n    grunt.registerTask('test-client', function () {\n        var tasks = ['configure-intern:client', 'intern:client'];\n\n        // running locally; ci starts selenium before testing\n        if (!process.env.TRAVIS) {\n            tasks.unshift('exec:selenium-server');\n        }\n\n        grunt.task.run(tasks);\n    });\n\n    grunt.registerTask('test-client-local', ['exec:selenium-server', 'configure-intern:client-local', 'intern:client-local']);\n\n    grunt.initConfig({\n\n        requirejs: {\n            compile: {\n                options: {\n                    include: reqConf.lib,\n                    paths: getPaths(reqConf),\n                    shim: lazoReqConf.requirejs.client.shim,\n                    map: {\n                        '*': {\n                            'l': '/lib/client/loader.js',\n                            // don't define 'bundler' in paths.json because\n                            // it will result in a build error due to\n                            // duplicate paths; 'bundler' path is set at run time\n                            'bundler': 'lazoBundle'\n                        }\n                    },\n                    outFileName: 'lib',\n                    baseUrl:  path.resolve('.'),\n                    optimize: 'uglify2',\n                    logLevel: 4,\n                    out: 'lib/optimized/lib.js'\n                }\n            }\n        },\n\n        watch: {\n            test: {\n                files: ['lib/**/*.*', '!lib/vendor/**/*.*'],\n                tasks: ['castle'],\n                options: {\n                    events: ['changed']\n                }\n            },\n            lib: {\n                files: ['lib/**/*.*', '!lib/**/server/**/*.*', '!lib/vendor/**/*.*'],\n                tasks: ['requirejs']\n            }\n        },\n\n        intern: {\n            'client-local': {\n                options: {\n                    runType: 'runner',\n                    config: 'test/unit/conf.client.local'\n                }\n            },\n            client: {\n                options: {\n                    runType: 'runner',\n                    config: 'test/unit/conf.client'\n                }\n            },\n            server: {\n                options: {\n                    config: 'test/unit/conf.server'\n                }\n            }\n        },\n\n        exec: { 'selenium-server': 'node node_modules/selenium-server/bin/selenium &' }\n\n    });\n\n    grunt.loadNpmTasks('grunt-contrib-watch');\n    grunt.loadNpmTasks('grunt-contrib-requirejs');\n    grunt.loadNpmTasks('intern');\n    grunt.loadNpmTasks('grunt-exec');\n};\n","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lazo.js":"#!/usr/bin/env node\n\n'use strict';\n\nvar lazo = require('./run.js');\nlazo();","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/run.js":"var fs = require('fs');\nvar path = require('path');\nvar lazoPath = path.dirname(module.filename);\nvar os = require('os');\nvar lazo = require('./index.js')\nvar args = parseArgs();\n\n// helper functions\nfunction getAppDir() {\n    var fileRepo = args._[1] ? path.resolve(args._[1]) : undefined;\n    return fileRepo && fs.existsSync(fileRepo) ? fileRepo : 0;\n}\n\nfunction parseArgs() {\n    return require('yargs')\n        .alias('c', 'cluster')\n        .alias('v', 'version')\n        .alias('d', 'daemon')\n        .alias('p', 'port')\n        .default('port', '8080')\n        .alias('r', 'robust')\n        .boolean(['d', 'r'])\n        .string(['p', 'c'])\n        .argv;\n}\n\n// get the options for a lazo command\nfunction getStartEnvOptions() {\n    var options = {};\n\n    for (var k in args) {\n        switch (k) {\n            case 'daemon':\n            case 'robust':\n                options[k] = args[k] === true ? '1' : '0';\n                break;\n            case 'cluster':\n                options[k] = args[k] ? args[k] : os.cpus().length;\n                break;\n            case 'port':\n                options[k] = args[k];\n                break;\n        }\n    }\n\n    return options;\n}\n\n// lazo --help [command]\nfunction help(command) {\n    switch (command) {\n        case 'start':\n            console.log('\\nUsage: lazo start app_dir -c [num] -d -p [num]\\n');\n            console.log('Options:\\n');\n            console.log('app_dir [required] application directory');\n            console.log('-c [optional] cluster, value [optional]\\n');\n            console.log('-d [optional] daemonize process using forever\\n');\n            console.log('-p [optional] port, value [required]\\n');\n            break;\n        case 'stop':\n            console.log('\\nUsage: lazo stop\\n');\n            break;\n        default:\n            console.log('\\nUsage: lazo --help command\\n');\n            console.log('Available commands: start stop\\n');\n            console.log('Options:\\n');\n            console.log('command [optional]\\n');\n            break;\n    }\n}\n\n// entry point\nfunction main() {\n    if (args._.length) {\n        switch (args._[0]) {\n            case 'start':\n                args.app_dir = getAppDir();\n                lazo('start', args);\n                break;\n            case 'stop':\n                lazo('stop', args);\n                break;\n            default:\n                help();\n                break;\n        }\n    } else {\n        if (args.version) {\n            console.log('v' + lazo('version'));\n        } else if (args.help) {\n            help(args.help);\n        } else {\n            help();\n        }\n    }\n}\n\nmodule.exports = main;","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/client/app.js":"define(['jquery', 'underscore', 'backbone', 'lazoCtl', 'viewManager', 'assetsProvider', 'async', 'hermes', 'rehydrate/main', 'execute', 'lib/client/state', 'lib/client/prime'],\n    function ($, _, Backbone, LazoCtl, viewManager, AssetsProvider, async, hermes, rehydrate, execute, state, prime) {\n\n    'use strict';\n\n    LAZO.app._getModules = function (rootCtx) {\n            var modules = rootCtx.dependencies.modules ? rootCtx.dependencies.modules : rootCtx.modules,\n            wait = rootCtx.dependencies.modules ? true : false;\n\n        return {\n            modules: modules,\n            wait : wait\n        };\n    };\n\n    return {\n\n        initialize: function (options) {\n            LAZO.logger.debug('[client.app.initialize] Initializing client...', options);\n\n            var self = this,\n            modules = LAZO.app._getModules(LAZO.initConf.rootCtx);\n\n            this.currentLayout = LAZO.initConf.layout;\n\n            // if window.rootCtx.dependencies.modules then combo handled and we need to wait on response\n            // else prefetch modules so that they are loading in parallel while rehydrate runs\n            if (modules.wait) { // bundles loaded by bootstrap.js\n                return self._initialize(options);\n            }\n            prime(modules.modules, 'js', modules.wait, function (err) {\n                if (err) {\n                    return; // TODO: throw error\n                }\n\n                self._initialize(options);\n            });\n        },\n\n        _initialize: function () {\n            this._clickHandler();\n            this._defineRoutes();\n            hermes.start({\n                state: state.createStateObj(LAZO.initConf.rootCtx),\n                cache: true,\n                routeNotMatched: function (routePathName) {\n                    LAZO.error.render({ statusCode: 404, error: 'Not found', message: 'This is not the page you are looking for.' });\n                }\n            });\n\n            LAZO.app.trigger('application:initialize');\n            LAZO.files = LAZO.initConf.files;\n            rehydrate(LAZO.initConf.rootCtl, LAZO.initConf.rootCtx, function (ctl) {\n                LAZO.ctl = ctl;\n                LAZO.layout = LAZO.initConf.layout;\n                viewManager.attachViews(ctl, function (err, success) {\n                    if (err) {\n                        LAZO.logger.error('[client.app.initialize] Error attaching views', err);\n                    }\n\n                    LAZO.app.trigger('application:ready');\n                    delete LAZO.initConf;\n                });\n            });\n        },\n\n        _clickHandler: function () {\n            $('body').on('click', '[lazo-navigate]', function (e) {\n                var $currentTarget = $(e.currentTarget);\n                var path = $currentTarget.attr('lazo-navigate').length && $currentTarget.attr('lazo-navigate') !== 'lazo-navigate' ?\n                    $currentTarget.attr('lazo-navigate') : $currentTarget.attr('href');\n\n                if (path) {\n                    e.preventDefault();\n                    LAZO.app.navigate(null, path);\n                }\n            });\n        },\n\n        _defineRoutes: function () {\n            var self = this;\n\n            LAZO.router = hermes;\n            _.each(LAZO.routes, function (value, path) {\n                hermes.route(path, path, function (pathname, params, state) {\n                    var eventData = {\n                        route: path,\n                        pathname: pathname,\n                        parameters: _.extend(params, state.parameters)\n                    };\n\n                    LAZO.app.trigger('navigate:application:begin', eventData);\n                    execute(eventData); // pass event data, so that other nav events can pick it up\n                });\n            });\n        }\n\n    };\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/client/assetsProvider.js":"define(['jquery', 'underscore', 'resolver/assets'], function ($, _, utils) {\n\n    'use strict';\n\n    return _.extend({\n\n        get: function (components, ctx, options) {\n            var fetchAssets = [];\n            var assets = {};\n            var asset;\n            var i = components.length;\n            var self = this;\n\n            while (i--) {\n                if ((asset = LAZO.ctl.ctx._rootCtx.assets[components[i]])) {\n                    assets[components[i]] = asset;\n                } else {\n                    fetchAssets.push(components[i]);\n                }\n            }\n\n            if (!fetchAssets.length) {\n                return options.success(assets);\n            }\n\n            $.ajax({\n                data: {\n                    components: fetchAssets.join(',')\n                },\n                error: function (error) {\n                    options.error(error);\n                },\n                success: function (result) {\n                    _.extend(LAZO.ctl.ctx._rootCtx.assets, result);\n                    options.success(_.extend(assets, result));\n                },\n                url: '/assets'\n            });\n        }\n\n    }, utils);\n\n});\n","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/client/bootstrap.js":"define(['resolver/requireConfigure'], function (resolver) {\n\n    resolver.get('client', function (err, config) {\n        if (err) { // TODO: error handling\n            throw err;\n        }\n\n        config.paths.assets = LAZO.initConf.assets || config.paths.assets;\n        config.paths.bundler = LAZO.initConf.bundler || config.paths.lazoBundle;\n        var lazoRequire = requirejs.config(config);\n\n        function bootstrap() {\n            lazoRequire(['config'], function (config) {\n                LAZO.config = config;\n                lazoRequire(['app/application', 'handlebars', 'error', 'logger', 'json!app/app.json'],\n                    function (App, handlebars, error, logger, appConf) {\n\n                    LAZO.app = new App();\n                    LAZO.error = error;\n                    LAZO.app.isServer = false;\n                    LAZO.app.isClient = true;\n                    LAZO.app.js = appConf.js || [];\n                    LAZO.app.css = appConf.css || [];\n                    LAZO.app.getAssets = appConf.assets || false;\n                    LAZO.app.defaultLayout = appConf.defaultLayout;\n                    LAZO.app.assets = LAZO.initConf.rootCtx.assets.app;\n                    LAZO.logger = logger;\n                    LAZO.routes = appConf.routes;\n\n                    lazoRequire(['clientApp'], function (clientApp) {\n                        LAZO.app.args = LAZO.initConf.args;\n                        lazoRequire(LAZO.app.js, function () {\n                            LAZO.app.initialize(function () {\n                                clientApp.initialize();\n                            });\n                        });\n                    });\n                });\n            });\n        }\n\n        LAZO.require = lazoRequire;\n        LAZO.isServer = false;\n        LAZO.isClient = true;\n\n        // combo handled modules; these should be loaded first\n        if (LAZO.initConf.rootCtx.dependencies.modules) {\n            lazoRequire(LAZO.initConf.rootCtx.dependencies.modules, function () {\n                bootstrap();\n            });\n        } else {\n            bootstrap();\n        }\n    });\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/client/destroyCmp.js":"define(['renderer'], function (renderer) {\n\n    'use strict';\n\n    return function destroy(ctl) {\n        var components = renderer.getList('component', ctl);\n        var i = components.length;\n\n        while (i) {\n            i--;\n            try {\n                components[i].currentView.remove();\n                components[i]._getEl().remove();\n            } catch (e) {\n                LAZO.logger.warn('[client.destroy] Error while destroying component %s: %s', ctl.name, e.message);\n            }\n        }\n    };\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/client/execute.js":"define(\n    [\n        'jquery', 'underscore', 'rehydrate/main', 'utils/prune',\n        'lib/client/state', 'utils/document', 'lib/client/prime',\n        'renderer', 'context', 'utils/cmpProcessor', 'requestFilters',\n        'resolver/file', 'l!viewManager', 'bundler', 'l!destroyCmp', 'jquerycookie'\n    ],\n    function ($, _, rehydrate, prune, state, doc, prime, renderer, Context, cmpProcessor, filter, file, viewManager, Bundler, destroy) {\n\n    'use strict';\n\n    var bundle = new Bundler();\n    var rootCtx = { dependencies: { modules: { css: [], js: [] } } };\n\n    return function (eventData) {\n\n        function process(eventData, modules) {\n            var cmpDef = cmpProcessor.getDef(eventData.route);\n            var options = {\n                params: eventData.parameters,\n                _rootCtx: LAZO.ctl.ctx._rootCtx\n            };\n            var ctx = cmpProcessor.createCtx(options);\n\n            filter.apply(eventData.route, eventData.parameters, ctx, function (redirect) {\n                if (redirect) {\n                    return LAZO.app.navigate(ctx, redirect);\n                }\n\n                cmpProcessor.process({\n                    ctx: ctx,\n                    def: cmpDef,\n                    error: function (err) {\n                        LAZO.logger.error('[client.execute]', 'Error executing component action: ' + err);\n                        LAZO.error.render({\n                            statusCode: '500',\n                            error: 'Internal Server Error',\n                            message: 'An internal server error occurred'\n                        });\n                        LAZO.app.trigger('navigate:application:error', eventData);\n                    },\n                    success: function (ctl, ctx, cmpDef) {\n                        var hasLayoutChanged = !cmpDef.layout || (cmpDef.layout !== LAZO.layout);\n\n                        var $target = $(hasLayoutChanged ? 'body' : '[lazo-cmp-container=\"lazo-layout-body\"]');\n                        var linksTypesLoaded = 0;\n                        renderer.getTreeHtml(ctl, null, null, function (html) {\n                            if (modules) {\n                                delete ctx._rootCtx.dependencies;\n                            } else {\n                                var components = cmpProcessor.getComponents(hasLayoutChanged ? ctl : LAZO.ctl, []);\n                                var links = {};\n\n                                for (var i = 0; i < components.length; i++) {\n                                    links[components[i].name] = { css: null, imports: null };\n                                    links[components[i].name].css = file.getComponentFiles([components[i].name], function (fileName) {\n                                        return fileName.substr(-4, 4) === '.css' && fileName.indexOf('/imports/') === -1;\n                                    });\n                                    links[components[i].name].imports = file.getComponentFiles([components[i].name], function (fileName) {\n                                        return fileName.indexOf('/imports/') !== -1 && fileName.substr(-5, 5) === '.html';\n                                    });\n                                }\n\n                                var cssLinks = [];\n                                var importLinks = [];\n                                for (var k in links) {\n                                    for (var j = 0; j < links[k].css.length; j++) {\n                                        cssLinks.push({\n                                            'lazo-link-ctx': k,\n                                            href: '/' + links[k].css[j]\n                                        });\n                                    }\n                                    for (var l = 0; l < links[k].imports.length; l++) {\n                                        importLinks.push({\n                                            'lazo-link-ctx': k,\n                                            href: '/' + links[k].imports[l]\n                                        });\n                                    }\n                                }\n\n                                cssLinks = bundle._createCSSLinks(cssLinks);\n                                // remove old component css\n                                ctx._rootCtx.dependencies.css = bundle._createCSSLinks(ctx._rootCtx.dependencies.css);\n                                ctx._rootCtx.dependencies.css = bundle.sortCss(state.cleanUpLinkDependencies(ctx._rootCtx.dependencies.css, cssLinks));\n\n                                importLinks = bundle._createImportLinks(importLinks);\n                                ctx._rootCtx.dependencies.imports = bundle._createImportLinks(ctx._rootCtx.dependencies.imports);\n                                ctx._rootCtx.dependencies.imports = bundle.sortImports(state.cleanUpLinkDependencies(ctx._rootCtx.dependencies.imports, importLinks));\n                            }\n\n                            LAZO.layout = cmpDef.layout;\n                            rootCtx = _.extend({}, rootCtx, ctx._rootCtx);\n                            LAZO.app.trigger('navigate:application:response', eventData);\n                            LAZO.layout = cmpDef.layout;\n                            state.set(rootCtx); // push state object to history\n                            var css = state.getAddRemoveLinks('css'); // get add, remove css\n                            var imports = state.getAddRemoveLinks('imports');\n                            prime(css.add, 'css', false); // prefetch css\n\n                            if (hasLayoutChanged) {\n                                destroy(LAZO.ctl); // clean up previous root controller\n                                delete LAZO.ctl;\n                                LAZO.ctl = ctl; // assign new controller\n                            } else {\n                                // layout body child changed; addChild pushes to children array;\n                                // remove the old child, the first element in the children array\n                                destroy(LAZO.ctl.children['lazo-layout-body'][0]);\n                                LAZO.ctl.children['lazo-layout-body'].shift();\n                                // update layout parameters\n                                _.extend(LAZO.ctl.ctx.params, ctl.ctx.params);\n                                // update meta data\n                                if (!LAZO.ctl.ctx.meta) {\n                                    LAZO.ctl.ctx.meta = {};\n                                }\n                                _.extend(LAZO.ctl.ctx.meta, ctl.ctx.meta || {}); // Required for page tags\n                            }\n\n                            prune(LAZO.ctl); // remove orphaned models\n\n                            function onLinksDone(loaded) {\n                                if (loaded === 2) {\n                                    if (hasLayoutChanged) {\n                                        $target.find('[lazo-cmp-name]').remove();\n                                        $target.append(html);\n                                    } else {\n                                        $target.html(html);\n                                    }\n                                    setTimeout(function () {\n                                        LAZO.error.clear();\n                                        $target.css({ 'visibility': 'visible'} );\n                                        viewManager.attachViews(ctl, function (err, success) {\n                                            if (err) {\n                                                LAZO.logger.error('[LAZO.navigate] Error attaching views', err);\n                                            }\n\n                                            doc.updatePageTags(LAZO.ctl.ctx, function (err) {\n                                                if (err) {\n                                                    LAZO.logger.error('[LAZO.navigate] Error updating page tags', err);\n                                                }\n\n                                                doc.setTitle(LAZO.ctl.ctx._rootCtx.pageTitle);\n                                                LAZO.app.trigger('navigate:application:complete', eventData);\n                                            });\n                                        });\n                                    }, 0);\n                                }\n                            }\n\n                            // keep dimensions, but hide content so that new css updating does not cause any display issues\n                            $target.css({ 'visibility': 'hidden' });\n                            doc.updateLinks(imports.add, imports.remove, 'import', function () {\n                                linksTypesLoaded++;\n                                onLinksDone(linksTypesLoaded);\n                            });\n                            doc.updateLinks(css.add, css.remove, 'css', function () {\n                                linksTypesLoaded++;\n                                onLinksDone(linksTypesLoaded);\n                            });\n                        });\n                    }\n                });\n            });\n        }\n\n        // entry point\n        (function response() {\n            rootCtx = { dependencies: { modules: { css: [], js: [] } } };\n\n            if ($.cookie('development') !== '1') {\n                bundle.response(eventData.route, window.location.pathname, {\n                    success: function (modules) {\n                        if (modules) {\n                            rootCtx.dependencies.modules = modules.js;\n                            rootCtx.dependencies.css = bundle.sortCss(bundle._createCSSLinks(modules.css));\n                            rootCtx.dependencies.imports = bundle.sortImports(bundle._createImportLinks(modules.imports));\n                            LAZO.require(modules.js, function () {\n                                process(eventData, true);\n                            });\n                        } else {\n                            process(eventData);\n                        }\n                    },\n                    error: function (err) {\n                        throw err instanceof Error ? err : new Error(err);\n                    }\n                });\n            } else {\n                process(eventData);\n            }\n        })();\n\n    };\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/client/loader.js":"define(['module'], function (mod) {\n\n    function isServerOnly(name, paths) {\n        var names = name.indexOf('/') ? name.split('/') : [name];\n        for (var i = 0; i < names.length; i++) {\n            if (paths[names[i]] && paths[names[i]].indexOf('/server/') !== -1) {\n                return true;\n            }\n        }\n\n        // path is not defined for the server; assume server only defined path\n        return names.length === 1 && !paths[names[0]] ? true : false;\n    }\n\n    return {\n        load: function (name, req, onload, config) {\n            //req has the same API as require().\n            if (name !== null && name.indexOf('/server/') === -1 && !isServerOnly(name, config.paths)) {\n\n                req([name], function (value) {\n                    onload(value);\n                });\n\n            } else {\n                //Returning null for client side dependencies on server\n                onload(null);\n            }\n        }\n    };\n\n});\n","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/client/prime.js":"define(['jquery'], function ($) {\n\n    function primeCss(links, wait, callback) {\n        var processed = 0,\n            linkCount = links.length;\n\n        if (!LAZO.app.prefetchCss) {\n            return callback ? callback(null) : void(0);\n        }\n\n        for (var i = 0; i < linkCount; i++) {\n            $.ajax({\n                url: links[i].href,\n                dataType: 'text',\n                success: function () {\n                    processed++;\n                    if (wait && processed === linkCount && callback) {\n                        callback(null);\n                    }\n                },\n                error: function (jqXHR, textStatus, errorThrown) {\n                    if (callback) {\n                        callback(errorThrown);\n                    }\n                }\n            });\n        }\n\n        if (!wait && callback) {\n            callback(null);\n        }\n    }\n\n    function primeJs(modules, wait, callback) {\n        LAZO.require(modules, function () {\n            if (wait && callback) { // combo handled\n                callback();\n            }\n        });\n\n        if (!wait && callback) { // not combo handled; prefetch and prime the cache\n            callback(null);\n        }\n    }\n\n    return function (resources, resourcesType, wait, callback) {\n        if (resourcesType === 'css') {\n            primeCss(resources, wait, callback);\n        }\n        if (resourcesType === 'js') {\n            primeJs(resources, wait, callback);\n        }\n    };\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/client/proxy.js":"define(['base', 'resolver/model', 'backbone'], function (Base, helpers, Backbone) {\n    'use strict';\n\n    var Proxy = Base.extend({\n\n        constructor: function (ctx) {\n            this.ctx = ctx;\n        },\n\n        sync: function (method, options) {\n            var self = this,\n                model = this,\n                type = helpers.methodMap[method];\n\n            options = _(options).clone();\n\n            // Replace options.error with a wrapper.\n            var error = options.error;\n            options.error = function (jqXHR) {\n                LAZO.logger.debug('[client.proxy.sync] Call to CRUD syncher failed', self.name, method);\n\n                if (error) {\n                    var resp = {\n                        statusCode: jqXHR.status,\n                        headers: jqXHR.getAllResponseHeaders(),\n                        body: jqXHR.responseText\n                    };\n                    error(resp);\n                }\n            };\n\n            // Replace options.success with a wrapper.\n            var success = options.success;\n            options.success = function (resp, textStatus, jqXHR) {\n                LAZO.logger.debug('[client.proxy.sync] Call to CRUD syncher succeed', self.name, method, resp, textStatus);\n                if (!resp || !resp.data) {\n                    return options.error(jqXHR);\n                }\n\n                if (success && resp) {\n                    success(resp.data);\n                }\n            };\n\n            LAZO.logger.debug('[client.proxy.sync] Calling CRUD syncher...', this.name, method);\n\n            if (!this.name) {\n                return error({Error: 'This model has no name set.  Cannot call the server'});\n            }\n\n            // Default JSON-request options.\n            var params = {\n                type: 'POST',\n                url: '/tunnel/' + this.name + '/' + method,\n                dataType: 'json',\n                contentType: 'application/json',\n                processData: false\n            };\n\n            // assemble the data for the request\n            var data = {\n                method: type,\n                crumb: self.ctx.getCookie('crumb'),\n                params: this.params\n            };\n\n            if (this instanceof Backbone.Model) {\n                data.model = this.name;\n            }\n            else {\n                data.collection = this.name;\n            }\n\n            // include the model in the data bindings for create, update or patch type requests\n            //  note that the model attributes will overwrite any bindings if they are named the same\n            if (model && (method === 'create' || method === 'update' || method === 'patch' || method === 'delete')) {\n                data.attributes = model.toJSON(options);\n            }\n\n            params.data = JSON.stringify(data);\n\n            var xhr = $.ajax(_.extend(params, options));\n            model.trigger('request', model, xhr, options);\n            return xhr;\n\n        },\n\n        callSyncher: function (fname, args, options) {\n            var self = this;\n            var model = this.toJSON();\n\n            options = _(options).clone();\n\n            // Replace options.error with a wrapper.\n            var error = options.error;\n            options.error = function (jqXHR, textStatus, errorThrown) {\n                LAZO.logger.debug('[client.proxy.sync] Call to NON-CRUD syncher failed', self.name, fname, textStatus, errorThrown);\n                self.trigger('callError', self, jqXHR, options);\n\n                if (error) {\n                    error(jqXHR);\n                }\n            };\n\n            // Replace options.success with a wrapper.\n            var success = options.success;\n            options.success = function (resp, textStatus, jqXHR) {\n                if (!resp) {\n                    self.trigger('callError', self, jqXHR, options);\n                    return options.error(jqXHR);\n                }\n\n                LAZO.logger.debug('[client.proxy.sync] Call to NON-CRUD syncher succeed', self.name, fname, textStatus);\n                self.trigger('callSync', self, jqXHR, options);\n\n                if (success && resp) {\n                    success(resp);\n                }\n            };\n\n            LAZO.logger.debug('[client.proxy.sync] Calling NON-CRUD syncher...', this.name, fname);\n\n            if (!fname) {\n                return options.error({Error: 'Method/function to call not set.'});\n            }\n\n            // Default JSON-request options.\n            var params = {\n                type: 'POST',\n                url: '/tunnel/' + this.name + '/' + fname,\n                dataType: 'json',\n                contentType: 'application/json',\n                processData: false\n            };\n\n            // assemble the data for the request\n            var data = {\n                method: 'NONCRUD',\n                crumb: self.ctx.getCookie('crumb'),\n                params: this.params,\n                attributes: model,\n                fname: fname,\n                args: args\n            };\n\n            if (this instanceof Backbone.Model) {\n                data.model = this.name;\n            }\n            else {\n                data.collection = this.name;\n            }\n\n            params.data = JSON.stringify(data);\n\n            var xhr = $.ajax(_.extend(params, options));\n            self.trigger('callRequest', model, xhr, options);\n        }\n\n    });\n\n    return Proxy;\n});\n","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/client/state.js":"define(function () {\n\n    'use strict';\n\n    return {\n\n        get: function (url) {\n            url = url || window.location.pathname + window.location.search;\n            return LAZO.router.getItem(url);\n        },\n\n        set: function (rootCtx) {\n            var url = window.location.pathname + window.location.search;\n            LAZO.router.updateState(this.createStateObj(rootCtx), url);\n        },\n\n        getAddRemoveLinks: function (type) {\n            return {\n                add: this._getRequestLinks(type),\n                remove: this._getRequestLinks(type, LAZO.router.getPreviousUrl())\n            };\n        },\n\n        _getRequestLinks: function (type, url) {\n            var request = this.get(url);\n            request = request ? request.state : {};\n            return request.dependencies && request.dependencies[type] ?\n                request.dependencies[type].slice(0) : [];\n        },\n\n        createStateObj: function (rootCtx) {\n            var deps = { // we only care about CSS\n                css: rootCtx.dependencies.css.slice(0),\n                imports: rootCtx.dependencies.imports.slice(0)\n            };\n\n            return { dependencies: deps };\n        },\n\n        cleanUpLinkDependencies: function (links, cmpLinks) {\n            var cleanList = [];\n\n            for (var i = 0; i < links.length; i++) {\n                if (links[i].href.indexOf('/components/') !== 0) {\n                    cleanList.push(links[i]);\n                }\n            }\n\n            return cleanList.concat(cmpLinks);\n        }\n\n    };\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/client/viewManager.js":"define(['underscore', 'jquery', 'utils/treeMixin'], function (_, $, tree) {\n\n    'use strict';\n\n    return _.extend({\n\n        // Clean up view DOM bindings and event listeners.\n        cleanup: function (rootNode, viewKey) {\n            var views = this.getList('view', rootNode);\n            var self = this;\n\n            _.each(views, function (view) {\n                view.remove();\n            });\n\n            return this;\n        },\n\n        attachViews: function (rootNode, callback) {\n            var views = this.getList('view', rootNode);\n            var self = this;\n            var expected = _.size(views);\n            var loaded = 0;\n\n            _.each(views, function (view) {\n                view.attach($('[' + self._attrs.viewId + '=\"' + view.cid + '\"]')[0], {\n                    success: function (response) {\n                        view.afterRender();\n                        loaded++;\n                        if (loaded === expected) {\n                            callback(null, true);\n                        }\n                    },\n                    error: function (err) {\n                        callback(err, null);\n                    }\n                });\n            });\n\n            return this;\n        }\n\n    }, tree);\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/common/app.js":"define(['requestFilters', 'underscore', 'utils/template', 'utils/model', 'utils/document', 'backbone', 'base', 'bundler', 'l!httpResponse'],\n    function (filter, _, template, model, doc, Backbone, Base, Bundler, httpResponse) {\n\n    'use strict';\n\n    var bundle = new Bundler();\n\n    var LazoApp = Base.extend({\n\n        isClient: false,\n\n        isServer: false,\n\n        defaultTitle: 'lazojs',\n\n        prefetchCss: false, // if set to true then XHR will be used to prefetch css to help prevent FOUSC\n\n        setData: function (key, val, ctx) {\n            ctx._rootCtx.data[key] = val;\n            return this;\n        },\n\n        getData: function (key, ctx) {\n            return ctx._rootCtx.data[key];\n        },\n\n        addRequestFilter: function (regex, func) {\n            filter.add(regex, func);\n            return this;\n        },\n\n        addRoutes: function (routes) {\n            LAZO.routes = LAZO.routes || {};\n            _.extend(LAZO.routes, routes);\n            return this;\n        },\n\n        navigate: function (ctx, routeName) {\n            if (this.isClient) {\n                if (routeName.match(/^(?:(ht|f)tp(s?)\\:\\/\\/)?/)[0].length) {\n                    return window.location = routeName;\n                }\n                LAZO.router.navigate(routeName, { trigger: true });\n            } else {\n                ctx._reply.redirect(routeName);\n            }\n        },\n\n        loadModel: function (modelName, options) {\n            model.process(modelName, options, 'model');\n            return this;\n        },\n\n        loadCollection: function (collectionName, options) {\n            model.process(collectionName, options, 'collection');\n            return this;\n        },\n\n        createModel: function (modelName, attributes, options) {\n            model.create(modelName, attributes, options, 'model');\n            return this;\n        },\n\n        createCollection: function (collectionName, attributes, options) {\n            model.create(collectionName, attributes, options, 'collection');\n            return this;\n        },\n\n        addTag: function (name, attributes, content) {\n            doc.addTag(name, attributes, content);\n            return this;\n        },\n\n        addPageTag: function (ctx, name, attributes, content) {\n            doc.addPageTag(ctx, this.isServer, name, attributes, content);\n            return this;\n        },\n\n        getPageTags: function (ctx) {\n            return doc.getPageTags(ctx, this.isServer);\n        },\n\n        setHtmlTag: function (val) {\n            doc.setHtmlTag(val);\n            return this;\n        },\n\n        setBodyClass: function (val) {\n            doc.setBodyClass(val);\n            return this;\n        },\n\n        // TODO: deprecated; remove once apps have been updated\n        setTitle: function (title) {\n            doc.setTitle(title);\n            return this;\n        },\n\n        setDefaultTitle: function (title) {\n            this.defaultTitle = title;\n            return this;\n        },\n\n        registerTemplateEngine: function (engineDef, options) {\n            template.loadTemplateEngine(engineDef, options);\n            return this;\n        },\n\n        getTemplateEngine: function (engineName) {\n            return template.getTemplateEngine(engineName);\n        },\n\n        getTemplateExt: function (engineName) {\n            return template.getTemplateExt(engineName);\n        },\n\n        getDefaultTemplateEngine: function () {\n            return template.getDefaultTemplateEngine();\n        },\n\n        getDefaultTemplateEngineName: function () {\n            return template.getDefaultTemplateEngineName();\n        },\n\n        setDefaultTemplateEngine: function (engineName) {\n            template.setDefaultTemplateEngine(engineName);\n        },\n\n        getImport: function (relativePath) {\n            return bundle.resolveImport(relativePath, 'application');\n        },\n\n        addHttpHeader: function (name, value, options) {\n            if (this.isClient) {\n                return this;\n            }\n\n            httpResponse.addHttpHeader(name, value, options);\n            return this;\n        },\n\n        getHttpHeaders: function () {\n            if (this.isClient) {\n                return [];\n            }\n\n            return httpResponse.getHttpHeaders();\n        },\n\n        addHttpVaryParam: function (varyParam) {\n            if (this.isClient) {\n                return this;\n            }\n\n            httpResponse.addVaryParam(varyParam);\n            return this;\n        },\n\n        getHttpVaryParams: function () {\n            if (this.isClient) {\n                return [];\n            }\n\n            return httpResponse.getVaryParams();\n        }\n\n    });\n\n    _.extend(LazoApp.prototype, Backbone.Events);\n\n    return LazoApp;\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/common/base.js":"/*global define:false*/\n\n/**\n * Base object. Should be used to create all other objects.\n */\ndefine(['backbone'], function (Backbone) {\n\n    'use strict';\n\n    var Base = function () {};\n\n    Base.extend = Backbone.Model.extend;\n\n    return Base;\n});\n","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/common/config.js":"/**\n Configuration Provider\n\n By default, returns environment variables.  Use plugins to support other configuration sources.\n\n @submodule config\n **/\n\ndefine(['base', 'async', 'underscore'], function (Base, async, _) {\n\n    var configs = [];\n\n    function isJsonString(str) {\n        if (!str || 0 === str.trim().length) {\n            return false;\n        }\n        str = str.replace(/\\\\./g, '@').replace(/\"[^\"\\\\\\n\\r]*\"/g, '');\n        return (/^[,:{}\\[\\]0-9.\\-+Eaeflnr-u \\n\\r\\t]*$/).test(str);\n    }\n\n    /**\n     * Main configuration class for returning configuration values.\n     * @class Config\n     * @type {Object}\n     */\n    var Config = {\n\n        // Configuration keys\n        ENV: 'ENV',\n        BASE_PATH:  'BASE_PATH',\n        FILE_REPO_DIR:  'FILE_REPO_DIR',\n        LAZO_PORT:  'LAZO_PORT',\n        MODEL_TIMEOUT:  'MODEL_TIMEOUT',\n        MODEL_MOCK:  'MODEL_MOCK',\n        CACHE:  'CACHE',\n        LAZO_VERSION: 'LAZO_VERSION',\n\n        /**\n         * Returns the configuration associated with the key.\n         *\n         * @method get\n         * @param {String} key The key to lookup\n         * @param {Object} options\n         * <ul>\n         *     <li>{String} defaultVal Default value if the key is not found</li>\n         *     <li>{Object} context The context that in which a configuration is to be retrieved.</li>\n         *     <li>{Function} success Callback function for successful call, passed <code>value</code> as argument</li>\n         *     <li>{Function} error Callback function for failed call, passed <code>(err)</code> as argument</li>\n         * </ul>\n         * @return {String} if options.success is implemented, it will return null. Otherwise it will return the value if found.\n         **/\n        get: function (key, options) {\n            return this.resolve(key, configs, options);\n        },\n\n        resolve: function (key, configs, options) {\n            var len = configs.length;\n            var config;\n            var val;\n            var i;\n            var fns = [];\n\n            // if no options success callback only do sync calls for backward compatibility\n            if (!options || !_.isFunction(options.success)) {\n                for (i = len; i--;) {\n                    config = configs[i];\n                    val = config.get(key, options);\n                    if (!_.isUndefined(val)) {\n                        return val;\n                    }\n                }\n\n                return _.isObject(options) ? options.defaultVal : options;\n            }\n\n            var fn = function(p1, p2){\n                var val;\n                var callback;\n\n                if (_.isFunction(p1)) {\n                    callback = p1;\n                } else {\n                    val = p1;\n                    callback = p2;\n                }\n                if (!_.isUndefined(val)) {\n                    return callback(null, val);\n                }\n                this.get(key, { success: function (value) {\n                    return callback(null, value);\n                }, context: options.context});\n            };\n\n            // else attempt async\n            for (i = len; i--;) {\n                fns.push(_.bind(fn, configs[i]));\n            }\n\n            async.waterfall(fns, function (err, result) {\n                if (err && _.isFunction(options.error)) {\n                    return options.error(err);\n                }\n\n                options.success(result);\n            });\n        },\n\n        /**\n         * Adds a config plugin\n         * @param plugin Instance of Config.Plugin\n         */\n        addPlugin: function (plugin) {\n            configs.push(plugin);\n        },\n\n        clearPlugins: function () {\n            configs.length = 0\n        }\n\n    };\n\n    /**\n     * Base configuration plugin.\n     * @class Config.Plugin\n     * @type {*|Object|Object}\n     */\n    Config.Plugin = Base.extend({\n        /**\n         * Constructor\n         * @param options\n         */\n        constructor: function (options) {\n            this.data = {};\n        },\n        /**\n         * Gets the value for a key\n         * @param key\n         * @return {*}\n         */\n        get: function (key, options) {\n            var ret;\n            if (this.data && key in this.data) {\n                ret = this.data[key];\n                try {\n                    ret = JSON.parse(ret);\n                } catch (e) {} // ignore JSON parse errors since we only want to parse it if it is JSON\n            }\n            if (options && _.isFunction(options.success)) {\n                options.success(ret);\n            }\n\n            return ret;\n        }\n    });\n\n    /**\n     * Static configuration data plugin. Pass in a hash as options.data.\n     * <p>Example: var cfg = new Config.HashPlugin({data:{key:\"value\"}});\n     * @type {*|Object|Object}\n     * @class Config.HashPlugin\n     * @extends Config.Plugin\n     */\n    Config.HashPlugin = Config.Plugin.extend({\n        constructor: function (options) {\n            this.data = options.data;\n        }\n    });\n\n    /**\n     * JSON configuration file plugin. Pass in file as options.file. It will be loaded by requirejs\n     * <p>Example: var cfg = new Config.JSONPlugin({file:\"app/appProperties.json\"});\n     * @type {*|Object|Object}\n     * @class Config.JSONPlugin\n     * @extends Config.Plugin\n\n     */\n    Config.JSONPlugin = Config.Plugin.extend({\n        constructor: function(options) {\n            var self = this;\n            LAZO.require(['text!' + options.file], function (text) {\n                self.data = JSON.parse(text);\n                if (_.isFunction(options.success)) {\n                    options.success();\n                }\n            }, function(err){\n                if (_.isFunction(options.error)) {\n                    options.error(err);\n                }\n            });\n        }\n    });\n\n    // for server side node.js, initialize with plugin that reads values from process.env\n    if (LAZO.isServer && process.env) {\n        var envCfg = Config.Plugin.extend({\n            constructor: function (options) {\n                this.data = process.env;\n            }\n        });\n\n        Config.addPlugin(new envCfg());\n    }\n\n    return Config;\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/common/context.js":"define(['jquery', 'underscore', 'l!jquerycookie'], function ($, _) {\n\n    'use strict';\n\n    if (LAZO.isClient) {\n        // do not encode or decode cookie values\n        $.cookie.raw = true;\n    }\n\n    function normalizeLocation(location, headers, info) {\n        var keys = ['host', 'hostname', 'search', 'href', 'pathname', 'port', 'protocol'];\n        var retVal = _.pick(location, keys);\n        var host;\n\n        if (headers && headers.host) {\n            host = headers.host.split(':');\n            retVal.host = headers.host;\n            retVal.hostname = host[0];\n            retVal.port = host[1];\n        }\n\n        if(info){\n            retVal.protocol = info.protocol;\n        }\n\n\n        return retVal;\n    }\n\n    function Context(options) {\n        var defaults = {\n            _rootCtx: {\n                modelList: {},\n                modelInstances: {},\n                data: options && options.data ? options.data : {},\n                pageTitle: options && options.pageTitle ? options.pageTitle : LAZO.app.defaultTitle\n            },\n            assets: {},\n            collections: {},\n            models: {},\n            params: {},\n            meta: {},\n            headers: {}\n        };\n\n        // Create a copy and fill in default values\n        options = _.defaults(_.extend({}, options), defaults);\n\n        this.assets = options.assets;\n        this.collections = options.collections;\n        this.models = options.models;\n        this.params = _.extend({}, options.params);\n        this.meta = options.meta;\n        this.headers = options.headers;\n\n        // Root context\n        this._rootCtx = options._rootCtx;\n\n        if (LAZO.app.isServer && options._request) {\n            // Do not serialize this!\n            this._request = options._request;\n            this._reply = options._reply;\n            this.location = normalizeLocation(options._request.url, this.headers, options._request.server.info);\n            this.userAgent = this.headers['user-agent'];\n            this.isTunnelRequest = options.isTunnelRequest || false;\n            this.response = options.response;\n        } else if (LAZO.app.isClient) {\n            this.location = normalizeLocation(window.location);\n            this.userAgent = window.navigator.userAgent;\n        }\n    }\n\n    Context.prototype = {\n        setSharedData: function (key, val) {\n            this._rootCtx.data[key] = val;\n            return this;\n        },\n\n        getSharedData: function (key) {\n            return this._rootCtx.data[key];\n        },\n\n        getCookie: function (name) {\n            if (LAZO.app.isServer) {\n                return this._request.state[name] ? this._request.state[name] : undefined;\n            } else {\n                return $.cookie(name);\n            }\n        },\n\n        setCookie: function (name, value, options) {\n            if (LAZO.app.isServer) {\n                options.ttl = options.expires || null;\n                this._reply.state(name, value, options);\n            } else {\n                $.cookie(name, value, options);\n            }\n        },\n\n        clearCookie: function (name, options) {\n            if (LAZO.app.isServer) {\n                this._reply.state(name, null, _.extend({ ttl: 0, path: '/' }, options));\n            } else {\n                $.removeCookie(name, _.extend({ path: '/' }, options));\n            }\n        }\n\n    };\n\n    return Context;\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/common/error.js":"define(['jquery', 'underscore'], function ($, _) {\n\n    'use strict';\n\n    return {\n\n        clear: function () {\n            $('[lazo-error]').remove();\n            $('body > [lazo-cmp-name]').show();\n        },\n\n        render: function (errContext) {\n            LAZO.require(['text!' + errContext.statusCode, 'utils/template'], function (errTemplate, template) {\n                var templateEngine = template.getDefaultTemplateEngine();\n                var compiledTemplate = templateEngine.compile(errTemplate);\n                var $lazoErr = $('<div lazo-error=\"' + errContext.statusCode + '\">');\n\n                $('body > [lazo-cmp-name]').hide();\n                $('body').append($lazoErr);\n                $lazoErr.html(compiledTemplate(errContext));\n            });\n        }\n\n    };\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/common/logger.js":"define(['l!loggerUtils'], function (loggerUtils) {\n\n    'use strict';\n\n    // Constant\n\n    var LogLevels = {\n        DEBUG: 'debug',\n        ERROR: 'error',\n        INFO: 'info',\n        WARN: 'warn'\n    };\n\n    // Private functions\n\n    var consoleSink = function () {\n        if (console && typeof console.log === 'function') {\n            console.log.apply(console, arguments);\n        }\n    };\n\n    var formatter = function () {\n        var format = arguments[0],\n            args = Array.prototype.slice.call(arguments, 1),\n            argsCount = args.length,\n            argPos = 0,\n            formatted = null;\n\n        if (typeof format !== 'string') {\n            return format;\n        }\n\n        formatted = format.replace(/%([difjs])/g, function (match, token) {\n            var arg = args[argPos++],\n                argType = typeof arg;\n\n            if (argType === 'undefined') {\n                return argType;\n            }\n\n            switch (token) {\n                case 'd':\n                case 'i':\n                    return argType === 'number' ? arg.toFixed() : arg;\n                case 'f':\n                    return argType === 'number' ? arg.toPrecision() : arg;\n                case 'j':\n                    return safeStringify(arg);\n                case 's':\n                    return arg;\n            }\n        });\n\n        for (; argPos < argsCount; argPos++) {\n            formatted += ' ' + safeStringify(args[argPos]);\n        }\n\n        return formatted;\n    };\n\n    var getRequestId = function () {\n        var request = LAZO.app && LAZO.app.isServer && loggerUtils.getRequest();\n        return (request && request.id) || '-';\n    };\n\n    var noop = function () {\n    };\n\n    var safeStringify = function (object) {\n        try {\n            if (object instanceof Error) {\n                return serializeError(object);\n            }\n\n            return object && JSON.stringify(object);\n        } catch (error) {\n            // There might be a circular reference\n            return LAZO.app && LAZO.app.isServer ? loggerUtils.serverStringify(object) : object;\n        }\n    };\n\n    var serializeError = function (error) {\n        var e = LAZO.app && LAZO.app.isServer && error ? {\n            message: error.message,\n            stack: error.stack\n        } : error;\n\n        return JSON.stringify(e);\n    };\n\n    var unshift = function (args, level) {\n        var array = Array.prototype.slice.call(args, 0);\n        array.unshift(level);\n        return array;\n    };\n\n    // Constructor\n\n    var Logger = function (options) {\n\n        // Private variables\n\n        var self = this,\n\n            level = options && options.level,\n\n            sinks = (options && options.sinks) || {console: consoleSink},\n\n        // Protected methods\n\n            log = function () {\n                var timestamp = (new Date()).toISOString(),\n                    level = arguments[0] && arguments[0].toUpperCase(),\n                    args = Array.prototype.slice.call(arguments, 1),\n                    requestId = getRequestId(),\n                    columns = [timestamp, level, requestId, formatter.apply(self, args)],\n                    message = columns.join('\\t');\n\n                for (var sink in sinks) {\n                    if (sinks.hasOwnProperty(sink)) {\n                        (function (sink) {\n                            setTimeout(function () {\n                                sinks[sink] && sinks[sink](message);\n                            }, 0);\n                        }(sink));\n                    }\n                }\n\n                return message;\n            },\n\n            debugLog = function () {\n                return log.apply(self, unshift(arguments, LogLevels.DEBUG));\n            },\n\n            errorLog = function () {\n                return log.apply(self, unshift(arguments, LogLevels.ERROR));\n            },\n\n            infoLog = function () {\n                return log.apply(self, unshift(arguments, LogLevels.INFO));\n            },\n\n            warnLog = function () {\n                return log.apply(self, unshift(arguments, LogLevels.WARN));\n            };\n\n        // Public methods\n\n        self.addSink = function (name, instance) {\n            if (typeof name !== 'string' || typeof instance !== 'function') {\n                throw new TypeError();\n            }\n\n            sinks[name] = instance;\n        };\n\n        self.consoleSink = consoleSink;\n\n        self.getLevel = function () {\n            return level;\n        };\n\n        self.getSinks = function () {\n            return sinks;\n        };\n\n        self.removeSink = function (name) {\n            if (sinks[name]) {\n                delete sinks[name];\n            }\n        };\n\n        self.setLevel = function (newLevel) {\n            switch (newLevel) {\n                case LogLevels.DEBUG:\n                    self[LogLevels.DEBUG] = debugLog;\n                    self[LogLevels.ERROR] = errorLog;\n                    self[LogLevels.INFO] = infoLog;\n                    self[LogLevels.WARN] = warnLog;\n                    break;\n                case LogLevels.ERROR:\n                    self[LogLevels.DEBUG] = noop;\n                    self[LogLevels.INFO] = noop;\n                    self[LogLevels.WARN] = noop;\n                    self[LogLevels.ERROR] = errorLog;\n                    break;\n                case LogLevels.INFO:\n                    self[LogLevels.DEBUG] = noop;\n                    self[LogLevels.INFO] = infoLog;\n                    self[LogLevels.WARN] = warnLog;\n                    self[LogLevels.ERROR] = errorLog;\n                    break;\n                case LogLevels.WARN:\n                    self[LogLevels.DEBUG] = noop;\n                    self[LogLevels.INFO] = noop;\n                    self[LogLevels.WARN] = warnLog;\n                    self[LogLevels.ERROR] = errorLog;\n                    break;\n                default:\n                    return self.setLevel(LogLevels.ERROR);\n            }\n\n            infoLog('[common.logger.setLevel] Changing logging level to %s', newLevel);\n\n            return level = newLevel;\n        };\n\n        // Init\n\n        self.setLevel(level);\n    };\n\n    // Export singleton\n\n    return new Logger();\n\n});\n","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/common/renderer.js":"define(['underscore', 'utils/treeMixin'], function (_, tree) {\n\n    'use strict';\n\n    return _.extend({\n\n        // Matches an HTML tag in a string of HTML based on an attribute and value.\n        getInsertIndex: function (attr, val, html) {\n            var regex = new RegExp('<[^<]*' + attr + '+=[\"||\\']' + val + '[\"||\\']+.*?>');\n            return html.match(regex);\n        },\n\n        getTreeHtml: function (tree, nodeId, nodeType, callback) {\n            var rootNode = tree;\n            var self = this;\n            var parent = tree.parent;\n\n            // null out the node's parent before rendering, so that _assembleNodeHtml\n            // doesn't try to locate the parent in the markup to inject the node\n            tree.parent = null;\n            this._getNodesHtml(rootNode, function (tree) {\n                var html;\n                // view called render; strip off surrounding component markup\n                if (nodeType === 'view') {\n                    html = self._renderTree(tree);\n                    var match = self.getInsertIndex(self._attrs.cmpId, rootNode.cid, html);\n                    html = html.substr(match[0].length, (html.length - (match[0].length + self.closingTagLength)));\n                } else {\n                    html = self._renderTree(tree);\n                }\n\n                // reset parent after rendering\n                tree.parent = parent;\n                callback(html);\n            });\n        },\n\n        getNodeHtml: function (node, callback) {\n            if (this.getNodeType(node) === 'component') {\n                callback('<div ' + this._attrs.cmpName + '=\"' + node.name + '\" ' + this._attrs.cmpId + '=\"' + node.cid + '\"></div>');\n            } else {\n                node.getHtml({\n                    error: function (err) {\n                        throw err;\n                    },\n                    success: function (html) {\n                        callback(html);\n                    }\n                });\n            }\n        },\n\n        closingTagLength: 6,\n\n        _renderTree: function (component) {\n            var self = this;\n            return (function render(node, html) {\n                html = self._assembleNodeHtml(node, html);\n                if (_.size(node.children)) {\n                    var children = node.children;\n                    for (var k in children) {\n                        for (var i = children[k].length - 1; i >= 0; i--) {\n                            html = render(children[k][i], html);\n                        }\n                    }\n                }\n\n                return html;\n\n            })(component, '');\n        },\n\n        _assembleNodeHtml: function (component, html) {\n            var match;\n            var siblings = this._getCmpSiblings(component);\n            var cmpHtml = component.html.substr(0, (component.html.length - this.closingTagLength)) +\n                component.currentView.html + '</div>';\n\n            if (siblings && siblings.nodes.length) {\n                var i = 0;\n\n                while (!match && siblings.nodes[i]) { // find index of last cmp added to parent container\n                    match = this.getInsertIndex(this._attrs.cmpId, siblings.nodes[i].cid, html);\n\n                    if (match) {\n                        return html.substr(0, match.index) + cmpHtml + html.substr(match.index);\n                    }\n\n                    i++;\n                }\n            }\n\n            if (!match && siblings && siblings.container) {\n                match = this.getInsertIndex(this._attrs.compContainerName, siblings.container, html);\n            }\n\n            if (!match && component.parent && siblings && siblings.nodes.length > 1) {\n                var errMsg = 'component ' + component.name;\n                throw 'The parent node for ' + errMsg + ' was not found.';\n                // root component or render called from a view\n            } else if (!match && (!component.parent ||\n                (component.parent && siblings && siblings.nodes.length === 1))) {\n                return cmpHtml;\n            }\n\n            var open = html.substr(0, match.index + match[0].length);\n            var close = html.substr(match.index + match[0].length);\n            return open + cmpHtml + close;\n        },\n\n        _getCmpSiblings: function (component) {\n            var children = component.parent && component.parent.children;\n            var siblings;\n\n            for (var k in children) {\n                if ((siblings = _.find(children[k], function (cmp) {\n                    return cmp.cid === component.cid;\n                }))) {\n                    siblings = {\n                        container: k,\n                        nodes: children[k]\n                    };\n                    break;\n                }\n            }\n            return siblings;\n        },\n\n        _getNodesHtml: function (tree, callback) {\n            var self = this;\n            var nodesToBeProcessed = 0;\n            var nodesProcessed = 0;\n\n            (function processNode(node) {\n                var children = self.getNodeChildren(node);\n                nodesToBeProcessed++;\n\n                if (children.length) {\n                    for (var i = 0; i < children.length; i++) {\n                        processNode(children[i]);\n                    }\n                }\n\n                self.getNodeHtml(node, function (html) {\n                    node.html = html;\n                    self.getNodeHtml(node.currentView, function (html) {\n                        node.currentView.html = html;\n                        // wait for processing to complete\n                        setTimeout(function () {\n                            nodesProcessed++;\n                            if (nodesProcessed === nodesToBeProcessed) {\n                                callback(tree);\n                            }\n                        }, 0);\n                    });\n                });\n            })(tree);\n        }\n\n    }, tree);\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/common/requestFilters.js":"define(function () {\n\n    'use strict';\n\n    var filters = {};\n\n    function iterate(path, params, ctx, fns, i, callback) {\n        if (fns[i]) {\n            fns[i](path, params, ctx, {\n                success: function (redirect) {\n                    if (redirect) {\n                        return callback(redirect);\n                    } else {\n                        i += 1;\n                        iterate(path, params, ctx, fns, i, callback);\n                    }\n                },\n                error: function (err) {\n                    throw err instanceof Error ? err : new Error(err);\n                }\n            });\n        } else {\n            return callback();\n        }\n    }\n\n    return {\n\n        apply: function (path, params, ctx, callback) {\n            var fns = [];\n            var match;\n            for (var key in filters) {\n                if (path.match(new RegExp(key))) {\n                    fns = fns.concat(filters[key]);\n                }\n            }\n\n            if (!fns.length) {\n                return callback();\n            }\n\n            iterate(path, params, ctx, fns, 0, callback);\n        },\n\n        add: function (regex, func) {\n            filters[regex] = filters[regex] || [];\n            filters[regex].push(func);\n            return this;\n        }\n\n    };\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/optimized/lib.js":"/*!\n * jQuery JavaScript Library v1.11.1\n * http://jquery.com/\n *\n * Includes Sizzle.js\n * http://sizzlejs.com/\n *\n * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors\n * Released under the MIT license\n * http://jquery.org/license\n *\n * Date: 2014-05-01T17:42Z\n */\n\n/*!\n * Sizzle CSS Selector Engine v1.10.19\n * http://sizzlejs.com/\n *\n * Copyright 2013 jQuery Foundation, Inc. and other contributors\n * Released under the MIT license\n * http://jquery.org/license\n *\n * Date: 2014-04-18\n */\n\n//     Underscore.js 1.6.0\n//     http://underscorejs.org\n//     (c) 2009-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n//     Underscore may be freely distributed under the MIT license.\n\n//     (c) 2010-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n//     Backbone may be freely distributed under the MIT license.\n//     For all details and documentation:\n//     http://backbonejs.org\n\n/*!\n * jQuery Cookie Plugin v1.4.1\n * https://github.com/carhartl/jquery-cookie\n *\n * Copyright 2013 Klaus Hartl\n * Released under the MIT license\n */\n\n/*!\n\n handlebars v2.0.0\n\nCopyright (C) 2011-2014 by Yehuda Katz\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n\n@license\n*/\n\n/*\n Software License Agreement (BSD License)\n ========================================\n\n Copyright (c) 2013, Yahoo! Inc. All rights reserved.\n ----------------------------------------------------\n\n Redistribution and use of this software in source and binary forms, with or\n without modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright notice, this\n list of conditions and the following disclaimer.\n * Redistributions in binary form must reproduce the above copyright notice,\n this list of conditions and the following disclaimer in the documentation\n and/or other materials provided with the distribution.\n * Neither the name of Yahoo! Inc. nor the names of YUI's contributors may be\n used to endorse or promote products derived from this software without\n specific prior written permission of Yahoo! Inc.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\n Sources of Intellectual Property Included from the YUI Library\n ------------------------------------------------------------\n * this is a port of yui3/src/dataschema/js/dataschema-json.js\n * \n * modifications\n *   * made into AMD module\n *   * parse method is from the 'base' yui3/src/dataschema/js/dataschema-base.js\n *   * underscore methods used in place of Y.Lang.is*\n *   * commented out Y.log statements\n *   * _parseResults modified to return objects as valid results\n *   * added setLocationValue method\n */\n\n/**\n * @license RequireJS text 2.0.12 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved.\n * Available via the MIT or new BSD license.\n * see: http://github.com/requirejs/text for details\n */\n\n/** @license\n * RequireJS plugin for loading JSON files\n * - depends on Text plugin and it was HEAVILY \"inspired\" by it as well.\n * Author: Miller Medeiros\n * Version: 0.3.2 (2013/08/17)\n * Released under the MIT license\n */\n\n// Flexo, Nah, I'm just messin' with ya; you're all right.\n// ----------------------------------\n// v0.2.10\n//\n// Copyright (c)2015 Jason Strimpel\n// Distributed under MIT license\n\n/***********************************************\nCopyright 2010, 2011, Chris Winberry <chris@winberry.net>. All rights reserved.\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to\ndeal in the Software without restriction, including without limitation the\nrights to use, copy, modify, merge, publish, distribute, sublicense, and/or\nsell copies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\nFROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\nIN THE SOFTWARE.\n***********************************************/\n\n// HERMES, sweet llamas of the bahamas\n// ----------------------------------\n// v1.0.2\n//\n// Copyright (c)2015 Jason Strimpel\n// Distributed under MIT license\n\n!function(e,t){\"object\"==typeof module&&\"object\"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error(\"jQuery requires a window with a document\");return t(e)}:t(e)}(\"undefined\"!=typeof window?window:this,function(e,t){function n(e){var t=e.length,n=it.type(e);return\"function\"===n||it.isWindow(e)?!1:1===e.nodeType&&t?!0:\"array\"===n||0===t||\"number\"==typeof t&&t>0&&t-1 in e}function r(e,t,n){if(it.isFunction(t))return it.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return it.grep(e,function(e){return e===t!==n});if(\"string\"==typeof t){if(pt.test(t))return it.filter(t,e,n);t=it.filter(t,e)}return it.grep(e,function(e){return it.inArray(e,t)>=0!==n})}function i(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function s(e){var t=bt[e]={};return it.each(e.match(xt)||[],function(e,n){t[n]=!0}),t}function o(){ft.addEventListener?(ft.removeEventListener(\"DOMContentLoaded\",a,!1),e.removeEventListener(\"load\",a,!1)):(ft.detachEvent(\"onreadystatechange\",a),e.detachEvent(\"onload\",a))}function a(){(ft.addEventListener||\"load\"===event.type||\"complete\"===ft.readyState)&&(o(),it.ready())}function c(e,t,n){if(void 0===n&&1===e.nodeType){var r=\"data-\"+t.replace(kt,\"-$1\").toLowerCase();if(n=e.getAttribute(r),\"string\"==typeof n){try{n=\"true\"===n?!0:\"false\"===n?!1:\"null\"===n?null:+n+\"\"===n?+n:St.test(n)?it.parseJSON(n):n}catch(i){}it.data(e,t,n)}else n=void 0}return n}function l(e){var t;for(t in e)if((\"data\"!==t||!it.isEmptyObject(e[t]))&&\"toJSON\"!==t)return!1;return!0}function u(e,t,n,r){if(it.acceptData(e)){var i,s,o=it.expando,a=e.nodeType,c=a?it.cache:e,l=a?e[o]:e[o]&&o;if(l&&c[l]&&(r||c[l].data)||void 0!==n||\"string\"!=typeof t)return l||(l=a?e[o]=X.pop()||it.guid++:o),c[l]||(c[l]=a?{}:{toJSON:it.noop}),(\"object\"==typeof t||\"function\"==typeof t)&&(r?c[l]=it.extend(c[l],t):c[l].data=it.extend(c[l].data,t)),s=c[l],r||(s.data||(s.data={}),s=s.data),void 0!==n&&(s[it.camelCase(t)]=n),\"string\"==typeof t?(i=s[t],null==i&&(i=s[it.camelCase(t)])):i=s,i}}function h(e,t,n){if(it.acceptData(e)){var r,i,s=e.nodeType,o=s?it.cache:e,a=s?e[it.expando]:it.expando;if(o[a]){if(t&&(r=n?o[a]:o[a].data)){it.isArray(t)?t=t.concat(it.map(t,it.camelCase)):t in r?t=[t]:(t=it.camelCase(t),t=t in r?[t]:t.split(\" \")),i=t.length;for(;i--;)delete r[t[i]];if(n?!l(r):!it.isEmptyObject(r))return}(n||(delete o[a].data,l(o[a])))&&(s?it.cleanData([e],!0):nt.deleteExpando||o!=o.window?delete o[a]:o[a]=null)}}}function p(){return!0}function d(){return!1}function f(){try{return ft.activeElement}catch(e){}}function m(e){var t=Dt.split(\"|\"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function g(e,t){var n,r,i=0,s=typeof e.getElementsByTagName!==Ct?e.getElementsByTagName(t||\"*\"):typeof e.querySelectorAll!==Ct?e.querySelectorAll(t||\"*\"):void 0;if(!s)for(s=[],n=e.childNodes||e;null!=(r=n[i]);i++)!t||it.nodeName(r,t)?s.push(r):it.merge(s,g(r,t));return void 0===t||t&&it.nodeName(e,t)?it.merge([e],s):s}function v(e){Ot.test(e.type)&&(e.defaultChecked=e.checked)}function y(e,t){return it.nodeName(e,\"table\")&&it.nodeName(11!==t.nodeType?t:t.firstChild,\"tr\")?e.getElementsByTagName(\"tbody\")[0]||e.appendChild(e.ownerDocument.createElement(\"tbody\")):e}function x(e){return e.type=(null!==it.find.attr(e,\"type\"))+\"/\"+e.type,e}function b(e){var t=Ut.exec(e.type);return t?e.type=t[1]:e.removeAttribute(\"type\"),e}function w(e,t){for(var n,r=0;null!=(n=e[r]);r++)it._data(n,\"globalEval\",!t||it._data(t[r],\"globalEval\"))}function _(e,t){if(1===t.nodeType&&it.hasData(e)){var n,r,i,s=it._data(e),o=it._data(t,s),a=s.events;if(a){delete o.handle,o.events={};for(n in a)for(r=0,i=a[n].length;i>r;r++)it.event.add(t,n,a[n][r])}o.data&&(o.data=it.extend({},o.data))}}function C(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!nt.noCloneEvent&&t[it.expando]){i=it._data(t);for(r in i.events)it.removeEvent(t,r,i.handle);t.removeAttribute(it.expando)}\"script\"===n&&t.text!==e.text?(x(t).text=e.text,b(t)):\"object\"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),nt.html5Clone&&e.innerHTML&&!it.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):\"input\"===n&&Ot.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):\"option\"===n?t.defaultSelected=t.selected=e.defaultSelected:(\"input\"===n||\"textarea\"===n)&&(t.defaultValue=e.defaultValue)}}function S(t,n){var r,i=it(n.createElement(t)).appendTo(n.body),s=e.getDefaultComputedStyle&&(r=e.getDefaultComputedStyle(i[0]))?r.display:it.css(i[0],\"display\");return i.detach(),s}function k(e){var t=ft,n=Qt[e];return n||(n=S(e,t),\"none\"!==n&&n||(Yt=(Yt||it(\"<iframe frameborder='0' width='0' height='0'/>\")).appendTo(t.documentElement),t=(Yt[0].contentWindow||Yt[0].contentDocument).document,t.write(),t.close(),n=S(e,t),Yt.detach()),Qt[e]=n),n}function T(e,t){return{get:function(){var n=e();if(null!=n)return n?void delete this.get:(this.get=t).apply(this,arguments)}}}function E(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=dn.length;i--;)if(t=dn[i]+n,t in e)return t;return r}function A(e,t){for(var n,r,i,s=[],o=0,a=e.length;a>o;o++)r=e[o],r.style&&(s[o]=it._data(r,\"olddisplay\"),n=r.style.display,t?(s[o]||\"none\"!==n||(r.style.display=\"\"),\"\"===r.style.display&&At(r)&&(s[o]=it._data(r,\"olddisplay\",k(r.nodeName)))):(i=At(r),(n&&\"none\"!==n||!i)&&it._data(r,\"olddisplay\",i?n:it.css(r,\"display\"))));for(o=0;a>o;o++)r=e[o],r.style&&(t&&\"none\"!==r.style.display&&\"\"!==r.style.display||(r.style.display=t?s[o]||\"\":\"none\"));return e}function N(e,t,n){var r=ln.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||\"px\"):t}function O(e,t,n,r,i){for(var s=n===(r?\"border\":\"content\")?4:\"width\"===t?1:0,o=0;4>s;s+=2)\"margin\"===n&&(o+=it.css(e,n+Et[s],!0,i)),r?(\"content\"===n&&(o-=it.css(e,\"padding\"+Et[s],!0,i)),\"margin\"!==n&&(o-=it.css(e,\"border\"+Et[s]+\"Width\",!0,i))):(o+=it.css(e,\"padding\"+Et[s],!0,i),\"padding\"!==n&&(o+=it.css(e,\"border\"+Et[s]+\"Width\",!0,i)));return o}function L(e,t,n){var r=!0,i=\"width\"===t?e.offsetWidth:e.offsetHeight,s=en(e),o=nt.boxSizing&&\"border-box\"===it.css(e,\"boxSizing\",!1,s);if(0>=i||null==i){if(i=tn(e,t,s),(0>i||null==i)&&(i=e.style[t]),rn.test(i))return i;r=o&&(nt.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+O(e,t,n||(o?\"border\":\"content\"),r,s)+\"px\"}function P(e,t,n,r,i){return new P.prototype.init(e,t,n,r,i)}function I(){return setTimeout(function(){fn=void 0}),fn=it.now()}function j(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=Et[i],r[\"margin\"+n]=r[\"padding\"+n]=e;return t&&(r.opacity=r.width=e),r}function H(e,t,n){for(var r,i=(bn[t]||[]).concat(bn[\"*\"]),s=0,o=i.length;o>s;s++)if(r=i[s].call(n,t,e))return r}function D(e,t,n){var r,i,s,o,a,c,l,u,h=this,p={},d=e.style,f=e.nodeType&&At(e),m=it._data(e,\"fxshow\");n.queue||(a=it._queueHooks(e,\"fx\"),null==a.unqueued&&(a.unqueued=0,c=a.empty.fire,a.empty.fire=function(){a.unqueued||c()}),a.unqueued++,h.always(function(){h.always(function(){a.unqueued--,it.queue(e,\"fx\").length||a.empty.fire()})})),1===e.nodeType&&(\"height\"in t||\"width\"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],l=it.css(e,\"display\"),u=\"none\"===l?it._data(e,\"olddisplay\")||k(e.nodeName):l,\"inline\"===u&&\"none\"===it.css(e,\"float\")&&(nt.inlineBlockNeedsLayout&&\"inline\"!==k(e.nodeName)?d.zoom=1:d.display=\"inline-block\")),n.overflow&&(d.overflow=\"hidden\",nt.shrinkWrapBlocks()||h.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],gn.exec(i)){if(delete t[r],s=s||\"toggle\"===i,i===(f?\"hide\":\"show\")){if(\"show\"!==i||!m||void 0===m[r])continue;f=!0}p[r]=m&&m[r]||it.style(e,r)}else l=void 0;if(it.isEmptyObject(p))\"inline\"===(\"none\"===l?k(e.nodeName):l)&&(d.display=l);else{m?\"hidden\"in m&&(f=m.hidden):m=it._data(e,\"fxshow\",{}),s&&(m.hidden=!f),f?it(e).show():h.done(function(){it(e).hide()}),h.done(function(){var t;it._removeData(e,\"fxshow\");for(t in p)it.style(e,t,p[t])});for(r in p)o=H(f?m[r]:0,r,h),r in m||(m[r]=o.start,f&&(o.end=o.start,o.start=\"width\"===r||\"height\"===r?1:0))}}function R(e,t){var n,r,i,s,o;for(n in e)if(r=it.camelCase(n),i=t[r],s=e[n],it.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=it.cssHooks[r],o&&\"expand\"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}function M(e,t,n){var r,i,s=0,o=xn.length,a=it.Deferred().always(function(){delete c.elem}),c=function(){if(i)return!1;for(var t=fn||I(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,s=1-r,o=0,c=l.tweens.length;c>o;o++)l.tweens[o].run(s);return a.notifyWith(e,[l,s,n]),1>s&&c?n:(a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:it.extend({},t),opts:it.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:fn||I(),duration:n.duration,tweens:[],createTween:function(t,n){var r=it.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)l.tweens[n].run(1);return t?a.resolveWith(e,[l,t]):a.rejectWith(e,[l,t]),this}}),u=l.props;for(R(u,l.opts.specialEasing);o>s;s++)if(r=xn[s].call(l,e,u,l.opts))return r;return it.map(u,H,l),it.isFunction(l.opts.start)&&l.opts.start.call(e,l),it.fx.timer(it.extend(c,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function V(e){return function(t,n){\"string\"!=typeof t&&(n=t,t=\"*\");var r,i=0,s=t.toLowerCase().match(xt)||[];if(it.isFunction(n))for(;r=s[i++];)\"+\"===r.charAt(0)?(r=r.slice(1)||\"*\",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function z(e,t,n,r){function i(a){var c;return s[a]=!0,it.each(e[a]||[],function(e,a){var l=a(t,n,r);return\"string\"!=typeof l||o||s[l]?o?!(c=l):void 0:(t.dataTypes.unshift(l),i(l),!1)}),c}var s={},o=e===Fn;return i(t.dataTypes[0])||!s[\"*\"]&&i(\"*\")}function B(e,t){var n,r,i=it.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((i[r]?e:n||(n={}))[r]=t[r]);return n&&it.extend(!0,e,n),e}function $(e,t,n){for(var r,i,s,o,a=e.contents,c=e.dataTypes;\"*\"===c[0];)c.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader(\"Content-Type\"));if(i)for(o in a)if(a[o]&&a[o].test(i)){c.unshift(o);break}if(c[0]in n)s=c[0];else{for(o in n){if(!c[0]||e.converters[o+\" \"+c[0]]){s=o;break}r||(r=o)}s=s||r}return s?(s!==c[0]&&c.unshift(s),n[s]):void 0}function q(e,t,n,r){var i,s,o,a,c,l={},u=e.dataTypes.slice();if(u[1])for(o in e.converters)l[o.toLowerCase()]=e.converters[o];for(s=u.shift();s;)if(e.responseFields[s]&&(n[e.responseFields[s]]=t),!c&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=s,s=u.shift())if(\"*\"===s)s=c;else if(\"*\"!==c&&c!==s){if(o=l[c+\" \"+s]||l[\"* \"+s],!o)for(i in l)if(a=i.split(\" \"),a[1]===s&&(o=l[c+\" \"+a[0]]||l[\"* \"+a[0]])){o===!0?o=l[i]:l[i]!==!0&&(s=a[0],u.unshift(a[1]));break}if(o!==!0)if(o&&e[\"throws\"])t=o(t);else try{t=o(t)}catch(h){return{state:\"parsererror\",error:o?h:\"No conversion from \"+c+\" to \"+s}}}return{state:\"success\",data:t}}function F(e,t,n,r){var i;if(it.isArray(t))it.each(t,function(t,i){n||Xn.test(e)?r(e,i):F(e+\"[\"+(\"object\"==typeof i?t:\"\")+\"]\",i,n,r)});else if(n||\"object\"!==it.type(t))r(e,t);else for(i in t)F(e+\"[\"+i+\"]\",t[i],n,r)}function Z(){try{return new e.XMLHttpRequest}catch(t){}}function W(){try{return new e.ActiveXObject(\"Microsoft.XMLHTTP\")}catch(t){}}function U(e){return it.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var X=[],J=X.slice,G=X.concat,K=X.push,Y=X.indexOf,Q={},et=Q.toString,tt=Q.hasOwnProperty,nt={},rt=\"1.11.1\",it=function(e,t){return new it.fn.init(e,t)},st=/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g,ot=/^-ms-/,at=/-([\\da-z])/gi,ct=function(e,t){return t.toUpperCase()};it.fn=it.prototype={jquery:rt,constructor:it,selector:\"\",length:0,toArray:function(){return J.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:J.call(this)},pushStack:function(e){var t=it.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return it.each(this,e,t)},map:function(e){return this.pushStack(it.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(J.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:K,sort:X.sort,splice:X.splice},it.extend=it.fn.extend=function(){var e,t,n,r,i,s,o=arguments[0]||{},a=1,c=arguments.length,l=!1;for(\"boolean\"==typeof o&&(l=o,o=arguments[a]||{},a++),\"object\"==typeof o||it.isFunction(o)||(o={}),a===c&&(o=this,a--);c>a;a++)if(null!=(i=arguments[a]))for(r in i)e=o[r],n=i[r],o!==n&&(l&&n&&(it.isPlainObject(n)||(t=it.isArray(n)))?(t?(t=!1,s=e&&it.isArray(e)?e:[]):s=e&&it.isPlainObject(e)?e:{},o[r]=it.extend(l,s,n)):void 0!==n&&(o[r]=n));return o},it.extend({expando:\"jQuery\"+(rt+Math.random()).replace(/\\D/g,\"\"),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return\"function\"===it.type(e)},isArray:Array.isArray||function(e){return\"array\"===it.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!it.isArray(e)&&e-parseFloat(e)>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||\"object\"!==it.type(e)||e.nodeType||it.isWindow(e))return!1;try{if(e.constructor&&!tt.call(e,\"constructor\")&&!tt.call(e.constructor.prototype,\"isPrototypeOf\"))return!1}catch(n){return!1}if(nt.ownLast)for(t in e)return tt.call(e,t);for(t in e);return void 0===t||tt.call(e,t)},type:function(e){return null==e?e+\"\":\"object\"==typeof e||\"function\"==typeof e?Q[et.call(e)]||\"object\":typeof e},globalEval:function(t){t&&it.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(ot,\"ms-\").replace(at,ct)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,r){var i,s=0,o=e.length,a=n(e);if(r){if(a)for(;o>s&&(i=t.apply(e[s],r),i!==!1);s++);else for(s in e)if(i=t.apply(e[s],r),i===!1)break}else if(a)for(;o>s&&(i=t.call(e[s],s,e[s]),i!==!1);s++);else for(s in e)if(i=t.call(e[s],s,e[s]),i===!1)break;return e},trim:function(e){return null==e?\"\":(e+\"\").replace(st,\"\")},makeArray:function(e,t){var r=t||[];return null!=e&&(n(Object(e))?it.merge(r,\"string\"==typeof e?[e]:e):K.call(r,e)),r},inArray:function(e,t,n){var r;if(t){if(Y)return Y.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;n>r;)e[i++]=t[r++];if(n!==n)for(;void 0!==t[r];)e[i++]=t[r++];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],s=0,o=e.length,a=!n;o>s;s++)r=!t(e[s],s),r!==a&&i.push(e[s]);return i},map:function(e,t,r){var i,s=0,o=e.length,a=n(e),c=[];if(a)for(;o>s;s++)i=t(e[s],s,r),null!=i&&c.push(i);else for(s in e)i=t(e[s],s,r),null!=i&&c.push(i);return G.apply([],c)},guid:1,proxy:function(e,t){var n,r,i;return\"string\"==typeof t&&(i=e[t],t=e,e=i),it.isFunction(e)?(n=J.call(arguments,2),r=function(){return e.apply(t||this,n.concat(J.call(arguments)))},r.guid=e.guid=e.guid||it.guid++,r):void 0},now:function(){return+new Date},support:nt}),it.each(\"Boolean Number String Function Array Date RegExp Object Error\".split(\" \"),function(e,t){Q[\"[object \"+t+\"]\"]=t.toLowerCase()});var lt=function(e){function t(e,t,n,r){var i,s,o,a,c,l,h,d,f,m;if((t?t.ownerDocument||t:z)!==P&&L(t),t=t||P,n=n||[],!e||\"string\"!=typeof e)return n;if(1!==(a=t.nodeType)&&9!==a)return[];if(j&&!r){if(i=yt.exec(e))if(o=i[1]){if(9===a){if(s=t.getElementById(o),!s||!s.parentNode)return n;if(s.id===o)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(o))&&M(t,s)&&s.id===o)return n.push(s),n}else{if(i[2])return Q.apply(n,t.getElementsByTagName(e)),n;if((o=i[3])&&w.getElementsByClassName&&t.getElementsByClassName)return Q.apply(n,t.getElementsByClassName(o)),n}if(w.qsa&&(!H||!H.test(e))){if(d=h=V,f=t,m=9===a&&e,1===a&&\"object\"!==t.nodeName.toLowerCase()){for(l=k(e),(h=t.getAttribute(\"id\"))?d=h.replace(bt,\"\\\\$&\"):t.setAttribute(\"id\",d),d=\"[id='\"+d+\"'] \",c=l.length;c--;)l[c]=d+p(l[c]);f=xt.test(e)&&u(t.parentNode)||t,m=l.join(\",\")}if(m)try{return Q.apply(n,f.querySelectorAll(m)),n}catch(g){}finally{h||t.removeAttribute(\"id\")}}}return E(e.replace(ct,\"$1\"),t,n,r)}function n(){function e(n,r){return t.push(n+\" \")>_.cacheLength&&delete e[t.shift()],e[n+\" \"]=r}var t=[];return e}function r(e){return e[V]=!0,e}function i(e){var t=P.createElement(\"div\");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function s(e,t){for(var n=e.split(\"|\"),r=e.length;r--;)_.attrHandle[n[r]]=t}function o(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||X)-(~e.sourceIndex||X);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function a(e){return function(t){var n=t.nodeName.toLowerCase();return\"input\"===n&&t.type===e}}function c(e){return function(t){var n=t.nodeName.toLowerCase();return(\"input\"===n||\"button\"===n)&&t.type===e}}function l(e){return r(function(t){return t=+t,r(function(n,r){for(var i,s=e([],n.length,t),o=s.length;o--;)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function u(e){return e&&typeof e.getElementsByTagName!==U&&e}function h(){}function p(e){for(var t=0,n=e.length,r=\"\";n>t;t++)r+=e[t].value;return r}function d(e,t,n){var r=t.dir,i=n&&\"parentNode\"===r,s=$++;return t.first?function(t,n,s){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,s)}:function(t,n,o){var a,c,l=[B,s];if(o){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,o))return!0}else for(;t=t[r];)if(1===t.nodeType||i){if(c=t[V]||(t[V]={}),(a=c[r])&&a[0]===B&&a[1]===s)return l[2]=a[2];if(c[r]=l,l[2]=e(t,n,o))return!0}}}function f(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function m(e,n,r){for(var i=0,s=n.length;s>i;i++)t(e,n[i],r);return r}function g(e,t,n,r,i){for(var s,o=[],a=0,c=e.length,l=null!=t;c>a;a++)(s=e[a])&&(!n||n(s,r,i))&&(o.push(s),l&&t.push(a));return o}function v(e,t,n,i,s,o){return i&&!i[V]&&(i=v(i)),s&&!s[V]&&(s=v(s,o)),r(function(r,o,a,c){var l,u,h,p=[],d=[],f=o.length,v=r||m(t||\"*\",a.nodeType?[a]:a,[]),y=!e||!r&&t?v:g(v,p,e,a,c),x=n?s||(r?e:f||i)?[]:o:y;if(n&&n(y,x,a,c),i)for(l=g(x,d),i(l,[],a,c),u=l.length;u--;)(h=l[u])&&(x[d[u]]=!(y[d[u]]=h));if(r){if(s||e){if(s){for(l=[],u=x.length;u--;)(h=x[u])&&l.push(y[u]=h);s(null,x=[],l,c)}for(u=x.length;u--;)(h=x[u])&&(l=s?tt.call(r,h):p[u])>-1&&(r[l]=!(o[l]=h))}}else x=g(x===o?x.splice(f,x.length):x),s?s(null,o,x,c):Q.apply(o,x)})}function y(e){for(var t,n,r,i=e.length,s=_.relative[e[0].type],o=s||_.relative[\" \"],a=s?1:0,c=d(function(e){return e===t},o,!0),l=d(function(e){return tt.call(t,e)>-1},o,!0),u=[function(e,n,r){return!s&&(r||n!==A)||((t=n).nodeType?c(e,n,r):l(e,n,r))}];i>a;a++)if(n=_.relative[e[a].type])u=[d(f(u),n)];else{if(n=_.filter[e[a].type].apply(null,e[a].matches),n[V]){for(r=++a;i>r&&!_.relative[e[r].type];r++);return v(a>1&&f(u),a>1&&p(e.slice(0,a-1).concat({value:\" \"===e[a-2].type?\"*\":\"\"})).replace(ct,\"$1\"),n,r>a&&y(e.slice(a,r)),i>r&&y(e=e.slice(r)),i>r&&p(e))}u.push(n)}return f(u)}function x(e,n){var i=n.length>0,s=e.length>0,o=function(r,o,a,c,l){var u,h,p,d=0,f=\"0\",m=r&&[],v=[],y=A,x=r||s&&_.find.TAG(\"*\",l),b=B+=null==y?1:Math.random()||.1,w=x.length;for(l&&(A=o!==P&&o);f!==w&&null!=(u=x[f]);f++){if(s&&u){for(h=0;p=e[h++];)if(p(u,o,a)){c.push(u);break}l&&(B=b)}i&&((u=!p&&u)&&d--,r&&m.push(u))}if(d+=f,i&&f!==d){for(h=0;p=n[h++];)p(m,v,o,a);if(r){if(d>0)for(;f--;)m[f]||v[f]||(v[f]=K.call(c));v=g(v)}Q.apply(c,v),l&&!r&&v.length>0&&d+n.length>1&&t.uniqueSort(c)}return l&&(B=b,A=y),m};return i?r(o):o}var b,w,_,C,S,k,T,E,A,N,O,L,P,I,j,H,D,R,M,V=\"sizzle\"+-new Date,z=e.document,B=0,$=0,q=n(),F=n(),Z=n(),W=function(e,t){return e===t&&(O=!0),0},U=\"undefined\",X=1<<31,J={}.hasOwnProperty,G=[],K=G.pop,Y=G.push,Q=G.push,et=G.slice,tt=G.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},nt=\"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped\",rt=\"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",it=\"(?:\\\\\\\\.|[\\\\w-]|[^\\\\x00-\\\\xa0])+\",st=it.replace(\"w\",\"w#\"),ot=\"\\\\[\"+rt+\"*(\"+it+\")(?:\"+rt+\"*([*^$|!~]?=)\"+rt+\"*(?:'((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\"|(\"+st+\"))|)\"+rt+\"*\\\\]\",at=\":(\"+it+\")(?:\\\\((('((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\")|((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\"+ot+\")*)|.*)\\\\)|)\",ct=new RegExp(\"^\"+rt+\"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\"+rt+\"+$\",\"g\"),lt=new RegExp(\"^\"+rt+\"*,\"+rt+\"*\"),ut=new RegExp(\"^\"+rt+\"*([>+~]|\"+rt+\")\"+rt+\"*\"),ht=new RegExp(\"=\"+rt+\"*([^\\\\]'\\\"]*?)\"+rt+\"*\\\\]\",\"g\"),pt=new RegExp(at),dt=new RegExp(\"^\"+st+\"$\"),ft={ID:new RegExp(\"^#(\"+it+\")\"),CLASS:new RegExp(\"^\\\\.(\"+it+\")\"),TAG:new RegExp(\"^(\"+it.replace(\"w\",\"w*\")+\")\"),ATTR:new RegExp(\"^\"+ot),PSEUDO:new RegExp(\"^\"+at),CHILD:new RegExp(\"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\"+rt+\"*(even|odd|(([+-]|)(\\\\d*)n|)\"+rt+\"*(?:([+-]|)\"+rt+\"*(\\\\d+)|))\"+rt+\"*\\\\)|)\",\"i\"),bool:new RegExp(\"^(?:\"+nt+\")$\",\"i\"),needsContext:new RegExp(\"^\"+rt+\"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\"+rt+\"*((?:-\\\\d)?\\\\d*)\"+rt+\"*\\\\)|)(?=[^-]|$)\",\"i\")},mt=/^(?:input|select|textarea|button)$/i,gt=/^h\\d$/i,vt=/^[^{]+\\{\\s*\\[native \\w/,yt=/^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,xt=/[+~]/,bt=/'|\\\\/g,wt=new RegExp(\"\\\\\\\\([\\\\da-f]{1,6}\"+rt+\"?|(\"+rt+\")|.)\",\"ig\"),_t=function(e,t,n){var r=\"0x\"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{Q.apply(G=et.call(z.childNodes),z.childNodes),G[z.childNodes.length].nodeType}catch(Ct){Q={apply:G.length?function(e,t){Y.apply(e,et.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}w=t.support={},S=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?\"HTML\"!==t.nodeName:!1},L=t.setDocument=function(e){var t,n=e?e.ownerDocument||e:z,r=n.defaultView;return n!==P&&9===n.nodeType&&n.documentElement?(P=n,I=n.documentElement,j=!S(n),r&&r!==r.top&&(r.addEventListener?r.addEventListener(\"unload\",function(){L()},!1):r.attachEvent&&r.attachEvent(\"onunload\",function(){L()})),w.attributes=i(function(e){return e.className=\"i\",!e.getAttribute(\"className\")}),w.getElementsByTagName=i(function(e){return e.appendChild(n.createComment(\"\")),!e.getElementsByTagName(\"*\").length}),w.getElementsByClassName=vt.test(n.getElementsByClassName)&&i(function(e){return e.innerHTML=\"<div class='a'></div><div class='a i'></div>\",e.firstChild.className=\"i\",2===e.getElementsByClassName(\"i\").length}),w.getById=i(function(e){return I.appendChild(e).id=V,!n.getElementsByName||!n.getElementsByName(V).length}),w.getById?(_.find.ID=function(e,t){if(typeof t.getElementById!==U&&j){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},_.filter.ID=function(e){var t=e.replace(wt,_t);return function(e){return e.getAttribute(\"id\")===t}}):(delete _.find.ID,_.filter.ID=function(e){var t=e.replace(wt,_t);return function(e){var n=typeof e.getAttributeNode!==U&&e.getAttributeNode(\"id\");return n&&n.value===t}}),_.find.TAG=w.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==U?t.getElementsByTagName(e):void 0}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if(\"*\"===e){for(;n=s[i++];)1===n.nodeType&&r.push(n);return r}return s},_.find.CLASS=w.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==U&&j?t.getElementsByClassName(e):void 0},D=[],H=[],(w.qsa=vt.test(n.querySelectorAll))&&(i(function(e){e.innerHTML=\"<select msallowclip=''><option selected=''></option></select>\",e.querySelectorAll(\"[msallowclip^='']\").length&&H.push(\"[*^$]=\"+rt+\"*(?:''|\\\"\\\")\"),e.querySelectorAll(\"[selected]\").length||H.push(\"\\\\[\"+rt+\"*(?:value|\"+nt+\")\"),e.querySelectorAll(\":checked\").length||H.push(\":checked\")}),i(function(e){var t=n.createElement(\"input\");t.setAttribute(\"type\",\"hidden\"),e.appendChild(t).setAttribute(\"name\",\"D\"),e.querySelectorAll(\"[name=d]\").length&&H.push(\"name\"+rt+\"*[*^$|!~]?=\"),e.querySelectorAll(\":enabled\").length||H.push(\":enabled\",\":disabled\"),e.querySelectorAll(\"*,:x\"),H.push(\",.*:\")})),(w.matchesSelector=vt.test(R=I.matches||I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&i(function(e){w.disconnectedMatch=R.call(e,\"div\"),R.call(e,\"[s!='']:x\"),D.push(\"!=\",at)}),H=H.length&&new RegExp(H.join(\"|\")),D=D.length&&new RegExp(D.join(\"|\")),t=vt.test(I.compareDocumentPosition),M=t||vt.test(I.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},W=t?function(e,t){if(e===t)return O=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&r||!w.sortDetached&&t.compareDocumentPosition(e)===r?e===n||e.ownerDocument===z&&M(z,e)?-1:t===n||t.ownerDocument===z&&M(z,t)?1:N?tt.call(N,e)-tt.call(N,t):0:4&r?-1:1)}:function(e,t){if(e===t)return O=!0,0;var r,i=0,s=e.parentNode,a=t.parentNode,c=[e],l=[t];if(!s||!a)return e===n?-1:t===n?1:s?-1:a?1:N?tt.call(N,e)-tt.call(N,t):0;if(s===a)return o(e,t);for(r=e;r=r.parentNode;)c.unshift(r);for(r=t;r=r.parentNode;)l.unshift(r);for(;c[i]===l[i];)i++;return i?o(c[i],l[i]):c[i]===z?-1:l[i]===z?1:0},n):P},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==P&&L(e),n=n.replace(ht,\"='$1']\"),!(!w.matchesSelector||!j||D&&D.test(n)||H&&H.test(n)))try{var r=R.call(e,n);if(r||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(i){}return t(n,P,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==P&&L(e),M(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==P&&L(e);var n=_.attrHandle[t.toLowerCase()],r=n&&J.call(_.attrHandle,t.toLowerCase())?n(e,t,!j):void 0;return void 0!==r?r:w.attributes||!j?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.error=function(e){throw new Error(\"Syntax error, unrecognized expression: \"+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(O=!w.detectDuplicates,N=!w.sortStable&&e.slice(0),e.sort(W),O){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return N=null,e},C=t.getText=function(e){var t,n=\"\",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if(\"string\"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=C(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=C(t);return n},_=t.selectors={cacheLength:50,createPseudo:r,match:ft,attrHandle:{},find:{},relative:{\">\":{dir:\"parentNode\",first:!0},\" \":{dir:\"parentNode\"},\"+\":{dir:\"previousSibling\",first:!0},\"~\":{dir:\"previousSibling\"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(wt,_t),e[3]=(e[3]||e[4]||e[5]||\"\").replace(wt,_t),\"~=\"===e[2]&&(e[3]=\" \"+e[3]+\" \"),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),\"nth\"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(\"even\"===e[3]||\"odd\"===e[3])),e[5]=+(e[7]+e[8]||\"odd\"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return ft.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||\"\":n&&pt.test(n)&&(t=k(n,!0))&&(t=n.indexOf(\")\",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(wt,_t).toLowerCase();return\"*\"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=q[e+\" \"];return t||(t=new RegExp(\"(^|\"+rt+\")\"+e+\"(\"+rt+\"|$)\"))&&q(e,function(e){return t.test(\"string\"==typeof e.className&&e.className||typeof e.getAttribute!==U&&e.getAttribute(\"class\")||\"\")})},ATTR:function(e,n,r){return function(i){var s=t.attr(i,e);return null==s?\"!=\"===n:n?(s+=\"\",\"=\"===n?s===r:\"!=\"===n?s!==r:\"^=\"===n?r&&0===s.indexOf(r):\"*=\"===n?r&&s.indexOf(r)>-1:\"$=\"===n?r&&s.slice(-r.length)===r:\"~=\"===n?(\" \"+s+\" \").indexOf(r)>-1:\"|=\"===n?s===r||s.slice(0,r.length+1)===r+\"-\":!1):!0}},CHILD:function(e,t,n,r,i){var s=\"nth\"!==e.slice(0,3),o=\"last\"!==e.slice(-4),a=\"of-type\"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,c){var l,u,h,p,d,f,m=s!==o?\"nextSibling\":\"previousSibling\",g=t.parentNode,v=a&&t.nodeName.toLowerCase(),y=!c&&!a;if(g){if(s){for(;m;){for(h=t;h=h[m];)if(a?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;f=m=\"only\"===e&&!f&&\"nextSibling\"}return!0}if(f=[o?g.firstChild:g.lastChild],o&&y){for(u=g[V]||(g[V]={}),l=u[e]||[],d=l[0]===B&&l[1],p=l[0]===B&&l[2],h=d&&g.childNodes[d];h=++d&&h&&h[m]||(p=d=0)||f.pop();)if(1===h.nodeType&&++p&&h===t){u[e]=[B,d,p];break}}else if(y&&(l=(t[V]||(t[V]={}))[e])&&l[0]===B)p=l[1];else for(;(h=++d&&h&&h[m]||(p=d=0)||f.pop())&&((a?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++p||(y&&((h[V]||(h[V]={}))[e]=[B,p]),h!==t)););return p-=i,p===r||p%r===0&&p/r>=0}}},PSEUDO:function(e,n){var i,s=_.pseudos[e]||_.setFilters[e.toLowerCase()]||t.error(\"unsupported pseudo: \"+e);return s[V]?s(n):s.length>1?(i=[e,e,\"\",n],_.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=s(e,n),o=i.length;o--;)r=tt.call(e,i[o]),e[r]=!(t[r]=i[o])}):function(e){return s(e,0,i)}):s}},pseudos:{not:r(function(e){var t=[],n=[],i=T(e.replace(ct,\"$1\"));return i[V]?r(function(e,t,n,r){for(var s,o=i(e,null,r,[]),a=e.length;a--;)(s=o[a])&&(e[a]=!(t[a]=s))}):function(e,r,s){return t[0]=e,i(t,null,s,n),!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return function(t){return(t.textContent||t.innerText||C(t)).indexOf(e)>-1}}),lang:r(function(e){return dt.test(e||\"\")||t.error(\"unsupported lang: \"+e),e=e.replace(wt,_t).toLowerCase(),function(t){var n;do if(n=j?t.lang:t.getAttribute(\"xml:lang\")||t.getAttribute(\"lang\"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+\"-\");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===I},focus:function(e){return e===P.activeElement&&(!P.hasFocus||P.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return\"input\"===t&&!!e.checked||\"option\"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!_.pseudos.empty(e)},header:function(e){return gt.test(e.nodeName)},input:function(e){return mt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return\"input\"===t&&\"button\"===e.type||\"button\"===t},text:function(e){var t;return\"input\"===e.nodeName.toLowerCase()&&\"text\"===e.type&&(null==(t=e.getAttribute(\"type\"))||\"text\"===t.toLowerCase())},first:l(function(){return[0]}),last:l(function(e,t){return[t-1]}),eq:l(function(e,t,n){return[0>n?n+t:n]}),even:l(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:l(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:l(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:l(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},_.pseudos.nth=_.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[b]=a(b);for(b in{submit:!0,reset:!0})_.pseudos[b]=c(b);return h.prototype=_.filters=_.pseudos,_.setFilters=new h,k=t.tokenize=function(e,n){var r,i,s,o,a,c,l,u=F[e+\" \"];if(u)return n?0:u.slice(0);for(a=e,c=[],l=_.preFilter;a;){(!r||(i=lt.exec(a)))&&(i&&(a=a.slice(i[0].length)||a),c.push(s=[])),r=!1,(i=ut.exec(a))&&(r=i.shift(),s.push({value:r,type:i[0].replace(ct,\" \")}),a=a.slice(r.length));for(o in _.filter)!(i=ft[o].exec(a))||l[o]&&!(i=l[o](i))||(r=i.shift(),s.push({value:r,type:o,matches:i}),a=a.slice(r.length));\nif(!r)break}return n?a.length:a?t.error(e):F(e,c).slice(0)},T=t.compile=function(e,t){var n,r=[],i=[],s=Z[e+\" \"];if(!s){for(t||(t=k(e)),n=t.length;n--;)s=y(t[n]),s[V]?r.push(s):i.push(s);s=Z(e,x(i,r)),s.selector=e}return s},E=t.select=function(e,t,n,r){var i,s,o,a,c,l=\"function\"==typeof e&&e,h=!r&&k(e=l.selector||e);if(n=n||[],1===h.length){if(s=h[0]=h[0].slice(0),s.length>2&&\"ID\"===(o=s[0]).type&&w.getById&&9===t.nodeType&&j&&_.relative[s[1].type]){if(t=(_.find.ID(o.matches[0].replace(wt,_t),t)||[])[0],!t)return n;l&&(t=t.parentNode),e=e.slice(s.shift().value.length)}for(i=ft.needsContext.test(e)?0:s.length;i--&&(o=s[i],!_.relative[a=o.type]);)if((c=_.find[a])&&(r=c(o.matches[0].replace(wt,_t),xt.test(s[0].type)&&u(t.parentNode)||t))){if(s.splice(i,1),e=r.length&&p(s),!e)return Q.apply(n,r),n;break}}return(l||T(e,h))(r,t,!j,n,xt.test(e)&&u(t.parentNode)||t),n},w.sortStable=V.split(\"\").sort(W).join(\"\")===V,w.detectDuplicates=!!O,L(),w.sortDetached=i(function(e){return 1&e.compareDocumentPosition(P.createElement(\"div\"))}),i(function(e){return e.innerHTML=\"<a href='#'></a>\",\"#\"===e.firstChild.getAttribute(\"href\")})||s(\"type|href|height|width\",function(e,t,n){return n?void 0:e.getAttribute(t,\"type\"===t.toLowerCase()?1:2)}),w.attributes&&i(function(e){return e.innerHTML=\"<input/>\",e.firstChild.setAttribute(\"value\",\"\"),\"\"===e.firstChild.getAttribute(\"value\")})||s(\"value\",function(e,t,n){return n||\"input\"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),i(function(e){return null==e.getAttribute(\"disabled\")})||s(nt,function(e,t,n){var r;return n?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(e);it.find=lt,it.expr=lt.selectors,it.expr[\":\"]=it.expr.pseudos,it.unique=lt.uniqueSort,it.text=lt.getText,it.isXMLDoc=lt.isXML,it.contains=lt.contains;var ut=it.expr.match.needsContext,ht=/^<(\\w+)\\s*\\/?>(?:<\\/\\1>|)$/,pt=/^.[^:#\\[\\.,]*$/;it.filter=function(e,t,n){var r=t[0];return n&&(e=\":not(\"+e+\")\"),1===t.length&&1===r.nodeType?it.find.matchesSelector(r,e)?[r]:[]:it.find.matches(e,it.grep(t,function(e){return 1===e.nodeType}))},it.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if(\"string\"!=typeof e)return this.pushStack(it(e).filter(function(){for(t=0;i>t;t++)if(it.contains(r[t],this))return!0}));for(t=0;i>t;t++)it.find(e,r[t],n);return n=this.pushStack(i>1?it.unique(n):n),n.selector=this.selector?this.selector+\" \"+e:e,n},filter:function(e){return this.pushStack(r(this,e||[],!1))},not:function(e){return this.pushStack(r(this,e||[],!0))},is:function(e){return!!r(this,\"string\"==typeof e&&ut.test(e)?it(e):e||[],!1).length}});var dt,ft=e.document,mt=/^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]*))$/,gt=it.fn.init=function(e,t){var n,r;if(!e)return this;if(\"string\"==typeof e){if(n=\"<\"===e.charAt(0)&&\">\"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:mt.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||dt).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof it?t[0]:t,it.merge(this,it.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:ft,!0)),ht.test(n[1])&&it.isPlainObject(t))for(n in t)it.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}if(r=ft.getElementById(n[2]),r&&r.parentNode){if(r.id!==n[2])return dt.find(e);this.length=1,this[0]=r}return this.context=ft,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):it.isFunction(e)?\"undefined\"!=typeof dt.ready?dt.ready(e):e(it):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),it.makeArray(e,this))};gt.prototype=it.fn,dt=it(ft);var vt=/^(?:parents|prev(?:Until|All))/,yt={children:!0,contents:!0,next:!0,prev:!0};it.extend({dir:function(e,t,n){for(var r=[],i=e[t];i&&9!==i.nodeType&&(void 0===n||1!==i.nodeType||!it(i).is(n));)1===i.nodeType&&r.push(i),i=i[t];return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),it.fn.extend({has:function(e){var t,n=it(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(it.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,s=[],o=ut.test(e)||\"string\"!=typeof e?it(e,t||this.context):0;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&it.find.matchesSelector(n,e))){s.push(n);break}return this.pushStack(s.length>1?it.unique(s):s)},index:function(e){return e?\"string\"==typeof e?it.inArray(this[0],it(e)):it.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(it.unique(it.merge(this.get(),it(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),it.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return it.dir(e,\"parentNode\")},parentsUntil:function(e,t,n){return it.dir(e,\"parentNode\",n)},next:function(e){return i(e,\"nextSibling\")},prev:function(e){return i(e,\"previousSibling\")},nextAll:function(e){return it.dir(e,\"nextSibling\")},prevAll:function(e){return it.dir(e,\"previousSibling\")},nextUntil:function(e,t,n){return it.dir(e,\"nextSibling\",n)},prevUntil:function(e,t,n){return it.dir(e,\"previousSibling\",n)},siblings:function(e){return it.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return it.sibling(e.firstChild)},contents:function(e){return it.nodeName(e,\"iframe\")?e.contentDocument||e.contentWindow.document:it.merge([],e.childNodes)}},function(e,t){it.fn[e]=function(n,r){var i=it.map(this,t,n);return\"Until\"!==e.slice(-5)&&(r=n),r&&\"string\"==typeof r&&(i=it.filter(r,i)),this.length>1&&(yt[e]||(i=it.unique(i)),vt.test(e)&&(i=i.reverse())),this.pushStack(i)}});var xt=/\\S+/g,bt={};it.Callbacks=function(e){e=\"string\"==typeof e?bt[e]||s(e):it.extend({},e);var t,n,r,i,o,a,c=[],l=!e.once&&[],u=function(s){for(n=e.memory&&s,r=!0,o=a||0,a=0,i=c.length,t=!0;c&&i>o;o++)if(c[o].apply(s[0],s[1])===!1&&e.stopOnFalse){n=!1;break}t=!1,c&&(l?l.length&&u(l.shift()):n?c=[]:h.disable())},h={add:function(){if(c){var r=c.length;!function s(t){it.each(t,function(t,n){var r=it.type(n);\"function\"===r?e.unique&&h.has(n)||c.push(n):n&&n.length&&\"string\"!==r&&s(n)})}(arguments),t?i=c.length:n&&(a=r,u(n))}return this},remove:function(){return c&&it.each(arguments,function(e,n){for(var r;(r=it.inArray(n,c,r))>-1;)c.splice(r,1),t&&(i>=r&&i--,o>=r&&o--)}),this},has:function(e){return e?it.inArray(e,c)>-1:!(!c||!c.length)},empty:function(){return c=[],i=0,this},disable:function(){return c=l=n=void 0,this},disabled:function(){return!c},lock:function(){return l=void 0,n||h.disable(),this},locked:function(){return!l},fireWith:function(e,n){return!c||r&&!l||(n=n||[],n=[e,n.slice?n.slice():n],t?l.push(n):u(n)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!r}};return h},it.extend({Deferred:function(e){var t=[[\"resolve\",\"done\",it.Callbacks(\"once memory\"),\"resolved\"],[\"reject\",\"fail\",it.Callbacks(\"once memory\"),\"rejected\"],[\"notify\",\"progress\",it.Callbacks(\"memory\")]],n=\"pending\",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return it.Deferred(function(n){it.each(t,function(t,s){var o=it.isFunction(e[t])&&e[t];i[s[1]](function(){var e=o&&o.apply(this,arguments);e&&it.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s[0]+\"With\"](this===r?n.promise():this,o?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?it.extend(e,r):r}},i={};return r.pipe=r.then,it.each(t,function(e,s){var o=s[2],a=s[3];r[s[1]]=o.add,a&&o.add(function(){n=a},t[1^e][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+\"With\"](this===i?r:this,arguments),this},i[s[0]+\"With\"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,r,i=0,s=J.call(arguments),o=s.length,a=1!==o||e&&it.isFunction(e.promise)?o:0,c=1===a?e:it.Deferred(),l=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?J.call(arguments):i,r===t?c.notifyWith(n,r):--a||c.resolveWith(n,r)}};if(o>1)for(t=new Array(o),n=new Array(o),r=new Array(o);o>i;i++)s[i]&&it.isFunction(s[i].promise)?s[i].promise().done(l(i,r,s)).fail(c.reject).progress(l(i,n,t)):--a;return a||c.resolveWith(r,s),c.promise()}});var wt;it.fn.ready=function(e){return it.ready.promise().done(e),this},it.extend({isReady:!1,readyWait:1,holdReady:function(e){e?it.readyWait++:it.ready(!0)},ready:function(e){if(e===!0?!--it.readyWait:!it.isReady){if(!ft.body)return setTimeout(it.ready);it.isReady=!0,e!==!0&&--it.readyWait>0||(wt.resolveWith(ft,[it]),it.fn.triggerHandler&&(it(ft).triggerHandler(\"ready\"),it(ft).off(\"ready\")))}}}),it.ready.promise=function(t){if(!wt)if(wt=it.Deferred(),\"complete\"===ft.readyState)setTimeout(it.ready);else if(ft.addEventListener)ft.addEventListener(\"DOMContentLoaded\",a,!1),e.addEventListener(\"load\",a,!1);else{ft.attachEvent(\"onreadystatechange\",a),e.attachEvent(\"onload\",a);var n=!1;try{n=null==e.frameElement&&ft.documentElement}catch(r){}n&&n.doScroll&&!function i(){if(!it.isReady){try{n.doScroll(\"left\")}catch(e){return setTimeout(i,50)}o(),it.ready()}}()}return wt.promise(t)};var _t,Ct=\"undefined\";for(_t in it(nt))break;nt.ownLast=\"0\"!==_t,nt.inlineBlockNeedsLayout=!1,it(function(){var e,t,n,r;n=ft.getElementsByTagName(\"body\")[0],n&&n.style&&(t=ft.createElement(\"div\"),r=ft.createElement(\"div\"),r.style.cssText=\"position:absolute;border:0;width:0;height:0;top:0;left:-9999px\",n.appendChild(r).appendChild(t),typeof t.style.zoom!==Ct&&(t.style.cssText=\"display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1\",nt.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(n.style.zoom=1)),n.removeChild(r))}),function(){var e=ft.createElement(\"div\");if(null==nt.deleteExpando){nt.deleteExpando=!0;try{delete e.test}catch(t){nt.deleteExpando=!1}}e=null}(),it.acceptData=function(e){var t=it.noData[(e.nodeName+\" \").toLowerCase()],n=+e.nodeType||1;return 1!==n&&9!==n?!1:!t||t!==!0&&e.getAttribute(\"classid\")===t};var St=/^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/,kt=/([A-Z])/g;it.extend({cache:{},noData:{\"applet \":!0,\"embed \":!0,\"object \":\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\"},hasData:function(e){return e=e.nodeType?it.cache[e[it.expando]]:e[it.expando],!!e&&!l(e)},data:function(e,t,n){return u(e,t,n)},removeData:function(e,t){return h(e,t)},_data:function(e,t,n){return u(e,t,n,!0)},_removeData:function(e,t){return h(e,t,!0)}}),it.fn.extend({data:function(e,t){var n,r,i,s=this[0],o=s&&s.attributes;if(void 0===e){if(this.length&&(i=it.data(s),1===s.nodeType&&!it._data(s,\"parsedAttrs\"))){for(n=o.length;n--;)o[n]&&(r=o[n].name,0===r.indexOf(\"data-\")&&(r=it.camelCase(r.slice(5)),c(s,r,i[r])));it._data(s,\"parsedAttrs\",!0)}return i}return\"object\"==typeof e?this.each(function(){it.data(this,e)}):arguments.length>1?this.each(function(){it.data(this,e,t)}):s?c(s,e,it.data(s,e)):void 0},removeData:function(e){return this.each(function(){it.removeData(this,e)})}}),it.extend({queue:function(e,t,n){var r;return e?(t=(t||\"fx\")+\"queue\",r=it._data(e,t),n&&(!r||it.isArray(n)?r=it._data(e,t,it.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(e,t){t=t||\"fx\";var n=it.queue(e,t),r=n.length,i=n.shift(),s=it._queueHooks(e,t),o=function(){it.dequeue(e,t)};\"inprogress\"===i&&(i=n.shift(),r--),i&&(\"fx\"===t&&n.unshift(\"inprogress\"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+\"queueHooks\";return it._data(e,n)||it._data(e,n,{empty:it.Callbacks(\"once memory\").add(function(){it._removeData(e,t+\"queue\"),it._removeData(e,n)})})}}),it.fn.extend({queue:function(e,t){var n=2;return\"string\"!=typeof e&&(t=e,e=\"fx\",n--),arguments.length<n?it.queue(this[0],e):void 0===t?this:this.each(function(){var n=it.queue(this,e,t);it._queueHooks(this,e),\"fx\"===e&&\"inprogress\"!==n[0]&&it.dequeue(this,e)})},dequeue:function(e){return this.each(function(){it.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||\"fx\",[])},promise:function(e,t){var n,r=1,i=it.Deferred(),s=this,o=this.length,a=function(){--r||i.resolveWith(s,[s])};for(\"string\"!=typeof e&&(t=e,e=void 0),e=e||\"fx\";o--;)n=it._data(s[o],e+\"queueHooks\"),n&&n.empty&&(r++,n.empty.add(a));return a(),i.promise(t)}});var Tt=/[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/.source,Et=[\"Top\",\"Right\",\"Bottom\",\"Left\"],At=function(e,t){return e=t||e,\"none\"===it.css(e,\"display\")||!it.contains(e.ownerDocument,e)},Nt=it.access=function(e,t,n,r,i,s,o){var a=0,c=e.length,l=null==n;if(\"object\"===it.type(n)){i=!0;for(a in n)it.access(e,t,a,n[a],!0,s,o)}else if(void 0!==r&&(i=!0,it.isFunction(r)||(o=!0),l&&(o?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(it(e),n)})),t))for(;c>a;a++)t(e[a],n,o?r:r.call(e[a],a,t(e[a],n)));return i?e:l?t.call(e):c?t(e[0],n):s},Ot=/^(?:checkbox|radio)$/i;!function(){var e=ft.createElement(\"input\"),t=ft.createElement(\"div\"),n=ft.createDocumentFragment();if(t.innerHTML=\"  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>\",nt.leadingWhitespace=3===t.firstChild.nodeType,nt.tbody=!t.getElementsByTagName(\"tbody\").length,nt.htmlSerialize=!!t.getElementsByTagName(\"link\").length,nt.html5Clone=\"<:nav></:nav>\"!==ft.createElement(\"nav\").cloneNode(!0).outerHTML,e.type=\"checkbox\",e.checked=!0,n.appendChild(e),nt.appendChecked=e.checked,t.innerHTML=\"<textarea>x</textarea>\",nt.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,n.appendChild(t),t.innerHTML=\"<input type='radio' checked='checked' name='t'/>\",nt.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,nt.noCloneEvent=!0,t.attachEvent&&(t.attachEvent(\"onclick\",function(){nt.noCloneEvent=!1}),t.cloneNode(!0).click()),null==nt.deleteExpando){nt.deleteExpando=!0;try{delete t.test}catch(r){nt.deleteExpando=!1}}}(),function(){var t,n,r=ft.createElement(\"div\");for(t in{submit:!0,change:!0,focusin:!0})n=\"on\"+t,(nt[t+\"Bubbles\"]=n in e)||(r.setAttribute(n,\"t\"),nt[t+\"Bubbles\"]=r.attributes[n].expando===!1);r=null}();var Lt=/^(?:input|select|textarea)$/i,Pt=/^key/,It=/^(?:mouse|pointer|contextmenu)|click/,jt=/^(?:focusinfocus|focusoutblur)$/,Ht=/^([^.]*)(?:\\.(.+)|)$/;it.event={global:{},add:function(e,t,n,r,i){var s,o,a,c,l,u,h,p,d,f,m,g=it._data(e);if(g){for(n.handler&&(c=n,n=c.handler,i=c.selector),n.guid||(n.guid=it.guid++),(o=g.events)||(o=g.events={}),(u=g.handle)||(u=g.handle=function(e){return typeof it===Ct||e&&it.event.triggered===e.type?void 0:it.event.dispatch.apply(u.elem,arguments)},u.elem=e),t=(t||\"\").match(xt)||[\"\"],a=t.length;a--;)s=Ht.exec(t[a])||[],d=m=s[1],f=(s[2]||\"\").split(\".\").sort(),d&&(l=it.event.special[d]||{},d=(i?l.delegateType:l.bindType)||d,l=it.event.special[d]||{},h=it.extend({type:d,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&it.expr.match.needsContext.test(i),namespace:f.join(\".\")},c),(p=o[d])||(p=o[d]=[],p.delegateCount=0,l.setup&&l.setup.call(e,r,f,u)!==!1||(e.addEventListener?e.addEventListener(d,u,!1):e.attachEvent&&e.attachEvent(\"on\"+d,u))),l.add&&(l.add.call(e,h),h.handler.guid||(h.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,h):p.push(h),it.event.global[d]=!0);e=null}},remove:function(e,t,n,r,i){var s,o,a,c,l,u,h,p,d,f,m,g=it.hasData(e)&&it._data(e);if(g&&(u=g.events)){for(t=(t||\"\").match(xt)||[\"\"],l=t.length;l--;)if(a=Ht.exec(t[l])||[],d=m=a[1],f=(a[2]||\"\").split(\".\").sort(),d){for(h=it.event.special[d]||{},d=(r?h.delegateType:h.bindType)||d,p=u[d]||[],a=a[2]&&new RegExp(\"(^|\\\\.)\"+f.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"),c=s=p.length;s--;)o=p[s],!i&&m!==o.origType||n&&n.guid!==o.guid||a&&!a.test(o.namespace)||r&&r!==o.selector&&(\"**\"!==r||!o.selector)||(p.splice(s,1),o.selector&&p.delegateCount--,h.remove&&h.remove.call(e,o));c&&!p.length&&(h.teardown&&h.teardown.call(e,f,g.handle)!==!1||it.removeEvent(e,d,g.handle),delete u[d])}else for(d in u)it.event.remove(e,d+t[l],n,r,!0);it.isEmptyObject(u)&&(delete g.handle,it._removeData(e,\"events\"))}},trigger:function(t,n,r,i){var s,o,a,c,l,u,h,p=[r||ft],d=tt.call(t,\"type\")?t.type:t,f=tt.call(t,\"namespace\")?t.namespace.split(\".\"):[];if(a=u=r=r||ft,3!==r.nodeType&&8!==r.nodeType&&!jt.test(d+it.event.triggered)&&(d.indexOf(\".\")>=0&&(f=d.split(\".\"),d=f.shift(),f.sort()),o=d.indexOf(\":\")<0&&\"on\"+d,t=t[it.expando]?t:new it.Event(d,\"object\"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=f.join(\".\"),t.namespace_re=t.namespace?new RegExp(\"(^|\\\\.)\"+f.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:it.makeArray(n,[t]),l=it.event.special[d]||{},i||!l.trigger||l.trigger.apply(r,n)!==!1)){if(!i&&!l.noBubble&&!it.isWindow(r)){for(c=l.delegateType||d,jt.test(c+d)||(a=a.parentNode);a;a=a.parentNode)p.push(a),u=a;u===(r.ownerDocument||ft)&&p.push(u.defaultView||u.parentWindow||e)}for(h=0;(a=p[h++])&&!t.isPropagationStopped();)t.type=h>1?c:l.bindType||d,s=(it._data(a,\"events\")||{})[t.type]&&it._data(a,\"handle\"),s&&s.apply(a,n),s=o&&a[o],s&&s.apply&&it.acceptData(a)&&(t.result=s.apply(a,n),t.result===!1&&t.preventDefault());if(t.type=d,!i&&!t.isDefaultPrevented()&&(!l._default||l._default.apply(p.pop(),n)===!1)&&it.acceptData(r)&&o&&r[d]&&!it.isWindow(r)){u=r[o],u&&(r[o]=null),it.event.triggered=d;try{r[d]()}catch(m){}it.event.triggered=void 0,u&&(r[o]=u)}return t.result}},dispatch:function(e){e=it.event.fix(e);var t,n,r,i,s,o=[],a=J.call(arguments),c=(it._data(this,\"events\")||{})[e.type]||[],l=it.event.special[e.type]||{};if(a[0]=e,e.delegateTarget=this,!l.preDispatch||l.preDispatch.call(this,e)!==!1){for(o=it.event.handlers.call(this,e,c),t=0;(i=o[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,s=0;(r=i.handlers[s++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(r.namespace))&&(e.handleObj=r,e.data=r.data,n=((it.event.special[r.origType]||{}).handle||r.handler).apply(i.elem,a),void 0!==n&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,s,o=[],a=t.delegateCount,c=e.target;if(a&&c.nodeType&&(!e.button||\"click\"!==e.type))for(;c!=this;c=c.parentNode||this)if(1===c.nodeType&&(c.disabled!==!0||\"click\"!==e.type)){for(i=[],s=0;a>s;s++)r=t[s],n=r.selector+\" \",void 0===i[n]&&(i[n]=r.needsContext?it(n,this).index(c)>=0:it.find(n,this,null,[c]).length),i[n]&&i.push(r);i.length&&o.push({elem:c,handlers:i})}return a<t.length&&o.push({elem:this,handlers:t.slice(a)}),o},fix:function(e){if(e[it.expando])return e;var t,n,r,i=e.type,s=e,o=this.fixHooks[i];for(o||(this.fixHooks[i]=o=It.test(i)?this.mouseHooks:Pt.test(i)?this.keyHooks:{}),r=o.props?this.props.concat(o.props):this.props,e=new it.Event(s),t=r.length;t--;)n=r[t],e[n]=s[n];return e.target||(e.target=s.srcElement||ft),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,o.filter?o.filter(e,s):e},props:\"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which\".split(\" \"),fixHooks:{},keyHooks:{props:\"char charCode key keyCode\".split(\" \"),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:\"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement\".split(\" \"),filter:function(e,t){var n,r,i,s=t.button,o=t.fromElement;return null==e.pageX&&null!=t.clientX&&(r=e.target.ownerDocument||ft,i=r.documentElement,n=r.body,e.pageX=t.clientX+(i&&i.scrollLeft||n&&n.scrollLeft||0)-(i&&i.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||n&&n.scrollTop||0)-(i&&i.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&o&&(e.relatedTarget=o===e.target?t.toElement:o),e.which||void 0===s||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==f()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:\"focusin\"},blur:{trigger:function(){return this===f()&&this.blur?(this.blur(),!1):void 0},delegateType:\"focusout\"},click:{trigger:function(){return it.nodeName(this,\"input\")&&\"checkbox\"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return it.nodeName(e.target,\"a\")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=it.extend(new it.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?it.event.trigger(i,null,t):it.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},it.removeEvent=ft.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r=\"on\"+t;e.detachEvent&&(typeof e[r]===Ct&&(e[r]=null),e.detachEvent(r,n))},it.Event=function(e,t){return this instanceof it.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?p:d):this.type=e,t&&it.extend(this,t),this.timeStamp=e&&e.timeStamp||it.now(),void(this[it.expando]=!0)):new it.Event(e,t)},it.Event.prototype={isDefaultPrevented:d,isPropagationStopped:d,isImmediatePropagationStopped:d,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=p,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=p,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=p,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},it.each({mouseenter:\"mouseover\",mouseleave:\"mouseout\",pointerenter:\"pointerover\",pointerleave:\"pointerout\"},function(e,t){it.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;return(!i||i!==r&&!it.contains(r,i))&&(e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t),n}}}),nt.submitBubbles||(it.event.special.submit={setup:function(){return it.nodeName(this,\"form\")?!1:void it.event.add(this,\"click._submit keypress._submit\",function(e){var t=e.target,n=it.nodeName(t,\"input\")||it.nodeName(t,\"button\")?t.form:void 0;n&&!it._data(n,\"submitBubbles\")&&(it.event.add(n,\"submit._submit\",function(e){e._submit_bubble=!0}),it._data(n,\"submitBubbles\",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&it.event.simulate(\"submit\",this.parentNode,e,!0))},teardown:function(){return it.nodeName(this,\"form\")?!1:void it.event.remove(this,\"._submit\")}}),nt.changeBubbles||(it.event.special.change={setup:function(){return Lt.test(this.nodeName)?((\"checkbox\"===this.type||\"radio\"===this.type)&&(it.event.add(this,\"propertychange._change\",function(e){\"checked\"===e.originalEvent.propertyName&&(this._just_changed=!0)}),it.event.add(this,\"click._change\",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),it.event.simulate(\"change\",this,e,!0)})),!1):void it.event.add(this,\"beforeactivate._change\",function(e){var t=e.target;Lt.test(t.nodeName)&&!it._data(t,\"changeBubbles\")&&(it.event.add(t,\"change._change\",function(e){!this.parentNode||e.isSimulated||e.isTrigger||it.event.simulate(\"change\",this.parentNode,e,!0)}),it._data(t,\"changeBubbles\",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||\"radio\"!==t.type&&\"checkbox\"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return it.event.remove(this,\"._change\"),!Lt.test(this.nodeName)}}),nt.focusinBubbles||it.each({focus:\"focusin\",blur:\"focusout\"},function(e,t){var n=function(e){it.event.simulate(t,e.target,it.event.fix(e),!0)};it.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=it._data(r,t);i||r.addEventListener(e,n,!0),it._data(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=it._data(r,t)-1;i?it._data(r,t,i):(r.removeEventListener(e,n,!0),it._removeData(r,t))}}}),it.fn.extend({on:function(e,t,n,r,i){var s,o;if(\"object\"==typeof e){\"string\"!=typeof t&&(n=n||t,t=void 0);for(s in e)this.on(s,t,n,e[s],i);return this}if(null==n&&null==r?(r=t,n=t=void 0):null==r&&(\"string\"==typeof t?(r=n,n=void 0):(r=n,n=t,t=void 0)),r===!1)r=d;else if(!r)return this;return 1===i&&(o=r,r=function(e){return it().off(e),o.apply(this,arguments)},r.guid=o.guid||(o.guid=it.guid++)),this.each(function(){it.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,it(e.delegateTarget).off(r.namespace?r.origType+\".\"+r.namespace:r.origType,r.selector,r.handler),this;if(\"object\"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return(t===!1||\"function\"==typeof t)&&(n=t,t=void 0),n===!1&&(n=d),this.each(function(){it.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){it.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?it.event.trigger(e,t,n,!0):void 0}});var Dt=\"abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video\",Rt=/ jQuery\\d+=\"(?:null|\\d+)\"/g,Mt=new RegExp(\"<(?:\"+Dt+\")[\\\\s/>]\",\"i\"),Vt=/^\\s+/,zt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/gi,Bt=/<([\\w:]+)/,$t=/<tbody/i,qt=/<|&#?\\w+;/,Ft=/<(?:script|style|link)/i,Zt=/checked\\s*(?:[^=]|=\\s*.checked.)/i,Wt=/^$|\\/(?:java|ecma)script/i,Ut=/^true\\/(.*)/,Xt=/^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g,Jt={option:[1,\"<select multiple='multiple'>\",\"</select>\"],legend:[1,\"<fieldset>\",\"</fieldset>\"],area:[1,\"<map>\",\"</map>\"],param:[1,\"<object>\",\"</object>\"],thead:[1,\"<table>\",\"</table>\"],tr:[2,\"<table><tbody>\",\"</tbody></table>\"],col:[2,\"<table><tbody></tbody><colgroup>\",\"</colgroup></table>\"],td:[3,\"<table><tbody><tr>\",\"</tr></tbody></table>\"],_default:nt.htmlSerialize?[0,\"\",\"\"]:[1,\"X<div>\",\"</div>\"]},Gt=m(ft),Kt=Gt.appendChild(ft.createElement(\"div\"));Jt.optgroup=Jt.option,Jt.tbody=Jt.tfoot=Jt.colgroup=Jt.caption=Jt.thead,Jt.th=Jt.td,it.extend({clone:function(e,t,n){var r,i,s,o,a,c=it.contains(e.ownerDocument,e);if(nt.html5Clone||it.isXMLDoc(e)||!Mt.test(\"<\"+e.nodeName+\">\")?s=e.cloneNode(!0):(Kt.innerHTML=e.outerHTML,Kt.removeChild(s=Kt.firstChild)),!(nt.noCloneEvent&&nt.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||it.isXMLDoc(e)))for(r=g(s),a=g(e),o=0;null!=(i=a[o]);++o)r[o]&&C(i,r[o]);if(t)if(n)for(a=a||g(e),r=r||g(s),o=0;null!=(i=a[o]);o++)_(i,r[o]);else _(e,s);return r=g(s,\"script\"),r.length>0&&w(r,!c&&g(e,\"script\")),r=a=i=null,s},buildFragment:function(e,t,n,r){for(var i,s,o,a,c,l,u,h=e.length,p=m(t),d=[],f=0;h>f;f++)if(s=e[f],s||0===s)if(\"object\"===it.type(s))it.merge(d,s.nodeType?[s]:s);else if(qt.test(s)){for(a=a||p.appendChild(t.createElement(\"div\")),c=(Bt.exec(s)||[\"\",\"\"])[1].toLowerCase(),u=Jt[c]||Jt._default,a.innerHTML=u[1]+s.replace(zt,\"<$1></$2>\")+u[2],i=u[0];i--;)a=a.lastChild;if(!nt.leadingWhitespace&&Vt.test(s)&&d.push(t.createTextNode(Vt.exec(s)[0])),!nt.tbody)for(s=\"table\"!==c||$t.test(s)?\"<table>\"!==u[1]||$t.test(s)?0:a:a.firstChild,i=s&&s.childNodes.length;i--;)it.nodeName(l=s.childNodes[i],\"tbody\")&&!l.childNodes.length&&s.removeChild(l);for(it.merge(d,a.childNodes),a.textContent=\"\";a.firstChild;)a.removeChild(a.firstChild);a=p.lastChild}else d.push(t.createTextNode(s));for(a&&p.removeChild(a),nt.appendChecked||it.grep(g(d,\"input\"),v),f=0;s=d[f++];)if((!r||-1===it.inArray(s,r))&&(o=it.contains(s.ownerDocument,s),a=g(p.appendChild(s),\"script\"),o&&w(a),n))for(i=0;s=a[i++];)Wt.test(s.type||\"\")&&n.push(s);return a=null,p},cleanData:function(e,t){for(var n,r,i,s,o=0,a=it.expando,c=it.cache,l=nt.deleteExpando,u=it.event.special;null!=(n=e[o]);o++)if((t||it.acceptData(n))&&(i=n[a],s=i&&c[i])){if(s.events)for(r in s.events)u[r]?it.event.remove(n,r):it.removeEvent(n,r,s.handle);c[i]&&(delete c[i],l?delete n[a]:typeof n.removeAttribute!==Ct?n.removeAttribute(a):n[a]=null,X.push(i))}}}),it.fn.extend({text:function(e){return Nt(this,function(e){return void 0===e?it.text(this):this.empty().append((this[0]&&this[0].ownerDocument||ft).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=y(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=y(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?it.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||it.cleanData(g(n)),n.parentNode&&(t&&it.contains(n.ownerDocument,n)&&w(g(n,\"script\")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&it.cleanData(g(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&it.nodeName(e,\"select\")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return it.clone(this,e,t)})},html:function(e){return Nt(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(Rt,\"\"):void 0;if(!(\"string\"!=typeof e||Ft.test(e)||!nt.htmlSerialize&&Mt.test(e)||!nt.leadingWhitespace&&Vt.test(e)||Jt[(Bt.exec(e)||[\"\",\"\"])[1].toLowerCase()])){e=e.replace(zt,\"<$1></$2>\");try{for(;r>n;n++)t=this[n]||{},1===t.nodeType&&(it.cleanData(g(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,it.cleanData(g(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=G.apply([],e);var n,r,i,s,o,a,c=0,l=this.length,u=this,h=l-1,p=e[0],d=it.isFunction(p);if(d||l>1&&\"string\"==typeof p&&!nt.checkClone&&Zt.test(p))return this.each(function(n){var r=u.eq(n);d&&(e[0]=p.call(this,n,r.html())),r.domManip(e,t)});if(l&&(a=it.buildFragment(e,this[0].ownerDocument,!1,this),n=a.firstChild,1===a.childNodes.length&&(a=n),n)){for(s=it.map(g(a,\"script\"),x),i=s.length;l>c;c++)r=a,c!==h&&(r=it.clone(r,!0,!0),i&&it.merge(s,g(r,\"script\"))),t.call(this[c],r,c);if(i)for(o=s[s.length-1].ownerDocument,it.map(s,b),c=0;i>c;c++)r=s[c],Wt.test(r.type||\"\")&&!it._data(r,\"globalEval\")&&it.contains(o,r)&&(r.src?it._evalUrl&&it._evalUrl(r.src):it.globalEval((r.text||r.textContent||r.innerHTML||\"\").replace(Xt,\"\")));a=n=null}return this}}),it.each({appendTo:\"append\",prependTo:\"prepend\",insertBefore:\"before\",insertAfter:\"after\",replaceAll:\"replaceWith\"},function(e,t){it.fn[e]=function(e){for(var n,r=0,i=[],s=it(e),o=s.length-1;o>=r;r++)n=r===o?this:this.clone(!0),it(s[r])[t](n),K.apply(i,n.get());return this.pushStack(i)}});var Yt,Qt={};!function(){var e;nt.shrinkWrapBlocks=function(){if(null!=e)return e;e=!1;var t,n,r;return n=ft.getElementsByTagName(\"body\")[0],n&&n.style?(t=ft.createElement(\"div\"),r=ft.createElement(\"div\"),r.style.cssText=\"position:absolute;border:0;width:0;height:0;top:0;left:-9999px\",n.appendChild(r).appendChild(t),typeof t.style.zoom!==Ct&&(t.style.cssText=\"-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1\",t.appendChild(ft.createElement(\"div\")).style.width=\"5px\",e=3!==t.offsetWidth),n.removeChild(r),e):void 0}}();var en,tn,nn=/^margin/,rn=new RegExp(\"^(\"+Tt+\")(?!px)[a-z%]+$\",\"i\"),sn=/^(top|right|bottom|left)$/;e.getComputedStyle?(en=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)},tn=function(e,t,n){var r,i,s,o,a=e.style;return n=n||en(e),o=n?n.getPropertyValue(t)||n[t]:void 0,n&&(\"\"!==o||it.contains(e.ownerDocument,e)||(o=it.style(e,t)),rn.test(o)&&nn.test(t)&&(r=a.width,i=a.minWidth,s=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=n.width,a.width=r,a.minWidth=i,a.maxWidth=s)),void 0===o?o:o+\"\"}):ft.documentElement.currentStyle&&(en=function(e){return e.currentStyle\n},tn=function(e,t,n){var r,i,s,o,a=e.style;return n=n||en(e),o=n?n[t]:void 0,null==o&&a&&a[t]&&(o=a[t]),rn.test(o)&&!sn.test(t)&&(r=a.left,i=e.runtimeStyle,s=i&&i.left,s&&(i.left=e.currentStyle.left),a.left=\"fontSize\"===t?\"1em\":o,o=a.pixelLeft+\"px\",a.left=r,s&&(i.left=s)),void 0===o?o:o+\"\"||\"auto\"}),function(){function t(){var t,n,r,i;n=ft.getElementsByTagName(\"body\")[0],n&&n.style&&(t=ft.createElement(\"div\"),r=ft.createElement(\"div\"),r.style.cssText=\"position:absolute;border:0;width:0;height:0;top:0;left:-9999px\",n.appendChild(r).appendChild(t),t.style.cssText=\"-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute\",s=o=!1,c=!0,e.getComputedStyle&&(s=\"1%\"!==(e.getComputedStyle(t,null)||{}).top,o=\"4px\"===(e.getComputedStyle(t,null)||{width:\"4px\"}).width,i=t.appendChild(ft.createElement(\"div\")),i.style.cssText=t.style.cssText=\"-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0\",i.style.marginRight=i.style.width=\"0\",t.style.width=\"1px\",c=!parseFloat((e.getComputedStyle(i,null)||{}).marginRight)),t.innerHTML=\"<table><tr><td></td><td>t</td></tr></table>\",i=t.getElementsByTagName(\"td\"),i[0].style.cssText=\"margin:0;border:0;padding:0;display:none\",a=0===i[0].offsetHeight,a&&(i[0].style.display=\"\",i[1].style.display=\"none\",a=0===i[0].offsetHeight),n.removeChild(r))}var n,r,i,s,o,a,c;n=ft.createElement(\"div\"),n.innerHTML=\"  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>\",i=n.getElementsByTagName(\"a\")[0],r=i&&i.style,r&&(r.cssText=\"float:left;opacity:.5\",nt.opacity=\"0.5\"===r.opacity,nt.cssFloat=!!r.cssFloat,n.style.backgroundClip=\"content-box\",n.cloneNode(!0).style.backgroundClip=\"\",nt.clearCloneStyle=\"content-box\"===n.style.backgroundClip,nt.boxSizing=\"\"===r.boxSizing||\"\"===r.MozBoxSizing||\"\"===r.WebkitBoxSizing,it.extend(nt,{reliableHiddenOffsets:function(){return null==a&&t(),a},boxSizingReliable:function(){return null==o&&t(),o},pixelPosition:function(){return null==s&&t(),s},reliableMarginRight:function(){return null==c&&t(),c}}))}(),it.swap=function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i};var on=/alpha\\([^)]*\\)/i,an=/opacity\\s*=\\s*([^)]*)/,cn=/^(none|table(?!-c[ea]).+)/,ln=new RegExp(\"^(\"+Tt+\")(.*)$\",\"i\"),un=new RegExp(\"^([+-])=(\"+Tt+\")\",\"i\"),hn={position:\"absolute\",visibility:\"hidden\",display:\"block\"},pn={letterSpacing:\"0\",fontWeight:\"400\"},dn=[\"Webkit\",\"O\",\"Moz\",\"ms\"];it.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=tn(e,\"opacity\");return\"\"===n?\"1\":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{\"float\":nt.cssFloat?\"cssFloat\":\"styleFloat\"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,s,o,a=it.camelCase(t),c=e.style;if(t=it.cssProps[a]||(it.cssProps[a]=E(c,a)),o=it.cssHooks[t]||it.cssHooks[a],void 0===n)return o&&\"get\"in o&&void 0!==(i=o.get(e,!1,r))?i:c[t];if(s=typeof n,\"string\"===s&&(i=un.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(it.css(e,t)),s=\"number\"),null!=n&&n===n&&(\"number\"!==s||it.cssNumber[a]||(n+=\"px\"),nt.clearCloneStyle||\"\"!==n||0!==t.indexOf(\"background\")||(c[t]=\"inherit\"),!(o&&\"set\"in o&&void 0===(n=o.set(e,n,r)))))try{c[t]=n}catch(l){}}},css:function(e,t,n,r){var i,s,o,a=it.camelCase(t);return t=it.cssProps[a]||(it.cssProps[a]=E(e.style,a)),o=it.cssHooks[t]||it.cssHooks[a],o&&\"get\"in o&&(s=o.get(e,!0,n)),void 0===s&&(s=tn(e,t,r)),\"normal\"===s&&t in pn&&(s=pn[t]),\"\"===n||n?(i=parseFloat(s),n===!0||it.isNumeric(i)?i||0:s):s}}),it.each([\"height\",\"width\"],function(e,t){it.cssHooks[t]={get:function(e,n,r){return n?cn.test(it.css(e,\"display\"))&&0===e.offsetWidth?it.swap(e,hn,function(){return L(e,t,r)}):L(e,t,r):void 0},set:function(e,n,r){var i=r&&en(e);return N(e,n,r?O(e,t,r,nt.boxSizing&&\"border-box\"===it.css(e,\"boxSizing\",!1,i),i):0)}}}),nt.opacity||(it.cssHooks.opacity={get:function(e,t){return an.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||\"\")?.01*parseFloat(RegExp.$1)+\"\":t?\"1\":\"\"},set:function(e,t){var n=e.style,r=e.currentStyle,i=it.isNumeric(t)?\"alpha(opacity=\"+100*t+\")\":\"\",s=r&&r.filter||n.filter||\"\";n.zoom=1,(t>=1||\"\"===t)&&\"\"===it.trim(s.replace(on,\"\"))&&n.removeAttribute&&(n.removeAttribute(\"filter\"),\"\"===t||r&&!r.filter)||(n.filter=on.test(s)?s.replace(on,i):s+\" \"+i)}}),it.cssHooks.marginRight=T(nt.reliableMarginRight,function(e,t){return t?it.swap(e,{display:\"inline-block\"},tn,[e,\"marginRight\"]):void 0}),it.each({margin:\"\",padding:\"\",border:\"Width\"},function(e,t){it.cssHooks[e+t]={expand:function(n){for(var r=0,i={},s=\"string\"==typeof n?n.split(\" \"):[n];4>r;r++)i[e+Et[r]+t]=s[r]||s[r-2]||s[0];return i}},nn.test(e)||(it.cssHooks[e+t].set=N)}),it.fn.extend({css:function(e,t){return Nt(this,function(e,t,n){var r,i,s={},o=0;if(it.isArray(t)){for(r=en(e),i=t.length;i>o;o++)s[t[o]]=it.css(e,t[o],!1,r);return s}return void 0!==n?it.style(e,t,n):it.css(e,t)},e,t,arguments.length>1)},show:function(){return A(this,!0)},hide:function(){return A(this)},toggle:function(e){return\"boolean\"==typeof e?e?this.show():this.hide():this.each(function(){At(this)?it(this).show():it(this).hide()})}}),it.Tween=P,P.prototype={constructor:P,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||\"swing\",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(it.cssNumber[n]?\"\":\"px\")},cur:function(){var e=P.propHooks[this.prop];return e&&e.get?e.get(this):P.propHooks._default.get(this)},run:function(e){var t,n=P.propHooks[this.prop];return this.pos=t=this.options.duration?it.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):P.propHooks._default.set(this),this}},P.prototype.init.prototype=P.prototype,P.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=it.css(e.elem,e.prop,\"\"),t&&\"auto\"!==t?t:0):e.elem[e.prop]},set:function(e){it.fx.step[e.prop]?it.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[it.cssProps[e.prop]]||it.cssHooks[e.prop])?it.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},P.propHooks.scrollTop=P.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},it.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},it.fx=P.prototype.init,it.fx.step={};var fn,mn,gn=/^(?:toggle|show|hide)$/,vn=new RegExp(\"^(?:([+-])=|)(\"+Tt+\")([a-z%]*)$\",\"i\"),yn=/queueHooks$/,xn=[D],bn={\"*\":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=vn.exec(t),s=i&&i[3]||(it.cssNumber[e]?\"\":\"px\"),o=(it.cssNumber[e]||\"px\"!==s&&+r)&&vn.exec(it.css(n.elem,e)),a=1,c=20;if(o&&o[3]!==s){s=s||o[3],i=i||[],o=+r||1;do a=a||\".5\",o/=a,it.style(n.elem,e,o+s);while(a!==(a=n.cur()/r)&&1!==a&&--c)}return i&&(o=n.start=+o||+r||0,n.unit=s,n.end=i[1]?o+(i[1]+1)*i[2]:+i[2]),n}]};it.Animation=it.extend(M,{tweener:function(e,t){it.isFunction(e)?(t=e,e=[\"*\"]):e=e.split(\" \");for(var n,r=0,i=e.length;i>r;r++)n=e[r],bn[n]=bn[n]||[],bn[n].unshift(t)},prefilter:function(e,t){t?xn.unshift(e):xn.push(e)}}),it.speed=function(e,t,n){var r=e&&\"object\"==typeof e?it.extend({},e):{complete:n||!n&&t||it.isFunction(e)&&e,duration:e,easing:n&&t||t&&!it.isFunction(t)&&t};return r.duration=it.fx.off?0:\"number\"==typeof r.duration?r.duration:r.duration in it.fx.speeds?it.fx.speeds[r.duration]:it.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue=\"fx\"),r.old=r.complete,r.complete=function(){it.isFunction(r.old)&&r.old.call(this),r.queue&&it.dequeue(this,r.queue)},r},it.fn.extend({fadeTo:function(e,t,n,r){return this.filter(At).css(\"opacity\",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=it.isEmptyObject(e),s=it.speed(t,n,r),o=function(){var t=M(this,it.extend({},e),s);(i||it._data(this,\"finish\"))&&t.stop(!0)};return o.finish=o,i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return\"string\"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||\"fx\",[]),this.each(function(){var t=!0,i=null!=e&&e+\"queueHooks\",s=it.timers,o=it._data(this);if(i)o[i]&&o[i].stop&&r(o[i]);else for(i in o)o[i]&&o[i].stop&&yn.test(i)&&r(o[i]);for(i=s.length;i--;)s[i].elem!==this||null!=e&&s[i].queue!==e||(s[i].anim.stop(n),t=!1,s.splice(i,1));(t||!n)&&it.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||\"fx\"),this.each(function(){var t,n=it._data(this),r=n[e+\"queue\"],i=n[e+\"queueHooks\"],s=it.timers,o=r?r.length:0;for(n.finish=!0,it.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;o>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),it.each([\"toggle\",\"show\",\"hide\"],function(e,t){var n=it.fn[t];it.fn[t]=function(e,r,i){return null==e||\"boolean\"==typeof e?n.apply(this,arguments):this.animate(j(t,!0),e,r,i)}}),it.each({slideDown:j(\"show\"),slideUp:j(\"hide\"),slideToggle:j(\"toggle\"),fadeIn:{opacity:\"show\"},fadeOut:{opacity:\"hide\"},fadeToggle:{opacity:\"toggle\"}},function(e,t){it.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),it.timers=[],it.fx.tick=function(){var e,t=it.timers,n=0;for(fn=it.now();n<t.length;n++)e=t[n],e()||t[n]!==e||t.splice(n--,1);t.length||it.fx.stop(),fn=void 0},it.fx.timer=function(e){it.timers.push(e),e()?it.fx.start():it.timers.pop()},it.fx.interval=13,it.fx.start=function(){mn||(mn=setInterval(it.fx.tick,it.fx.interval))},it.fx.stop=function(){clearInterval(mn),mn=null},it.fx.speeds={slow:600,fast:200,_default:400},it.fn.delay=function(e,t){return e=it.fx?it.fx.speeds[e]||e:e,t=t||\"fx\",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e,t,n,r,i;t=ft.createElement(\"div\"),t.setAttribute(\"className\",\"t\"),t.innerHTML=\"  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>\",r=t.getElementsByTagName(\"a\")[0],n=ft.createElement(\"select\"),i=n.appendChild(ft.createElement(\"option\")),e=t.getElementsByTagName(\"input\")[0],r.style.cssText=\"top:1px\",nt.getSetAttribute=\"t\"!==t.className,nt.style=/top/.test(r.getAttribute(\"style\")),nt.hrefNormalized=\"/a\"===r.getAttribute(\"href\"),nt.checkOn=!!e.value,nt.optSelected=i.selected,nt.enctype=!!ft.createElement(\"form\").enctype,n.disabled=!0,nt.optDisabled=!i.disabled,e=ft.createElement(\"input\"),e.setAttribute(\"value\",\"\"),nt.input=\"\"===e.getAttribute(\"value\"),e.value=\"t\",e.setAttribute(\"type\",\"radio\"),nt.radioValue=\"t\"===e.value}();var wn=/\\r/g;it.fn.extend({val:function(e){var t,n,r,i=this[0];{if(arguments.length)return r=it.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,it(this).val()):e,null==i?i=\"\":\"number\"==typeof i?i+=\"\":it.isArray(i)&&(i=it.map(i,function(e){return null==e?\"\":e+\"\"})),t=it.valHooks[this.type]||it.valHooks[this.nodeName.toLowerCase()],t&&\"set\"in t&&void 0!==t.set(this,i,\"value\")||(this.value=i))});if(i)return t=it.valHooks[i.type]||it.valHooks[i.nodeName.toLowerCase()],t&&\"get\"in t&&void 0!==(n=t.get(i,\"value\"))?n:(n=i.value,\"string\"==typeof n?n.replace(wn,\"\"):null==n?\"\":n)}}}),it.extend({valHooks:{option:{get:function(e){var t=it.find.attr(e,\"value\");return null!=t?t:it.trim(it.text(e))}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,s=\"select-one\"===e.type||0>i,o=s?null:[],a=s?i+1:r.length,c=0>i?a:s?i:0;a>c;c++)if(n=r[c],!(!n.selected&&c!==i||(nt.optDisabled?n.disabled:null!==n.getAttribute(\"disabled\"))||n.parentNode.disabled&&it.nodeName(n.parentNode,\"optgroup\"))){if(t=it(n).val(),s)return t;o.push(t)}return o},set:function(e,t){for(var n,r,i=e.options,s=it.makeArray(t),o=i.length;o--;)if(r=i[o],it.inArray(it.valHooks.option.get(r),s)>=0)try{r.selected=n=!0}catch(a){r.scrollHeight}else r.selected=!1;return n||(e.selectedIndex=-1),i}}}}),it.each([\"radio\",\"checkbox\"],function(){it.valHooks[this]={set:function(e,t){return it.isArray(t)?e.checked=it.inArray(it(e).val(),t)>=0:void 0}},nt.checkOn||(it.valHooks[this].get=function(e){return null===e.getAttribute(\"value\")?\"on\":e.value})});var _n,Cn,Sn=it.expr.attrHandle,kn=/^(?:checked|selected)$/i,Tn=nt.getSetAttribute,En=nt.input;it.fn.extend({attr:function(e,t){return Nt(this,it.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){it.removeAttr(this,e)})}}),it.extend({attr:function(e,t,n){var r,i,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return typeof e.getAttribute===Ct?it.prop(e,t,n):(1===s&&it.isXMLDoc(e)||(t=t.toLowerCase(),r=it.attrHooks[t]||(it.expr.match.bool.test(t)?Cn:_n)),void 0===n?r&&\"get\"in r&&null!==(i=r.get(e,t))?i:(i=it.find.attr(e,t),null==i?void 0:i):null!==n?r&&\"set\"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+\"\"),n):void it.removeAttr(e,t))},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(xt);if(s&&1===e.nodeType)for(;n=s[i++];)r=it.propFix[n]||n,it.expr.match.bool.test(n)?En&&Tn||!kn.test(n)?e[r]=!1:e[it.camelCase(\"default-\"+n)]=e[r]=!1:it.attr(e,n,\"\"),e.removeAttribute(Tn?n:r)},attrHooks:{type:{set:function(e,t){if(!nt.radioValue&&\"radio\"===t&&it.nodeName(e,\"input\")){var n=e.value;return e.setAttribute(\"type\",t),n&&(e.value=n),t}}}}}),Cn={set:function(e,t,n){return t===!1?it.removeAttr(e,n):En&&Tn||!kn.test(n)?e.setAttribute(!Tn&&it.propFix[n]||n,n):e[it.camelCase(\"default-\"+n)]=e[n]=!0,n}},it.each(it.expr.match.bool.source.match(/\\w+/g),function(e,t){var n=Sn[t]||it.find.attr;Sn[t]=En&&Tn||!kn.test(t)?function(e,t,r){var i,s;return r||(s=Sn[t],Sn[t]=i,i=null!=n(e,t,r)?t.toLowerCase():null,Sn[t]=s),i}:function(e,t,n){return n?void 0:e[it.camelCase(\"default-\"+t)]?t.toLowerCase():null}}),En&&Tn||(it.attrHooks.value={set:function(e,t,n){return it.nodeName(e,\"input\")?void(e.defaultValue=t):_n&&_n.set(e,t,n)}}),Tn||(_n={set:function(e,t,n){var r=e.getAttributeNode(n);return r||e.setAttributeNode(r=e.ownerDocument.createAttribute(n)),r.value=t+=\"\",\"value\"===n||t===e.getAttribute(n)?t:void 0}},Sn.id=Sn.name=Sn.coords=function(e,t,n){var r;return n?void 0:(r=e.getAttributeNode(t))&&\"\"!==r.value?r.value:null},it.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);return n&&n.specified?n.value:void 0},set:_n.set},it.attrHooks.contenteditable={set:function(e,t,n){_n.set(e,\"\"===t?!1:t,n)}},it.each([\"width\",\"height\"],function(e,t){it.attrHooks[t]={set:function(e,n){return\"\"===n?(e.setAttribute(t,\"auto\"),n):void 0}}})),nt.style||(it.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+\"\"}});var An=/^(?:input|select|textarea|button|object)$/i,Nn=/^(?:a|area)$/i;it.fn.extend({prop:function(e,t){return Nt(this,it.prop,e,t,arguments.length>1)},removeProp:function(e){return e=it.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(t){}})}}),it.extend({propFix:{\"for\":\"htmlFor\",\"class\":\"className\"},prop:function(e,t,n){var r,i,s,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return s=1!==o||!it.isXMLDoc(e),s&&(t=it.propFix[t]||t,i=it.propHooks[t]),void 0!==n?i&&\"set\"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&\"get\"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=it.find.attr(e,\"tabindex\");return t?parseInt(t,10):An.test(e.nodeName)||Nn.test(e.nodeName)&&e.href?0:-1}}}}),nt.hrefNormalized||it.each([\"href\",\"src\"],function(e,t){it.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),nt.optSelected||(it.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),it.each([\"tabIndex\",\"readOnly\",\"maxLength\",\"cellSpacing\",\"cellPadding\",\"rowSpan\",\"colSpan\",\"useMap\",\"frameBorder\",\"contentEditable\"],function(){it.propFix[this.toLowerCase()]=this}),nt.enctype||(it.propFix.enctype=\"encoding\");var On=/[\\t\\r\\n\\f]/g;it.fn.extend({addClass:function(e){var t,n,r,i,s,o,a=0,c=this.length,l=\"string\"==typeof e&&e;if(it.isFunction(e))return this.each(function(t){it(this).addClass(e.call(this,t,this.className))});if(l)for(t=(e||\"\").match(xt)||[];c>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(\" \"+n.className+\" \").replace(On,\" \"):\" \")){for(s=0;i=t[s++];)r.indexOf(\" \"+i+\" \")<0&&(r+=i+\" \");o=it.trim(r),n.className!==o&&(n.className=o)}return this},removeClass:function(e){var t,n,r,i,s,o,a=0,c=this.length,l=0===arguments.length||\"string\"==typeof e&&e;if(it.isFunction(e))return this.each(function(t){it(this).removeClass(e.call(this,t,this.className))});if(l)for(t=(e||\"\").match(xt)||[];c>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(\" \"+n.className+\" \").replace(On,\" \"):\"\")){for(s=0;i=t[s++];)for(;r.indexOf(\" \"+i+\" \")>=0;)r=r.replace(\" \"+i+\" \",\" \");o=e?it.trim(r):\"\",n.className!==o&&(n.className=o)}return this},toggleClass:function(e,t){var n=typeof e;return\"boolean\"==typeof t&&\"string\"===n?t?this.addClass(e):this.removeClass(e):this.each(it.isFunction(e)?function(n){it(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if(\"string\"===n)for(var t,r=0,i=it(this),s=e.match(xt)||[];t=s[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else(n===Ct||\"boolean\"===n)&&(this.className&&it._data(this,\"__className__\",this.className),this.className=this.className||e===!1?\"\":it._data(this,\"__className__\")||\"\")})},hasClass:function(e){for(var t=\" \"+e+\" \",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(\" \"+this[n].className+\" \").replace(On,\" \").indexOf(t)>=0)return!0;return!1}}),it.each(\"blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu\".split(\" \"),function(e,t){it.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),it.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,\"**\"):this.off(t,e||\"**\",n)}});var Ln=it.now(),Pn=/\\?/,In=/(,)|(\\[|{)|(}|])|\"(?:[^\"\\\\\\r\\n]|\\\\[\"\\\\\\/bfnrt]|\\\\u[\\da-fA-F]{4})*\"\\s*:?|true|false|null|-?(?!0\\d)\\d+(?:\\.\\d+|)(?:[eE][+-]?\\d+|)/g;it.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+\"\");var n,r=null,i=it.trim(t+\"\");return i&&!it.trim(i.replace(In,function(e,t,i,s){return n&&t&&(r=0),0===r?e:(n=i||t,r+=!s-!i,\"\")}))?Function(\"return \"+i)():it.error(\"Invalid JSON: \"+t)},it.parseXML=function(t){var n,r;if(!t||\"string\"!=typeof t)return null;try{e.DOMParser?(r=new DOMParser,n=r.parseFromString(t,\"text/xml\")):(n=new ActiveXObject(\"Microsoft.XMLDOM\"),n.async=\"false\",n.loadXML(t))}catch(i){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName(\"parsererror\").length||it.error(\"Invalid XML: \"+t),n};var jn,Hn,Dn=/#.*$/,Rn=/([?&])_=[^&]*/,Mn=/^(.*?):[ \\t]*([^\\r\\n]*)\\r?$/gm,Vn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,zn=/^(?:GET|HEAD)$/,Bn=/^\\/\\//,$n=/^([\\w.+-]+:)(?:\\/\\/(?:[^\\/?#]*@|)([^\\/?#:]*)(?::(\\d+)|)|)/,qn={},Fn={},Zn=\"*/\".concat(\"*\");try{Hn=location.href}catch(Wn){Hn=ft.createElement(\"a\"),Hn.href=\"\",Hn=Hn.href}jn=$n.exec(Hn.toLowerCase())||[],it.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Hn,type:\"GET\",isLocal:Vn.test(jn[1]),global:!0,processData:!0,async:!0,contentType:\"application/x-www-form-urlencoded; charset=UTF-8\",accepts:{\"*\":Zn,text:\"text/plain\",html:\"text/html\",xml:\"application/xml, text/xml\",json:\"application/json, text/javascript\"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:\"responseXML\",text:\"responseText\",json:\"responseJSON\"},converters:{\"* text\":String,\"text html\":!0,\"text json\":it.parseJSON,\"text xml\":it.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?B(B(e,it.ajaxSettings),t):B(it.ajaxSettings,e)},ajaxPrefilter:V(qn),ajaxTransport:V(Fn),ajax:function(e,t){function n(e,t,n,r){var i,u,v,y,b,_=t;2!==x&&(x=2,a&&clearTimeout(a),l=void 0,o=r||\"\",w.readyState=e>0?4:0,i=e>=200&&300>e||304===e,n&&(y=$(h,w,n)),y=q(h,y,w,i),i?(h.ifModified&&(b=w.getResponseHeader(\"Last-Modified\"),b&&(it.lastModified[s]=b),b=w.getResponseHeader(\"etag\"),b&&(it.etag[s]=b)),204===e||\"HEAD\"===h.type?_=\"nocontent\":304===e?_=\"notmodified\":(_=y.state,u=y.data,v=y.error,i=!v)):(v=_,(e||!_)&&(_=\"error\",0>e&&(e=0))),w.status=e,w.statusText=(t||_)+\"\",i?f.resolveWith(p,[u,_,w]):f.rejectWith(p,[w,_,v]),w.statusCode(g),g=void 0,c&&d.trigger(i?\"ajaxSuccess\":\"ajaxError\",[w,h,i?u:v]),m.fireWith(p,[w,_]),c&&(d.trigger(\"ajaxComplete\",[w,h]),--it.active||it.event.trigger(\"ajaxStop\")))}\"object\"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,s,o,a,c,l,u,h=it.ajaxSetup({},t),p=h.context||h,d=h.context&&(p.nodeType||p.jquery)?it(p):it.event,f=it.Deferred(),m=it.Callbacks(\"once memory\"),g=h.statusCode||{},v={},y={},x=0,b=\"canceled\",w={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!u)for(u={};t=Mn.exec(o);)u[t[1].toLowerCase()]=t[2];t=u[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return x||(e=y[n]=y[n]||e,v[e]=t),this},overrideMimeType:function(e){return x||(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>x)for(t in e)g[t]=[g[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||b;return l&&l.abort(t),n(0,t),this}};if(f.promise(w).complete=m.add,w.success=w.done,w.error=w.fail,h.url=((e||h.url||Hn)+\"\").replace(Dn,\"\").replace(Bn,jn[1]+\"//\"),h.type=t.method||t.type||h.method||h.type,h.dataTypes=it.trim(h.dataType||\"*\").toLowerCase().match(xt)||[\"\"],null==h.crossDomain&&(r=$n.exec(h.url.toLowerCase()),h.crossDomain=!(!r||r[1]===jn[1]&&r[2]===jn[2]&&(r[3]||(\"http:\"===r[1]?\"80\":\"443\"))===(jn[3]||(\"http:\"===jn[1]?\"80\":\"443\")))),h.data&&h.processData&&\"string\"!=typeof h.data&&(h.data=it.param(h.data,h.traditional)),z(qn,h,t,w),2===x)return w;c=h.global,c&&0===it.active++&&it.event.trigger(\"ajaxStart\"),h.type=h.type.toUpperCase(),h.hasContent=!zn.test(h.type),s=h.url,h.hasContent||(h.data&&(s=h.url+=(Pn.test(s)?\"&\":\"?\")+h.data,delete h.data),h.cache===!1&&(h.url=Rn.test(s)?s.replace(Rn,\"$1_=\"+Ln++):s+(Pn.test(s)?\"&\":\"?\")+\"_=\"+Ln++)),h.ifModified&&(it.lastModified[s]&&w.setRequestHeader(\"If-Modified-Since\",it.lastModified[s]),it.etag[s]&&w.setRequestHeader(\"If-None-Match\",it.etag[s])),(h.data&&h.hasContent&&h.contentType!==!1||t.contentType)&&w.setRequestHeader(\"Content-Type\",h.contentType),w.setRequestHeader(\"Accept\",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+(\"*\"!==h.dataTypes[0]?\", \"+Zn+\"; q=0.01\":\"\"):h.accepts[\"*\"]);for(i in h.headers)w.setRequestHeader(i,h.headers[i]);if(h.beforeSend&&(h.beforeSend.call(p,w,h)===!1||2===x))return w.abort();b=\"abort\";for(i in{success:1,error:1,complete:1})w[i](h[i]);if(l=z(Fn,h,t,w)){w.readyState=1,c&&d.trigger(\"ajaxSend\",[w,h]),h.async&&h.timeout>0&&(a=setTimeout(function(){w.abort(\"timeout\")},h.timeout));try{x=1,l.send(v,n)}catch(_){if(!(2>x))throw _;n(-1,_)}}else n(-1,\"No Transport\");return w},getJSON:function(e,t,n){return it.get(e,t,n,\"json\")},getScript:function(e,t){return it.get(e,void 0,t,\"script\")}}),it.each([\"get\",\"post\"],function(e,t){it[t]=function(e,n,r,i){return it.isFunction(n)&&(i=i||r,r=n,n=void 0),it.ajax({url:e,type:t,dataType:i,data:n,success:r})}}),it.each([\"ajaxStart\",\"ajaxStop\",\"ajaxComplete\",\"ajaxError\",\"ajaxSuccess\",\"ajaxSend\"],function(e,t){it.fn[t]=function(e){return this.on(t,e)}}),it._evalUrl=function(e){return it.ajax({url:e,type:\"GET\",dataType:\"script\",async:!1,global:!1,\"throws\":!0})},it.fn.extend({wrapAll:function(e){if(it.isFunction(e))return this.each(function(t){it(this).wrapAll(e.call(this,t))});if(this[0]){var t=it(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return this.each(it.isFunction(e)?function(t){it(this).wrapInner(e.call(this,t))}:function(){var t=it(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=it.isFunction(e);return this.each(function(n){it(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){it.nodeName(this,\"body\")||it(this).replaceWith(this.childNodes)}).end()}}),it.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!nt.reliableHiddenOffsets()&&\"none\"===(e.style&&e.style.display||it.css(e,\"display\"))},it.expr.filters.visible=function(e){return!it.expr.filters.hidden(e)};var Un=/%20/g,Xn=/\\[\\]$/,Jn=/\\r?\\n/g,Gn=/^(?:submit|button|image|reset|file)$/i,Kn=/^(?:input|select|textarea|keygen)/i;it.param=function(e,t){var n,r=[],i=function(e,t){t=it.isFunction(t)?t():null==t?\"\":t,r[r.length]=encodeURIComponent(e)+\"=\"+encodeURIComponent(t)};if(void 0===t&&(t=it.ajaxSettings&&it.ajaxSettings.traditional),it.isArray(e)||e.jquery&&!it.isPlainObject(e))it.each(e,function(){i(this.name,this.value)});else for(n in e)F(n,e[n],t,i);return r.join(\"&\").replace(Un,\"+\")},it.fn.extend({serialize:function(){return it.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=it.prop(this,\"elements\");return e?it.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!it(this).is(\":disabled\")&&Kn.test(this.nodeName)&&!Gn.test(e)&&(this.checked||!Ot.test(e))}).map(function(e,t){var n=it(this).val();return null==n?null:it.isArray(n)?it.map(n,function(e){return{name:t.name,value:e.replace(Jn,\"\\r\\n\")}}):{name:t.name,value:n.replace(Jn,\"\\r\\n\")}}).get()}}),it.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Z()||W()}:Z;var Yn=0,Qn={},er=it.ajaxSettings.xhr();e.ActiveXObject&&it(e).on(\"unload\",function(){for(var e in Qn)Qn[e](void 0,!0)}),nt.cors=!!er&&\"withCredentials\"in er,er=nt.ajax=!!er,er&&it.ajaxTransport(function(e){if(!e.crossDomain||nt.cors){var t;return{send:function(n,r){var i,s=e.xhr(),o=++Yn;if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)s[i]=e.xhrFields[i];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||n[\"X-Requested-With\"]||(n[\"X-Requested-With\"]=\"XMLHttpRequest\");for(i in n)void 0!==n[i]&&s.setRequestHeader(i,n[i]+\"\");s.send(e.hasContent&&e.data||null),t=function(n,i){var a,c,l;if(t&&(i||4===s.readyState))if(delete Qn[o],t=void 0,s.onreadystatechange=it.noop,i)4!==s.readyState&&s.abort();else{l={},a=s.status,\"string\"==typeof s.responseText&&(l.text=s.responseText);try{c=s.statusText}catch(u){c=\"\"}a||!e.isLocal||e.crossDomain?1223===a&&(a=204):a=l.text?200:404}l&&r(a,c,l,s.getAllResponseHeaders())},e.async?4===s.readyState?setTimeout(t):s.onreadystatechange=Qn[o]=t:t()},abort:function(){t&&t(void 0,!0)}}}}),it.ajaxSetup({accepts:{script:\"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript\"},contents:{script:/(?:java|ecma)script/},converters:{\"text script\":function(e){return it.globalEval(e),e}}}),it.ajaxPrefilter(\"script\",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type=\"GET\",e.global=!1)}),it.ajaxTransport(\"script\",function(e){if(e.crossDomain){var t,n=ft.head||it(\"head\")[0]||ft.documentElement;return{send:function(r,i){t=ft.createElement(\"script\"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||i(200,\"success\"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var tr=[],nr=/(=)\\?(?=&|$)|\\?\\?/;it.ajaxSetup({jsonp:\"callback\",jsonpCallback:function(){var e=tr.pop()||it.expando+\"_\"+Ln++;return this[e]=!0,e}}),it.ajaxPrefilter(\"json jsonp\",function(t,n,r){var i,s,o,a=t.jsonp!==!1&&(nr.test(t.url)?\"url\":\"string\"==typeof t.data&&!(t.contentType||\"\").indexOf(\"application/x-www-form-urlencoded\")&&nr.test(t.data)&&\"data\");return a||\"jsonp\"===t.dataTypes[0]?(i=t.jsonpCallback=it.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(nr,\"$1\"+i):t.jsonp!==!1&&(t.url+=(Pn.test(t.url)?\"&\":\"?\")+t.jsonp+\"=\"+i),t.converters[\"script json\"]=function(){return o||it.error(i+\" was not called\"),o[0]},t.dataTypes[0]=\"json\",s=e[i],e[i]=function(){o=arguments},r.always(function(){e[i]=s,t[i]&&(t.jsonpCallback=n.jsonpCallback,tr.push(i)),o&&it.isFunction(s)&&s(o[0]),o=s=void 0}),\"script\"):void 0}),it.parseHTML=function(e,t,n){if(!e||\"string\"!=typeof e)return null;\"boolean\"==typeof t&&(n=t,t=!1),t=t||ft;var r=ht.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=it.buildFragment([e],t,i),i&&i.length&&it(i).remove(),it.merge([],r.childNodes))};var rr=it.fn.load;it.fn.load=function(e,t,n){if(\"string\"!=typeof e&&rr)return rr.apply(this,arguments);var r,i,s,o=this,a=e.indexOf(\" \");return a>=0&&(r=it.trim(e.slice(a,e.length)),e=e.slice(0,a)),it.isFunction(t)?(n=t,t=void 0):t&&\"object\"==typeof t&&(s=\"POST\"),o.length>0&&it.ajax({url:e,type:s,dataType:\"html\",data:t}).done(function(e){i=arguments,o.html(r?it(\"<div>\").append(it.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){o.each(n,i||[e.responseText,t,e])}),this},it.expr.filters.animated=function(e){return it.grep(it.timers,function(t){return e===t.elem}).length};var ir=e.document.documentElement;it.offset={setOffset:function(e,t,n){var r,i,s,o,a,c,l,u=it.css(e,\"position\"),h=it(e),p={};\"static\"===u&&(e.style.position=\"relative\"),a=h.offset(),s=it.css(e,\"top\"),c=it.css(e,\"left\"),l=(\"absolute\"===u||\"fixed\"===u)&&it.inArray(\"auto\",[s,c])>-1,l?(r=h.position(),o=r.top,i=r.left):(o=parseFloat(s)||0,i=parseFloat(c)||0),it.isFunction(t)&&(t=t.call(e,n,a)),null!=t.top&&(p.top=t.top-a.top+o),null!=t.left&&(p.left=t.left-a.left+i),\"using\"in t?t.using.call(e,p):h.css(p)}},it.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){it.offset.setOffset(this,e,t)});var t,n,r={top:0,left:0},i=this[0],s=i&&i.ownerDocument;if(s)return t=s.documentElement,it.contains(t,i)?(typeof i.getBoundingClientRect!==Ct&&(r=i.getBoundingClientRect()),n=U(s),{top:r.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:r.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):r},position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return\"fixed\"===it.css(r,\"position\")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),it.nodeName(e[0],\"html\")||(n=e.offset()),n.top+=it.css(e[0],\"borderTopWidth\",!0),n.left+=it.css(e[0],\"borderLeftWidth\",!0)),{top:t.top-n.top-it.css(r,\"marginTop\",!0),left:t.left-n.left-it.css(r,\"marginLeft\",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||ir;e&&!it.nodeName(e,\"html\")&&\"static\"===it.css(e,\"position\");)e=e.offsetParent;return e||ir})}}),it.each({scrollLeft:\"pageXOffset\",scrollTop:\"pageYOffset\"},function(e,t){var n=/Y/.test(t);it.fn[e]=function(r){return Nt(this,function(e,r,i){var s=U(e);return void 0===i?s?t in s?s[t]:s.document.documentElement[r]:e[r]:void(s?s.scrollTo(n?it(s).scrollLeft():i,n?i:it(s).scrollTop()):e[r]=i)},e,r,arguments.length,null)}}),it.each([\"top\",\"left\"],function(e,t){it.cssHooks[t]=T(nt.pixelPosition,function(e,n){return n?(n=tn(e,t),rn.test(n)?it(e).position()[t]+\"px\":n):void 0})}),it.each({Height:\"height\",Width:\"width\"},function(e,t){it.each({padding:\"inner\"+e,content:t,\"\":\"outer\"+e},function(n,r){it.fn[r]=function(r,i){var s=arguments.length&&(n||\"boolean\"!=typeof r),o=n||(r===!0||i===!0?\"margin\":\"border\");return Nt(this,function(t,n,r){var i;return it.isWindow(t)?t.document.documentElement[\"client\"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body[\"scroll\"+e],i[\"scroll\"+e],t.body[\"offset\"+e],i[\"offset\"+e],i[\"client\"+e])):void 0===r?it.css(t,n,o):it.style(t,n,r,o)\n},t,s?r:void 0,s,null)}})}),it.fn.size=function(){return this.length},it.fn.andSelf=it.fn.addBack,\"function\"==typeof define&&define.amd&&define(\"jquery\",[],function(){return it});var sr=e.jQuery,or=e.$;return it.noConflict=function(t){return e.$===it&&(e.$=or),t&&e.jQuery===it&&(e.jQuery=sr),it},typeof t===Ct&&(e.jQuery=e.$=it),it}),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,a=r.slice,c=r.concat,l=i.toString,u=i.hasOwnProperty,h=r.forEach,p=r.map,d=r.reduce,f=r.reduceRight,m=r.filter,g=r.every,v=r.some,y=r.indexOf,x=r.lastIndexOf,b=Array.isArray,w=Object.keys,_=s.bind,C=function(e){return e instanceof C?e:this instanceof C?void(this._wrapped=e):new C(e)};\"undefined\"!=typeof exports?(\"undefined\"!=typeof module&&module.exports&&(exports=module.exports=C),exports._=C):e._=C,C.VERSION=\"1.6.0\";var S=C.each=C.forEach=function(e,t,r){if(null==e)return e;if(h&&e.forEach===h)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;s>i;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o=C.keys(e),i=0,s=o.length;s>i;i++)if(t.call(r,e[o[i]],o[i],e)===n)return;return e};C.map=C.collect=function(e,t,n){var r=[];return null==e?r:p&&e.map===p?e.map(t,n):(S(e,function(e,i,s){r.push(t.call(n,e,i,s))}),r)};var k=\"Reduce of empty array with no initial value\";C.reduce=C.foldl=C.inject=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),d&&e.reduce===d)return r&&(t=C.bind(t,r)),i?e.reduce(t,n):e.reduce(t);if(S(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)}),!i)throw new TypeError(k);return n},C.reduceRight=C.foldr=function(e,t,n,r){var i=arguments.length>2;if(null==e&&(e=[]),f&&e.reduceRight===f)return r&&(t=C.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=C.keys(e);s=o.length}if(S(e,function(a,c,l){c=o?o[--s]:--s,i?n=t.call(r,n,e[c],c,l):(n=e[c],i=!0)}),!i)throw new TypeError(k);return n},C.find=C.detect=function(e,t,n){var r;return T(e,function(e,i,s){return t.call(n,e,i,s)?(r=e,!0):void 0}),r},C.filter=C.select=function(e,t,n){var r=[];return null==e?r:m&&e.filter===m?e.filter(t,n):(S(e,function(e,i,s){t.call(n,e,i,s)&&r.push(e)}),r)},C.reject=function(e,t,n){return C.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},C.every=C.all=function(e,t,r){t||(t=C.identity);var i=!0;return null==e?i:g&&e.every===g?e.every(t,r):(S(e,function(e,s,o){return(i=i&&t.call(r,e,s,o))?void 0:n}),!!i)};var T=C.some=C.any=function(e,t,r){t||(t=C.identity);var i=!1;return null==e?i:v&&e.some===v?e.some(t,r):(S(e,function(e,s,o){return i||(i=t.call(r,e,s,o))?n:void 0}),!!i)};C.contains=C.include=function(e,t){return null==e?!1:y&&e.indexOf===y?-1!=e.indexOf(t):T(e,function(e){return e===t})},C.invoke=function(e,t){var n=a.call(arguments,2),r=C.isFunction(t);return C.map(e,function(e){return(r?t:e[t]).apply(e,n)})},C.pluck=function(e,t){return C.map(e,C.property(t))},C.where=function(e,t){return C.filter(e,C.matches(t))},C.findWhere=function(e,t){return C.find(e,C.matches(t))},C.max=function(e,t,n){if(!t&&C.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);var r=-1/0,i=-1/0;return S(e,function(e,s,o){var a=t?t.call(n,e,s,o):e;a>i&&(r=e,i=a)}),r},C.min=function(e,t,n){if(!t&&C.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);var r=1/0,i=1/0;return S(e,function(e,s,o){var a=t?t.call(n,e,s,o):e;i>a&&(r=e,i=a)}),r},C.shuffle=function(e){var t,n=0,r=[];return S(e,function(e){t=C.random(n++),r[n-1]=r[t],r[t]=e}),r},C.sample=function(e,t,n){return null==t||n?(e.length!==+e.length&&(e=C.values(e)),e[C.random(e.length-1)]):C.shuffle(e).slice(0,Math.max(0,t))};var E=function(e){return null==e?C.identity:C.isFunction(e)?e:C.property(e)};C.sortBy=function(e,t,n){return t=E(t),C.pluck(C.map(e,function(e,r,i){return{value:e,index:r,criteria:t.call(n,e,r,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return e.index-t.index}),\"value\")};var A=function(e){return function(t,n,r){var i={};return n=E(n),S(t,function(s,o){var a=n.call(r,s,o,t);e(i,a,s)}),i}};C.groupBy=A(function(e,t,n){C.has(e,t)?e[t].push(n):e[t]=[n]}),C.indexBy=A(function(e,t,n){e[t]=n}),C.countBy=A(function(e,t){C.has(e,t)?e[t]++:e[t]=1}),C.sortedIndex=function(e,t,n,r){n=E(n);for(var i=n.call(r,t),s=0,o=e.length;o>s;){var a=s+o>>>1;n.call(r,e[a])<i?s=a+1:o=a}return s},C.toArray=function(e){return e?C.isArray(e)?a.call(e):e.length===+e.length?C.map(e,C.identity):C.values(e):[]},C.size=function(e){return null==e?0:e.length===+e.length?e.length:C.keys(e).length},C.first=C.head=C.take=function(e,t,n){return null==e?void 0:null==t||n?e[0]:0>t?[]:a.call(e,0,t)},C.initial=function(e,t,n){return a.call(e,0,e.length-(null==t||n?1:t))},C.last=function(e,t,n){return null==e?void 0:null==t||n?e[e.length-1]:a.call(e,Math.max(e.length-t,0))},C.rest=C.tail=C.drop=function(e,t,n){return a.call(e,null==t||n?1:t)},C.compact=function(e){return C.filter(e,C.identity)};var N=function(e,t,n){return t&&C.every(e,C.isArray)?c.apply(n,e):(S(e,function(e){C.isArray(e)||C.isArguments(e)?t?o.apply(n,e):N(e,t,n):n.push(e)}),n)};C.flatten=function(e,t){return N(e,t,[])},C.without=function(e){return C.difference(e,a.call(arguments,1))},C.partition=function(e,t){var n=[],r=[];return S(e,function(e){(t(e)?n:r).push(e)}),[n,r]},C.uniq=C.unique=function(e,t,n,r){C.isFunction(t)&&(r=n,n=t,t=!1);var i=n?C.map(e,n,r):e,s=[],o=[];return S(i,function(n,r){(t?r&&o[o.length-1]===n:C.contains(o,n))||(o.push(n),s.push(e[r]))}),s},C.union=function(){return C.uniq(C.flatten(arguments,!0))},C.intersection=function(e){var t=a.call(arguments,1);return C.filter(C.uniq(e),function(e){return C.every(t,function(t){return C.contains(t,e)})})},C.difference=function(e){var t=c.apply(r,a.call(arguments,1));return C.filter(e,function(e){return!C.contains(t,e)})},C.zip=function(){for(var e=C.max(C.pluck(arguments,\"length\").concat(0)),t=new Array(e),n=0;e>n;n++)t[n]=C.pluck(arguments,\"\"+n);return t},C.object=function(e,t){if(null==e)return{};for(var n={},r=0,i=e.length;i>r;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},C.indexOf=function(e,t,n){if(null==e)return-1;var r=0,i=e.length;if(n){if(\"number\"!=typeof n)return r=C.sortedIndex(e,t),e[r]===t?r:-1;r=0>n?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;i>r;r++)if(e[r]===t)return r;return-1},C.lastIndexOf=function(e,t,n){if(null==e)return-1;var r=null!=n;if(x&&e.lastIndexOf===x)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var i=r?n:e.length;i--;)if(e[i]===t)return i;return-1},C.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);r>i;)s[i++]=e,e+=n;return s};var O=function(){};C.bind=function(e,t){var n,r;if(_&&e.bind===_)return _.apply(e,a.call(arguments,1));if(!C.isFunction(e))throw new TypeError;return n=a.call(arguments,2),r=function(){if(!(this instanceof r))return e.apply(t,n.concat(a.call(arguments)));O.prototype=e.prototype;var i=new O;O.prototype=null;var s=e.apply(i,n.concat(a.call(arguments)));return Object(s)===s?s:i}},C.partial=function(e){var t=a.call(arguments,1);return function(){for(var n=0,r=t.slice(),i=0,s=r.length;s>i;i++)r[i]===C&&(r[i]=arguments[n++]);for(;n<arguments.length;)r.push(arguments[n++]);return e.apply(this,r)}},C.bindAll=function(e){var t=a.call(arguments,1);if(0===t.length)throw new Error(\"bindAll must be passed function names\");return S(t,function(t){e[t]=C.bind(e[t],e)}),e},C.memoize=function(e,t){var n={};return t||(t=C.identity),function(){var r=t.apply(this,arguments);return C.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},C.delay=function(e,t){var n=a.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},C.defer=function(e){return C.delay.apply(C,[e,1].concat(a.call(arguments,1)))},C.throttle=function(e,t,n){var r,i,s,o=null,a=0;n||(n={});var c=function(){a=n.leading===!1?0:C.now(),o=null,s=e.apply(r,i),r=i=null};return function(){var l=C.now();a||n.leading!==!1||(a=l);var u=t-(l-a);return r=this,i=arguments,0>=u?(clearTimeout(o),o=null,a=l,s=e.apply(r,i),r=i=null):o||n.trailing===!1||(o=setTimeout(c,u)),s}},C.debounce=function(e,t,n){var r,i,s,o,a,c=function(){var l=C.now()-o;t>l?r=setTimeout(c,t-l):(r=null,n||(a=e.apply(s,i),s=i=null))};return function(){s=this,i=arguments,o=C.now();var l=n&&!r;return r||(r=setTimeout(c,t)),l&&(a=e.apply(s,i),s=i=null),a}},C.once=function(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}},C.wrap=function(e,t){return C.partial(t,e)},C.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},C.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},C.keys=function(e){if(!C.isObject(e))return[];if(w)return w(e);var t=[];for(var n in e)C.has(e,n)&&t.push(n);return t},C.values=function(e){for(var t=C.keys(e),n=t.length,r=new Array(n),i=0;n>i;i++)r[i]=e[t[i]];return r},C.pairs=function(e){for(var t=C.keys(e),n=t.length,r=new Array(n),i=0;n>i;i++)r[i]=[t[i],e[t[i]]];return r},C.invert=function(e){for(var t={},n=C.keys(e),r=0,i=n.length;i>r;r++)t[e[n[r]]]=n[r];return t},C.functions=C.methods=function(e){var t=[];for(var n in e)C.isFunction(e[n])&&t.push(n);return t.sort()},C.extend=function(e){return S(a.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},C.pick=function(e){var t={},n=c.apply(r,a.call(arguments,1));return S(n,function(n){n in e&&(t[n]=e[n])}),t},C.omit=function(e){var t={},n=c.apply(r,a.call(arguments,1));for(var i in e)C.contains(n,i)||(t[i]=e[i]);return t},C.defaults=function(e){return S(a.call(arguments,1),function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e},C.clone=function(e){return C.isObject(e)?C.isArray(e)?e.slice():C.extend({},e):e},C.tap=function(e,t){return t(e),e};var L=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof C&&(e=e._wrapped),t instanceof C&&(t=t._wrapped);var i=l.call(e);if(i!=l.call(t))return!1;switch(i){case\"[object String]\":return e==String(t);case\"[object Number]\":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case\"[object Date]\":case\"[object Boolean]\":return+e==+t;case\"[object RegExp]\":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(\"object\"!=typeof e||\"object\"!=typeof t)return!1;for(var s=n.length;s--;)if(n[s]==e)return r[s]==t;var o=e.constructor,a=t.constructor;if(o!==a&&!(C.isFunction(o)&&o instanceof o&&C.isFunction(a)&&a instanceof a)&&\"constructor\"in e&&\"constructor\"in t)return!1;n.push(e),r.push(t);var c=0,u=!0;if(\"[object Array]\"==i){if(c=e.length,u=c==t.length)for(;c--&&(u=L(e[c],t[c],n,r)););}else{for(var h in e)if(C.has(e,h)&&(c++,!(u=C.has(t,h)&&L(e[h],t[h],n,r))))break;if(u){for(h in t)if(C.has(t,h)&&!c--)break;u=!c}}return n.pop(),r.pop(),u};C.isEqual=function(e,t){return L(e,t,[],[])},C.isEmpty=function(e){if(null==e)return!0;if(C.isArray(e)||C.isString(e))return 0===e.length;for(var t in e)if(C.has(e,t))return!1;return!0},C.isElement=function(e){return!(!e||1!==e.nodeType)},C.isArray=b||function(e){return\"[object Array]\"==l.call(e)},C.isObject=function(e){return e===Object(e)},S([\"Arguments\",\"Function\",\"String\",\"Number\",\"Date\",\"RegExp\"],function(e){C[\"is\"+e]=function(t){return l.call(t)==\"[object \"+e+\"]\"}}),C.isArguments(arguments)||(C.isArguments=function(e){return!(!e||!C.has(e,\"callee\"))}),\"function\"!=typeof/./&&(C.isFunction=function(e){return\"function\"==typeof e}),C.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},C.isNaN=function(e){return C.isNumber(e)&&e!=+e},C.isBoolean=function(e){return e===!0||e===!1||\"[object Boolean]\"==l.call(e)},C.isNull=function(e){return null===e},C.isUndefined=function(e){return void 0===e},C.has=function(e,t){return u.call(e,t)},C.noConflict=function(){return e._=t,this},C.identity=function(e){return e},C.constant=function(e){return function(){return e}},C.property=function(e){return function(t){return t[e]}},C.matches=function(e){return function(t){if(t===e)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0}},C.times=function(e,t,n){for(var r=Array(Math.max(0,e)),i=0;e>i;i++)r[i]=t.call(n,i);return r},C.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},C.now=Date.now||function(){return(new Date).getTime()};var P={escape:{\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#x27;\"}};P.unescape=C.invert(P.escape);var I={escape:new RegExp(\"[\"+C.keys(P.escape).join(\"\")+\"]\",\"g\"),unescape:new RegExp(\"(\"+C.keys(P.unescape).join(\"|\")+\")\",\"g\")};C.each([\"escape\",\"unescape\"],function(e){C[e]=function(t){return null==t?\"\":(\"\"+t).replace(I[e],function(t){return P[e][t]})}}),C.result=function(e,t){if(null==e)return void 0;var n=e[t];return C.isFunction(n)?n.call(e):n},C.mixin=function(e){S(C.functions(e),function(t){var n=C[t]=e[t];C.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),M.call(this,n.apply(C,e))}})};var j=0;C.uniqueId=function(e){var t=++j+\"\";return e?e+t:t},C.templateSettings={evaluate:/<%([\\s\\S]+?)%>/g,interpolate:/<%=([\\s\\S]+?)%>/g,escape:/<%-([\\s\\S]+?)%>/g};var H=/(.)^/,D={\"'\":\"'\",\"\\\\\":\"\\\\\",\"\\r\":\"r\",\"\\n\":\"n\",\"\t\":\"t\",\"\\u2028\":\"u2028\",\"\\u2029\":\"u2029\"},R=/\\\\|'|\\r|\\n|\\t|\\u2028|\\u2029/g;C.template=function(e,t,n){var r;n=C.defaults({},n,C.templateSettings);var i=new RegExp([(n.escape||H).source,(n.interpolate||H).source,(n.evaluate||H).source].join(\"|\")+\"|$\",\"g\"),s=0,o=\"__p+='\";e.replace(i,function(t,n,r,i,a){return o+=e.slice(s,a).replace(R,function(e){return\"\\\\\"+D[e]}),n&&(o+=\"'+\\n((__t=(\"+n+\"))==null?'':_.escape(__t))+\\n'\"),r&&(o+=\"'+\\n((__t=(\"+r+\"))==null?'':__t)+\\n'\"),i&&(o+=\"';\\n\"+i+\"\\n__p+='\"),s=a+t.length,t}),o+=\"';\\n\",n.variable||(o=\"with(obj||{}){\\n\"+o+\"}\\n\"),o=\"var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\\n\"+o+\"return __p;\\n\";try{r=new Function(n.variable||\"obj\",\"_\",o)}catch(a){throw a.source=o,a}if(t)return r(t,C);var c=function(e){return r.call(this,e,C)};return c.source=\"function(\"+(n.variable||\"obj\")+\"){\\n\"+o+\"}\",c},C.chain=function(e){return C(e).chain()};var M=function(e){return this._chain?C(e).chain():e};C.mixin(C),S([\"pop\",\"push\",\"reverse\",\"shift\",\"sort\",\"splice\",\"unshift\"],function(e){var t=r[e];C.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),\"shift\"!=e&&\"splice\"!=e||0!==n.length||delete n[0],M.call(this,n)}}),S([\"concat\",\"join\",\"slice\"],function(e){var t=r[e];C.prototype[e]=function(){return M.call(this,t.apply(this._wrapped,arguments))}}),C.extend(C.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),\"function\"==typeof define&&define.amd&&define(\"underscore\",[],function(){return C})}.call(this),define(\"resolver/assets\",[\"underscore\"],function(e){return{keyRegex:/^(?:[a-z]{2}(?:-[A-Z]{2})?[\\/\\\\])(.+)/,getLocales:function(e){var t=[];return LAZO.isClient?t.concat(navigator.languages||[navigator.language]).concat([\"defaults\"]):t.concat(this.resolveAcceptLanguge(e._request.raw.req.headers[\"accept-language\"])).concat([\"defaults\"])},resolveAssets:function(t,n){for(var r,i=this.getLocales(n),s=i.length,o={};s--;)r=t[i[s]],e.isUndefined(r)||e.extend(o,r);return o},resolveAssetKey:function(e){return e.replace(this.keyRegex,\"$1\")},resolveAssetPath:function(e,t){var n=\"app\"===t?\"/\":\"/components/\";return n+t+\"/assets/\"+e},resolveAcceptLanguge:function(t){return t=e.map(t.split(\",\"),function(e){var t=e.split(\";\"),n=t[0].split(\"-\");return{language:n[0],langLocale:t[0],quality:t[1]?parseFloat(t[1].split(\"=\")[1]):1}}),t.sort(function(e,t){if(e.language===t.language){if(e.quality<t.quality)return 1;if(e.quality>t.quality)return-1}return 0}),e.map(t,function(e){return e.langLocale})}}}),define(\"assetsProvider\",[\"jquery\",\"underscore\",\"resolver/assets\"],function(e,t,n){return t.extend({get:function(n,r,i){for(var s,o=[],a={},c=n.length;c--;)(s=LAZO.ctl.ctx._rootCtx.assets[n[c]])?a[n[c]]=s:o.push(n[c]);return o.length?void e.ajax({data:{components:o.join(\",\")},error:function(e){i.error(e)},success:function(e){t.extend(LAZO.ctl.ctx._rootCtx.assets,e),i.success(t.extend(a,e))},url:\"/assets\"}):i.success(a)}},n)}),function(e,t){if(\"function\"==typeof define&&define.amd)define(\"backbone\",[\"underscore\",\"jquery\",\"exports\"],function(n,r,i){e.Backbone=t(e,i,n,r)});else if(\"undefined\"!=typeof exports){var n,r=require(\"underscore\");try{n=require(\"jquery\")}catch(i){}t(e,exports,r,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n,r){{var i=e.Backbone,s=[],o=(s.push,s.slice);s.splice}t.VERSION=\"1.1.1\",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var a=t.Events={on:function(e,t,n){if(!l(this,\"on\",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,r){if(!l(this,\"once\",e,[t,r])||!t)return this;var i=this,s=n.once(function(){i.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,r)},off:function(e,t,r){var i,s,o,a,c,u,h,p;if(!this._events||!l(this,\"off\",e,[t,r]))return this;if(!e&&!t&&!r)return this._events=void 0,this;for(a=e?[e]:n.keys(this._events),c=0,u=a.length;u>c;c++)if(e=a[c],o=this._events[e]){if(this._events[e]=i=[],t||r)for(h=0,p=o.length;p>h;h++)s=o[h],(t&&t!==s.callback&&t!==s.callback._callback||r&&r!==s.context)&&i.push(s);i.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=o.call(arguments,1);if(!l(this,\"trigger\",e,t))return this;var n=this._events[e],r=this._events.all;return n&&u(n,t),r&&u(r,arguments),this},stopListening:function(e,t,r){var i=this._listeningTo;if(!i)return this;var s=!t&&!r;r||\"object\"!=typeof t||(r=this),e&&((i={})[e._listenId]=e);for(var o in i)e=i[o],e.off(t,r,this),(s||n.isEmpty(e._events))&&delete this._listeningTo[o];return this}},c=/\\s+/,l=function(e,t,n,r){if(!n)return!0;if(\"object\"==typeof n){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(c.test(n)){for(var s=n.split(c),o=0,a=s.length;a>o;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},u=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],a=t[2];switch(t.length){case 0:for(;++r<i;)(n=e[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=e[r]).callback.call(n.ctx,s);return;case 2:for(;++r<i;)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:for(;++r<i;)(n=e[r]).callback.call(n.ctx,s,o,a);return;default:for(;++r<i;)(n=e[r]).callback.apply(n.ctx,t);return}},h={listenTo:\"on\",listenToOnce:\"once\"};n.each(h,function(e,t){a[t]=function(t,r,i){var s=this._listeningTo||(this._listeningTo={}),o=t._listenId||(t._listenId=n.uniqueId(\"l\"));return s[o]=t,i||\"object\"!=typeof r||(i=this),t[e](r,i,this),this}}),a.bind=a.on,a.unbind=a.off,n.extend(t,a);var p=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId(\"c\"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{}),r=n.defaults({},r,n.result(this,\"defaults\")),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(p.prototype,a,{changed:null,validationError:null,idAttribute:\"id\",initialize:function(){},toJSON:function(){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,r){var i,s,o,a,c,l,u,h;if(null==e)return this;if(\"object\"==typeof e?(s=e,r=t):(s={})[e]=t,r||(r={}),!this._validate(s,r))return!1;o=r.unset,c=r.silent,a=[],l=this._changing,this._changing=!0,l||(this._previousAttributes=n.clone(this.attributes),this.changed={}),h=this.attributes,u=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(i in s)t=s[i],n.isEqual(h[i],t)||a.push(i),n.isEqual(u[i],t)?delete this.changed[i]:this.changed[i]=t,o?delete h[i]:h[i]=t;if(!c){a.length&&(this._pending=r);for(var p=0,d=a.length;d>p;p++)this.trigger(\"change:\"+a[p],this,h[a[p]],r)}if(l)return this;if(!c)for(;this._pending;)r=this._pending,this._pending=!1,this.trigger(\"change\",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,r=!1,i=this._changing?this._previousAttributes:this.attributes;for(var s in e)n.isEqual(i[s],t=e[s])||((r||(r={}))[s]=t);return r},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,r=e.success;return e.success=function(n){return t.set(t.parse(n,e),e)?(r&&r(t,n,e),void t.trigger(\"sync\",t,n,e)):!1},R(this,e),this.sync(\"read\",this,e)},save:function(e,t,r){var i,s,o,a=this.attributes;if(null==e||\"object\"==typeof e?(i=e,r=t):(i={})[e]=t,r=n.extend({validate:!0},r),i&&!r.wait){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;i&&r.wait&&(this.attributes=n.extend({},a,i)),void 0===r.parse&&(r.parse=!0);var c=this,l=r.success;return r.success=function(e){c.attributes=a;var t=c.parse(e,r);return r.wait&&(t=n.extend(i||{},t)),n.isObject(t)&&!c.set(t,r)?!1:(l&&l(c,e,r),void c.trigger(\"sync\",c,e,r))},R(this,r),s=this.isNew()?\"create\":r.patch?\"patch\":\"update\",\"patch\"===s&&(r.attrs=i),o=this.sync(s,this,r),i&&r.wait&&(this.attributes=a),o},destroy:function(e){e=e?n.clone(e):{};var t=this,r=e.success,i=function(){t.trigger(\"destroy\",t,t.collection,e)};if(e.success=function(n){(e.wait||t.isNew())&&i(),r&&r(t,n,e),t.isNew()||t.trigger(\"sync\",t,n,e)},this.isNew())return e.success(),!1;R(this,e);var s=this.sync(\"delete\",this,e);return e.wait||i(),s},url:function(){var e=n.result(this,\"urlRoot\")||n.result(this.collection,\"url\")||D();return this.isNew()?e:e.replace(/([^\\/])$/,\"$1/\")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return r?(this.trigger(\"invalid\",this,r,n.extend(t,{validationError:r})),!1):!0}});var d=[\"keys\",\"values\",\"pairs\",\"invert\",\"pick\",\"omit\"];n.each(d,function(e){p.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var f=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},m={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};n.extend(f.prototype,a,{model:p,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,g))},remove:function(e,t){var r=!n.isArray(e);e=r?[e]:n.clone(e),t||(t={});var i,s,o,a;for(i=0,s=e.length;s>i;i++)a=e[i]=this.get(e[i]),a&&(delete this._byId[a.id],delete this._byId[a.cid],o=this.indexOf(a),this.models.splice(o,1),this.length--,t.silent||(t.index=o,a.trigger(\"remove\",a,this,t)),this._removeReference(a,t));return r?e[0]:e},set:function(e,t){t=n.defaults({},t,m),t.parse&&(e=this.parse(e,t));var r=!n.isArray(e);e=r?e?[e]:[]:n.clone(e);var i,s,o,a,c,l,u,h=t.at,d=this.model,f=this.comparator&&null==h&&t.sort!==!1,g=n.isString(this.comparator)?this.comparator:null,v=[],y=[],x={},b=t.add,w=t.merge,_=t.remove,C=!f&&b&&_?[]:!1;for(i=0,s=e.length;s>i;i++){if(c=e[i]||{},o=c instanceof p?a=c:c[d.prototype.idAttribute||\"id\"],l=this.get(o))_&&(x[l.cid]=!0),w&&(c=c===a?a.attributes:c,t.parse&&(c=l.parse(c,t)),l.set(c,t),f&&!u&&l.hasChanged(g)&&(u=!0)),e[i]=l;else if(b){if(a=e[i]=this._prepareModel(c,t),!a)continue;v.push(a),this._addReference(a,t)}a=l||a,!C||!a.isNew()&&x[a.id]||C.push(a),x[a.id]=!0}if(_){for(i=0,s=this.length;s>i;++i)x[(a=this.models[i]).cid]||y.push(a);y.length&&this.remove(y,t)}if(v.length||C&&C.length)if(f&&(u=!0),this.length+=v.length,null!=h)for(i=0,s=v.length;s>i;i++)this.models.splice(h+i,0,v[i]);else{C&&(this.models.length=0);var S=C||v;for(i=0,s=S.length;s>i;i++)this.models.push(S[i])}if(u&&this.sort({silent:!0}),!t.silent){for(i=0,s=v.length;s>i;i++)(a=v[i]).trigger(\"add\",a,this,t);(u||C&&C.length)&&this.trigger(\"sort\",this,t)}return r?e[0]:e},reset:function(e,t){t||(t={});for(var r=0,i=this.models.length;i>r;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger(\"reset\",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return o.apply(this.models,arguments)},get:function(e){return null==e?void 0:this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?\"find\":\"filter\"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error(\"Cannot sort a set without a comparator\");return e||(e={}),n.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger(\"sort\",this,e),this},pluck:function(e){return n.invoke(this.models,\"get\",e)},fetch:function(e){e=e?n.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,r=this;return e.success=function(n){var i=e.reset?\"reset\":\"set\";r[i](n,e),t&&t(r,n,e),r.trigger(\"sync\",r,n,e)},R(this,e),this.sync(\"read\",this,e)},create:function(e,t){if(t=t?n.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var r=this,i=t.success;return t.success=function(e,n){t.wait&&r.add(e,t),i&&i(e,n,t)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof p)return e;t=t?n.clone(t):{},t.collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger(\"invalid\",this,r.validationError,t),!1):r},_addReference:function(e){this._byId[e.cid]=e,null!=e.id&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on(\"all\",this._onModelEvent,this)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off(\"all\",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){(\"add\"!==e&&\"remove\"!==e||n===this)&&(\"destroy\"===e&&this.remove(t,r),t&&e===\"change:\"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var v=[\"forEach\",\"each\",\"map\",\"collect\",\"reduce\",\"foldl\",\"inject\",\"reduceRight\",\"foldr\",\"find\",\"detect\",\"filter\",\"select\",\"reject\",\"every\",\"all\",\"some\",\"any\",\"include\",\"contains\",\"invoke\",\"max\",\"min\",\"toArray\",\"size\",\"first\",\"head\",\"take\",\"initial\",\"rest\",\"tail\",\"drop\",\"last\",\"without\",\"difference\",\"indexOf\",\"shuffle\",\"lastIndexOf\",\"isEmpty\",\"chain\",\"sample\"];n.each(v,function(e){f.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var y=[\"groupBy\",\"countBy\",\"sortBy\",\"indexBy\"];n.each(y,function(e){f.prototype[e]=function(t,r){var i=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,i,r)}});var x=t.View=function(e){this.cid=n.uniqueId(\"view\"),e||(e={}),n.extend(this,n.pick(e,w)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},b=/^(\\S+)\\s*(.*)$/,w=[\"model\",\"collection\",\"el\",\"id\",\"attributes\",\"className\",\"tagName\",\"events\"];n.extend(x.prototype,a,{tagName:\"div\",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,\"events\")))return this;this.undelegateEvents();for(var t in e){var r=e[t];if(n.isFunction(r)||(r=this[e[t]]),r){var i=t.match(b),s=i[1],o=i[2];r=n.bind(r,this),s+=\".delegateEvents\"+this.cid,\"\"===o?this.$el.on(s,r):this.$el.on(s,o,r)}}return this},undelegateEvents:function(){return this.$el.off(\".delegateEvents\"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(n.result(this,\"el\"),!1);else{var e=n.extend({},n.result(this,\"attributes\"));this.id&&(e.id=n.result(this,\"id\")),this.className&&(e[\"class\"]=n.result(this,\"className\"));var r=t.$(\"<\"+n.result(this,\"tagName\")+\">\").attr(e);this.setElement(r,!1)}}}),t.sync=function(e,r,i){var s=C[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:s,dataType:\"json\"};if(i.url||(o.url=n.result(r,\"url\")||D()),null!=i.data||!r||\"create\"!==e&&\"update\"!==e&&\"patch\"!==e||(o.contentType=\"application/json\",o.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(o.contentType=\"application/x-www-form-urlencoded\",o.data=o.data?{model:o.data}:{}),i.emulateHTTP&&(\"PUT\"===s||\"DELETE\"===s||\"PATCH\"===s)){o.type=\"POST\",i.emulateJSON&&(o.data._method=s);var a=i.beforeSend;i.beforeSend=function(e){return e.setRequestHeader(\"X-HTTP-Method-Override\",s),a?a.apply(this,arguments):void 0}}\"GET\"===o.type||i.emulateJSON||(o.processData=!1),\"PATCH\"===o.type&&_&&(o.xhr=function(){return new ActiveXObject(\"Microsoft.XMLHTTP\")});var c=i.xhr=t.ajax(n.extend(o,i));return r.trigger(\"request\",r,c,i),c};var _=!(\"undefined\"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),C={create:\"POST\",update:\"PUT\",patch:\"PATCH\",\"delete\":\"DELETE\",read:\"GET\"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var S=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},k=/\\((.*?)\\)/g,T=/(\\(\\?)?:\\w+/g,E=/\\*\\w+/g,A=/[\\-{}\\[\\]+?.,\\\\\\^$|#\\s]/g;n.extend(S.prototype,a,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=\"\"),i||(i=this[r]);var s=this;return t.history.route(e,function(n){var o=s._extractParameters(e,n);s.execute(i,o),s.trigger.apply(s,[\"route:\"+r].concat(o)),s.trigger(\"route\",r,o),t.history.trigger(\"route\",s,r,o)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,\"routes\");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(A,\"\\\\$&\").replace(k,\"(?:$1)?\").replace(T,function(e,t){return t?e:\"([^/?]+)\"}).replace(E,\"([^?]*?)\"),new RegExp(\"^\"+e+\"(?:\\\\?(.*))?$\")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null})}});var N=t.History=function(){this.handlers=[],n.bindAll(this,\"checkUrl\"),\"undefined\"!=typeof window&&(this.location=window.location,this.history=window.history)},O=/^[#\\/]|\\s+$/g,L=/^\\/+|\\/+$/g,P=/msie [\\w.]+/,I=/\\/$/,j=/#.*$/;N.started=!1,n.extend(N.prototype,a,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\\/]$/,\"$&/\")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);\nreturn t?t[1]:\"\"},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(I,\"\");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(O,\"\")},start:function(e){if(N.started)throw new Error(\"Backbone.history has already been started\");N.started=!0,this.options=n.extend({root:\"/\"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment(),i=document.documentMode,s=P.exec(navigator.userAgent.toLowerCase())&&(!i||7>=i);if(this.root=(\"/\"+this.root+\"/\").replace(L,\"/\"),s&&this._wantsHashChange){var o=t.$('<iframe src=\"javascript:0\" tabindex=\"-1\">');this.iframe=o.hide().appendTo(\"body\")[0].contentWindow,this.navigate(r)}this._hasPushState?t.$(window).on(\"popstate\",this.checkUrl):this._wantsHashChange&&\"onhashchange\"in window&&!s?t.$(window).on(\"hashchange\",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=r;var a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+\"#\"+this.fragment),!0;this._hasPushState&&this.atRoot()&&a.hash&&(this.fragment=this.getHash().replace(O,\"\"),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){t.$(window).off(\"popstate\",this.checkUrl).off(\"hashchange\",this.checkUrl),clearInterval(this._checkUrlInterval),N.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0})},navigate:function(e,t){if(!N.started)return!1;t&&t!==!0||(t={trigger:!!t});var n=this.root+(e=this.getFragment(e||\"\"));if(e=e.replace(j,\"\"),this.fragment!==e){if(this.fragment=e,\"\"===e&&\"/\"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[t.replace?\"replaceState\":\"pushState\"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,\"\");e.replace(r+\"#\"+t)}else e.hash=\"#\"+t}}),t.history=new N;var H=function(e,t){var r,i=this;r=e&&n.has(e,\"constructor\")?e.constructor:function(){return i.apply(this,arguments)},n.extend(r,i,t);var s=function(){this.constructor=r};return s.prototype=i.prototype,r.prototype=new s,e&&n.extend(r.prototype,e),r.__super__=i.prototype,r};p.extend=f.extend=S.extend=x.extend=N.extend=H;var D=function(){throw new Error('A \"url\" property or function must be specified')},R=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger(\"error\",e,r,t)}};return t}),define(\"base\",[\"backbone\"],function(e){var t=function(){};return t.extend=e.Model.extend,t}),define(\"assets\",[\"assetsProvider\",\"base\"],function(e,t){return t.extend(e)}),function(){function e(e){var n=!1;return function(){if(n)throw new Error(\"Callback was already called.\");n=!0,e.apply(t,arguments)}}var t,n,r={};t=this,null!=t&&(n=t.async),r.noConflict=function(){return t.async=n,r};var i=Object.prototype.toString,s=Array.isArray||function(e){return\"[object Array]\"===i.call(e)},o=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n+=1)t(e[n],n,e)},a=function(e,t){if(e.map)return e.map(t);var n=[];return o(e,function(e,r,i){n.push(t(e,r,i))}),n},c=function(e,t,n){return e.reduce?e.reduce(t,n):(o(e,function(e,r,i){n=t(n,e,r,i)}),n)},l=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};\"undefined\"!=typeof process&&process.nextTick?(r.nextTick=process.nextTick,r.setImmediate=\"undefined\"!=typeof setImmediate?function(e){setImmediate(e)}:r.nextTick):\"function\"==typeof setImmediate?(r.nextTick=function(e){setImmediate(e)},r.setImmediate=r.nextTick):(r.nextTick=function(e){setTimeout(e,0)},r.setImmediate=r.nextTick),r.each=function(t,n,r){function i(e){e?(r(e),r=function(){}):(s+=1,s>=t.length&&r())}if(r=r||function(){},!t.length)return r();var s=0;o(t,function(t){n(t,e(i))})},r.forEach=r.each,r.eachSeries=function(e,t,n){if(n=n||function(){},!e.length)return n();var r=0,i=function(){t(e[r],function(t){t?(n(t),n=function(){}):(r+=1,r>=e.length?n():i())})};i()},r.forEachSeries=r.eachSeries,r.eachLimit=function(e,t,n,r){var i=u(t);i.apply(null,[e,n,r])},r.forEachLimit=r.eachLimit;var u=function(e){return function(t,n,r){if(r=r||function(){},!t.length||0>=e)return r();var i=0,s=0,o=0;!function a(){if(i>=t.length)return r();for(;e>o&&s<t.length;)s+=1,o+=1,n(t[s-1],function(e){e?(r(e),r=function(){}):(i+=1,o-=1,i>=t.length?r():a())})}()}},h=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[r.each].concat(t))}},p=function(e,t){return function(){var n=Array.prototype.slice.call(arguments);return t.apply(null,[u(e)].concat(n))}},d=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[r.eachSeries].concat(t))}},f=function(e,t,n,r){var i=[];t=a(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n,r){i[e.index]=r,t(n)})},function(e){r(e,i)})};r.map=h(f),r.mapSeries=d(f),r.mapLimit=function(e,t,n,r){return m(t)(e,n,r)};var m=function(e){return p(e,f)};r.reduce=function(e,t,n,i){r.eachSeries(e,function(e,r){n(t,e,function(e,n){t=n,r(e)})},function(e){i(e,t)})},r.inject=r.reduce,r.foldl=r.reduce,r.reduceRight=function(e,t,n,i){var s=a(e,function(e){return e}).reverse();r.reduce(s,t,n,i)},r.foldr=r.reduceRight;var g=function(e,t,n,r){var i=[];t=a(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n){n&&i.push(e),t()})},function(){r(a(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};r.filter=h(g),r.filterSeries=d(g),r.select=r.filter,r.selectSeries=r.filterSeries;var v=function(e,t,n,r){var i=[];t=a(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n){n||i.push(e),t()})},function(){r(a(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};r.reject=h(v),r.rejectSeries=d(v);var y=function(e,t,n,r){e(t,function(e,t){n(e,function(n){n?(r(e),r=function(){}):t()})},function(){r()})};r.detect=h(y),r.detectSeries=d(y),r.some=function(e,t,n){r.each(e,function(e,r){t(e,function(e){e&&(n(!0),n=function(){}),r()})},function(){n(!1)})},r.any=r.some,r.every=function(e,t,n){r.each(e,function(e,r){t(e,function(e){e||(n(!1),n=function(){}),r()})},function(){n(!0)})},r.all=r.every,r.sortBy=function(e,t,n){r.map(e,function(e,n){t(e,function(t,r){t?n(t):n(null,{value:e,criteria:r})})},function(e,t){if(e)return n(e);var r=function(e,t){var n=e.criteria,r=t.criteria;return r>n?-1:n>r?1:0};n(null,a(t.sort(r),function(e){return e.value}))})},r.auto=function(e,t){t=t||function(){};var n=l(e),i=n.length;if(!i)return t();var a={},u=[],h=function(e){u.unshift(e)},p=function(e){for(var t=0;t<u.length;t+=1)if(u[t]===e)return void u.splice(t,1)},d=function(){i--,o(u.slice(0),function(e){e()})};h(function(){if(!i){var e=t;t=function(){},e(null,a)}}),o(n,function(n){var i=s(e[n])?e[n]:[e[n]],u=function(e){var i=Array.prototype.slice.call(arguments,1);if(i.length<=1&&(i=i[0]),e){var s={};o(l(a),function(e){s[e]=a[e]}),s[n]=i,t(e,s),t=function(){}}else a[n]=i,r.setImmediate(d)},f=i.slice(0,Math.abs(i.length-1))||[],m=function(){return c(f,function(e,t){return e&&a.hasOwnProperty(t)},!0)&&!a.hasOwnProperty(n)};if(m())i[i.length-1](u,a);else{var g=function(){m()&&(p(g),i[i.length-1](u,a))};h(g)}})},r.retry=function(e,t,n){var i=5,s=[];\"function\"==typeof e&&(n=t,t=e,e=i),e=parseInt(e,10)||i;var o=function(i,o){for(var a=function(e,t){return function(n){e(function(e,r){n(!e||t,{err:e,result:r})},o)}};e;)s.push(a(t,!(e-=1)));r.series(s,function(e,t){t=t[t.length-1],(i||n)(t.err,t.result)})};return n?o():o},r.waterfall=function(e,t){if(t=t||function(){},!s(e)){var n=new Error(\"First argument to waterfall must be an array of functions\");return t(n)}if(!e.length)return t();var i=function(e){return function(n){if(n)t.apply(null,arguments),t=function(){};else{var s=Array.prototype.slice.call(arguments,1),o=e.next();s.push(o?i(o):t),r.setImmediate(function(){e.apply(null,s)})}}};i(r.iterator(e))()};var x=function(e,t,n){if(n=n||function(){},s(t))e.map(t,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),t.call(null,e,n)})},n);else{var r={};e.each(l(t),function(e,n){t[e](function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[e]=i,n(t)})},function(e){n(e,r)})}};r.parallel=function(e,t){x({map:r.map,each:r.each},e,t)},r.parallelLimit=function(e,t,n){x({map:m(t),each:u(t)},e,n)},r.series=function(e,t){if(t=t||function(){},s(e))r.mapSeries(e,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),t.call(null,e,n)})},t);else{var n={};r.eachSeries(l(e),function(t,r){e[t](function(e){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),n[t]=i,r(e)})},function(e){t(e,n)})}},r.iterator=function(e){var t=function(n){var r=function(){return e.length&&e[n].apply(null,arguments),r.next()};return r.next=function(){return n<e.length-1?t(n+1):null},r};return t(0)},r.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var b=function(e,t,n,r){var i=[];e(t,function(e,t){n(e,function(e,n){i=i.concat(n||[]),t(e)})},function(e){r(e,i)})};r.concat=h(b),r.concatSeries=d(b),r.whilst=function(e,t,n){e()?t(function(i){return i?n(i):void r.whilst(e,t,n)}):n()},r.doWhilst=function(e,t,n){e(function(i){if(i)return n(i);var s=Array.prototype.slice.call(arguments,1);t.apply(null,s)?r.doWhilst(e,t,n):n()})},r.until=function(e,t,n){e()?n():t(function(i){return i?n(i):void r.until(e,t,n)})},r.doUntil=function(e,t,n){e(function(i){if(i)return n(i);var s=Array.prototype.slice.call(arguments,1);t.apply(null,s)?n():r.doUntil(e,t,n)})},r.queue=function(t,n){function i(e,t,n,i){return s(t)||(t=[t]),0==t.length?r.setImmediate(function(){e.drain&&e.drain()}):void o(t,function(t){var s={data:t,callback:\"function\"==typeof i?i:null};n?e.tasks.unshift(s):e.tasks.push(s),e.saturated&&e.tasks.length===e.concurrency&&e.saturated(),r.setImmediate(e.process)})}void 0===n&&(n=1);var a=0,c={tasks:[],concurrency:n,saturated:null,empty:null,drain:null,paused:!1,push:function(e,t){i(c,e,!1,t)},unshift:function(e,t){i(c,e,!0,t)},process:function(){if(!c.paused&&a<c.concurrency&&c.tasks.length){var n=c.tasks.shift();c.empty&&0===c.tasks.length&&c.empty(),a+=1;var r=function(){a-=1,n.callback&&n.callback.apply(n,arguments),c.drain&&c.tasks.length+a===0&&c.drain(),c.process()},i=e(r);t(n.data,i)}},length:function(){return c.tasks.length},running:function(){return a},idle:function(){return c.tasks.length+a===0},pause:function(){c.paused!==!0&&(c.paused=!0,c.process())},resume:function(){c.paused!==!1&&(c.paused=!1,c.process())}};return c},r.cargo=function(e,t){var n=!1,i=[],c={tasks:i,payload:t,saturated:null,empty:null,drain:null,drained:!0,push:function(e,n){s(e)||(e=[e]),o(e,function(e){i.push({data:e,callback:\"function\"==typeof n?n:null}),c.drained=!1,c.saturated&&i.length===t&&c.saturated()}),r.setImmediate(c.process)},process:function l(){if(!n){if(0===i.length)return c.drain&&!c.drained&&c.drain(),void(c.drained=!0);var r=\"number\"==typeof t?i.splice(0,t):i.splice(0,i.length),s=a(r,function(e){return e.data});c.empty&&c.empty(),n=!0,e(s,function(){n=!1;var e=arguments;o(r,function(t){t.callback&&t.callback.apply(null,e)}),l()})}},length:function(){return i.length},running:function(){return n}};return c};var w=function(e){return function(t){var n=Array.prototype.slice.call(arguments,1);t.apply(null,n.concat([function(t){var n=Array.prototype.slice.call(arguments,1);\"undefined\"!=typeof console&&(t?console.error&&console.error(t):console[e]&&o(n,function(t){console[e](t)}))}]))}};r.log=w(\"log\"),r.dir=w(\"dir\"),r.memoize=function(e,t){var n={},i={};t=t||function(e){return e};var s=function(){var s=Array.prototype.slice.call(arguments),o=s.pop(),a=t.apply(null,s);a in n?r.nextTick(function(){o.apply(null,n[a])}):a in i?i[a].push(o):(i[a]=[o],e.apply(null,s.concat([function(){n[a]=arguments;var e=i[a];delete i[a];for(var t=0,r=e.length;r>t;t++)e[t].apply(null,arguments)}])))};return s.memo=n,s.unmemoized=e,s},r.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},r.times=function(e,t,n){for(var i=[],s=0;e>s;s++)i.push(s);return r.map(i,t,n)},r.timesSeries=function(e,t,n){for(var i=[],s=0;e>s;s++)i.push(s);return r.mapSeries(i,t,n)},r.seq=function(){var e=arguments;return function(){var t=this,n=Array.prototype.slice.call(arguments),i=n.pop();r.reduce(e,n,function(e,n,r){n.apply(t,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);r(e,t)}]))},function(e,n){i.apply(t,[e].concat(n))})}},r.compose=function(){return r.seq.apply(null,Array.prototype.reverse.call(arguments))};var _=function(e,t){var n=function(){var n=this,r=Array.prototype.slice.call(arguments),i=r.pop();return e(t,function(e,t){e.apply(n,r.concat([t]))},i)};if(arguments.length>2){var r=Array.prototype.slice.call(arguments,2);return n.apply(this,r)}return n};r.applyEach=h(_),r.applyEachSeries=d(_),r.forever=function(e,t){function n(r){if(r){if(t)return t(r);throw r}e(n)}n()},\"undefined\"!=typeof module&&module.exports?module.exports=r:\"undefined\"!=typeof define&&define.amd?define(\"async\",[],function(){return r}):t.async=r}(),define(\"config\",[\"base\",\"async\",\"underscore\"],function(e,t,n){var r=[],i={ENV:\"ENV\",BASE_PATH:\"BASE_PATH\",FILE_REPO_DIR:\"FILE_REPO_DIR\",LAZO_PORT:\"LAZO_PORT\",MODEL_TIMEOUT:\"MODEL_TIMEOUT\",MODEL_MOCK:\"MODEL_MOCK\",CACHE:\"CACHE\",LAZO_VERSION:\"LAZO_VERSION\",get:function(e,t){return this.resolve(e,r,t)},resolve:function(e,r,i){var s,o,a,c=r.length,l=[];if(!i||!n.isFunction(i.success)){for(a=c;a--;)if(s=r[a],o=s.get(e,i),!n.isUndefined(o))return o;return n.isObject(i)?i.defaultVal:i}var u=function(t,r){var s,o;return n.isFunction(t)?o=t:(s=t,o=r),n.isUndefined(s)?void this.get(e,{success:function(e){return o(null,e)},context:i.context}):o(null,s)};for(a=c;a--;)l.push(n.bind(u,r[a]));t.waterfall(l,function(e,t){return e&&n.isFunction(i.error)?i.error(e):void i.success(t)})},addPlugin:function(e){r.push(e)},clearPlugins:function(){r.length=0}};if(i.Plugin=e.extend({constructor:function(){this.data={}},get:function(e,t){var r;if(this.data&&e in this.data){r=this.data[e];try{r=JSON.parse(r)}catch(i){}}return t&&n.isFunction(t.success)&&t.success(r),r}}),i.HashPlugin=i.Plugin.extend({constructor:function(e){this.data=e.data}}),i.JSONPlugin=i.Plugin.extend({constructor:function(e){var t=this;LAZO.require([\"text!\"+e.file],function(r){t.data=JSON.parse(r),n.isFunction(e.success)&&e.success()},function(t){n.isFunction(e.error)&&e.error(t)})}}),LAZO.isServer&&process.env){var s=i.Plugin.extend({constructor:function(){this.data=process.env}});i.addPlugin(new s)}return i}),define(\"/lib/client/loader.js\",[\"module\"],function(){function e(e,t){for(var n=e.indexOf(\"/\")?e.split(\"/\"):[e],r=0;r<n.length;r++)if(t[n[r]]&&-1!==t[n[r]].indexOf(\"/server/\"))return!0;return 1!==n.length||t[n[0]]?!1:!0}return{load:function(t,n,r,i){null===t||-1!==t.indexOf(\"/server/\")||e(t,i.paths)?r(null):n([t],function(e){r(e)})}}}),function(e){\"function\"==typeof define&&define.amd?define(\"jquerycookie\",[\"jquery\"],e):e(\"object\"==typeof exports?require(\"jquery\"):jQuery)}(function(e){function t(e){return a.raw?e:encodeURIComponent(e)}function n(e){return a.raw?e:decodeURIComponent(e)}function r(e){return t(a.json?JSON.stringify(e):String(e))}function i(e){0===e.indexOf('\"')&&(e=e.slice(1,-1).replace(/\\\\\"/g,'\"').replace(/\\\\\\\\/g,\"\\\\\"));try{return e=decodeURIComponent(e.replace(o,\" \")),a.json?JSON.parse(e):e}catch(t){}}function s(t,n){var r=a.raw?t:i(t);return e.isFunction(n)?n(r):r}var o=/\\+/g,a=e.cookie=function(i,o,c){if(void 0!==o&&!e.isFunction(o)){if(c=e.extend({},a.defaults,c),\"number\"==typeof c.expires){var l=c.expires,u=c.expires=new Date;u.setTime(+u+864e5*l)}return document.cookie=[t(i),\"=\",r(o),c.expires?\"; expires=\"+c.expires.toUTCString():\"\",c.path?\"; path=\"+c.path:\"\",c.domain?\"; domain=\"+c.domain:\"\",c.secure?\"; secure\":\"\"].join(\"\")}for(var h=i?void 0:{},p=document.cookie?document.cookie.split(\"; \"):[],d=0,f=p.length;f>d;d++){var m=p[d].split(\"=\"),g=n(m.shift()),v=m.join(\"=\");if(i&&i===g){h=s(v,o);break}i||void 0===(v=s(v))||(h[g]=v)}return h};a.defaults={},e.removeCookie=function(t,n){return void 0===e.cookie(t)?!1:(e.cookie(t,\"\",e.extend({},n,{expires:-1})),!e.cookie(t))}}),define(\"context\",[\"jquery\",\"underscore\",\"l!jquerycookie\"],function(e,t){function n(e,n,r){var i,s=[\"host\",\"hostname\",\"search\",\"href\",\"pathname\",\"port\",\"protocol\"],o=t.pick(e,s);return n&&n.host&&(i=n.host.split(\":\"),o.host=n.host,o.hostname=i[0],o.port=i[1]),r&&(o.protocol=r.protocol),o}function r(e){var r={_rootCtx:{modelList:{},modelInstances:{},data:e&&e.data?e.data:{},pageTitle:e&&e.pageTitle?e.pageTitle:LAZO.app.defaultTitle},assets:{},collections:{},models:{},params:{},meta:{},headers:{}};e=t.defaults(t.extend({},e),r),this.assets=e.assets,this.collections=e.collections,this.models=e.models,this.params=t.extend({},e.params),this.meta=e.meta,this.headers=e.headers,this._rootCtx=e._rootCtx,LAZO.app.isServer&&e._request?(this._request=e._request,this._reply=e._reply,this.location=n(e._request.url,this.headers,e._request.server.info),this.userAgent=this.headers[\"user-agent\"],this.isTunnelRequest=e.isTunnelRequest||!1,this.response=e.response):LAZO.app.isClient&&(this.location=n(window.location),this.userAgent=window.navigator.userAgent)}return LAZO.isClient&&(e.cookie.raw=!0),r.prototype={setSharedData:function(e,t){return this._rootCtx.data[e]=t,this},getSharedData:function(e){return this._rootCtx.data[e]},getCookie:function(t){return LAZO.app.isServer?this._request.state[t]?this._request.state[t]:void 0:e.cookie(t)},setCookie:function(t,n,r){LAZO.app.isServer?(r.ttl=r.expires||null,this._reply.state(t,n,r)):e.cookie(t,n,r)},clearCookie:function(n,r){LAZO.app.isServer?this._reply.state(n,null,t.extend({ttl:0,path:\"/\"},r)):e.removeCookie(n,t.extend({path:\"/\"},r))}},r}),define(\"utils/treeMixin\",[\"underscore\"],function(e){return{getList:function(t,n){var r=this;return function i(t,n,s){var o;return\"view\"===t&&n.currentView?s.push(n.currentView):\"component\"===t&&s.push(n),(o=r.getNodeChildren(n)).length&&e.each(o,function(e){s=i(t,e,s)}),s}(t,n,[])},getNodeType:function(e){var t;return e?e.currentView?t=\"component\":e.setElement&&(t=\"view\"):t=null,t},getNodeChildren:function(e){var t=this.getNodeType(e);if(\"component\"!==t)return[];var n,r=e.children,i=[];e.currentView.parent=e;for(var s in r)for(var o=0;o<r[s].length;o++)n=r[s][o],n.parent=e,i.push(n);return i},_attrs:{cmpName:\"lazo-cmp-name\",cmpId:\"lazo-cmp-id\",compContainerName:\"lazo-cmp-container\",viewId:\"lazo-view-id\"}}}),define(\"renderer\",[\"underscore\",\"utils/treeMixin\"],function(e,t){return e.extend({getInsertIndex:function(e,t,n){var r=new RegExp(\"<[^<]*\"+e+\"+=[\\\"||']\"+t+\"[\\\"||']+.*?>\");return n.match(r)},getTreeHtml:function(e,t,n,r){var i=e,s=this,o=e.parent;e.parent=null,this._getNodesHtml(i,function(e){var t;if(\"view\"===n){t=s._renderTree(e);var a=s.getInsertIndex(s._attrs.cmpId,i.cid,t);t=t.substr(a[0].length,t.length-(a[0].length+s.closingTagLength))}else t=s._renderTree(e);e.parent=o,r(t)})},getNodeHtml:function(e,t){\"component\"===this.getNodeType(e)?t(\"<div \"+this._attrs.cmpName+'=\"'+e.name+'\" '+this._attrs.cmpId+'=\"'+e.cid+'\"></div>'):e.getHtml({error:function(e){throw e},success:function(e){t(e)}})},closingTagLength:6,_renderTree:function(t){var n=this;return function r(t,i){if(i=n._assembleNodeHtml(t,i),e.size(t.children)){var s=t.children;for(var o in s)for(var a=s[o].length-1;a>=0;a--)i=r(s[o][a],i)}return i}(t,\"\")},_assembleNodeHtml:function(e,t){var n,r=this._getCmpSiblings(e),i=e.html.substr(0,e.html.length-this.closingTagLength)+e.currentView.html+\"</div>\";if(r&&r.nodes.length)for(var s=0;!n&&r.nodes[s];){if(n=this.getInsertIndex(this._attrs.cmpId,r.nodes[s].cid,t))return t.substr(0,n.index)+i+t.substr(n.index);s++}if(!n&&r&&r.container&&(n=this.getInsertIndex(this._attrs.compContainerName,r.container,t)),!n&&e.parent&&r&&r.nodes.length>1){var o=\"component \"+e.name;throw\"The parent node for \"+o+\" was not found.\"}if(!n&&(!e.parent||e.parent&&r&&1===r.nodes.length))return i;var a=t.substr(0,n.index+n[0].length),c=t.substr(n.index+n[0].length);return a+i+c},_getCmpSiblings:function(t){var n,r=t.parent&&t.parent.children;for(var i in r)if(n=e.find(r[i],function(e){return e.cid===t.cid})){n={container:i,nodes:r[i]};break}return n},_getNodesHtml:function(e,t){var n=this,r=0,i=0;!function s(o){var a=n.getNodeChildren(o);if(r++,a.length)for(var c=0;c<a.length;c++)s(a[c]);n.getNodeHtml(o,function(s){o.html=s,n.getNodeHtml(o.currentView,function(n){o.currentView.html=n,setTimeout(function(){i++,i===r&&t(e)},0)})})}(e)}},t)}),define(\"requestFilters\",[],function(){function e(t,n,r,i,s,o){return i[s]?void i[s](t,n,r,{success:function(a){return a?o(a):(s+=1,void e(t,n,r,i,s,o))},error:function(e){throw e instanceof Error?e:new Error(e)}}):o()}var t={};return{apply:function(n,r,i,s){var o=[];for(var a in t)n.match(new RegExp(a))&&(o=o.concat(t[a]));return o.length?void e(n,r,i,o,0,s):s()},add:function(e,n){return t[e]=t[e]||[],t[e].push(n),this}}}),define(\"handlebars/safe-string\",[\"exports\"],function(e){function t(e){this.string=e}t.prototype.toString=function(){return\"\"+this.string},e[\"default\"]=t}),define(\"handlebars/utils\",[\"./safe-string\",\"exports\"],function(e,t){function n(e){return c[e]}function r(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}function i(e){return e instanceof a?e.toString():null==e?\"\":e?(e=\"\"+e,u.test(e)?e.replace(l,n):e):e+\"\"}function s(e){return e||0===e?d(e)&&0===e.length?!0:!1:!0}function o(e,t){return(e?e+\".\":\"\")+t}var a=e[\"default\"],c={\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#x27;\",\"`\":\"&#x60;\"},l=/[&<>\"'`]/g,u=/[&<>\"'`]/;t.extend=r;var h=Object.prototype.toString;t.toString=h;var p=function(e){return\"function\"==typeof e};p(/x/)&&(p=function(e){return\"function\"==typeof e&&\"[object Function]\"===h.call(e)});var p;t.isFunction=p;var d=Array.isArray||function(e){return e&&\"object\"==typeof e?\"[object Array]\"===h.call(e):!1};t.isArray=d,t.escapeExpression=i,t.isEmpty=s,t.appendContextPath=o}),define(\"handlebars/exception\",[\"exports\"],function(e){function t(e,t){var r;t&&t.firstLine&&(r=t.firstLine,e+=\" - \"+r+\":\"+t.firstColumn);for(var i=Error.prototype.constructor.call(this,e),s=0;s<n.length;s++)this[n[s]]=i[n[s]];r&&(this.lineNumber=r,this.column=t.firstColumn)}var n=[\"description\",\"fileName\",\"lineNumber\",\"message\",\"name\",\"number\",\"stack\"];t.prototype=new Error,e[\"default\"]=t}),define(\"handlebars/base\",[\"./utils\",\"./exception\",\"exports\"],function(e,t,n){function r(e,t){this.helpers=e||{},this.partials=t||{},i(this)}function i(e){e.registerHelper(\"helperMissing\",function(){if(1===arguments.length)return void 0;throw new o(\"Missing helper: '\"+arguments[arguments.length-1].name+\"'\")}),e.registerHelper(\"blockHelperMissing\",function(t,n){var r=n.inverse,i=n.fn;if(t===!0)return i(this);if(t===!1||null==t)return r(this);if(u(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):r(this);if(n.data&&n.ids){var o=g(n.data);o.contextPath=s.appendContextPath(n.data.contextPath,n.name),n={data:o}}return i(t,n)}),e.registerHelper(\"each\",function(e,t){if(!t)throw new o(\"Must pass iterator to #each\");var n,r,i=t.fn,a=t.inverse,c=0,l=\"\";if(t.data&&t.ids&&(r=s.appendContextPath(t.data.contextPath,t.ids[0])+\".\"),h(e)&&(e=e.call(this)),t.data&&(n=g(t.data)),e&&\"object\"==typeof e)if(u(e))for(var p=e.length;p>c;c++)n&&(n.index=c,n.first=0===c,n.last=c===e.length-1,r&&(n.contextPath=r+c)),l+=i(e[c],{data:n});else for(var d in e)e.hasOwnProperty(d)&&(n&&(n.key=d,n.index=c,n.first=0===c,r&&(n.contextPath=r+d)),l+=i(e[d],{data:n}),c++);return 0===c&&(l=a(this)),l}),e.registerHelper(\"if\",function(e,t){return h(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||s.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper(\"unless\",function(t,n){return e.helpers[\"if\"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),e.registerHelper(\"with\",function(e,t){h(e)&&(e=e.call(this));var n=t.fn;if(s.isEmpty(e))return t.inverse(this);if(t.data&&t.ids){var r=g(t.data);r.contextPath=s.appendContextPath(t.data.contextPath,t.ids[0]),t={data:r}}return n(e,t)}),e.registerHelper(\"log\",function(t,n){var r=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;e.log(r,t)}),e.registerHelper(\"lookup\",function(e,t){return e&&e[t]})}var s=e,o=t[\"default\"],a=\"2.0.0\";n.VERSION=a;var c=6;n.COMPILER_REVISION=c;var l={1:\"<= 1.0.rc.2\",2:\"== 1.0.0-rc.3\",3:\"== 1.0.0-rc.4\",4:\"== 1.x.x\",5:\"== 2.0.0-alpha.x\",6:\">= 2.0.0-beta.1\"};n.REVISION_CHANGES=l;var u=s.isArray,h=s.isFunction,p=s.toString,d=\"[object Object]\";n.HandlebarsEnvironment=r,r.prototype={constructor:r,logger:f,log:m,registerHelper:function(e,t){if(p.call(e)===d){if(t)throw new o(\"Arg not supported with multiple helpers\");s.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){p.call(e)===d?s.extend(this.partials,e):this.partials[e]=t},unregisterPartial:function(e){delete this.partials[e]}};var f={methodMap:{0:\"debug\",1:\"info\",2:\"warn\",3:\"error\"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){if(f.level<=e){var n=f.methodMap[e];\"undefined\"!=typeof console&&console[n]&&console[n].call(console,t)}}};n.logger=f;var m=f.log;n.log=m;var g=function(e){var t=s.extend({},e);return t._parent=e,t};n.createFrame=g}),define(\"handlebars/runtime\",[\"./utils\",\"./exception\",\"./base\",\"exports\"],function(e,t,n,r){function i(e){var t=e&&e[0]||1,n=p;if(t!==n){if(n>t){var r=d[n],i=d[t];throw new h(\"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version (\"+r+\") or downgrade your runtime to an older version (\"+i+\").\")}throw new h(\"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version (\"+e[1]+\").\")}}function s(e,t){if(!t)throw new h(\"No environment passed to template\");if(!e||!e.main)throw new h(\"Unknown template object: \"+typeof e);t.VM.checkRevision(e.compiler);var n=function(n,r,i,s,o,a,c,l,p){o&&(s=u.extend({},s,o));var d=t.VM.invokePartial.call(this,n,i,s,a,c,l,p);if(null==d&&t.compile){var f={helpers:a,partials:c,data:l,depths:p};c[i]=t.compile(n,{data:void 0!==l,compat:e.compat},t),d=c[i](s,f)}if(null!=d){if(r){for(var m=d.split(\"\\n\"),g=0,v=m.length;v>g&&(m[g]||g+1!==v);g++)m[g]=r+m[g];d=m.join(\"\\n\")}return d}throw new h(\"The partial \"+i+\" could not be compiled when running in runtime-only mode\")},r={lookup:function(e,t){for(var n=e.length,r=0;n>r;r++)if(e[r]&&null!=e[r][t])return e[r][t]},lambda:function(e,t){return\"function\"==typeof e?e.call(t):e},escapeExpression:u.escapeExpression,invokePartial:n,fn:function(t){return e[t]},programs:[],program:function(e,t,n){var r=this.programs[e],i=this.fn(e);return t||n?r=o(this,e,i,t,n):r||(r=this.programs[e]=o(this,e,i)),r},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=u.extend({},t,e)),n},noop:t.VM.noop,compilerInfo:e.compiler},i=function(t,n){n=n||{};var s=n.data;i._setup(n),!n.partial&&e.useData&&(s=l(t,s));var o;return e.useDepths&&(o=n.depths?[t].concat(n.depths):[t]),e.main.call(r,t,r.helpers,r.partials,s,o)};return i.isTop=!0,i._setup=function(n){n.partial?(r.helpers=n.helpers,r.partials=n.partials):(r.helpers=r.merge(n.helpers,t.helpers),e.usePartial&&(r.partials=r.merge(n.partials,t.partials)))},i._child=function(t,n,i){if(e.useDepths&&!i)throw new h(\"must pass parent depths\");return o(r,t,e[t],n,i)},i}function o(e,t,n,r,i){var s=function(t,s){return s=s||{},n.call(e,t,e.helpers,e.partials,s.data||r,i&&[t].concat(i))};return s.program=t,s.depth=i?i.length:0,s}function a(e,t,n,r,i,s,o){var a={partial:!0,helpers:r,partials:i,data:s,depths:o};if(void 0===e)throw new h(\"The partial \"+t+\" could not be found\");return e instanceof Function?e(n,a):void 0}function c(){return\"\"}function l(e,t){return t&&\"root\"in t||(t=t?f(t):{},t.root=e),t}var u=e,h=t[\"default\"],p=n.COMPILER_REVISION,d=n.REVISION_CHANGES,f=n.createFrame;r.checkRevision=i,r.template=s,r.program=o,r.invokePartial=a,r.noop=c}),define(\"handlebars.runtime\",[\"./handlebars/base\",\"./handlebars/safe-string\",\"./handlebars/exception\",\"./handlebars/utils\",\"./handlebars/runtime\",\"exports\"],function(e,t,n,r,i,s){var o=e,a=t[\"default\"],c=n[\"default\"],l=r,u=i,h=function(){var e=new o.HandlebarsEnvironment;return l.extend(e,o),e.SafeString=a,e.Exception=c,e.Utils=l,e.escapeExpression=l.escapeExpression,e.VM=u,e.template=function(t){return u.template(t,e)},e},p=h();p.create=h,p[\"default\"]=p,s[\"default\"]=p}),define(\"handlebars/compiler/ast\",[\"../exception\",\"exports\"],function(e,t){function n(e){e=e||{},this.firstLine=e.first_line,this.firstColumn=e.first_column,this.lastColumn=e.last_column,this.lastLine=e.last_line}var r=e[\"default\"],i={ProgramNode:function(e,t,r){n.call(this,r),this.type=\"program\",this.statements=e,this.strip=t},MustacheNode:function(e,t,r,s,o){if(n.call(this,o),this.type=\"mustache\",this.strip=s,null!=r&&r.charAt){var a=r.charAt(3)||r.charAt(2);this.escaped=\"{\"!==a&&\"&\"!==a}else this.escaped=!!r;this.sexpr=e instanceof i.SexprNode?e:new i.SexprNode(e,t),this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(e,t,r){n.call(this,r),this.type=\"sexpr\",this.hash=t;var i=this.id=e[0],s=this.params=e.slice(1);this.isHelper=!(!s.length&&!t),this.eligibleHelper=this.isHelper||i.isSimple},PartialNode:function(e,t,r,i,s){n.call(this,s),this.type=\"partial\",this.partialName=e,this.context=t,this.hash=r,this.strip=i,this.strip.inlineStandalone=!0},BlockNode:function(e,t,r,i,s){n.call(this,s),this.type=\"block\",this.mustache=e,this.program=t,this.inverse=r,this.strip=i,r&&!t&&(this.isInverse=!0)},RawBlockNode:function(e,t,s,o){if(n.call(this,o),e.sexpr.id.original!==s)throw new r(e.sexpr.id.original+\" doesn't match \"+s,this);t=new i.ContentNode(t,o),this.type=\"block\",this.mustache=e,this.program=new i.ProgramNode([t],{},o)},ContentNode:function(e,t){n.call(this,t),this.type=\"content\",this.original=this.string=e},HashNode:function(e,t){n.call(this,t),this.type=\"hash\",this.pairs=e},IdNode:function(e,t){n.call(this,t),this.type=\"ID\";for(var i=\"\",s=[],o=0,a=\"\",c=0,l=e.length;l>c;c++){var u=e[c].part;if(i+=(e[c].separator||\"\")+u,\"..\"===u||\".\"===u||\"this\"===u){if(s.length>0)throw new r(\"Invalid path: \"+i,this);\"..\"===u?(o++,a+=\"../\"):this.isScoped=!0}else s.push(u)}this.original=i,this.parts=s,this.string=s.join(\".\"),this.depth=o,this.idName=a+this.string,this.isSimple=1===e.length&&!this.isScoped&&0===o,this.stringModeValue=this.string},PartialNameNode:function(e,t){n.call(this,t),this.type=\"PARTIAL_NAME\",this.name=e.original},DataNode:function(e,t){n.call(this,t),this.type=\"DATA\",this.id=e,this.stringModeValue=e.stringModeValue,this.idName=\"@\"+e.stringModeValue\n},StringNode:function(e,t){n.call(this,t),this.type=\"STRING\",this.original=this.string=this.stringModeValue=e},NumberNode:function(e,t){n.call(this,t),this.type=\"NUMBER\",this.original=this.number=e,this.stringModeValue=Number(e)},BooleanNode:function(e,t){n.call(this,t),this.type=\"BOOLEAN\",this.bool=e,this.stringModeValue=\"true\"===e},CommentNode:function(e,t){n.call(this,t),this.type=\"comment\",this.comment=e,this.strip={inlineStandalone:!0}}};t[\"default\"]=i}),define(\"handlebars/compiler/parser\",[\"exports\"],function(e){var t=function(){function e(){this.yy={}}var t={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,CONTENT:12,COMMENT:13,openRawBlock:14,END_RAW_BLOCK:15,OPEN_RAW_BLOCK:16,sexpr:17,CLOSE_RAW_BLOCK:18,openBlock:19,block_option0:20,closeBlock:21,openInverse:22,block_option1:23,OPEN_BLOCK:24,CLOSE:25,OPEN_INVERSE:26,inverseAndProgram:27,INVERSE:28,OPEN_ENDBLOCK:29,path:30,OPEN:31,OPEN_UNESCAPED:32,CLOSE_UNESCAPED:33,OPEN_PARTIAL:34,partialName:35,param:36,partial_option0:37,partial_option1:38,sexpr_repetition0:39,sexpr_option0:40,dataName:41,STRING:42,NUMBER:43,BOOLEAN:44,OPEN_SEXPR:45,CLOSE_SEXPR:46,hash:47,hash_repetition_plus0:48,hashSegment:49,ID:50,EQUALS:51,DATA:52,pathSegments:53,SEP:54,$accept:0,$end:1},terminals_:{2:\"error\",5:\"EOF\",12:\"CONTENT\",13:\"COMMENT\",15:\"END_RAW_BLOCK\",16:\"OPEN_RAW_BLOCK\",18:\"CLOSE_RAW_BLOCK\",24:\"OPEN_BLOCK\",25:\"CLOSE\",26:\"OPEN_INVERSE\",28:\"INVERSE\",29:\"OPEN_ENDBLOCK\",31:\"OPEN\",32:\"OPEN_UNESCAPED\",33:\"CLOSE_UNESCAPED\",34:\"OPEN_PARTIAL\",42:\"STRING\",43:\"NUMBER\",44:\"BOOLEAN\",45:\"OPEN_SEXPR\",46:\"CLOSE_SEXPR\",50:\"ID\",51:\"EQUALS\",52:\"DATA\",54:\"SEP\"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[10,3],[14,3],[9,4],[9,4],[19,3],[22,3],[27,2],[21,3],[8,3],[8,3],[11,5],[11,4],[17,3],[17,1],[36,1],[36,1],[36,1],[36,1],[36,1],[36,3],[47,1],[49,3],[35,1],[35,1],[35,1],[41,2],[30,1],[53,3],[53,1],[6,0],[6,2],[20,0],[20,1],[23,0],[23,1],[37,0],[37,1],[38,0],[38,1],[39,0],[39,2],[40,0],[40,1],[48,1],[48,2]],performAction:function(e,t,n,r,i,s){var o=s.length-1;switch(i){case 1:return r.prepareProgram(s[o-1].statements,!0),s[o-1];case 2:this.$=new r.ProgramNode(r.prepareProgram(s[o]),{},this._$);break;case 3:this.$=s[o];break;case 4:this.$=s[o];break;case 5:this.$=s[o];break;case 6:this.$=s[o];break;case 7:this.$=new r.ContentNode(s[o],this._$);break;case 8:this.$=new r.CommentNode(s[o],this._$);break;case 9:this.$=new r.RawBlockNode(s[o-2],s[o-1],s[o],this._$);break;case 10:this.$=new r.MustacheNode(s[o-1],null,\"\",\"\",this._$);break;case 11:this.$=r.prepareBlock(s[o-3],s[o-2],s[o-1],s[o],!1,this._$);break;case 12:this.$=r.prepareBlock(s[o-3],s[o-2],s[o-1],s[o],!0,this._$);break;case 13:this.$=new r.MustacheNode(s[o-1],null,s[o-2],r.stripFlags(s[o-2],s[o]),this._$);break;case 14:this.$=new r.MustacheNode(s[o-1],null,s[o-2],r.stripFlags(s[o-2],s[o]),this._$);break;case 15:this.$={strip:r.stripFlags(s[o-1],s[o-1]),program:s[o]};break;case 16:this.$={path:s[o-1],strip:r.stripFlags(s[o-2],s[o])};break;case 17:this.$=new r.MustacheNode(s[o-1],null,s[o-2],r.stripFlags(s[o-2],s[o]),this._$);break;case 18:this.$=new r.MustacheNode(s[o-1],null,s[o-2],r.stripFlags(s[o-2],s[o]),this._$);break;case 19:this.$=new r.PartialNode(s[o-3],s[o-2],s[o-1],r.stripFlags(s[o-4],s[o]),this._$);break;case 20:this.$=new r.PartialNode(s[o-2],void 0,s[o-1],r.stripFlags(s[o-3],s[o]),this._$);break;case 21:this.$=new r.SexprNode([s[o-2]].concat(s[o-1]),s[o],this._$);break;case 22:this.$=new r.SexprNode([s[o]],null,this._$);break;case 23:this.$=s[o];break;case 24:this.$=new r.StringNode(s[o],this._$);break;case 25:this.$=new r.NumberNode(s[o],this._$);break;case 26:this.$=new r.BooleanNode(s[o],this._$);break;case 27:this.$=s[o];break;case 28:s[o-1].isHelper=!0,this.$=s[o-1];break;case 29:this.$=new r.HashNode(s[o],this._$);break;case 30:this.$=[s[o-2],s[o]];break;case 31:this.$=new r.PartialNameNode(s[o],this._$);break;case 32:this.$=new r.PartialNameNode(new r.StringNode(s[o],this._$),this._$);break;case 33:this.$=new r.PartialNameNode(new r.NumberNode(s[o],this._$));break;case 34:this.$=new r.DataNode(s[o],this._$);break;case 35:this.$=new r.IdNode(s[o],this._$);break;case 36:s[o-2].push({part:s[o],separator:s[o-1]}),this.$=s[o-2];break;case 37:this.$=[{part:s[o]}];break;case 38:this.$=[];break;case 39:s[o-1].push(s[o]);break;case 48:this.$=[];break;case 49:s[o-1].push(s[o]);break;case 52:this.$=[s[o]];break;case 53:s[o-1].push(s[o])}},table:[{3:1,4:2,5:[2,38],6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],31:[2,38],32:[2,38],34:[2,38]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:[1,10],13:[1,11],14:16,16:[1,20],19:14,22:15,24:[1,18],26:[1,19],28:[2,2],29:[2,2],31:[1,12],32:[1,13],34:[1,17]},{1:[2,1]},{5:[2,39],12:[2,39],13:[2,39],16:[2,39],24:[2,39],26:[2,39],28:[2,39],29:[2,39],31:[2,39],32:[2,39],34:[2,39]},{5:[2,3],12:[2,3],13:[2,3],16:[2,3],24:[2,3],26:[2,3],28:[2,3],29:[2,3],31:[2,3],32:[2,3],34:[2,3]},{5:[2,4],12:[2,4],13:[2,4],16:[2,4],24:[2,4],26:[2,4],28:[2,4],29:[2,4],31:[2,4],32:[2,4],34:[2,4]},{5:[2,5],12:[2,5],13:[2,5],16:[2,5],24:[2,5],26:[2,5],28:[2,5],29:[2,5],31:[2,5],32:[2,5],34:[2,5]},{5:[2,6],12:[2,6],13:[2,6],16:[2,6],24:[2,6],26:[2,6],28:[2,6],29:[2,6],31:[2,6],32:[2,6],34:[2,6]},{5:[2,7],12:[2,7],13:[2,7],16:[2,7],24:[2,7],26:[2,7],28:[2,7],29:[2,7],31:[2,7],32:[2,7],34:[2,7]},{5:[2,8],12:[2,8],13:[2,8],16:[2,8],24:[2,8],26:[2,8],28:[2,8],29:[2,8],31:[2,8],32:[2,8],34:[2,8]},{17:21,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:27,30:22,41:23,50:[1,26],52:[1,25],53:24},{4:28,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],28:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{4:29,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],28:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{12:[1,30]},{30:32,35:31,42:[1,33],43:[1,34],50:[1,26],53:24},{17:35,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:36,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:37,30:22,41:23,50:[1,26],52:[1,25],53:24},{25:[1,38]},{18:[2,48],25:[2,48],33:[2,48],39:39,42:[2,48],43:[2,48],44:[2,48],45:[2,48],46:[2,48],50:[2,48],52:[2,48]},{18:[2,22],25:[2,22],33:[2,22],46:[2,22]},{18:[2,35],25:[2,35],33:[2,35],42:[2,35],43:[2,35],44:[2,35],45:[2,35],46:[2,35],50:[2,35],52:[2,35],54:[1,40]},{30:41,50:[1,26],53:24},{18:[2,37],25:[2,37],33:[2,37],42:[2,37],43:[2,37],44:[2,37],45:[2,37],46:[2,37],50:[2,37],52:[2,37],54:[2,37]},{33:[1,42]},{20:43,27:44,28:[1,45],29:[2,40]},{23:46,27:47,28:[1,45],29:[2,42]},{15:[1,48]},{25:[2,46],30:51,36:49,38:50,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],47:57,48:58,49:60,50:[1,59],52:[1,25],53:24},{25:[2,31],42:[2,31],43:[2,31],44:[2,31],45:[2,31],50:[2,31],52:[2,31]},{25:[2,32],42:[2,32],43:[2,32],44:[2,32],45:[2,32],50:[2,32],52:[2,32]},{25:[2,33],42:[2,33],43:[2,33],44:[2,33],45:[2,33],50:[2,33],52:[2,33]},{25:[1,61]},{25:[1,62]},{18:[1,63]},{5:[2,17],12:[2,17],13:[2,17],16:[2,17],24:[2,17],26:[2,17],28:[2,17],29:[2,17],31:[2,17],32:[2,17],34:[2,17]},{18:[2,50],25:[2,50],30:51,33:[2,50],36:65,40:64,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],46:[2,50],47:66,48:58,49:60,50:[1,59],52:[1,25],53:24},{50:[1,67]},{18:[2,34],25:[2,34],33:[2,34],42:[2,34],43:[2,34],44:[2,34],45:[2,34],46:[2,34],50:[2,34],52:[2,34]},{5:[2,18],12:[2,18],13:[2,18],16:[2,18],24:[2,18],26:[2,18],28:[2,18],29:[2,18],31:[2,18],32:[2,18],34:[2,18]},{21:68,29:[1,69]},{29:[2,41]},{4:70,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{21:71,29:[1,69]},{29:[2,43]},{5:[2,9],12:[2,9],13:[2,9],16:[2,9],24:[2,9],26:[2,9],28:[2,9],29:[2,9],31:[2,9],32:[2,9],34:[2,9]},{25:[2,44],37:72,47:73,48:58,49:60,50:[1,74]},{25:[1,75]},{18:[2,23],25:[2,23],33:[2,23],42:[2,23],43:[2,23],44:[2,23],45:[2,23],46:[2,23],50:[2,23],52:[2,23]},{18:[2,24],25:[2,24],33:[2,24],42:[2,24],43:[2,24],44:[2,24],45:[2,24],46:[2,24],50:[2,24],52:[2,24]},{18:[2,25],25:[2,25],33:[2,25],42:[2,25],43:[2,25],44:[2,25],45:[2,25],46:[2,25],50:[2,25],52:[2,25]},{18:[2,26],25:[2,26],33:[2,26],42:[2,26],43:[2,26],44:[2,26],45:[2,26],46:[2,26],50:[2,26],52:[2,26]},{18:[2,27],25:[2,27],33:[2,27],42:[2,27],43:[2,27],44:[2,27],45:[2,27],46:[2,27],50:[2,27],52:[2,27]},{17:76,30:22,41:23,50:[1,26],52:[1,25],53:24},{25:[2,47]},{18:[2,29],25:[2,29],33:[2,29],46:[2,29],49:77,50:[1,74]},{18:[2,37],25:[2,37],33:[2,37],42:[2,37],43:[2,37],44:[2,37],45:[2,37],46:[2,37],50:[2,37],51:[1,78],52:[2,37],54:[2,37]},{18:[2,52],25:[2,52],33:[2,52],46:[2,52],50:[2,52]},{12:[2,13],13:[2,13],16:[2,13],24:[2,13],26:[2,13],28:[2,13],29:[2,13],31:[2,13],32:[2,13],34:[2,13]},{12:[2,14],13:[2,14],16:[2,14],24:[2,14],26:[2,14],28:[2,14],29:[2,14],31:[2,14],32:[2,14],34:[2,14]},{12:[2,10]},{18:[2,21],25:[2,21],33:[2,21],46:[2,21]},{18:[2,49],25:[2,49],33:[2,49],42:[2,49],43:[2,49],44:[2,49],45:[2,49],46:[2,49],50:[2,49],52:[2,49]},{18:[2,51],25:[2,51],33:[2,51],46:[2,51]},{18:[2,36],25:[2,36],33:[2,36],42:[2,36],43:[2,36],44:[2,36],45:[2,36],46:[2,36],50:[2,36],52:[2,36],54:[2,36]},{5:[2,11],12:[2,11],13:[2,11],16:[2,11],24:[2,11],26:[2,11],28:[2,11],29:[2,11],31:[2,11],32:[2,11],34:[2,11]},{30:79,50:[1,26],53:24},{29:[2,15]},{5:[2,12],12:[2,12],13:[2,12],16:[2,12],24:[2,12],26:[2,12],28:[2,12],29:[2,12],31:[2,12],32:[2,12],34:[2,12]},{25:[1,80]},{25:[2,45]},{51:[1,78]},{5:[2,20],12:[2,20],13:[2,20],16:[2,20],24:[2,20],26:[2,20],28:[2,20],29:[2,20],31:[2,20],32:[2,20],34:[2,20]},{46:[1,81]},{18:[2,53],25:[2,53],33:[2,53],46:[2,53],50:[2,53]},{30:51,36:82,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],50:[1,26],52:[1,25],53:24},{25:[1,83]},{5:[2,19],12:[2,19],13:[2,19],16:[2,19],24:[2,19],26:[2,19],28:[2,19],29:[2,19],31:[2,19],32:[2,19],34:[2,19]},{18:[2,28],25:[2,28],33:[2,28],42:[2,28],43:[2,28],44:[2,28],45:[2,28],46:[2,28],50:[2,28],52:[2,28]},{18:[2,30],25:[2,30],33:[2,30],46:[2,30],50:[2,30]},{5:[2,16],12:[2,16],13:[2,16],16:[2,16],24:[2,16],26:[2,16],28:[2,16],29:[2,16],31:[2,16],32:[2,16],34:[2,16]}],defaultActions:{4:[2,1],44:[2,41],47:[2,43],57:[2,47],63:[2,10],70:[2,15],73:[2,45]},parseError:function(e){throw new Error(e)},parse:function(e){function t(){var e;return e=n.lexer.lex()||1,\"number\"!=typeof e&&(e=n.symbols_[e]||e),e}var n=this,r=[0],i=[null],s=[],o=this.table,a=\"\",c=0,l=0,u=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,\"undefined\"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var h=this.lexer.yylloc;s.push(h);var p=this.lexer.options&&this.lexer.options.ranges;\"function\"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var d,f,m,g,v,y,x,b,w,_={};;){if(m=r[r.length-1],this.defaultActions[m]?g=this.defaultActions[m]:((null===d||\"undefined\"==typeof d)&&(d=t()),g=o[m]&&o[m][d]),\"undefined\"==typeof g||!g.length||!g[0]){var C=\"\";if(!u){w=[];for(y in o[m])this.terminals_[y]&&y>2&&w.push(\"'\"+this.terminals_[y]+\"'\");C=this.lexer.showPosition?\"Parse error on line \"+(c+1)+\":\\n\"+this.lexer.showPosition()+\"\\nExpecting \"+w.join(\", \")+\", got '\"+(this.terminals_[d]||d)+\"'\":\"Parse error on line \"+(c+1)+\": Unexpected \"+(1==d?\"end of input\":\"'\"+(this.terminals_[d]||d)+\"'\"),this.parseError(C,{text:this.lexer.match,token:this.terminals_[d]||d,line:this.lexer.yylineno,loc:h,expected:w})}}if(g[0]instanceof Array&&g.length>1)throw new Error(\"Parse Error: multiple actions possible at state: \"+m+\", token: \"+d);switch(g[0]){case 1:r.push(d),i.push(this.lexer.yytext),s.push(this.lexer.yylloc),r.push(g[1]),d=null,f?(d=f,f=null):(l=this.lexer.yyleng,a=this.lexer.yytext,c=this.lexer.yylineno,h=this.lexer.yylloc,u>0&&u--);break;case 2:if(x=this.productions_[g[1]][1],_.$=i[i.length-x],_._$={first_line:s[s.length-(x||1)].first_line,last_line:s[s.length-1].last_line,first_column:s[s.length-(x||1)].first_column,last_column:s[s.length-1].last_column},p&&(_._$.range=[s[s.length-(x||1)].range[0],s[s.length-1].range[1]]),v=this.performAction.call(_,a,l,c,this.yy,g[1],i,s),\"undefined\"!=typeof v)return v;x&&(r=r.slice(0,-1*x*2),i=i.slice(0,-1*x),s=s.slice(0,-1*x)),r.push(this.productions_[g[1]][0]),i.push(_.$),s.push(_._$),b=o[r[r.length-2]][r[r.length-1]],r.push(b);break;case 3:return!0}}return!0}},n=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match=\"\",this.conditionStack=[\"INITIAL\"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\\r\\n?|\\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\\r\\n?|\\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var r=this.match.split(/(?:\\r\\n?|\\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?\"...\":\"\")+e.substr(-20).replace(/\\n/g,\"\")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?\"...\":\"\")).replace(/\\n/g,\"\")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join(\"-\");return e+this.upcomingInput()+\"\\n\"+t+\"^\"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,r,i;this._more||(this.yytext=\"\",this.match=\"\");for(var s=this._currentRules(),o=0;o<s.length&&(n=this._input.match(this.rules[s[o]]),!n||t&&!(n[0].length>t[0].length)||(t=n,r=o,this.options.flex));o++);return t?(i=t[0].match(/(?:\\r\\n?|\\n).*/g),i&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\\r?\\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,s[r],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e?e:void 0):\"\"===this._input?this.EOF:this.parseError(\"Lexical error on line \"+(this.yylineno+1)+\". Unrecognized text.\\n\"+this.showPosition(),{text:\"\",token:null,line:this.yylineno})},lex:function(){var e=this.next();return\"undefined\"!=typeof e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)}};return e.options={},e.performAction=function(e,t,n,r){function i(e,n){return t.yytext=t.yytext.substr(e,t.yyleng-n)}switch(n){case 0:if(\"\\\\\\\\\"===t.yytext.slice(-2)?(i(0,1),this.begin(\"mu\")):\"\\\\\"===t.yytext.slice(-1)?(i(0,1),this.begin(\"emu\")):this.begin(\"mu\"),t.yytext)return 12;break;case 1:return 12;case 2:return this.popState(),12;case 3:return t.yytext=t.yytext.substr(5,t.yyleng-9),this.popState(),15;case 4:return 12;case 5:return i(0,4),this.popState(),13;case 6:return 45;case 7:return 46;case 8:return 16;case 9:return this.popState(),this.begin(\"raw\"),18;case 10:return 34;case 11:return 24;case 12:return 29;case 13:return this.popState(),28;case 14:return this.popState(),28;case 15:return 26;case 16:return 26;case 17:return 32;case 18:return 31;case 19:this.popState(),this.begin(\"com\");break;case 20:return i(3,5),this.popState(),13;case 21:return 31;case 22:return 51;case 23:return 50;case 24:return 50;case 25:return 54;case 26:break;case 27:return this.popState(),33;case 28:return this.popState(),25;case 29:return t.yytext=i(1,2).replace(/\\\\\"/g,'\"'),42;case 30:return t.yytext=i(1,2).replace(/\\\\'/g,\"'\"),42;case 31:return 52;case 32:return 44;case 33:return 44;case 34:return 43;case 35:return 50;case 36:return t.yytext=i(1,2),50;case 37:return\"INVALID\";case 38:return 5}},e.rules=[/^(?:[^\\x00]*?(?=(\\{\\{)))/,/^(?:[^\\x00]+)/,/^(?:[^\\x00]{2,}?(?=(\\{\\{|\\\\\\{\\{|\\\\\\\\\\{\\{|$)))/,/^(?:\\{\\{\\{\\{\\/[^\\s!\"#%-,\\.\\/;->@\\[-\\^`\\{-~]+(?=[=}\\s\\/.])\\}\\}\\}\\})/,/^(?:[^\\x00]*?(?=(\\{\\{\\{\\{\\/)))/,/^(?:[\\s\\S]*?--\\}\\})/,/^(?:\\()/,/^(?:\\))/,/^(?:\\{\\{\\{\\{)/,/^(?:\\}\\}\\}\\})/,/^(?:\\{\\{(~)?>)/,/^(?:\\{\\{(~)?#)/,/^(?:\\{\\{(~)?\\/)/,/^(?:\\{\\{(~)?\\^\\s*(~)?\\}\\})/,/^(?:\\{\\{(~)?\\s*else\\s*(~)?\\}\\})/,/^(?:\\{\\{(~)?\\^)/,/^(?:\\{\\{(~)?\\s*else\\b)/,/^(?:\\{\\{(~)?\\{)/,/^(?:\\{\\{(~)?&)/,/^(?:\\{\\{!--)/,/^(?:\\{\\{![\\s\\S]*?\\}\\})/,/^(?:\\{\\{(~)?)/,/^(?:=)/,/^(?:\\.\\.)/,/^(?:\\.(?=([=~}\\s\\/.)])))/,/^(?:[\\/.])/,/^(?:\\s+)/,/^(?:\\}(~)?\\}\\})/,/^(?:(~)?\\}\\})/,/^(?:\"(\\\\[\"]|[^\"])*\")/,/^(?:'(\\\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\\s)])))/,/^(?:false(?=([~}\\s)])))/,/^(?:-?[0-9]+(?:\\.[0-9]+)?(?=([~}\\s)])))/,/^(?:([^\\s!\"#%-,\\.\\/;->@\\[-\\^`\\{-~]+(?=([=~}\\s\\/.)]))))/,/^(?:\\[[^\\]]*\\])/,/^(?:.)/,/^(?:$)/],e.conditions={mu:{rules:[6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[5],inclusive:!1},raw:{rules:[3,4],inclusive:!1},INITIAL:{rules:[0,1,38],inclusive:!0}},e}();return t.lexer=n,e.prototype=t,t.Parser=e,new e}();e[\"default\"]=t}),define(\"handlebars/compiler/helpers\",[\"../exception\",\"exports\"],function(e,t){function n(e,t){return{left:\"~\"===e.charAt(2),right:\"~\"===t.charAt(t.length-3)}}function r(e,t,n,r,i,u){if(e.sexpr.id.original!==r.path.original)throw new l(e.sexpr.id.original+\" doesn't match \"+r.path.original,e);var h=n&&n.program,p={left:e.strip.left,right:r.strip.right,openStandalone:o(t.statements),closeStandalone:s((h||t).statements)};if(e.strip.right&&a(t.statements,null,!0),h){var d=n.strip;d.left&&c(t.statements,null,!0),d.right&&a(h.statements,null,!0),r.strip.left&&c(h.statements,null,!0),s(t.statements)&&o(h.statements)&&(c(t.statements),a(h.statements))}else r.strip.left&&c(t.statements,null,!0);return i?new this.BlockNode(e,h,t,p,u):new this.BlockNode(e,t,h,p,u)}function i(e,t){for(var n=0,r=e.length;r>n;n++){var i=e[n],l=i.strip;if(l){var u=s(e,n,t,\"partial\"===i.type),h=o(e,n,t),p=l.openStandalone&&u,d=l.closeStandalone&&h,f=l.inlineStandalone&&u&&h;l.right&&a(e,n,!0),l.left&&c(e,n,!0),f&&(a(e,n),c(e,n)&&\"partial\"===i.type&&(i.indent=/([ \\t]+$)/.exec(e[n-1].original)?RegExp.$1:\"\")),p&&(a((i.program||i.inverse).statements),c(e,n)),d&&(a(e,n),c((i.inverse||i.program).statements))}}return e}function s(e,t,n){void 0===t&&(t=e.length);var r=e[t-1],i=e[t-2];return r?\"content\"===r.type?(i||!n?/\\r?\\n\\s*?$/:/(^|\\r?\\n)\\s*?$/).test(r.original):void 0:n}function o(e,t,n){void 0===t&&(t=-1);var r=e[t+1],i=e[t+2];return r?\"content\"===r.type?(i||!n?/^\\s*?\\r?\\n/:/^\\s*?(\\r?\\n|$)/).test(r.original):void 0:n}function a(e,t,n){var r=e[null==t?0:t+1];if(r&&\"content\"===r.type&&(n||!r.rightStripped)){var i=r.string;r.string=r.string.replace(n?/^\\s+/:/^[ \\t]*\\r?\\n?/,\"\"),r.rightStripped=r.string!==i}}function c(e,t,n){var r=e[null==t?e.length-1:t-1];if(r&&\"content\"===r.type&&(n||!r.leftStripped)){var i=r.string;return r.string=r.string.replace(n?/\\s+$/:/[ \\t]+$/,\"\"),r.leftStripped=r.string!==i,r.leftStripped}}var l=e[\"default\"];t.stripFlags=n,t.prepareBlock=r,t.prepareProgram=i}),define(\"handlebars/compiler/base\",[\"./parser\",\"./ast\",\"./helpers\",\"../utils\",\"exports\"],function(e,t,n,r,i){function s(e){return e.constructor===a.ProgramNode?e:(o.yy=u,o.parse(e))}var o=e[\"default\"],a=t[\"default\"],c=n,l=r.extend;i.parser=o;var u={};l(u,c,a),i.parse=s}),define(\"handlebars/compiler/compiler\",[\"../exception\",\"../utils\",\"exports\"],function(e,t,n){function r(){}function i(e,t,n){if(null==e||\"string\"!=typeof e&&e.constructor!==n.AST.ProgramNode)throw new a(\"You must pass a string or Handlebars AST to Handlebars.precompile. You passed \"+e);t=t||{},\"data\"in t||(t.data=!0),t.compat&&(t.useDepths=!0);var r=n.parse(e),i=(new n.Compiler).compile(r,t);return(new n.JavaScriptCompiler).compile(i,t)}function s(e,t,n){function r(){var r=n.parse(e),i=(new n.Compiler).compile(r,t),s=(new n.JavaScriptCompiler).compile(i,t,void 0,!0);return n.template(s)}if(null==e||\"string\"!=typeof e&&e.constructor!==n.AST.ProgramNode)throw new a(\"You must pass a string or Handlebars AST to Handlebars.compile. You passed \"+e);t=t||{},\"data\"in t||(t.data=!0),t.compat&&(t.useDepths=!0);var i,s=function(e,t){return i||(i=r()),i.call(this,e,t)};return s._setup=function(e){return i||(i=r()),i._setup(e)},s._child=function(e,t,n){return i||(i=r()),i._child(e,t,n)},s}function o(e,t){if(e===t)return!0;if(c(e)&&c(t)&&e.length===t.length){for(var n=0;n<e.length;n++)if(!o(e[n],t[n]))return!1;return!0}}var a=e[\"default\"],c=t.isArray,l=[].slice;n.Compiler=r,r.prototype={compiler:r,equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var n=0;t>n;n++){var r=this.opcodes[n],i=e.opcodes[n];if(r.opcode!==i.opcode||!o(r.args,i.args))return!1}for(t=this.children.length,n=0;t>n;n++)if(!this.children[n].equals(e.children[n]))return!1;return!0},guid:0,compile:function(e,t){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=t,this.stringParams=t.stringParams,this.trackIds=t.trackIds;var n=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,\"if\":!0,unless:!0,\"with\":!0,log:!0,lookup:!0},n)for(var r in n)this.options.knownHelpers[r]=n[r];return this.accept(e)},accept:function(e){return this[e.type](e)},program:function(e){for(var t=e.statements,n=0,r=t.length;r>n;n++)this.accept(t[n]);return this.isSimple=1===r,this.depths.list=this.depths.list.sort(function(e,t){return e-t}),this},compileProgram:function(e){var t,n=(new this.compiler).compile(e,this.options),r=this.guid++;this.usePartial=this.usePartial||n.usePartial,this.children[r]=n;for(var i=0,s=n.depths.list.length;s>i;i++)t=n.depths.list[i],2>t||this.addDepth(t-1);return r},block:function(e){var t=e.mustache,n=e.program,r=e.inverse;n&&(n=this.compileProgram(n)),r&&(r=this.compileProgram(r));var i=t.sexpr,s=this.classifySexpr(i);\"helper\"===s?this.helperSexpr(i,n,r):\"simple\"===s?(this.simpleSexpr(i),this.opcode(\"pushProgram\",n),this.opcode(\"pushProgram\",r),this.opcode(\"emptyHash\"),this.opcode(\"blockValue\",i.id.original)):(this.ambiguousSexpr(i,n,r),this.opcode(\"pushProgram\",n),this.opcode(\"pushProgram\",r),this.opcode(\"emptyHash\"),this.opcode(\"ambiguousBlockValue\")),this.opcode(\"append\")},hash:function(e){var t,n,r=e.pairs;for(this.opcode(\"pushHash\"),t=0,n=r.length;n>t;t++)this.pushParam(r[t][1]);for(;t--;)this.opcode(\"assignToHash\",r[t][0]);this.opcode(\"popHash\")},partial:function(e){var t=e.partialName;this.usePartial=!0,e.hash?this.accept(e.hash):this.opcode(\"push\",\"undefined\"),e.context?this.accept(e.context):(this.opcode(\"getContext\",0),this.opcode(\"pushContext\")),this.opcode(\"invokePartial\",t.name,e.indent||\"\"),this.opcode(\"append\")},content:function(e){e.string&&this.opcode(\"appendContent\",e.string)},mustache:function(e){this.sexpr(e.sexpr),this.opcode(e.escaped&&!this.options.noEscape?\"appendEscaped\":\"append\")},ambiguousSexpr:function(e,t,n){var r=e.id,i=r.parts[0],s=null!=t||null!=n;this.opcode(\"getContext\",r.depth),this.opcode(\"pushProgram\",t),this.opcode(\"pushProgram\",n),this.ID(r),this.opcode(\"invokeAmbiguous\",i,s)},simpleSexpr:function(e){var t=e.id;\"DATA\"===t.type?this.DATA(t):t.parts.length?this.ID(t):(this.addDepth(t.depth),this.opcode(\"getContext\",t.depth),this.opcode(\"pushContext\")),this.opcode(\"resolvePossibleLambda\")},helperSexpr:function(e,t,n){var r=this.setupFullMustacheParams(e,t,n),i=e.id,s=i.parts[0];if(this.options.knownHelpers[s])this.opcode(\"invokeKnownHelper\",r.length,s);else{if(this.options.knownHelpersOnly)throw new a(\"You specified knownHelpersOnly, but used the unknown helper \"+s,e);i.falsy=!0,this.ID(i),this.opcode(\"invokeHelper\",r.length,i.original,i.isSimple)}},sexpr:function(e){var t=this.classifySexpr(e);\"simple\"===t?this.simpleSexpr(e):\"helper\"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ID:function(e){this.addDepth(e.depth),this.opcode(\"getContext\",e.depth);var t=e.parts[0];t?this.opcode(\"lookupOnContext\",e.parts,e.falsy,e.isScoped):this.opcode(\"pushContext\")},DATA:function(e){this.options.data=!0,this.opcode(\"lookupData\",e.id.depth,e.id.parts)},STRING:function(e){this.opcode(\"pushString\",e.string)},NUMBER:function(e){this.opcode(\"pushLiteral\",e.number)},BOOLEAN:function(e){this.opcode(\"pushLiteral\",e.bool)},comment:function(){},opcode:function(e){this.opcodes.push({opcode:e,args:l.call(arguments,1)})},addDepth:function(e){0!==e&&(this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e)))},classifySexpr:function(e){var t=e.isHelper,n=e.eligibleHelper,r=this.options;if(n&&!t){var i=e.id.parts[0];r.knownHelpers[i]?t=!0:r.knownHelpersOnly&&(n=!1)}return t?\"helper\":n?\"ambiguous\":\"simple\"},pushParams:function(e){for(var t=0,n=e.length;n>t;t++)this.pushParam(e[t])},pushParam:function(e){this.stringParams?(e.depth&&this.addDepth(e.depth),this.opcode(\"getContext\",e.depth||0),this.opcode(\"pushStringParam\",e.stringModeValue,e.type),\"sexpr\"===e.type&&this.sexpr(e)):(this.trackIds&&this.opcode(\"pushId\",e.type,e.idName||e.stringModeValue),this.accept(e))},setupFullMustacheParams:function(e,t,n){var r=e.params;return this.pushParams(r),this.opcode(\"pushProgram\",t),this.opcode(\"pushProgram\",n),e.hash?this.hash(e.hash):this.opcode(\"emptyHash\"),r}},n.precompile=i,n.compile=s}),define(\"handlebars/compiler/javascript-compiler\",[\"../base\",\"../exception\",\"exports\"],function(e,t,n){function r(e){this.value=e}function i(){}var s=e.COMPILER_REVISION,o=e.REVISION_CHANGES,a=t[\"default\"];i.prototype={nameLookup:function(e,t){return i.isValidJavaScriptVariableName(t)?e+\".\"+t:e+\"['\"+t+\"']\"},depthedLookup:function(e){return this.aliases.lookup=\"this.lookup\",'lookup(depths, \"'+e+'\")'},compilerInfo:function(){var e=s,t=o[e];return[e,t]},appendToBuffer:function(e){return this.environment.isSimple?\"return \"+e+\";\":{appendToBuffer:!0,content:e,toString:function(){return\"buffer += \"+e+\";\"}}},initializeBuffer:function(){return this.quotedString(\"\")},namespace:\"Handlebars\",compile:function(e,t,n,r){this.environment=e,this.options=t,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!r,this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(e,t),this.useDepths=this.useDepths||e.depths.list.length||this.options.compat;var i,s,o,c=e.opcodes;for(s=0,o=c.length;o>s;s++)i=c[s],this[i.opcode].apply(this,i.args);if(this.pushSource(\"\"),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new a(\"Compile completed with content left on stack\");var l=this.createFunctionContext(r);if(this.isChild)return l;var u={compiler:this.compilerInfo(),main:l},h=this.context.programs;for(s=0,o=h.length;o>s;s++)h[s]&&(u[s]=h[s]);return this.environment.usePartial&&(u.usePartial=!0),this.options.data&&(u.useData=!0),this.useDepths&&(u.useDepths=!0),this.options.compat&&(u.compat=!0),r||(u.compiler=JSON.stringify(u.compiler),u=this.objectLiteral(u)),u},preamble:function(){this.lastContext=0,this.source=[]},createFunctionContext:function(e){var t=\"\",n=this.stackVars.concat(this.registers.list);n.length>0&&(t+=\", \"+n.join(\", \"));for(var r in this.aliases)this.aliases.hasOwnProperty(r)&&(t+=\", \"+r+\"=\"+this.aliases[r]);var i=[\"depth0\",\"helpers\",\"partials\",\"data\"];this.useDepths&&i.push(\"depths\");var s=this.mergeSource(t);return e?(i.push(s),Function.apply(this,i)):\"function(\"+i.join(\",\")+\") {\\n  \"+s+\"}\"},mergeSource:function(e){for(var t,n,r=\"\",i=!this.forceBuffer,s=0,o=this.source.length;o>s;s++){var a=this.source[s];a.appendToBuffer?t=t?t+\"\\n    + \"+a.content:a.content:(t&&(r?r+=\"buffer += \"+t+\";\\n  \":(n=!0,r=t+\";\\n  \"),t=void 0),r+=a+\"\\n  \",this.environment.isSimple||(i=!1))}return i?(t||!r)&&(r+=\"return \"+(t||'\"\"')+\";\\n\"):(e+=\", buffer = \"+(n?\"\":this.initializeBuffer()),r+=t?\"return buffer + \"+t+\";\\n\":\"return buffer;\\n\"),e&&(r=\"var \"+e.substring(2)+(n?\"\":\";\\n  \")+r),r},blockValue:function(e){this.aliases.blockHelperMissing=\"helpers.blockHelperMissing\";var t=[this.contextName(0)];this.setupParams(e,0,t);var n=this.popStack();t.splice(1,0,n),this.push(\"blockHelperMissing.call(\"+t.join(\", \")+\")\")},ambiguousBlockValue:function(){this.aliases.blockHelperMissing=\"helpers.blockHelperMissing\";var e=[this.contextName(0)];this.setupParams(\"\",0,e,!0),this.flushInline();var t=this.topStack();e.splice(1,0,t),this.pushSource(\"if (!\"+this.lastHelper+\") { \"+t+\" = blockHelperMissing.call(\"+e.join(\", \")+\"); }\")},appendContent:function(e){this.pendingContent&&(e=this.pendingContent+e),this.pendingContent=e},append:function(){this.flushInline();var e=this.popStack();this.pushSource(\"if (\"+e+\" != null) { \"+this.appendToBuffer(e)+\" }\"),this.environment.isSimple&&this.pushSource(\"else { \"+this.appendToBuffer(\"''\")+\" }\")},appendEscaped:function(){this.aliases.escapeExpression=\"this.escapeExpression\",this.pushSource(this.appendToBuffer(\"escapeExpression(\"+this.popStack()+\")\"))},getContext:function(e){this.lastContext=e},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(e,t,n){var r=0,i=e.length;for(n||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(e[r++]));i>r;r++)this.replaceStack(function(n){var i=this.nameLookup(n,e[r],\"context\");return t?\" && \"+i:\" != null ? \"+i+\" : \"+n})},lookupData:function(e,t){this.pushStackLiteral(e?\"this.data(data, \"+e+\")\":\"data\");for(var n=t.length,r=0;n>r;r++)this.replaceStack(function(e){return\" && \"+this.nameLookup(e,t[r],\"data\")})},resolvePossibleLambda:function(){this.aliases.lambda=\"this.lambda\",this.push(\"lambda(\"+this.popStack()+\", \"+this.contextName(0)+\")\")},pushStringParam:function(e,t){this.pushContext(),this.pushString(t),\"sexpr\"!==t&&(\"string\"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(){this.pushStackLiteral(\"{}\"),this.trackIds&&this.push(\"{}\"),this.stringParams&&(this.push(\"{}\"),this.push(\"{}\"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(\"{\"+e.ids.join(\",\")+\"}\"),this.stringParams&&(this.push(\"{\"+e.contexts.join(\",\")+\"}\"),this.push(\"{\"+e.types.join(\",\")+\"}\")),this.push(\"{\\n    \"+e.values.join(\",\\n    \")+\"\\n  }\")},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},push:function(e){return this.inlineStack.push(e),e},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){this.pushStackLiteral(null!=e?this.programExpression(e):null)},invokeHelper:function(e,t,n){this.aliases.helperMissing=\"helpers.helperMissing\";var r=this.popStack(),i=this.setupHelper(e,t),s=(n?i.name+\" || \":\"\")+r+\" || helperMissing\";this.push(\"((\"+s+\").call(\"+i.callParams+\"))\")},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(n.name+\".call(\"+n.callParams+\")\")},invokeAmbiguous:function(e,t){this.aliases.functionType='\"function\"',this.aliases.helperMissing=\"helpers.helperMissing\",this.useRegister(\"helper\");\nvar n=this.popStack();this.emptyHash();var r=this.setupHelper(0,e,t),i=this.lastHelper=this.nameLookup(\"helpers\",e,\"helper\");this.push(\"((helper = (helper = \"+i+\" || \"+n+\") != null ? helper : helperMissing\"+(r.paramsInit?\"),(\"+r.paramsInit:\"\")+\"),(typeof helper === functionType ? helper.call(\"+r.callParams+\") : helper))\")},invokePartial:function(e,t){var n=[this.nameLookup(\"partials\",e,\"partial\"),\"'\"+t+\"'\",\"'\"+e+\"'\",this.popStack(),this.popStack(),\"helpers\",\"partials\"];this.options.data?n.push(\"data\"):this.options.compat&&n.push(\"undefined\"),this.options.compat&&n.push(\"depths\"),this.push(\"this.invokePartial(\"+n.join(\", \")+\")\")},assignToHash:function(e){var t,n,r,i=this.popStack();this.trackIds&&(r=this.popStack()),this.stringParams&&(n=this.popStack(),t=this.popStack());var s=this.hash;t&&s.contexts.push(\"'\"+e+\"': \"+t),n&&s.types.push(\"'\"+e+\"': \"+n),r&&s.ids.push(\"'\"+e+\"': \"+r),s.values.push(\"'\"+e+\"': (\"+i+\")\")},pushId:function(e,t){\"ID\"===e||\"DATA\"===e?this.pushString(t):this.pushStackLiteral(\"sexpr\"===e?\"true\":\"null\")},compiler:i,compileChildren:function(e,t){for(var n,r,i=e.children,s=0,o=i.length;o>s;s++){n=i[s],r=new this.compiler;var a=this.matchExistingProgram(n);null==a?(this.context.programs.push(\"\"),a=this.context.programs.length,n.index=a,n.name=\"program\"+a,this.context.programs[a]=r.compile(n,t,this.context,!this.precompile),this.context.environments[a]=n,this.useDepths=this.useDepths||r.useDepths):(n.index=a,n.name=\"program\"+a)}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;n>t;t++){var r=this.context.environments[t];if(r&&r.equals(e))return t}},programExpression:function(e){var t=this.environment.children[e],n=(t.depths.list,this.useDepths),r=[t.index,\"data\"];return n&&r.push(\"depths\"),\"this.program(\"+r.join(\", \")+\")\"},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},pushStackLiteral:function(e){return this.push(new r(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),e&&this.source.push(e)},pushStack:function(e){this.flushInline();var t=this.incrStack();return this.pushSource(t+\" = \"+e+\";\"),this.compileStack.push(t),t},replaceStack:function(e){{var t,n,i,s=\"\";this.isInline()}if(!this.isInline())throw new a(\"replaceStack on non-inline\");var o=this.popStack(!0);if(o instanceof r)s=t=o.value,i=!0;else{n=!this.stackSlot;var c=n?this.incrStack():this.topStackName();s=\"(\"+this.push(c)+\" = \"+o+\")\",t=this.topStack()}var l=e.call(this,t);i||this.popStack(),n&&this.stackSlot--,this.push(\"(\"+s+l+\")\")},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push(\"stack\"+this.stackSlot),this.topStackName()},topStackName:function(){return\"stack\"+this.stackSlot},flushInline:function(){var e=this.inlineStack;if(e.length){this.inlineStack=[];for(var t=0,n=e.length;n>t;t++){var i=e[t];i instanceof r?this.compileStack.push(i):this.pushStack(i)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),n=(t?this.inlineStack:this.compileStack).pop();if(!e&&n instanceof r)return n.value;if(!t){if(!this.stackSlot)throw new a(\"Invalid stack pop\");this.stackSlot--}return n},topStack:function(){var e=this.isInline()?this.inlineStack:this.compileStack,t=e[e.length-1];return t instanceof r?t.value:t},contextName:function(e){return this.useDepths&&e?\"depths[\"+e+\"]\":\"depth\"+e},quotedString:function(e){return'\"'+e.replace(/\\\\/g,\"\\\\\\\\\").replace(/\"/g,'\\\\\"').replace(/\\n/g,\"\\\\n\").replace(/\\r/g,\"\\\\r\").replace(/\\u2028/g,\"\\\\u2028\").replace(/\\u2029/g,\"\\\\u2029\")+'\"'},objectLiteral:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(this.quotedString(n)+\":\"+e[n]);return\"{\"+t.join(\",\")+\"}\"},setupHelper:function(e,t,n){var r=[],i=this.setupParams(t,e,r,n),s=this.nameLookup(\"helpers\",t,\"helper\");return{params:r,paramsInit:i,name:s,callParams:[this.contextName(0)].concat(r).join(\", \")}},setupOptions:function(e,t,n){var r,i,s,o={},a=[],c=[],l=[];o.name=this.quotedString(e),o.hash=this.popStack(),this.trackIds&&(o.hashIds=this.popStack()),this.stringParams&&(o.hashTypes=this.popStack(),o.hashContexts=this.popStack()),i=this.popStack(),s=this.popStack(),(s||i)&&(s||(s=\"this.noop\"),i||(i=\"this.noop\"),o.fn=s,o.inverse=i);for(var u=t;u--;)r=this.popStack(),n[u]=r,this.trackIds&&(l[u]=this.popStack()),this.stringParams&&(c[u]=this.popStack(),a[u]=this.popStack());return this.trackIds&&(o.ids=\"[\"+l.join(\",\")+\"]\"),this.stringParams&&(o.types=\"[\"+c.join(\",\")+\"]\",o.contexts=\"[\"+a.join(\",\")+\"]\"),this.options.data&&(o.data=\"data\"),o},setupParams:function(e,t,n,r){var i=this.objectLiteral(this.setupOptions(e,t,n));return r?(this.useRegister(\"options\"),n.push(\"options\"),\"options=\"+i):(n.push(i),\"\")}};for(var c=\"break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield\".split(\" \"),l=i.RESERVED_WORDS={},u=0,h=c.length;h>u;u++)l[c[u]]=!0;i.isValidJavaScriptVariableName=function(e){return!i.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)},n[\"default\"]=i}),define(\"handlebars\",[\"./handlebars.runtime\",\"./handlebars/compiler/ast\",\"./handlebars/compiler/base\",\"./handlebars/compiler/compiler\",\"./handlebars/compiler/javascript-compiler\",\"exports\"],function(e,t,n,r,i,s){var o=e[\"default\"],a=t[\"default\"],c=n.parser,l=n.parse,u=r.Compiler,h=r.compile,p=r.precompile,d=i[\"default\"],f=o.create,m=function(){var e=f();return e.compile=function(t,n){return h(t,n,e)},e.precompile=function(t,n){return p(t,n,e)},e.AST=a,e.Compiler=u,e.JavaScriptCompiler=d,e.Parser=c,e.parse=l,e};o=m(),o.create=m,o[\"default\"]=o,s[\"default\"]=o}),define(\"utils/handlebarsEngine\",[\"handlebars\"],function(e){return{compile:function(t){return e.default.compile(t)},precompile:function(t){return e.default.precompile(t)},execute:function(e,t){return e(t)},engine:e.default}}),define(\"utils/template\",[\"utils/handlebarsEngine\"],function(e){function t(e){if(e.path)return e.path;switch(e.name){case\"micro\":return\"underscore\"}}var n={handlebars:\"hbs\",micro:\"mt\"},r=\"handlebars\",i={handlebars:{extension:\"hbs\",handler:e,exp:\"Handlebars\"}};return{getDefaultExt:function(e){return this.getTemplateExt()||n[e]},setTemplateExt:function(e,t){var n=this.getTemplateEngineDef(e);n&&(n.extension=t)},registerTemplateEngine:function(e,t,n,r,s){return i[e]={extension:t,handler:n,path:r,exp:s}},getTemplateEngine:function(e){var t=i[e];return t?t.handler:void 0},getTemplateExt:function(e){var t=this.getTemplateEngineDef(e);return t?t.extension:void 0},getTemplateEngineDef:function(e){return i[e]},getDefaultTemplateEngine:function(){return this.getTemplateEngine(r)},getDefaultTemplateEngineName:function(){return r},setDefaultTemplateEngine:function(e){var t=i[e];if(!t)throw new Error(\"Invalid template engine name, \"+e);r=e},loadTemplateEngine:function(e,n){var r,i=this;n.error=n.error||function(e){throw e},(r=this.getTemplateEngine(e.name))?n.success(r):LAZO.require([t(e)],function(t){i.registerTemplateEngine(e.name,e.extension,e.handler(t),e.exp),n.success(i.getTemplateEngine(e.name))},function(e){n.error(e)})},engHandlerMaker:function(e){switch(e){case\"micro\":return function(){return{compile:function(e){return _.template(e)},execute:function(e,t){return e(t)},engine:_.template}}}}}}),define(\"resolver/model\",[\"underscore\"],function(e){var t=/\\{\\{\\s*([^|}]+?)\\s*(?:\\|([^}]*))?\\s*\\}\\}/g;return{methodMap:{create:\"POST\",update:\"PUT\",patch:\"PATCH\",\"delete\":\"DELETE\",read:\"GET\"},substitute:function(n,r){return n.replace?n.replace(t,function(t,n){return e.isUndefined(r[n])?t:r[n]}):n}}}),define(\"proxy\",[\"base\",\"resolver/model\",\"backbone\"],function(e,t,n){var r=e.extend({constructor:function(e){this.ctx=e},sync:function(e,r){var i=this,s=this,o=t.methodMap[e];r=_(r).clone();var a=r.error;r.error=function(t){if(LAZO.logger.debug(\"[client.proxy.sync] Call to CRUD syncher failed\",i.name,e),a){var n={statusCode:t.status,headers:t.getAllResponseHeaders(),body:t.responseText};a(n)}};var c=r.success;if(r.success=function(t,n,s){return LAZO.logger.debug(\"[client.proxy.sync] Call to CRUD syncher succeed\",i.name,e,t,n),t&&t.data?void(c&&t&&c(t.data)):r.error(s)},LAZO.logger.debug(\"[client.proxy.sync] Calling CRUD syncher...\",this.name,e),!this.name)return a({Error:\"This model has no name set.  Cannot call the server\"});var l={type:\"POST\",url:\"/tunnel/\"+this.name+\"/\"+e,dataType:\"json\",contentType:\"application/json\",processData:!1},u={method:o,crumb:i.ctx.getCookie(\"crumb\"),params:this.params};this instanceof n.Model?u.model=this.name:u.collection=this.name,!s||\"create\"!==e&&\"update\"!==e&&\"patch\"!==e&&\"delete\"!==e||(u.attributes=s.toJSON(r)),l.data=JSON.stringify(u);var h=$.ajax(_.extend(l,r));return s.trigger(\"request\",s,h,r),h},callSyncher:function(e,t,r){var i=this,s=this.toJSON();r=_(r).clone();var o=r.error;r.error=function(t,n,s){LAZO.logger.debug(\"[client.proxy.sync] Call to NON-CRUD syncher failed\",i.name,e,n,s),i.trigger(\"callError\",i,t,r),o&&o(t)};var a=r.success;if(r.success=function(t,n,s){return t?(LAZO.logger.debug(\"[client.proxy.sync] Call to NON-CRUD syncher succeed\",i.name,e,n),i.trigger(\"callSync\",i,s,r),void(a&&t&&a(t))):(i.trigger(\"callError\",i,s,r),r.error(s))},LAZO.logger.debug(\"[client.proxy.sync] Calling NON-CRUD syncher...\",this.name,e),!e)return r.error({Error:\"Method/function to call not set.\"});var c={type:\"POST\",url:\"/tunnel/\"+this.name+\"/\"+e,dataType:\"json\",contentType:\"application/json\",processData:!1},l={method:\"NONCRUD\",crumb:i.ctx.getCookie(\"crumb\"),params:this.params,attributes:s,fname:e,args:t};this instanceof n.Model?l.model=this.name:l.collection=this.name,c.data=JSON.stringify(l);var u=$.ajax(_.extend(c,r));i.trigger(\"callRequest\",s,u,r)}});return r}),define(\"utils/dataschema-json\",[\"underscore\"],function(e){var t,n=e.isFunction,r=e.isObject,i=e.isArray;return t={parse:function(e,t){if(t.parser){var r=n(t.parser)?t.parser:null;r&&(e=r.call(this,e))}return e},getPath:function(e){var t=null,n=[],r=0;if(e)for(e=e.replace(/\\[\\s*(['\"])(.*?)\\1\\s*\\]/g,function(e,t,i){return n[r]=i,\".@\"+r++}).replace(/\\[(\\d+)\\]/g,function(e,t){return n[r]=0|parseInt(t,10),\".@\"+r++}).replace(/^\\./,\"\"),t=e.split(\".\"),r=t.length-1;r>=0;--r)\"@\"===t[r].charAt(0)&&(t[r]=n[parseInt(t[r].substr(1),10)]);return t},getLocationValue:function(e,t){for(var n=0,i=e.length;i>n;n++){if(!(r(t)&&e[n]in t)){t=void 0;break}t=t[e[n]]}return t},setLocationValue:function(e,n,i){for(var s,o=t.getPath(e),a=0,c=o.length;c>a;a++)if(a==c-1&&r(n)&&o[a]in n)n[o[a]]=i,s=i;else{if(!(r(n)&&o[a]in n))break;n=n[o[a]]}return s},apply:function(e,n){var i=n,s={results:[],meta:{}};if(!r(n))try{i=JSON.parse(n)}catch(o){return s.error=o,s}return r(i)&&e?(s=t._parseResults.call(this,e,i,s),void 0!==e.metaFields&&(s=t._parseMeta(e.metaFields,i,s))):s.error=new Error(\"JSON schema parse failure\"),s},_parseResults:function(e,n,r){var s=t.getPath,o=t.getLocationValue,a=s(e.resultListLocator),c=a?o(a,n)||n[e.resultListLocator]:n;return i(c)?i(e.resultFields)?r=t._getFieldValues.call(this,e.resultFields,c,r):r.results=c:c?r.results=c:(r.results=[],r.error=new Error(\"JSON results retrieval failure\")),r},_getFieldValues:function(e,r,i){var s,o,a,c,l,u,h,p,d,f,m=[],g=e.length,v=[],y=[],x=[];for(s=0;g>s;s++)a=e[s],c=a.key||a,l=a.locator||c,u=t.getPath(l),u&&(1===u.length?v.push({key:c,path:u[0]}):y.push({key:c,path:u,locator:l})),h=n(a.parser)?a.parser:null,h&&x.push({key:c,parser:h});for(s=r.length-1;s>=0;--s)if(f={},d=r[s]){for(o=y.length-1;o>=0;--o)u=y[o],p=t.getLocationValue(u.path,d),void 0!==p||(p=t.getLocationValue([u.locator],d),void 0===p)?f[u.key]=this.parse(t.getLocationValue(u.path,d),u):(v.push({key:u.key,path:u.locator}),y.splice(s,1));for(o=v.length-1;o>=0;--o)u=v[o],f[u.key]=this.parse(void 0===d[u.path]?d[o]:d[u.path],u);for(o=x.length-1;o>=0;--o)c=x[o].key,f[c]=x[o].parser.call(this,f[c]),void 0===f[c]&&(f[c]=null);m[s]=f}return i.results=m,i},_parseMeta:function(e,n,i){if(r(e)){var s,o;for(s in e)e.hasOwnProperty(s)&&(o=t.getPath(e[s]),o&&n&&(i.meta[s]=t.getLocationValue(o,n)))}else i.error=new Error(\"JSON meta data retrieval failure\");return i}}}),define(\"lazoModel\",[\"underscore\",\"backbone\",\"proxy\",\"resolver/model\",\"async\",\"utils/dataschema-json\"],function(e,t,n,r,i,s){var o=t.Model.extend({constructor:function(e,n){this._initialize(e,n),t.Model.apply(this,arguments)},save:function(e,n,r){var i;if(null==e||\"object\"==typeof e?(i=e,r=n):(i={})[e]=n,r||(r={}),r.persist!==!1){if(r.syncDataFromChildren!==!1&&this.modelsSchema&&this.modelsSchema.length>0)for(var o=0,a=this.modelsSchema.length;a>o;o++){var c,l=this.modelsSchema[o],u=s.getPath(l.locator);u&&u.length&&this[l.prop]&&((c={})[u[0]]=this.get(u[0]),s.setLocationValue(l.locator,c,this[l.prop].toJSON()))}return t.Model.prototype.save.apply(this,arguments)}},set:function(e,n,r){var i,o;if(0==t.Model.prototype.set.apply(this,arguments))return!1;if(\"object\"==typeof e?(o=e,r=n):(o={})[e]=n,r||(r={}),null===e||!this.modelsSchema||r.syncDataToChildren===!1)return this;for(i in o)for(var a=0,c=this.modelsSchema.length;c>a;a++){var l=this.modelsSchema[a],u=s.getPath(l.locator);if(i==u[0]&&this[l.prop]){var h=s.apply({resultListLocator:l.locator},o);this[l.prop].set(h.results)}}return this},sync:function(e,t,r){var i=this,s=r.success;return r.success=function(e){i._resp=e,s&&s(e)},n.prototype.sync.call(this,e,r)},call:function(e,t,r){n.prototype.callSyncher.call(this,e,t,r)},_initialize:function(e,t){t.name&&(this.name=t.name),this.params=t.params,this.ctx=t.ctx},_getGlobalId:function(){return o._getGlobalId(this.name,this.params)}},{_serialize:function(t,n){e.each(t,function(e,t){n[t]=e._getGlobalId()})},_deserialize:function(t,n,r){LAZO.require([\"utils/modelLoader\"],function(s){var a=function(r,c,l,u,h){var p=n.modelList[c],d=n.modelInstances;r[r.length]=function(r){function c(){d[f].processing?setTimeout(c,50):(t.ctx[u+\"s\"][l]=d[f],r(null,d[f]))}var f=o._getGlobalId(p.name,p.params);if(d[f])return void c();d[f]={},d[f].processing=!0;var m=function(s,c){var m=new s(p.data,{name:p.name,ctx:t.ctx,params:p.params,parse:!0});if(d[f]=m,m.cid=p.cid,m._default=c,p.idMap&&e.each(p.idMap,function(e){var t=m.get(e.id);t&&(t.cid=e.cid)}),t.ctx[u+\"s\"][l]=m,h&&h.parentModel&&(m.lazoParent=h.parentModel,h.parentModel.lazoChildren=h.parentModel.lazoChildren||{},h.parentModel.lazoChildren[p.name]=m,h.schema&&h.schema.prop&&(h.parentModel[h.schema.prop]=m,h.parentModel._childNames=h.parentModel._childNames||[],h.parentModel._childNames.push(h.schema.prop))),!m.modelsSchema)return r(null,m);var g=[];e.each(m.modelsSchema,function(t){var r=o._getGlobalId(t.name,p.params),i=n.modelList[r].data,s=e.isArray(i)?\"collection\":\"model\";a(g,r,t.name,s,{parentModel:m,data:i,schema:t})}),i.parallel(g,function(){return r(null,m)})};s(p.name,u,m)}},c=[];e.each(t.ctx.models,function(e,t){a(c,e,t,\"model\")}),e.each(t.ctx.collections,function(e,t){a(c,e,t,\"collection\")}),i.parallel(c,function(e){return e?r.error(e):r.success()})})},_getGlobalId:function(t,n){var i=\"GET:\"+t;if(0===t.indexOf(\"u:\")||0===t.indexOf(\"http\"))n&&(i=r.substitute(i,n));else if(n){var s=e.keys(n);s.sort(),e.each(s,function(e){i=i+\"|\"+e+\"=\"+n[e]})}return i}});return o}),define(\"lazoCollection\",[\"underscore\",\"backbone\",\"proxy\",\"lazoModel\"],function(e,t,n,r){var i=t.Collection.extend({constructor:function(n,r){this._initialize(n,r),this.cid=e.uniqueId(\"c\"),r.modelName&&(this.modelName=r.modelName),t.Collection.apply(this,arguments)},sync:function(e,t,r){var i=this,s=r.success;r.success=function(e){i._resp=e,s&&s(e)},n.prototype.sync.call(this,e,r)},call:function(e,t,r){n.prototype.callSyncher.call(this,e,t,r)},_initialize:function(){r.prototype._initialize.apply(this,arguments)},_getGlobalId:function(){return r.prototype._getGlobalId.apply(this)},_prepareModel:function(n,r){var i=null;if(this.modelName&&(i=e.isFunction(this.modelName)?this.modelName(n,r):this.modelName),n instanceof t.Model)return n.collection||(n.collection=this),!n.name&&i&&(n.name=i),n;r||(r={}),r.collection=this,i&&(r.name=i),r.ctx=this.ctx;var s=new this.model(n,r);return s._validate(n,r)?s:(this.trigger(\"invalid\",this,n,r),!1)}});return i}),define(\"text\",[\"module\"],function(e){var t,n,r,i,s,o=[\"Msxml2.XMLHTTP\",\"Microsoft.XMLHTTP\",\"Msxml2.XMLHTTP.4.0\"],a=/^\\s*<\\?xml(\\s)+version=[\\'\\\"](\\d)*.(\\d)*[\\'\\\"](\\s)*\\?>/im,c=/<body[^>]*>\\s*([\\s\\S]+)\\s*<\\/body>/im,l=\"undefined\"!=typeof location&&location.href,u=l&&location.protocol&&location.protocol.replace(/\\:/,\"\"),h=l&&location.hostname,p=l&&(location.port||void 0),d={},f=e.config&&e.config()||{};return t={version:\"2.0.12\",strip:function(e){if(e){e=e.replace(a,\"\");var t=e.match(c);t&&(e=t[1])}else e=\"\";return e},jsEscape:function(e){return e.replace(/(['\\\\])/g,\"\\\\$1\").replace(/[\\f]/g,\"\\\\f\").replace(/[\\b]/g,\"\\\\b\").replace(/[\\n]/g,\"\\\\n\").replace(/[\\t]/g,\"\\\\t\").replace(/[\\r]/g,\"\\\\r\").replace(/[\\u2028]/g,\"\\\\u2028\").replace(/[\\u2029]/g,\"\\\\u2029\")},createXhr:f.createXhr||function(){var e,t,n;if(\"undefined\"!=typeof XMLHttpRequest)return new XMLHttpRequest;if(\"undefined\"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(r){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf(\".\"),o=0===e.indexOf(\"./\")||0===e.indexOf(\"../\");return-1!==s&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf(\"!\"),-1!==s&&(i=\"strip\"===r.substring(s+1),r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\\w+)\\:)?\\/\\/([^\\/\\\\]+)/,useXhr:function(e,n,r,i){var s,o,a,c=t.xdRegExp.exec(e);return c?(s=c[2],o=c[3],o=o.split(\":\"),a=o[1],o=o[0],!(s&&s!==n||o&&o.toLowerCase()!==r.toLowerCase()||(a||o)&&a!==i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,f.isBuild&&(d[e]=r),i(r)},load:function(e,n,r,i){if(i&&i.isBuild&&!i.inlineText)return void r();f.isBuild=i&&i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?\".\"+s.ext:\"\"),a=n.toUrl(o),c=f.useXhr||t.useXhr;return 0===a.indexOf(\"empty:\")?void r():void(!l||c(a,u,h,p)?t.get(a,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+\".\"+s.ext,s.strip,e,r)}))},write:function(e,n,r){if(d.hasOwnProperty(n)){var i=t.jsEscape(d[n]);r.asModule(e+\"!\"+n,\"define(function () { return '\"+i+\"';});\\n\")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),a=o.ext?\".\"+o.ext:\"\",c=o.moduleName+a,l=r.toUrl(o.moduleName+a)+\".js\";t.load(c,r,function(){var n=function(e){return i(l,e)};n.asModule=function(e,t){return i.asModule(e,l,t)},t.write(e,c,n,s)},s)}},\"node\"===f.env||!f.env&&\"undefined\"!=typeof process&&process.versions&&process.versions.node&&!process.versions[\"node-webkit\"]?(n=require.nodeRequire(\"fs\"),t.get=function(e,t,r){try{var i=n.readFileSync(e,\"utf8\");0===i.indexOf(\"\")&&(i=i.substring(1)),t(i)}catch(s){r&&r(s)}}):\"xhr\"===f.env||!f.env&&t.createXhr()?t.get=function(e,n,r,i){var s,o=t.createXhr();if(o.open(\"GET\",e,!0),i)for(s in i)i.hasOwnProperty(s)&&o.setRequestHeader(s.toLowerCase(),i[s]);f.onXhr&&f.onXhr(o,e),o.onreadystatechange=function(){var t,i;4===o.readyState&&(t=o.status||0,t>399&&600>t?(i=new Error(e+\" HTTP status: \"+t),i.xhr=o,r&&r(i)):n(o.responseText),f.onXhrComplete&&f.onXhrComplete(o,e))},o.send(null)}:\"rhino\"===f.env||!f.env&&\"undefined\"!=typeof Packages&&\"undefined\"!=typeof java?t.get=function(e,t){var n,r,i=\"utf-8\",s=new java.io.File(e),o=java.lang.System.getProperty(\"line.separator\"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),c=\"\";try{for(n=new java.lang.StringBuffer,r=a.readLine(),r&&r.length()&&65279===r.charAt(0)&&(r=r.substring(1)),null!==r&&n.append(r);null!==(r=a.readLine());)n.append(o),n.append(r);c=String(n.toString())}finally{a.close()}t(c)}:(\"xpconnect\"===f.env||!f.env&&\"undefined\"!=typeof Components&&Components.classes&&Components.interfaces)&&(r=Components.classes,i=Components.interfaces,Components.utils[\"import\"](\"resource://gre/modules/FileUtils.jsm\"),s=\"@mozilla.org/windows-registry-key;1\"in r,t.get=function(e,t){var n,o,a,c={};s&&(e=e.replace(/\\//g,\"\\\\\")),a=new FileUtils.File(e);try{n=r[\"@mozilla.org/network/file-input-stream;1\"].createInstance(i.nsIFileInputStream),n.init(a,1,0,!1),o=r[\"@mozilla.org/intl/converter-input-stream;1\"].createInstance(i.nsIConverterInputStream),o.init(n,\"utf-8\",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),c),o.close(),n.close(),t(c.value)}catch(l){throw new Error((a&&a.path||\"\")+\": \"+l)}}),t}),define(\"json\",[\"text\"],function(text){function cacheBust(e){return e=e.replace(CACHE_BUST_FLAG,\"\"),e+=e.indexOf(\"?\")<0?\"?\":\"&\",e+CACHE_BUST_QUERY_PARAM+\"=\"+Math.round(2147483647*Math.random())}var CACHE_BUST_QUERY_PARAM=\"bust\",CACHE_BUST_FLAG=\"!bust\",jsonParse=\"undefined\"!=typeof JSON&&\"function\"==typeof JSON.parse?JSON.parse:function(val){return eval(\"(\"+val+\")\")},buildMap={};return{load:function(e,t,n,r){!r.isBuild||r.inlineJSON!==!1&&-1===e.indexOf(CACHE_BUST_QUERY_PARAM+\"=\")?text.get(t.toUrl(e),function(t){r.isBuild?(buildMap[e]=t,n(t)):n(jsonParse(t))},n.error,{accept:\"application/json\"}):n(null)},normalize:function(e,t){return-1!==e.indexOf(CACHE_BUST_FLAG)&&(e=cacheBust(e)),t(e)},write:function(e,t,n){if(t in buildMap){var r=buildMap[t];n('define(\"'+e+\"!\"+t+'\", function(){ return '+r+\";});\\n\")}}}}),define(\"json!resolver/paths.json\",function(){return{common:{assetsProvider:\"lib/{env}/assetsProvider\",async:\"lib/vendor/async\",base:\"lib/common/base\",config:\"lib/common/config\",context:\"lib/common/context\",renderer:\"lib/common/renderer\",text:\"lib/vendor/text\",json:\"lib/vendor/json\",utils:\"lib/common/utils\",proxy:\"lib/{env}/proxy\",pageTemplate:\"lib/common/templates/page.hbs\",resolver:\"lib/common/resolver\",lazoApp:\"lib/common/app\",error:\"lib/common/error\",requestFilters:\"lib/common/requestFilters\",underscore:\"lib/vendor/underscore\",jquerycookie:\"lib/vendor/client/jquery-cookie\",lazo:\"lib/public\",template:\"lib/common/template\",lazoCollection:\"lib/public/collection\",lazoModel:\"lib/public/model\",lazoCtl:\"lib/public/controller\",lazoView:\"lib/public/views/base\",lazoCollectionView:\"lib/public/views/collection\",serverFileResolver:\"lib/server/resolver/file\",loggerUtils:\"lib/server/logger/utils\",handlebars:\"lib/vendor/handlebars.amd\",lazoBootstrap:\"lib/client/bootstrap\",fileSink:\"lib/server/logger/fileSink\",logger:\"lib/common/logger\",lodash:\"lib/vendor/lodash\",lazoBundle:\"lib/public/bundle\",lazoAssets:\"lib/public/assets\",assets:\"lib/public/assets\",viewManager:\"lib/client/viewManager\",flexo:\"lib/vendor/flexo.amd\",lazoViewMixin:\"lib/public/views/view\",htmlparserToString:\"lib/vendor/htmlparser-tostring\",lazoWidget:\"lib/public/widget\",lazoWidgetMixin:\"lib/public/views/widget\",uiStateMixin:\"lib/public/views/state\",destroyCmp:\"lib/client/destroyCmp\"},client:{backbone:\"lib/vendor/backbone\",clientApp:\"lib/client/app\",jquery:\"lib/vendor/client/jquery\",l:\"lib/client/loader\",hermes:\"lib/vendor/client/hermes.amd\",rehydrate:\"lib/client/rehydrate\",post:\"lib/client/post\",execute:\"lib/client/execute\",appConf:\"app/app.json\",htmlparser:\"lib/vendor/htmlparser\"},server:{backbone:\"lib/server/backbone\",backboneServer:\"lib/vendor/backbone\",jquery:\"lib/server/jquery\",server:\"lib/server/server\",serviceProxy:\"lib/server/serviceProxy\",lazoSyncher:\"lib/public/server/syncher\",l:\"lib/server/loader\",handlers:\"lib/server/handlers\",forbidden:\"lib/server/forbidden\",appServerSetup:\"lib/public/server/server\",lazoServer:\"lib/public/server/server\",httpResponse:\"lib/server/httpResponse\"},lib:[\"assetsProvider\",\"assets\",\"async\",\"config\",\"context\",\"renderer\",\"lazoApp\",\"viewManager\",\"text\",\"proxy\",\"utils/modelLoader\",\"text!pageTemplate\",\"lazoBootstrap\",\"error\",\"requestFilters\",\"underscore\",\"jquerycookie\",\"json\",\"lazoCollection\",\"lazoModel\",\"lazoCtl\",\"lazoView\",\"lazoCollectionView\",\"backbone\",\"clientApp\",\"jquery\",\"utils/handlebarsEngine\",\"l\",\"hermes\",\"rehydrate/main\",\"logger\",\"lazoBundle\",\"flexo\",\"lazoViewMixin\",\"lazoWidgetMixin\",\"lazoWidget\",\"htmlparser\",\"htmlparserToString\",\"uiStateMixin\",\"destroyCmp\"]}}),define(\"resolver/requireConfigure\",[\"json!resolver/paths.json\"],function(e){function t(e,t,n){return\"server\"===t&&(e=(n.basePath?n.basePath+\"/\":\"\")+e),e}function n(n,r){var i=JSON.parse(JSON.stringify(e)),s=\"/{env}/\",o=\"/\"+n+\"/\";for(var a in i.common)i.common[a]=t(i.common[a].replace(s,o),n,r);for(a in i[n])i.common[a]=t(i[n][a],n,r);return i.common}function r(e,t){for(var n in t)e[n]=t[n];return e}var i;return i={client:function(e,t){function i(e){return r(e,{baseUrl:\"/\",map:{\"*\":{l:\"/lib/client/loader.js\"}},paths:r(n(\"client\",e),e.paths),shim:e.shim})}try{t(null,i(LAZO.initConf.config))}catch(s){t(null,i(e))}},server:function(e,t){function i(e){return r(e,{shim:e.shim||{},baseUrl:e.baseUrl,context:\"application\",map:{\"*\":{s:e.basePath+\"/lib/server/loader.js\"}},paths:r(n(\"server\",e),e.paths)})}t(null,i(e))}},{get:function(e,t,n){return 2===arguments.length&&(n=arguments[1]),i[e](t,n)}}}),define(\"resolver/route\",[],function(){var e=/(\\(?\\?.*)$/,t=/:(\\w+)/g,n=/\\(\\/\\{(\\w+)\\}(\\/?)\\)$/,r=/(.*)\\(\\/\\)$/,i=/(\\*)(\\w+)/g;return{transform:function(s){var o=null;return s=\"/\"+s,s=s.replace(e,\"\"),s=s.replace(t,\"{$1}\"),s=s.replace(n,\"/{$1?}$2\"),r.test(s)&&(s=s.replace(r,\"$1\"),i.test(s)||(o=s+\"/\")),LAZO.app.isServer&&(s=s.replace(i,\"{$2$1}\")),{routeTrailingSlash:o,route:s}}}}),define(\"resolver/file\",[\"l!serverFileResolver\",\"underscore\",\"utils/template\"],function(e,t,n){return t.extend({getPath:function(e,t,n){var r=0===e.indexOf(\"a:\")?\"app\":\"\";return e=r?e.split(\":\")[1]:e,r=!r||\"view\"!==n&&\"template\"!==n?r:r+\"/views\",(r?r:\"components/\"+t)+(r||\"view\"!==n&&\"template\"!==n?\"\":\"/views\")+\"/\"+e},getBasePath:function(e,t,n){var r=this.getPath(e,t,n);return r.substr(0,r.lastIndexOf(\"/\"))},getTemplateName:function(e){return t.result(e,\"templateName\")||e.name},getTemplatePath:function(e){return this.getPath(this.getTemplateName(e)+\".\"+n.getTemplateExt(e.templateEngine),e.ctl.name,\"template\")},convertTemplatePath:function(e){return\"tmp/\"+e.substr(0,e.lastIndexOf(\".\"))+\".js\"},getComponentFiles:function(e,t){var n=LAZO.files.components,r=[];t=t||function(){return!0};for(var i=0;i<e.length;i++)for(var s in n)0===s.indexOf(\"components/\"+e[i]+\"/\")&&t(s)&&r.push(s);return r}},e)}),define(\"resolver/component\",[\"underscore\",\"resolver/file\"],function(e,t){return{getDef:function(t){var n,r,i,s=LAZO.app.defaultLayout,o=LAZO.routes[t],a=(n=e.isObject(o))?o.component:o,c=a.split(\"#\");return a=c.length?c[0]:a,r=c.length&&c[1]?c[1]:\"index\",i=n&&o.layout?o.layout:s&&!n||n&&!e.isBoolean(o.layout)?s:null,e.extend({},n?o:{},{name:a,action:r,layout:i})},getLinks:function(e,n){return t.getComponentFiles([e],function(e){return\"css\"===n?\".css\"===e.substr(-4,4)&&-1===e.indexOf(\"/imports/\"):-1!==e.indexOf(\"/imports/\")&&\".html\"===e.substr(-5,5)})}}}),define(\"resolver/main\",[\"resolver/requireConfigure\",\"resolver/route\",\"resolver/file\",\"resolver/component\"],function(e,t,n,r){return{getReqConfig:function(t,n,r){e.get(t,n,r)},transformRoute:function(e){return t.transform(e)},isBase:function(e,t,n){var r=LAZO.files.components[e+\".js\"]||LAZO.files.appViews[e+\".js\"]||LAZO.files.models[e+\".js\"];return n(r?!1:!0)},getPath:function(e,t,r){return n.getPath(e,t,r)},getBasePath:function(e,t,r){return n.getBasePath(e,t,r)},getTemplateName:function(e){return n.getTemplateName(e)},getTemplatePath:function(e){return n.getTemplatePath(e)},convertTemplatePath:function(e){return n.convertTemplatePath(e)},getComponentCss:function(e){return r.getLinks(e,\"css\")},getComponentImports:function(e){return r.getLinks(e,\"import\")},resolvePath:function(e,t){return n.resolvePath(e,t)}}}),define(\"utils/modelLoader\",[\"lazoModel\",\"lazoCollection\",\"resolver/main\"],function(e,t,n){var r=function(r,i,s){n.isBase(\"models/\"+r+\"/\"+i,\"model\",function(n){n?s(\"model\"===i?e:t,!0):LAZO.require([\"models/\"+r+\"/\"+i],function(e){\"function\"==typeof e&&s(e)})})};return r}),define(\"utils/loader\",[\"underscore\"],function(e){return function(t,n){function r(t){e.delay(n.error,0,t)}function i(t){try{t._execute(n.action,{success:function(t){e.delay(n.success,0,t)},error:function(e){return r(e)}})}catch(i){return r(i)}}return\"string\"!=typeof t?r(new Error('The parameter \"cmpName\" must be a string')):(n=e.defaults(n||{},{action:\"index\",name:t,error:function(){},success:function(){}}),void LAZO.require([\"lazoCtl\"],function(s){s.create(t,e.pick(n,\"ctx\",\"name\"),{success:i,error:r})}))}}),define(\"utils/assetsMixin\",[\"assets\"],function(e){var t=new e;return{getAssets:function(e,n,r){return LAZO.app.getAssets?void t.get([e],n,{success:function(t){r.success(t[e])},error:function(e){r.error(e)}}):r.success({})}}}),define(\"utils/module\",[\"resolver/file\",\"underscore\",\"text\",\"context\",\"utils/loader\",\"async\",\"utils/assetsMixin\"],function(e,t,n,r,i,s,o){return t.extend({addPath:function(e,t){var n;return LAZO.app.isServer&&(n=t._rootCtx.modules=t._rootCtx.modules||[],n.push(e),t.js=t.js||[],t.js.push(e)),this},getView:function(e,t){LAZO.require([e],function(e){return t(null,e)},function(n){return t(new Error(\"module.getView failed for \"+e+\" : \"+n.message),null)})},getTemplate:function(e,t){LAZO.require([\"text!\"+e],function(e){return t(null,e)},function(n){return t(new Error(\"Controller _getTemplate failed for \"+e+\" : \"+n.message),null)})},addChild:function(e,n,s,o){function a(e){t.delay(o.error,0,e)}function c(n){s.children||(s.children={}),s.children[e]||(s.children[e]=[]),t.isNumber(o.index)?s.children[e].splice(o.index,0,n):s.children[e].push(n),t.delay(o.success,0,n)}var l,u,h={action:\"index\",render:!1};return o=t.defaults(o||{},{error:function(){},success:function(){}}),\"string\"==typeof e&&e?\"string\"==typeof n&&n?(l=t.defaults(t.pick(o,\"action\",\"rootComponent\"),h),u=new r(t.extend({},t.pick(s.ctx,[\"_rootCtx\",\"_request\",\"_reply\",\"headers\",\"meta\",\"response\"]),{params:o.params})),s.ctx&&s.ctx._rootCtx&&(u._rootCtx=s.ctx._rootCtx),void this.getAssets(n,u,{success:function(e){u.assets=e,l.ctx=u,i(n,t.extend({},l,{success:c,error:a}))},error:a})):a(new TypeError):a(new TypeError)}},o)}),define(\"utils/model\",[\"lazoModel\",\"utils/modelLoader\",\"utils/module\",\"async\",\"underscore\",\"utils/dataschema-json\"],function(e,t,n,r,i,s){var o={process:function(a,c,l,u){function h(){null!==p[f]&&(p[f].processing?setTimeout(h,0):c.success&&i.defer(c.success,p[f]))}var p=c.ctx._rootCtx.modelInstances,d=c.ctx._rootCtx.modelList,f=e._getGlobalId(a,c.params),m=\"models/\"+a+\"/\"+l;if(c.error=c.error||function(e){throw e},p[f])return void h();p[f]={},p[f].processing=!0;var g=function(e,t){var h=u?u.data:d[f]&&d[f].data?d[f].data:null,g=new e(h,{name:a,ctx:c.ctx,params:c.params,parse:null!==h}),v=function(e,t,n){var a={data:e._resp,cid:e.cid,id:e.id,name:e.name,params:t.params};if(\"collection\"===l&&(a.idMap=[],e.each(function(e){a.idMap.push({cid:e.cid,id:e.id})})),e.ctx._rootCtx.modelList[n]=a,e.ctx._rootCtx.modelInstances[n]=e,e.modelsSchema){var c=[],u=t.success;i.each(e.modelsSchema,function(n){var r=s.apply({resultListLocator:n.locator},a.data),l=r&&r.results?i.isArray(r.results)?\"collection\":\"model\":\"model\";c.push(function(i){t.success=function(){i()},o.process(n.name,t,l,{parentModel:e,data:r.results,schema:n})})}),r.parallel(c,function(){return u?u(e):void 0})}else if(t.success)return t.success(e)};return g._default=t,c.params&&\"model\"===l&&(g.id=i.result(c.params,g.idAttribute)),t||n.addPath(m,c.ctx),u&&u.parentModel&&(g.lazoParent=u.parentModel,u.parentModel.lazoChildren=u.parentModel.lazoChildren||{},u.parentModel.lazoChildren[a]=g,u.schema&&u.schema.prop&&(u.parentModel[u.schema.prop]=g,u.parentModel._childNames=u.parentModel._childNames||[],u.parentModel._childNames.push(u.schema.prop))),d[f]?(g.cid=d[f].cid,g._default=t,d[f].idMap&&i.each(d[f].idMap,function(e){var t=g.get(e.id);t&&(t.cid=e.cid)}),p[f]=g,void(c.success&&c.success(g))):void(c.fetch===!1||u?(u&&u.data&&(g._resp=u.data),v(g,c,f)):g.fetch({success:function(e){v(e,c,f)\n},error:function(e,t,n){return p[f]=null,LAZO.logger.debug(\"[common.utils.model.process] Error loading model %s\",a),c.error?c.error(e,t,n):void 0}}))};t(a,l,g)},create:function(n,r,s,o){var a=function(t,a){var c=s.ctx._rootCtx.modelInstances,l=e._getGlobalId(n,s.params);if(c[l])return void s.success(c[l]);var u=new t(\"model\"===o?r:null,{name:n,ctx:s.ctx,params:s.params,parse:!0});u._default=a;var h={data:\"model\"===o?r:null,cid:u.cid,id:u.id,name:u.name,params:s.params};if(u.ctx._rootCtx.modelList[l]=h,u.ctx._rootCtx.modelInstances[l]=u,\"model\"===o)0==s.persist?s.success(u):u.save({},{success:function(e){s.success&&s.success(e)},error:function(e,t,r){return LAZO.logger.warn(\"[common.utils.model.createModel] Error creating model %s\",n),s.error?s.error(e,t,r):void 0}});else{if(!i.isArray(r))return void(s.error&&s.error(u,\"attributes must be an array\",s));var p=u.ctx._rootCtx.modelList[l],d=u.ctx._rootCtx.modelInstances[l],f={};s&&void 0!==s.persist&&(f.persist=s.persist),i.each(r,function(e){u.create(e,f)}),setTimeout(function(){p.data=d.toJSON(),h.idMap=[],d.each(function(e){h.idMap.push({cid:e.cid,id:e.id})}),s.success&&s.success(u)},0)}};t(n,o,a)}};return o}),define(\"utils/sanitizer\",[],function(){return{encode:function(e){return String(e).replace(/&/g,\"&amp;\").replace(/\"/g,\"&quot;\").replace(/'/g,\"&#39;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\").replace(/`/g,\"&#x60;\")}}}),define(\"utils/document\",[\"jquery\",\"async\",\"underscore\",\"utils/sanitizer\"],function(e,t,n,r){var i=\"\",s=\"\",o=[],a={script:{type:\"text/javascript\",\"lazo-application\":\"1\"},link:{rel:\"stylesheet\",type:\"text/css\",\"lazo-application\":\"1\"}};return{setHtmlTag:function(e){return i=e,this},setBodyClass:function(e){return s=e,this},getHtmlTag:function(){return i},getBodyClass:function(){return s},addTag:function(e,t,n){var r=this._createTag(e,t,n);return o.push(r),LAZO.app.isClient&&this._addTagToDOM(r),this},getTags:function(){return o},setTitle:function(t){var r,i=n.find(o,function(e){return\"title\"===e.name}),s=this._createTag(\"title\",{},t);return i?i.content=s.content:o.push(s),LAZO.app.isClient&&(r=e(\"title\"),r.length?r.html(s.content):this._addTagToDOM(s)),this},updateLinks:function(n,r,i,s){var o,a=[],c=this;for(this.$head=this.$head||e(\"head\"),o=0;o<n.length;o++)!function(e){a.push(function(t){var r=document.createElement(\"link\"),s=c.$head[0];for(var o in n[e])r.setAttribute(o,n[e][o]);r.setAttribute(\"lazo-link\",i),r.onload=function(){t(null)},r.onerror=function(r){LAZO.logger.warn(\"[application.navigate] Error while loading link %s\",n[e],r),t(null)},s.appendChild(r)})}(o);t.parallel(a,function(){for(o=0;o<r.length;o++)c.$head.find('[href=\"'+r[o].href+'\"][lazo-link=\"'+i+'\"]:first').remove();s()})},setsDefaultTitle:function(e){return this.defaultTitle=e,this},addPageTag:function(e,t,n,r,i){var s=this._createPageTag(n,r,i);t?(e._rootCtx.pageTags=e._rootCtx.pageTags||[],e._rootCtx.pageTags.push(s)):(e.meta=e.meta||{},e.meta.pageTags=e.meta.pageTags||[],e.meta.pageTags.push(s))},getPageTags:function(e,t){return t?e._rootCtx.pageTags||[]:(e.meta=e.meta||{},e.meta.pageTags||[])},updatePageTags:function(e,n){if(!LAZO.app.isClient)return n();var r=this,i=[];for(e._rootCtx.pageTags=e._rootCtx.pageTags||[];e._rootCtx.pageTags.length>0;)r._removeTagFromDOM(e._rootCtx.pageTags.pop());for(e.meta=e.meta||{},e.meta.pageTags=e.meta.pageTags||[];e.meta.pageTags.length>0;){var s=e.meta.pageTags.pop();e._rootCtx.pageTags.push(s),function(e){i.push(function(t){r._addTagToDOM(e),t()})}(s)}t.parallel(i,function(e){return e?(LAZO.logger.error(\"Failed adding page tags. %s\",e),n(e)):void n()})},_createPageTag:function(e,t,n){return this._encodeTag(e,t,n)},_createTag:function(e,t,r){var i;return r=r||null,i=n.clone(a[e]||{}),this._encodeTag(e,n.extend(i,t),r)},_encodeTag:function(e,t,i){t=t||[];for(var s=n.keys(t),o={},a=0;a<s.length;a++){var c=s[a];o[c]=r.encode(t[c])}var l=null;return i&&(l=r.encode(i)),{name:e,attributes:o,content:l}},_addTagToDOM:function(t){if(LAZO.app.isClient){var r=this;r.$head=r.$head||e(\"head\");var i=r._getTagSelector(t),s=n.reduce(t.attributes||[],function(e,t,n){return e+(\" \"+n+'=\"'+t+'\"')},\"\");return r.$head.find(i).length?void LAZO.logger.debug(\"Duplicate tag will not be added: %s, %s, %s\",t.name,s,t.content):void r.$head.append(\"<\"+t.name+s+\">\"+(t.content||\"\")+\"</\"+t.name+\">\")}},_removeTagFromDOM:function(t){if(LAZO.app.isClient){var n=this;n.$head=n.$head||e(\"head\");var r=n._getTagSelector(t);n.$head.find(r).remove()}},_getTagSelector:function(e){var t=n.reduce(e.attributes,function(e,t,n){return e+(\"[\"+n+'=\"'+t+'\"]')},\"\");return e.name+t+\":first\"}}}),define(\"lazoBundle\",[\"underscore\",\"base\",\"resolver/component\",\"jquery\"],function(e,t,n,r){var i=function(){return LAZO.isClient&&\"import\"in document.createElement(\"link\")}();return t.extend({response:function(e,t,n){n.success(null)},getLibPath:function(){return LAZO.conf.libPath},resolveBundleUrl:function(e){return e},getComponentDef:function(e){return n.getDef(e)},getComponentCss:function(e){return n.getLinks(e,\"css\")},getComponentCSS:function(e){return n.getLinks(e,\"css\")},getComponentImports:function(e){return n.getLinks(e,\"import\")},sortCss:function(e){return e},sortImports:function(e){return e},resolveImport:function(e,t){if(LAZO.app.isServer)return LAZO.logger.warn(\"bundle.resolveImport\",\"Cannot call on server.\"),null;var n=\"application\"===t?e:\"components/\"+t+\"/imports/\"+e,s=r('link[href*=\"'+n+'\"][lazo-link-ctx=\"'+t+'\"]'),o=s[0];return o?i?o.import:o:null},_createLink:function(t,n){return e.isString(t)?e.extend({href:t},n):e.extend(n,t)},_createCSSLink:function(e){return this._createLink(e,{rel:\"stylesheet\",type:\"text/css\",\"lazo-link\":\"css\",\"lazo-link-ctx\":\"application\"})},_createCSSLinks:function(t){return e.map(t,e.bind(this._createCSSLink,this))},_createImportLink:function(e){return this._createLink(e,{rel:\"import\",\"lazo-link\":\"import\",\"lazo-link-ctx\":\"application\"})},_createImportLinks:function(t){return e.map(t,e.bind(this._createImportLink,this))}})}),define(\"lazoApp\",[\"requestFilters\",\"underscore\",\"utils/template\",\"utils/model\",\"utils/document\",\"backbone\",\"base\",\"bundler\",\"l!httpResponse\"],function(e,t,n,r,i,s,o,a,c){var l=new a,u=o.extend({isClient:!1,isServer:!1,defaultTitle:\"lazojs\",prefetchCss:!1,setData:function(e,t,n){return n._rootCtx.data[e]=t,this},getData:function(e,t){return t._rootCtx.data[e]},addRequestFilter:function(t,n){return e.add(t,n),this},addRoutes:function(e){return LAZO.routes=LAZO.routes||{},t.extend(LAZO.routes,e),this},navigate:function(e,t){if(this.isClient){if(t.match(/^(?:(ht|f)tp(s?)\\:\\/\\/)?/)[0].length)return window.location=t;LAZO.router.navigate(t,{trigger:!0})}else e._reply.redirect(t)},loadModel:function(e,t){return r.process(e,t,\"model\"),this},loadCollection:function(e,t){return r.process(e,t,\"collection\"),this},createModel:function(e,t,n){return r.create(e,t,n,\"model\"),this},createCollection:function(e,t,n){return r.create(e,t,n,\"collection\"),this},addTag:function(e,t,n){return i.addTag(e,t,n),this},addPageTag:function(e,t,n,r){return i.addPageTag(e,this.isServer,t,n,r),this},getPageTags:function(e){return i.getPageTags(e,this.isServer)},setHtmlTag:function(e){return i.setHtmlTag(e),this},setBodyClass:function(e){return i.setBodyClass(e),this},setTitle:function(e){return i.setTitle(e),this},setDefaultTitle:function(e){return this.defaultTitle=e,this},registerTemplateEngine:function(e,t){return n.loadTemplateEngine(e,t),this},getTemplateEngine:function(e){return n.getTemplateEngine(e)},getTemplateExt:function(e){return n.getTemplateExt(e)},getDefaultTemplateEngine:function(){return n.getDefaultTemplateEngine()},getDefaultTemplateEngineName:function(){return n.getDefaultTemplateEngineName()},setDefaultTemplateEngine:function(e){n.setDefaultTemplateEngine(e)},getImport:function(e){return l.resolveImport(e,\"application\")},addHttpHeader:function(e,t,n){return this.isClient?this:(c.addHttpHeader(e,t,n),this)},getHttpHeaders:function(){return this.isClient?[]:c.getHttpHeaders()},addHttpVaryParam:function(e){return this.isClient?this:(c.addVaryParam(e),this)},getHttpVaryParams:function(){return this.isClient?[]:c.getVaryParams()}});return t.extend(u.prototype,s.Events),u}),define(\"viewManager\",[\"underscore\",\"jquery\",\"utils/treeMixin\"],function(e,t,n){return e.extend({cleanup:function(t){var n=this.getList(\"view\",t);return e.each(n,function(e){e.remove()}),this},attachViews:function(n,r){var i=this.getList(\"view\",n),s=this,o=e.size(i),a=0;return e.each(i,function(e){e.attach(t(\"[\"+s._attrs.viewId+'=\"'+e.cid+'\"]')[0],{success:function(){e.afterRender(),a++,a===o&&r(null,!0)},error:function(e){r(e,null)}})}),this}},n)}),define(\"text!pageTemplate\",[],function(){return\"<!DOCTYPE html>\\n{{!--\\n    htmlTag is generated by LAZO.app.setHtmlTag;\\n    removing this if, else block will cause LAZO.app.setHtmlTag\\n    to not have any effect on the application\\n --}}\\n{{#if htmlTag}}\\n    {{{htmlTag}}}\\n{{else}}\\n<html>\\n{{/if}}\\n<head>\\n    <meta charset=\\\"UTF-8\\\">\\n    {{!--\\n        START: DO NOT REMOVE\\n        If any of the code between \\\"START\\\" and \\\"END\\\" is removed it will break lazo.\\n    --}}\\n    {{#each tags}}\\n        <{{name}} {{#each attributes}}{{@key}}=\\\"{{this}}\\\" {{/each}}>{{content}}</{{name}}>\\n    {{/each}}\\n    {{#each dependencies.imports}}\\n        <link {{#each this}}{{@key}}=\\\"{{this}}\\\" {{/each}} lazo-link=\\\"import\\\">\\n    {{/each}}\\n    {{#each dependencies.css}}\\n        <link {{#each this}}{{@key}}=\\\"{{this}}\\\" {{/each}} lazo-link=\\\"css\\\">\\n    {{/each}}\\n\\n    <script type=\\\"text/javascript\\\">\\n        var LAZO = {\\n            initConf: {\\n                layout: '{{layout}}',\\n                rootCtx: {{{rootCtx}}},\\n                rootCtl: {{{rootCtl}}},\\n                config: {{{config}}},\\n                args: {{{args}}},\\n                files: {{{files}}},\\n                bundler: '{{bundler}}',\\n                assets: '{{assets}}'\\n            }\\n        };\\n    </script>\\n    <script src=\\\"/lib/vendor/require.js\\\"></script>\\n    {{#if lib}}\\n        <script type=\\\"text/javascript\\\">\\n            requirejs(['{{lib}}'], function () {\\n                var bootstrap = requirejs.config({\\n                    baseUrl: '/',\\n                    paths: {\\n                        'resolver': 'lib/common/resolver',\\n                        'text': 'vendor/text',\\n                        'json': 'vendor/json',\\n                        'lazoBootstrap': 'lib/client/bootstrap'\\n                    }\\n                });\\n\\n                bootstrap(['lazoBootstrap'], function () {});\\n            });\\n        </script>\\n    {{else}}\\n        <script type=\\\"text/javascript\\\">\\n            (function () {\\n                var bootstrap = requirejs.config({\\n                    baseUrl: '/',\\n                    paths: {\\n                        'resolver': 'lib/common/resolver',\\n                        'text': 'vendor/text',\\n                        'json': 'vendor/json',\\n                        'lazoBootstrap': 'lib/client/bootstrap'\\n                    }\\n                });\\n\\n                bootstrap(['lazoBootstrap'], function () {});\\n            })();\\n        </script>\\n    {{/if}}\\n    {{!-- END: DO NOT REMOVE --}}\\n</head>\\n{{!--\\n    bodyClass is generated by LAZO.app.setBodyClass;\\n    removing this if, else block will cause LAZO.app.setBodyClass\\n    to not have any effect on the application\\n--}}\\n<body{{#if bodyClass}} class='{{bodyClass}}'{{/if}}>\\n    {{!-- DO NOT REMOVE --}}\\n    {{{body}}}\\n</body>\\n</html>\"}),define(\"lazoBootstrap\",[\"resolver/requireConfigure\"],function(e){e.get(\"client\",function(e,t){function n(){r([\"config\"],function(e){LAZO.config=e,r([\"app/application\",\"handlebars\",\"error\",\"logger\",\"json!app/app.json\"],function(e,t,n,i,s){LAZO.app=new e,LAZO.error=n,LAZO.app.isServer=!1,LAZO.app.isClient=!0,LAZO.app.js=s.js||[],LAZO.app.css=s.css||[],LAZO.app.getAssets=s.assets||!1,LAZO.app.defaultLayout=s.defaultLayout,LAZO.app.assets=LAZO.initConf.rootCtx.assets.app,LAZO.logger=i,LAZO.routes=s.routes,r([\"clientApp\"],function(e){LAZO.app.args=LAZO.initConf.args,r(LAZO.app.js,function(){LAZO.app.initialize(function(){e.initialize()})})})})})}if(e)throw e;t.paths.assets=LAZO.initConf.assets||t.paths.assets,t.paths.bundler=LAZO.initConf.bundler||t.paths.lazoBundle;var r=requirejs.config(t);LAZO.require=r,LAZO.isServer=!1,LAZO.isClient=!0,LAZO.initConf.rootCtx.dependencies.modules?r(LAZO.initConf.rootCtx.dependencies.modules,function(){n()}):n()})}),define(\"error\",[\"jquery\",\"underscore\"],function(e){return{clear:function(){e(\"[lazo-error]\").remove(),e(\"body > [lazo-cmp-name]\").show()},render:function(t){LAZO.require([\"text!\"+t.statusCode,\"utils/template\"],function(n,r){var i=r.getDefaultTemplateEngine(),s=i.compile(n),o=e('<div lazo-error=\"'+t.statusCode+'\">');e(\"body > [lazo-cmp-name]\").hide(),e(\"body\").append(o),o.html(s(t))})}}}),define(\"flexo\",[\"underscore\",\"backbone\"],function(e,t){function n(e){return{error:e.error||function(e){throw e}}}function r(t){var n={success:function(){},error:function(e){throw e}};return e.defaults(t,n)}function i(){}function s(e,t,n){var r=new RegExp(\"<[^<]*\"+e+\"+=[\\\"||']\"+t+\"[\\\"||']+.*?>\");return n.match(r)}function o(e,t,n,r){var i=s(e,t,r),o=r.substr(0,i.index+i[0].length),a=r.substr(i.index+i[0].length);return r=o+n+a}var a={isClient:!1,isServer:!1};try{a.isClient=!0}catch(c){a.isServer=!0}a.isServer&&(t.View.prototype._ensureElement=i,t.View.prototype.delegateEvents=i,t.View.prototype.undelegateEvents=i);var l=t.View.extend({childOptions:{},attributeNameSpace:\"flexo\",eventNameSpace:\"flexo\",constructor:function(t){this.cid=e.uniqueId(\"view\"),this.children=e.size(this.children)?e.clone(this.children):{},this.augment(t||(t={})),this.isServer=a.isServer,this.isClient=a.isClient,this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},render:function(t){var i=this;return t=r(t),this.isServer?t.success(null,\"\"):void this.getInnerHtml(e.extend(n(t),{success:function(e){i.$el.html(e),i.afterRender(),t.success(e),i.trigger(i.eventNameSpace+\":rendered\",i)}}))},augment:function(t){e.extend(this,t)},attach:function(e,t){t=r(t),this.setElement(e),this.onAttach(),this.trigger(this.eventNameSpace+\":attached\",this),this.attachChildren(t)},attachChildren:function(t){var n=e.size(this.children),i=0;if(t=r(t),!n)return t.success(!0);for(var s in this.children)this.children[s].attach(this.$(\"[\"+this.attributeNameSpace+'-view-id=\"'+this.children[s].cid+'\"]')[0],{error:t.error,success:function(){i++,i===n&&t.success(!0)}})},afterRender:function(){},onRemove:function(){},onAttach:function(){},getAttributes:function(){var e={};return e[this.attributeNameSpace+\"-view-id\"]=this.cid,e},remove:function(){return this._onRemove(),this.onRemove(),t.View.prototype.remove.call(this),this.trigger(this.eventNameSpace+\":removed\"),this},getHtml:function(t){var i=this;t=r(t),this.getInnerHtml(e.extend(n(t),{success:function(e){t.success(i._wrapperEl(e))}}))},getInnerHtml:function(t){var i=this;t=r(t),this.getRenderer(e.extend(n(t),{success:function(r){i.serializeData(e.extend(n(t),{success:function(s){r(s,e.extend(n(t),{success:function(e){i._getChildrenHtml(e,t)}}))}}))}}))},getRenderer:function(t){if(t=r(t),this.renderer)return t.success(this.renderer);var i=this;this.getTemplateEngine(e.extend(n(t),{success:function(e){var n=e(i.template);i.renderer=function(e,t){var r=n(e);try{r=n(e),t.success(n(e))}catch(i){t.error(i)}},t.success(i.renderer)}}))},getTemplateEngine:function(t){t=r(t),t.success(e.template)},serializeData:function(e){var t=this.model?this.model.toJSON():{};e=r(e),this.transformData(t,e)},transformData:function(e,t){t=r(t),t.success(e)},setElement:function(){var n=t.View.prototype.setElement.apply(this,arguments);return this._setElAttributes(e.extend(this._getAttributes(),this.getAttributes())),n},getChildren:function(t){t=r(t),t.success(e.result(this,\"children\"))},addChild:function(t,i,s){var o=this;s=r(s),this.loadChild(t,e.extend(n(s),{success:function(e){var n=o.children[t]=new e(o.getChildOptions());o.appendChild(i,n,s)}}))},loadChild:function(e,t){t=r(t),t.success(l)},resolveChild:function(e,t){var n,i=this.children[e];return t=r(t),i.cid?t.success(i):(n=this.children[e])?(i=this.children[e]=new n(this.getChildOptions()),void t.success(i)):t.error(new Error(\"Child view, \"+e+\" could not be resolved.\"))},appendChild:function(e,t,n){n=r(n),e.append(t.$el),n.success(t),this.trigger(this.eventNameSpace+\":child:added\",t)},getChildOptions:function(t){return e.extend({},t,this._getChildOptions())},_getChildrenHtml:function(t,i){var s=this;i=r(i),this.getChildren(e.extend(n(i),{success:function(r){var a=r?e.size(r):0,c=0;return a?void e.each(r,function(r,l){s.resolveChild(l,e.extend(n(i),{success:function(r){r.getHtml(e.extend(n(i),{success:function(e){t=o(s.attributeNameSpace+\"-view\",l,e,t),c++,c===a&&i.success(t)}}))}}))}):i.success(t)}}))},_getChildOptions:function(t){return t||(t={}),e.extend({},t,e.result(this,\"childOptions\"))},_wrapperEl:function(t){var n,r,i=\"\",s=this._getAttributes();return e.each(s,function(e,t){i+=\" \"+t+'=\"'+e+'\"'}),n=\"<\"+e.result(this,\"tagName\")+i+\">\",r=\"</\"+e.result(this,\"tagName\")+\">\",n+t+r},_setElAttributes:function(e){this.isServer||this.$el.attr(e)},_getAttributes:function(){var t=e.extend({},e.result(this,\"attributes\"));return this.id&&(t.id=e.result(this,\"id\")),this.className&&(t[\"class\"]=e.result(this,\"className\")),e.extend(t,this.getAttributes())},_onRemove:function(){for(var e in this.children)this.children[e].remove(),delete this.children[e];return this}});a.View=l;var u=l.extend({constructor:function(e){l.call(this,e),this.collections||(this.collections=[]),this._collections||(this._collections=[]),this.collection||(this.collection={}),this._itemViews||(this._itemViews={}),this._emptyViews||(this._emptyViews={}),this.itemViewOptions||(this.itemViewOptions={})},getInnerHtml:function(t){var i=this;t=r(t),l.prototype.getInnerHtml.call(this,e.extend(n(t),{success:function(r){i._getCollectionHtml(r,e.extend(n(t),{success:function(e){t.success(e)}}))}}))},getCollection:function(n,i){i=r(i),e.isString(n)?this.resolveCollection(n,i):i.success(n instanceof t.Collection?n:new t.Collection)},resolveCollection:function(e,t){t=r(t);try{var n=this.collections[e];t.success(n)}catch(i){t.error(i)}},getItemView:function(e,t,n){n=r(n);try{var i=this.itemViews[this._findCollection(t).name];n.success(i)}catch(s){n.error(s)}},getEmptyView:function(e,t){t=r(t);try{var n=this.emptyViews&&this.emptyViews[this._findCollection(e).name];t.success(n)}catch(i){t.error(i)}},addItemView:function(e,t,n){var i=this;n=r(n),e.append(t.$el),t.attach(t.$el[0],{error:n.error,success:function(){n.success(t),i.trigger(i.eventNameSpace+\":itemView:added\",t)}})},addEmptyView:function(e,t,n){var i=this;n=r(n),e.append(t.$el),t.attach(t.$el[0],{error:n.error,success:function(){n.success(t),i.trigger(i.eventNameSpace+\":emptyView:added\",t)}})},removeEmptyView:function(e,t,n){n=r(n),t.remove(),n.success(!0),this.trigger(this.eventNameSpace+\":itemView:removed\")},removeItemView:function(e,t,n){n=r(n),t.remove(),n.success(!0),this.trigger(this.eventNameSpace+\":emptyView:removed\")},renderCollection:function(i,s){function o(){u===h&&s.success(!0)}var a,c=2===arguments.length?[this._findCollection(i)]:this._collections,l=c.length,u=e.reduce(c,function(e,t){return e+t.collection.length},0),h=0,p=this;s=i instanceof t.Collection?s:i,s=r(s);for(var d=0;l>d;d++)!function(t){a=p.$(\"[\"+p.attributeNameSpace+'-collection-target=\"'+c[t].name+'\"]'),a.html(\"\"),c[t].collection.length?c[t].collection.each(function(r){p._addItemView(r,c[t].collection,e.extend(n(s),{success:function(){h++,o(),p.trigger(p.eventNameSpace+\":collection:rendered\",c[t].collection)}}))}):(u++,p._getEmptyItemViewInstance(null,c[t].collection,e.extend(n(s),{success:function(r){r?p.addEmptyView(a,r,{success:function(){r.render(e.extend(n(s),{success:function(){h++,o(),p.trigger(p.eventNameSpace+\":collection:rendered\",c[t].collection)},error:s.error}))},error:s.error}):(h++,o(),p.trigger(p.eventNameSpace+\":collection:rendered\",c[t].collection))}})))}(d)},attach:function(e,t){function n(){i++,2===i&&t.success(!0)}var i=0;t=r(t),a.View.prototype.attach.call(this,e,{error:t.error,success:n}),this.attachItemEmptyViews({error:t.error,success:n})},attachItemEmptyViews:function(t){var n=this,i=e.size(this._itemViews)+e.size(this._emptyViews),s=0,o=[\"_itemViews\",\"_emptyViews\"];t=r(t),i||t.success(!0);for(var a=0;a<o.length;a++)for(var c in this[o[a]])this[o[a]][c].attach(this.$(\"[\"+this.attributeNameSpace+'-view-id=\"'+this[o[a]][c].cid+'\"]'),{error:t.error,success:function(){s++,s===i&&(n.trigger(n.eventNameSpace+\":itemViews:attached\"),t.success(!0))}})},getItemViewOptions:function(e,t,n,r){return this._getItemViewOptions(r)},createItemView:function(e,t,n){var r=new e(this.getItemViewOptions(\"itemView\",t,n,{model:t}));return this._itemViews[t.cid]=r,r},createEmptyView:function(e,t){var n=new e(this.getItemViewOptions(\"emptyView\",null,t,{}));return this._emptyViews[t.cid]=n,n},_collections:null,_itemViews:null,_emptyViews:null,_listenToCollection:function(e){this.stopListening(e,\"add\",this._collectionAdd,this),this.stopListening(e,\"remove\",this._collectionRemove,this),this.stopListening(e,\"reset\",this._collectionReset,this),this.listenTo(e,\"add\",this._collectionAdd,this),this.listenTo(e,\"remove\",this._collectionRemove,this),this.listenTo(e,\"reset\",this._collectionReset,this)},_addItemView:function(t,i,s){function o(t,r,i){l._getEmptyItemViewInstance(r,i,e.extend(n(s),{success:function(r){r.getInnerHtml(e.extend(n(s),{success:function(i){r.$el.html(i),l.addItemView(t,r,e.extend(n(s),{success:function(e){s.success(e),l.trigger(l.eventNameSpace+\":itemView:added\",r)}}))}}))}}))}var a=this._findCollection(i),c=this.$(\"[\"+this.attributeNameSpace+'-collection-target=\"'+a.name+'\"]').first(),l=this;s=r(s),this._emptyViews[i.cid]&&this._emptyViews[i.cid].emptyViewShown?this.removeEmptyView(c,this._emptyViews[i.cid],e.extend(n(s),{success:function(){o(c,t,i)}})):o(c,t,i)},_collectionAdd:function(e,t){this._addItemView(e,t,{error:function(e){if(e)throw e}})},_collectionRemove:function(t,i){var s=this._findCollection(i),o=this.$(\"[\"+this.attributeNameSpace+'-collection-target=\"'+s.name+'\"]'),a=this._itemViews[t.cid],c=this,l=r({});this.removeItemView(o,a,e.extend(n(l),{success:function(){i.length||c._getEmptyItemViewInstance(null,i,e.extend(n(l),{success:function(t){t&&c.addEmptyView(o,t,e.extend(n(l),{success:function(e){l.success(e),c.trigger(c.eventNameSpace+\":emptyView:removed\",i)}}))}}))}}))},_collectionReset:function(e){this.renderCollection(e)},_addCollection:function(e,t){this._listenToCollection(t),this._findCollection(t)||this._collections.push({name:e,collection:t})},_findCollection:function(e){for(var t=this._collections.length;t;)if(t--,this._collections[t].collection===e)return this._collections[t];return null},_getCollectionHtml:function(t,i){function s(){u++,l===u&&i.success(o._insertCollectionHtml(a,c,t))}var o=this,a=this._findCollectionNames(t),c={},l=0,u=0;if(i=r(i),a.length){l=a.length;for(var h=0;h<a.length;h++)!function(t){o.getCollection(a[t],e.extend(n(i),{success:function(r){o._addCollection(a[t],r),o._getItemViewsHtml(r,e.extend(n(i),{success:function(e){c[a[t]]=e,s()}}))}}))}(h)}else{if(!this.collection)return i.success(t);o.getCollection(this.collection,e.extend(n(i),{success:function(t){o._getItemViewsHtml(t,e.extend(n(i),{success:function(e){i.success(e)}}))}}))}},_insertCollectionHtml:function(e,t,n){for(var r,i,o,a=0;a<e.length;a++)r=s(this.attributeNameSpace+\"-collection-target\",e[a],n),i=n.substr(0,r.index+r[0].length),o=n.substr(r.index+r[0].length),n=i+t[e[a]]+o;return n},_getItemViewsHtml:function(t,i){function s(){c++,t.length===c&&i.success(o)}var o=\"\",a=this,c=0;i=r(i),t.length?(a._setEmptyViewStatus(t,!1),t.each(function(r){a._getEmptyItemViewInstance(r,t,e.extend(n(i),{success:function(t){t.getHtml(e.extend(n(i),{success:function(e){o+=e,s()}}))}}))})):this._getEmptyItemViewInstance(null,t,e.extend(n(i),{success:function(r){a._setEmptyViewStatus(t,!0),r?r.getHtml(e.extend(n(i),{success:function(e){i.success(e)}})):i.success(o)}}))},_getItemViewOptions:function(t){return t||(t={}),e.extend({},t,e.result(this,\"itemViewOptions\"))},_getEmptyItemViewInstance:function(t,i,s){var o=this,a=this._findCollection(i);if(s=r(s),t){if(this._itemViews[t.cid])return s.success(o._itemViews[t.cid]);this.getItemView(t,i,e.extend(n(s),{success:function(e){s.success(o.createItemView(e,t,i))}}))}else{if(this._emptyViews[a.collection.cid])return s.success(this._emptyViews[a.collection.cid]);this.getEmptyView(i,e.extend(n(s),{success:function(e){s.success(e?o.createEmptyView(e,i):null)}}))}},_setEmptyViewStatus:function(t,n){if(e.isNull(this._findCollection(t)))throw new Error(\"Could not find collection target in markup.\");this._emptyViews[t.cid]&&(this._emptyViews[t.cid].emptyViewShown=n)},_findCollectionNames:function(e){for(var t=e,n=!0,r=[],i=0,s=new RegExp(\"<[^>]*\\\\s(?:\"+this.attributeNameSpace+\"-collection-target=[\\\"']([^\\\"']*)[\\\"'])[^>]*>\");n;)t=t.substr(i),n=t.match(s),n&&(r.push(n[1]),i=n[0].length+n.index);return r},_onRemove:function(){l.prototype._onRemove.call(this);for(var e in this._itemViews)this._itemViews[e].remove(),delete this._itemViews[e];for(var t in this._emptyViews)this._emptyViews[t].remove(),delete this._emptyViews[t];return this}});return a.CollectionView=u,a}),define(\"uiStateMixin\",[\"jquery\",\"underscore\"],function(e,t){var n={focus:!0,disabled:!0,visible:!0,hidden:!0};return{stateClassPrefix:\"lazo\",_getStateClass:function(e){return this.stateClassPrefix+\"-\"+e},_getValidStates:function(){return n},_getStates:function(){LAZO.app.isServer&&LAZO.logger.warn(\"[getStates] Client only method\");for(var e,n=this,r={},i=this.el?this.el.className.split(\" \"):[],s=this._getValidStates(),o=t.filter(i,function(e){var t=e.split(\"-\");return t[0]===n.stateClassPrefix&&s[t[1]]&&2===t.length}),a=0;a<o.length;a++)e=o[a].split(\"-\")[1],r[e]=e;return r},setState:function(t,r){return n[t]?(LAZO.app.isClient&&e(this.el)[r?\"addClass\":\"removeClass\"](this._getStateClass(t)),this._uiStates=this._uiStates||{},void(r?this._uiStates[t]=t:delete this._uiStates[t])):void LAZO.logger.warn(\"[setState] Invalid state, \"+t)}}}),define(\"utils/uniqueId\",[],function(){var e=LAZO&&LAZO.initConf?LAZO.initConf.rootCtx.idCounter:0;return function(t){var n=++e+\"\";return t?t+n:n}}),define(\"lazoViewMixin\",[\"underscore\",\"backbone\",\"utils/template\",\"resolver/main\",\"flexo\",\"renderer\",\"l!viewManager\",\"uiStateMixin\",\"utils/uniqueId\"],function(e,t,n,r,i,s,o,a,c){var l=[\"model\",\"collection\",\"el\",\"id\",\"attributes\",\"className\",\"tagName\",\"events\",\"ctl\",\"cid\",\"template\",\"name\",\"render\",\"templateEngine\",\"templatePath\",\"ref\",\"basePath\",\"isBase\",\"hasTemplate\",\"getInnerHtml\",\"compiledTemplatePath\",\"viewDefinitions\",\"getTemplate\",\"itemViewOptions\",\"itemView\",\"itemViews\",\"emptyView\",\"emptyViews\"];return e.extend({hasTemplate:!1,templateEngine:\"handlebars\",eventNameSpace:\"lazo:view\",attributeNameSpace:\"lazo\",render:function(t){if(this.isServer)throw\"view, \"+this.name+\", attempted to call render on the server.\";var n=this;return s.getTreeHtml(this.ctl,this.cid,\"view\",function(r){o.cleanup(n.ctl),n.ctl._getEl().html(r),n.trigger(n.eventNameSpace+\":rendered\",n),o.attachViews(n.ctl,function(n){return n&&t&&e.isFunction(t.error)?t.error(n):void(t&&e.isFunction(t.success)&&t.success(r))})}),this},getWidgetByEl:function(e){var t=this._getWidgetInstances(this);for(var n in t)for(var r=0;r<t[n].length;r++)if(t[n][r].el===e)return t[n][r]},getWidgetsByName:function(e){var t=this._getWidgetInstances(this);return t[e]||[]},getAttributes:function(){var e,t,n={},r={\"lazo-view-name\":\"name\",\"lazo-view-id\":\"cid\",\"lazo-model-name\":\"model.name\",\"lazo-model-id\":\"model.cid\",\"lazo-collection-name\":\"collection.name\",\"lazo-collection-id\":\"collection.cid\"};for(var i in r){t=this,e=r[i].split(\".\");for(var s=0;s<r[i].length;s++){if(!(t=t[e[s]])){delete r[i];break}n[i]=t}}return n},getExclusions:function(){return{ctl:!0,$el:!0,el:!0,parent:!0,options:!0}},serializeData:function(t){var n=e.extend(this._serialize(this.ctl.ctx,this.getExclusions()),this._serialize(this,this.getExclusions()));this.transformData(n,t)},augment:function(t){t.collection=this.collection||t.collection,e.extend(this,e.pick(t,l))},getTemplateEngine:function(e){var t=this.templateEngine;n.loadTemplateEngine({name:t,handler:n.engHandlerMaker(t),exp:null,extension:n.getDefaultExt(t)},{error:function(t){e.error(t)},success:function(t){e.success(t)}})},getRenderer:function(e){var t=this;return this.renderer?e.success(this.renderer):void this.getTemplateEngine({error:e.error,success:function(n){t.renderer=n,t.getTemplate({error:e.error,success:function(r){var i=n.compile(r);t.template=r,t.renderer=function(e,t){t.success(i(e))},e.success(t.renderer)}})}})},getTemplate:function(e){var t=this;this.templatePath=this.templatePath||r.getTemplatePath(this),LAZO.require([\"text!\"+t.templatePath],function(n){t.hasTemplate=!0,e.success(n)},function(t){e.error(t)})},loadChild:function(e,t){this._loadView(e,{error:t.error,success:function(e){t.success(e)}})},resolveChild:function(t,n){var r=this;r.getChildren({success:function(i){var s=i[t];s||n.error(new Error(\"Could not resolve child view, \"+t)),s=e.isObject(s)&&s.cid?s.name:s,r.loadChild(s,{error:n.error,success:function(e){r.children=r.children||{};var i=r.children[t]=new e(r.getChildOptions({name:s}));n.success(i)}})},error:n.error})},getChildOptions:function(t){return this._getChildOptions(e.extend({ctl:this.ctl,ref:this.ctl._getPath(t.name,\"view\"),baseBath:this.ctl._getBasePath(t.name,\"view\"),cid:c(\"view\")},t))},getChildren:function(t){this.viewDefinitions||(this.viewDefinitions=e.result(this,\"viewDefinitions\",{})),t.success(this.viewDefinitions)},attachChildren:function(e){function t(){o++,o>=s&&(i.trigger(i.eventNameSpace+\":children:attached\",i),e.success(!0))}var n,r=this.$(\"[lazo-view-name]\"),i=this;n=this.$(\"[lazo-view]\").filter(function(){var e=this,t=!0;return r.each(function(){return $.contains(this,e)?(t=!1,!1):void 0}),t});var s=n.length,o=0;this.attachWidgets({success:t,error:e.error}),n.each(function(){var n=$(this),r=n.attr(\"lazo-view\");return r?void i.resolveChild(r,{error:e.error,success:function(r){r.once(r.eventNameSpace+\":children:attached\",function(e){e.afterRender()}),r.attach(n.find(\"> [lazo-view-name]\")[0],{error:e.error,success:t})}}):e.error(new Error(\"View \"+i.name+' child [lazo-view=\"'+r+'\"] is empty'))})},_serialize:function(n,r){var i={},s=function(e){var n;return e instanceof t.Collection?n=e.map(function(e){var t=e.toJSON();return e.id&&(t.id=e.id),t}):(n=e.toJSON(),e.id&&(n.id=e.id)),n},o=function(e,t){for(var n=0,r=t._childNames.length;r>n;n++){var i=t._childNames[n];e[i]=t[i].toJSON?s(t[i]):t[i],t[i]._childNames&&o(e[i],t[i])}};for(var a in n)if(!r[a]&&!e.isFunction(n[a]))if(\"models\"===a||\"collections\"===a){i[a]={};for(var c in n[a])i[a][c]=n[a][c].toJSON?s(n[a][c]):n[a][c],n[a][c]._childNames&&o(i[a][c],n[a][c])}else i[a]=n[a]instanceof t.Collection||n[a]instanceof t.Model?s(n[a]):n[a];return n._rootCtx&&(i.crumb=n.getCookie(\"crumb\"),i.assets=e.clone(i.assets),i.assets.app={},e.extend(i.assets.app,e.clone(LAZO.app.assets)),e.extend(i,n._rootCtx.data)),i},_loadView:function(e,t){LAZO.require([r.getPath(e,this.ctl.name,\"view\")],function(e){t.success(e)},function(e){t.error(e)})},_getAttributes:function(){var t=this,n=i.View.prototype._getAttributes.call(this);return n.class=n.class||\"\",this._uiStates&&(n.class+=e.reduce(this._uiStates,function(e,n){return e+(e.length?\" \":\"\")+t._getStateClass(n)},n.class)),n.class+=n.class.length?\" \":\"\"+t._getStateClass(\"detached\"),n}},a)}),function(){function e(){return\"function\"==typeof require&&\"object\"==typeof exports&&\"object\"==typeof module&&\"string\"==typeof __filename&&\"string\"==typeof __dirname}function t(e,t){this._options=t?t:{},void 0==this._options.includeLocation&&(this._options.includeLocation=!1),this.validateHandler(e),this._handler=e,this.reset()\n}function n(e){n.super_.call(this,e,{ignoreWhitespace:!0,verbose:!1,enforceEmptyTags:!1})}function r(e,t){this.reset(),this._options=t?t:{},void 0==this._options.ignoreWhitespace&&(this._options.ignoreWhitespace=!1),void 0==this._options.verbose&&(this._options.verbose=!0),void 0==this._options.enforceEmptyTags&&(this._options.enforceEmptyTags=!0),\"function\"==typeof e&&(this._callback=e)}function i(e,t){var n=function(){};n.prototype=t.prototype,e.super_=t,e.prototype=new n,e.prototype.constructor=e}if(!e()){if(this.Tautologistics){if(this.Tautologistics.NodeHtmlParser)return}else this.Tautologistics={};this.Tautologistics.NodeHtmlParser={},exports=this.Tautologistics.NodeHtmlParser}var s={Text:\"text\",Directive:\"directive\",Comment:\"comment\",Script:\"script\",Style:\"style\",Tag:\"tag\"};t._reTrim=/(^\\s+|\\s+$)/g,t._reTrimComment=/(^\\!--|--$)/g,t._reWhitespace=/\\s/g,t._reTagName=/^\\s*(\\/?)\\s*([^\\s\\/]+)/,t._reAttrib=/([^=<>\\\"\\'\\s]+)\\s*=\\s*\"([^\"]*)\"|([^=<>\\\"\\'\\s]+)\\s*=\\s*'([^']*)'|([^=<>\\\"\\'\\s]+)\\s*=\\s*([^'\"\\s]+)|([^=<>\\\"\\'\\s\\/]+)/g,t._reTags=/[\\<\\>]/g,t.prototype.parseComplete=function(e){this.reset(),this.parseChunk(e),this.done()},t.prototype.parseChunk=function(e){this._done&&this.handleError(new Error(\"Attempted to parse chunk after parsing already done\")),this._buffer+=e,this.parseTags()},t.prototype.done=function(){if(!this._done){if(this._done=!0,this._buffer.length){var e=this._buffer;this._buffer=\"\";var n={raw:e,data:this._parseState==s.Text?e:e.replace(t._reTrim,\"\"),type:this._parseState};(this._parseState==s.Tag||this._parseState==s.Script||this._parseState==s.Style)&&(n.name=this.parseTagName(n.data)),this.parseAttribs(n),this._elements.push(n)}this.writeHandler(),this._handler.done()}},t.prototype.reset=function(){this._buffer=\"\",this._done=!1,this._elements=[],this._elementsCurrent=0,this._current=0,this._next=0,this._location={row:0,col:0,charOffset:0,inBuffer:0},this._parseState=s.Text,this._prevTagSep=\"\",this._tagStack=[],this._handler.reset()},t.prototype._options=null,t.prototype._handler=null,t.prototype._buffer=null,t.prototype._done=!1,t.prototype._elements=null,t.prototype._elementsCurrent=0,t.prototype._current=0,t.prototype._next=0,t.prototype._location=null,t.prototype._parseState=s.Text,t.prototype._prevTagSep=\"\",t.prototype._tagStack=null,t.prototype.parseTagAttribs=function(e){for(var t=e.length,n=0;t>n;){var r=e[n++];(r.type==s.Tag||r.type==s.Script||r.type==s.style)&&this.parseAttribs(r)}return e},t.prototype.parseAttribs=function(e){if(e.type==s.Script||e.type==s.Style||e.type==s.Tag){var n=e.data.split(t._reWhitespace,1)[0],r=e.data.substring(n.length);if(!(r.length<1)){var i;for(t._reAttrib.lastIndex=0;i=t._reAttrib.exec(r);)void 0==e.attribs&&(e.attribs={}),\"string\"==typeof i[1]&&i[1].length?e.attribs[i[1]]=i[2]:\"string\"==typeof i[3]&&i[3].length?e.attribs[i[3].toString()]=i[4].toString():\"string\"==typeof i[5]&&i[5].length?e.attribs[i[5]]=i[6]:\"string\"==typeof i[7]&&i[7].length&&(e.attribs[i[7]]=i[7])}}},t.prototype.parseTagName=function(e){if(null==e||\"\"==e)return\"\";var n=t._reTagName.exec(e);return n?(n[1]?\"/\":\"\")+n[2]:\"\"},t.prototype.parseTags=function(){for(var e=this._buffer.length-1;t._reTags.test(this._buffer);){this._next=t._reTags.lastIndex-1;var n=this._buffer.charAt(this._next),r=this._buffer.substring(this._current,this._next),i={raw:r,data:this._parseState==s.Text?r:r.replace(t._reTrim,\"\"),type:this._parseState},o=this.parseTagName(i.data);if(this._tagStack.length)if(this._tagStack[this._tagStack.length-1]==s.Script){if(\"/script\"==o.toLowerCase())this._tagStack.pop();else if(0!=i.raw.indexOf(\"!--\")&&(i.type=s.Text,this._elements.length&&this._elements[this._elements.length-1].type==s.Text)){var a=this._elements[this._elements.length-1];a.raw=a.data=a.raw+this._prevTagSep+i.raw,i.raw=i.data=\"\"}}else if(this._tagStack[this._tagStack.length-1]==s.Style){if(\"/style\"==o.toLowerCase())this._tagStack.pop();else if(0!=i.raw.indexOf(\"!--\"))if(i.type=s.Text,this._elements.length&&this._elements[this._elements.length-1].type==s.Text){var a=this._elements[this._elements.length-1];\"\"!=i.raw?(a.raw=a.data=a.raw+this._prevTagSep+i.raw,i.raw=i.data=\"\"):a.raw=a.data=a.raw+this._prevTagSep}else\"\"!=i.raw&&(i.raw=i.data=i.raw)}else if(this._tagStack[this._tagStack.length-1]==s.Comment){var c=i.raw.length;if(\"-\"==i.raw.charAt(c-2)&&\"-\"==i.raw.charAt(c-1)&&\">\"==n)if(this._tagStack.pop(),this._elements.length&&this._elements[this._elements.length-1].type==s.Comment){var a=this._elements[this._elements.length-1];a.raw=a.data=(a.raw+i.raw).replace(t._reTrimComment,\"\"),i.raw=i.data=\"\",i.type=s.Text}else i.type=s.Comment;else if(i.type=s.Comment,this._elements.length&&this._elements[this._elements.length-1].type==s.Comment){var a=this._elements[this._elements.length-1];a.raw=a.data=a.raw+i.raw+n,i.raw=i.data=\"\",i.type=s.Text}else i.raw=i.data=i.raw+n}if(i.type==s.Tag){i.name=o;var l=o.toLowerCase();if(0==i.raw.indexOf(\"!--\")){i.type=s.Comment,delete i.name;var c=i.raw.length;\"-\"==i.raw.charAt(c-1)&&\"-\"==i.raw.charAt(c-2)&&\">\"==n?i.raw=i.data=i.raw.replace(t._reTrimComment,\"\"):(i.raw+=n,this._tagStack.push(s.Comment))}else 0==i.raw.indexOf(\"!\")||0==i.raw.indexOf(\"?\")?i.type=s.Directive:\"script\"==l?(i.type=s.Script,\"/\"!=i.data.charAt(i.data.length-1)&&this._tagStack.push(s.Script)):\"/script\"==l?i.type=s.Script:\"style\"==l?(i.type=s.Style,\"/\"!=i.data.charAt(i.data.length-1)&&this._tagStack.push(s.Style)):\"/style\"==l&&(i.type=s.Style);i.name&&\"/\"==i.name.charAt(0)&&(i.data=i.name)}(\"\"!=i.raw||i.type!=s.Text)&&(this._options.includeLocation&&!i.location&&(i.location=this.getLocation(i.type==s.Tag)),this.parseAttribs(i),this._elements.push(i),i.type!=s.Text&&i.type!=s.Comment&&i.type!=s.Directive&&\"/\"==i.data.charAt(i.data.length-1)&&this._elements.push({raw:\"/\"+i.name,data:\"/\"+i.name,name:\"/\"+i.name,type:i.type})),this._parseState=\"<\"==n?s.Tag:s.Text,this._current=this._next+1,this._prevTagSep=n}this._options.includeLocation&&(this.getLocation(),this._location.row+=this._location.inBuffer,this._location.inBuffer=0,this._location.charOffset=0),this._buffer=this._current<=e?this._buffer.substring(this._current):\"\",this._current=0,this.writeHandler()},t.prototype.getLocation=function(e){for(var t,n=this._location,r=this._current-(e?1:0),i=e&&0==n.charOffset&&0==this._current;n.charOffset<r;n.charOffset++)t=this._buffer.charAt(n.charOffset),\"\\n\"==t?(n.inBuffer++,n.col=0):\"\\r\"!=t&&n.col++;return{line:n.row+n.inBuffer+1,col:n.col+(i?0:1)}},t.prototype.validateHandler=function(e){if(\"object\"!=typeof e)throw new Error(\"Handler is not an object\");if(\"function\"!=typeof e.reset)throw new Error(\"Handler method 'reset' is invalid\");if(\"function\"!=typeof e.done)throw new Error(\"Handler method 'done' is invalid\");if(\"function\"!=typeof e.writeTag)throw new Error(\"Handler method 'writeTag' is invalid\");if(\"function\"!=typeof e.writeText)throw new Error(\"Handler method 'writeText' is invalid\");if(\"function\"!=typeof e.writeComment)throw new Error(\"Handler method 'writeComment' is invalid\");if(\"function\"!=typeof e.writeDirective)throw new Error(\"Handler method 'writeDirective' is invalid\")},t.prototype.writeHandler=function(e){if(e=!!e,!this._tagStack.length||e)for(;this._elements.length;){var t=this._elements.shift();switch(t.type){case s.Comment:this._handler.writeComment(t);break;case s.Directive:this._handler.writeDirective(t);break;case s.Text:this._handler.writeText(t);break;default:this._handler.writeTag(t)}}},t.prototype.handleError=function(e){if(\"function\"!=typeof this._handler.error)throw e;this._handler.error(e)},i(n,r),n.prototype.done=function(){var e,t={},r=o.getElementsByTagName(function(e){return\"rss\"==e||\"feed\"==e},this.dom,!1);if(r.length&&(e=r[0]),e){if(\"rss\"==e.name){t.type=\"rss\",e=e.children[0],t.id=\"\";try{t.title=o.getElementsByTagName(\"title\",e.children,!1)[0].children[0].data}catch(i){}try{t.link=o.getElementsByTagName(\"link\",e.children,!1)[0].children[0].data}catch(i){}try{t.description=o.getElementsByTagName(\"description\",e.children,!1)[0].children[0].data}catch(i){}try{t.updated=new Date(o.getElementsByTagName(\"lastBuildDate\",e.children,!1)[0].children[0].data)}catch(i){}try{t.author=o.getElementsByTagName(\"managingEditor\",e.children,!1)[0].children[0].data}catch(i){}t.items=[],o.getElementsByTagName(\"item\",e.children).forEach(function(e){var n={};try{n.id=o.getElementsByTagName(\"guid\",e.children,!1)[0].children[0].data}catch(r){}try{n.title=o.getElementsByTagName(\"title\",e.children,!1)[0].children[0].data}catch(r){}try{n.link=o.getElementsByTagName(\"link\",e.children,!1)[0].children[0].data}catch(r){}try{n.description=o.getElementsByTagName(\"description\",e.children,!1)[0].children[0].data}catch(r){}try{n.pubDate=new Date(o.getElementsByTagName(\"pubDate\",e.children,!1)[0].children[0].data)}catch(r){}t.items.push(n)})}else{t.type=\"atom\";try{t.id=o.getElementsByTagName(\"id\",e.children,!1)[0].children[0].data}catch(i){}try{t.title=o.getElementsByTagName(\"title\",e.children,!1)[0].children[0].data}catch(i){}try{t.link=o.getElementsByTagName(\"link\",e.children,!1)[0].attribs.href}catch(i){}try{t.description=o.getElementsByTagName(\"subtitle\",e.children,!1)[0].children[0].data}catch(i){}try{t.updated=new Date(o.getElementsByTagName(\"updated\",e.children,!1)[0].children[0].data)}catch(i){}try{t.author=o.getElementsByTagName(\"email\",e.children,!0)[0].children[0].data}catch(i){}t.items=[],o.getElementsByTagName(\"entry\",e.children).forEach(function(e){var n={};try{n.id=o.getElementsByTagName(\"id\",e.children,!1)[0].children[0].data}catch(r){}try{n.title=o.getElementsByTagName(\"title\",e.children,!1)[0].children[0].data}catch(r){}try{n.link=o.getElementsByTagName(\"link\",e.children,!1)[0].attribs.href}catch(r){}try{n.description=o.getElementsByTagName(\"summary\",e.children,!1)[0].children[0].data}catch(r){}try{n.pubDate=new Date(o.getElementsByTagName(\"updated\",e.children,!1)[0].children[0].data)}catch(r){}t.items.push(n)})}this.dom=t}n.super_.prototype.done.call(this)},r._emptyTags={area:1,base:1,basefont:1,br:1,col:1,frame:1,hr:1,img:1,input:1,isindex:1,link:1,meta:1,param:1,embed:1},r.reWhitespace=/^\\s*$/,r.prototype.dom=null,r.prototype.reset=function(){this.dom=[],this._done=!1,this._tagStack=[],this._tagStack.last=function(){return this.length?this[this.length-1]:null}},r.prototype.done=function(){this._done=!0,this.handleCallback(null)},r.prototype.writeTag=function(e){this.handleElement(e)},r.prototype.writeText=function(e){this._options.ignoreWhitespace&&r.reWhitespace.test(e.data)||this.handleElement(e)},r.prototype.writeComment=function(e){this.handleElement(e)},r.prototype.writeDirective=function(e){this.handleElement(e)},r.prototype.error=function(e){this.handleCallback(e)},r.prototype._options=null,r.prototype._callback=null,r.prototype._done=!1,r.prototype._tagStack=null,r.prototype.handleCallback=function(e){if(\"function\"==typeof this._callback)this._callback(e,this.dom);else if(e)throw e},r.prototype.isEmptyTag=function(e){var t=e.name.toLowerCase();return\"/\"==t.charAt(0)&&(t=t.substring(1)),this._options.enforceEmptyTags&&!!r._emptyTags[t]},r.prototype.handleElement=function(e){if(this._done&&this.handleCallback(new Error(\"Writing to the handler after done() called is not allowed without a reset()\")),this._options.verbose||(delete e.raw,(\"tag\"==e.type||\"script\"==e.type||\"style\"==e.type)&&delete e.data),this._tagStack.last())if(e.type!=s.Text&&e.type!=s.Comment&&e.type!=s.Directive)if(\"/\"==e.name.charAt(0)){var t=e.name.substring(1);if(!this.isEmptyTag(e)){for(var n=this._tagStack.length-1;n>-1&&this._tagStack[n--].name!=t;);if(n>-1||this._tagStack[0].name==t)for(;n<this._tagStack.length-1;)this._tagStack.pop()}}else this._tagStack.last().children||(this._tagStack.last().children=[]),this._tagStack.last().children.push(e),this.isEmptyTag(e)||this._tagStack.push(e);else this._tagStack.last().children||(this._tagStack.last().children=[]),this._tagStack.last().children.push(e);else e.type!=s.Text&&e.type!=s.Comment&&e.type!=s.Directive?\"/\"!=e.name.charAt(0)&&(this.dom.push(e),this.isEmptyTag(e)||this._tagStack.push(e)):this.dom.push(e)};var o={testElement:function(e,t){if(!t)return!1;for(var n in e)if(\"tag_name\"==n){if(\"tag\"!=t.type&&\"script\"!=t.type&&\"style\"!=t.type)return!1;if(!e.tag_name(t.name))return!1}else if(\"tag_type\"==n){if(!e.tag_type(t.type))return!1}else if(\"tag_contains\"==n){if(\"text\"!=t.type&&\"comment\"!=t.type&&\"directive\"!=t.type)return!1;if(!e.tag_contains(t.data))return!1}else if(!t.attribs||!e[n](t.attribs[n]))return!1;return!0},getElements:function(e,t,n,r){function i(e){return function(t){return t==e}}if(n=void 0===n||null===n||!!n,r=isNaN(parseInt(r))?-1:parseInt(r),!t)return[];var s,a=[];for(var c in e)\"function\"!=typeof e[c]&&(e[c]=i(e[c]));if(o.testElement(e,t)&&a.push(t),r>=0&&a.length>=r)return a;if(n&&t.children)s=t.children;else{if(!(t instanceof Array))return a;s=t}for(var l=0;l<s.length&&(a=a.concat(o.getElements(e,s[l],n,r)),!(r>=0&&a.length>=r));l++);return a},getElementById:function(e,t,n){var r=o.getElements({id:e},t,n,1);return r.length?r[0]:null},getElementsByTagName:function(e,t,n,r){return o.getElements({tag_name:e},t,n,r)},getElementsByTagType:function(e,t,n,r){return o.getElements({tag_type:e},t,n,r)}};exports.Parser=t,exports.DefaultHandler=r,exports.RssHandler=n,exports.ElementType=s,exports.DomUtils=o}(),define(\"htmlparser\",function(e){return function(){var t;return t||e.Tautologistics.NodeHtmlParser}}(this)),define(\"htmlparserToString\",[],function(){function e(e){return null==e?\"\":e.toString&&\"function\"==typeof e.toString?e.toString().replace(n,\"&amp;\").replace(r,\"&lt;\").replace(i,\"&gt;\").replace(s,\"&#34;\").replace(o,\"&#61;\"):\"\"}var t={area:1,base:1,basefont:1,br:1,col:1,frame:1,hr:1,img:1,input:1,isindex:1,link:1,meta:1,param:1,embed:1,\"?xml\":1},n=/&/g,r=/</g,i=/>/g,s=/\\\"/g,o=/\\=/g;return function a(n,r,i){if(Array.isArray(n))return n.map(function(e){return a(e,r,i)}).join(\"\");var s=n;if(i&&(n=i(n,r)),\"undefined\"!=typeof n&&\"undefined\"!=typeof n.type)switch(n.type){case\"text\":return n.data;case\"directive\":return\"<\"+n.data+\">\";case\"comment\":return\"<!--\"+n.data+\"-->\";case\"style\":case\"script\":case\"tag\":var o=\"<\"+n.name;return n.attribs&&Object.keys(n.attribs).length>0&&(o+=\" \"+Object.keys(n.attribs).map(function(t){return t+'=\"'+e(n.attribs[t])+'\"'}).join(\" \")),n.children?(s.render||(s=r),o+=\">\"+a(n.children,s,i)+(t[n.name]?\"\":\"</\"+n.name+\">\")):o+=t[n.name]?\">\":\"></\"+n.name+\">\",o;case\"cdata\":return\"<!CDATA[\"+n.data+\"]]>\"}return n}}),define(\"lazoWidgetMixin\",[\"underscore\",\"htmlparser\",\"htmlparserToString\",\"utils/module\",\"jquery\",\"uiStateMixin\",\"async\",\"backbone\",\"utils/document\"],function(e,t,n,r,i,s,o,a,c){return e.extend({getWidgetsHtml:function(t,r){var i=this;return e.size(this._getWidgetDefs(this))?void this._parse(t,{success:function(e){i._addWidgetsToList(e,{success:function(e){r.success(n(e))},error:r.error})},error:r.error}):r.success(t)},attachWidgets:function(t){function n(e,t,n,r,s,o){function a(){l._attachWidget(e,t),l.attachWidgets({success:function(){o(null)},error:function(e){o(e)},parent:e,render:r})}e.name=n,e.cid=s.attr(\"lazo-widget-id\"),e.el=s[0],r&&!e.el.hasChildNodes()?e.render({success:function(t){i(e.el).html(t),a()},error:function(e){o(e)}}):a()}var r=t.parent||this,s=i(r.el),a=s.find(\"[lazo-view-name]\"),c=s.find(\"[lazo-widget]\"),l=this,u=[];e.each([a,c],function(e){c=c.filter(function(){var t=this,n=!1;return e.each(function(){return i.contains(this,t)?(n=!0,!1):void 0}),!n})}),r._widgetInstances=this._getWidgetInstances(r),r[l._getWidgetInstancesKey(r)]={},c.each(function(){var s=i(this);u.push(function(i){var o=s.attr(\"lazo-widget\"),a=l.getWidgetByIdName(s.attr(\"lazo-widget-id\"),o,r._widgetInstances);a?n(a,r,o,t.render,s,i):l._resolveWidget(o,{parent:r,success:function(a){var c=new a(e.extend({view:l},l._resolveWidgetElAttrs(s[0])));c.created(),n(c,r,o,t.render,s,i)},error:t.error})})}),o.parallel(u,function(e){return e?t.error(e):void t.success(r)}),delete r._widgetInstances},getWidgetByIdName:function(e,t,n){n=n||this._getWidgetInstances(this),n=n[t]||[];for(var r=0;r<n.length;r++)if(n[r].cid===e)return n[r]},createWidget:function(t,n,r){function s(e,t){var r=i(e),s=a.view||a;r.attr(\"lazo-widget\",t.name),r.attr(\"lazo-widget-id\",t.attributes[\"lazo-widget-id\"]),s._attachWidget(t,a,n)}function o(t,n){var r=t[l._getWidgetInstancesKey(t)];if(n=n.concat(l._getWidgetCss(t)),r)for(var i in r)for(var s=0;s<r[i].length;s++)n=o(r[i][s],n);return e.uniq(n)}var a=this,l=a.view||a;return r.error=r.error||function(e){throw e},t?void l._resolveWidget(n,{parent:this,success:function(a){var u=new a(e.extend({view:l},l._resolveWidgetElAttrs(t),r.attributes));return u.name=n,u.el=t,u.attributes[\"lazo-widget\"]=n,u.cid=u.attributes[\"lazo-widget-id\"]=e.uniqueId(\"widget\"),u.created(),t.hasChildNodes()?(s(t,u),i(t).css({visibility:\"hidden\"}),l.attachWidgets(e.extend({parent:u,render:!0},{success:function(){if(!u.loadCss)return void setTimeout(function(){i(t).css({visibility:\"visible\"}),r.success(u)},0);var e=o(u,[]);c.updateLinks(e,[],\"css\",function(){setTimeout(function(){i(t).css({visibility:\"visible\"}),r.success(u)},0)})},error:r.error}))):void u.render({success:function(n){i(t).css({visibility:\"hidden\"}),i(u.el).html(n),s(t,u),l.attachWidgets(e.extend({parent:u,render:!0},{success:function(){if(!u.loadCss)return void setTimeout(function(){i(t).css({visibility:\"visible\"}),r.success(u)},0);var e=o(u,[]);c.updateLinks(e,[],\"css\",function(){setTimeout(function(){i(t).css({visibility:\"visible\"}),r.success(u)},0)})},error:r.error}))},error:r.error})},error:r.error}):r.error(new Error(\"[createWidget] requires an element.\"))},_attachWidget:function(t,n){var r=this.view||this,s=this._getWidgetInstancesKey(n);t.bind.prototype.isPrototypeOf(new a.Events.on)?t.attach(t.el):t.bind(t.el),t.attached(),i(t.el).removeClass(r._getStateClass(\"detached\")).addClass(r._getStateClass(\"attached\")),t._uiStates=t._getStates(),t.afterRender({success:function(){i(t.el).removeClass(r._getStateClass(\"rendering\")).addClass(r._getStateClass(\"rendered\"))},error:function(e){LAZO.logger.warn(\"[lazoWidget] Error while executing widget afterRender\",e)}}),n[s][t.name]=e.isArray(n[s][t.name])?n[s][t.name]:[],n[s][t.name].push(t)},_resolveWidgetElAttrs:function(e){for(var t={},n=0;n<e.attributes.length;n++)t[e.attributes[n].name]=e.attributes[n].value;return t},_parse:function(e,n){var r=new t.DefaultHandler(function(e,t){return e?n.error(e):void n.success(t)}),i=new t.Parser(r);i.parseComplete(e)},_addWidgetsToList:function(t,n){function r(e,t){return!e.attribs||!e.attribs[\"lazo-view-id\"]&&!e.attribs[\"lazo-widget\"]||e.attribs[\"lazo-widget\"]&&t.view&&i._getWidgetInstances(t)||e.attribs&&e.attribs[\"lazo-widget\"]&&t.ref&&t[i._getWidgetDefsKey(t)][e.attribs[\"lazo-widget\"]]}for(var i=this,s=0,o=0,a=0;a<t.length;a++)!function c(a,l){var u=e.uniqueId(\"widget\");if(a.attribs&&a.attribs[\"lazo-widget\"]&&(a.attribs.class=(a.attribs.class?a.attribs.class+\" \":\"\")+i._getStateClass(\"detached\"),a.attribs.class+=\" \"+i._getStateClass(\"rendering\"),a.attribs[\"lazo-widget-id\"]=u,s++,i._resolveWidget(a.attribs[\"lazo-widget\"],{parent:l,success:function(r){var h=a.attribs[\"lazo-widget\"],p=new r(e.extend({view:i},a.attribs));if(p.created(),p._uiStates&&(a.attribs.class=e.reduce(p._uiStates,function(e,t){return e+\" \"+i._getStateClass(t)},a.attribs.class)),p.name=h,p.cid=u,i._getWidgetCss(p),LAZO.app.isClient){var d=i._getWidgetInstancesKey(l);l[d]=l[d]||{},l[d][h]=e.isArray(l[d][h])?l[d][h]:[],l[d][h].push(p)}if(a.children){for(var f=0;f<a.children.length;f++)c(a.children[f],p,!1);setTimeout(function(){o++,o===s&&n.success(t)},0)}else p.render({success:function(e){i._parse(e,{success:function(e){a.children=e;for(var r=0;r<e.length;r++)c(e[r],p,!1);setTimeout(function(){o++,o===s&&n.success(t)},0)},error:n.error})},error:n.error})},error:n.error})),a.children)for(var h=0;h<a.children.length;h++)r(a.children[h],l||i)&&c(a.children[h],l||i,!1)}(t[a],i,!0);s||n.success(t)},_getWidgetDefs:function(e){return e.widgetDefinitions||e.widgets||e.children},_getWidgetInstances:function(e){return e.widgetDefinitions?e.widgets||e.children:e.widgetInstances},_getWidgetInstancesKey:function(e){return e.widgetDefinitions?e.view?\"children\":\"widgets\":\"widgetInstances\"},_getWidgetDefsKey:function(e){return e.widgetDefinitions?\"widgetDefinitions\":e.view?\"children\":\"widgets\"},_resolveWidget:function(t,n){var r=n.parent,i=this._getWidgetDefs(r),s=r.view||r,o=new Error('[lazoWidget] Could not resolve widget \"'+t+'\".');if(!i||!i[t]){if(r.ref)return n.error(o);i=this._getWidgetDefs(r.view)}return i[t]?e.isFunction(i[t])?n.success(i[t]):void(e.isString(i[t])?s._loadWidget(i[t],{success:function(e){i[t]=e,n.success(e)},error:n.error}):n.success(i[t])):n.error(o)},_getWidgetCss:function(t){var n,r=this,i=this.ctl.ctx,s=i._rootCtx;return t.css?(n=e.map(e.isArray(t.css)?t.css:[t.css],function(e){return r.ctl.augmentCssLink({href:e,\"lazo-link-ctx\":r.ctl.name,rel:\"stylesheet\",type:\"text/css\"})}),s.dependencies||(s.dependencies={css:[],js:[],imports:[]}),s.dependencies.css=e.uniq(n.concat(s.dependencies.css),function(e){return e.href}),n):void 0},_loadWidget:function(e,t){var n=this.ctl.ctx;LAZO.require([e],function(i){LAZO.app.isServer&&r.addPath(e,n),t.success(i)},function(e){t.error(e)})},_removeWidgets:function(e){var t;e=e||this._getWidgetInstances(this);for(var n in e)for(var r=0;r<e[n].length;r++)e[n][r].el&&e[n][r].el.parentNode&&(e[n][r].unbind.prototype.isPrototypeOf(new a.Events.off)?e[n][r].detach(e[n][r].el):e[n][r].unbind(e[n][r].el),e[n][r].detached(),(t=this._getWidgetInstances(e[n][r]))&&this._removeWidgets(t))}},s)}),define(\"lazoCollectionView\",[\"lazoViewMixin\",\"flexo\",\"underscore\",\"l!viewManager\",\"lazoWidgetMixin\",\"utils/uniqueId\"],function(e,t,n,r,i,s){function o(e){var t={success:function(){},error:function(e){throw e}};return n.defaults(e,t)}return t.CollectionView.extend(n.extend({constructor:function(e){var r={};if(n.size(this.collections)){for(var i=0;i<this.collections.length;i++)if(r[this.collections[i]]=e.ctl.ctx.collections[this.collections[i]],!r[this.collections[i]])throw new Error(\"Could not resolve collection \"+this.collections[i]+\" for collection view \"+e.name);this.collections=r}else{if(!n.isString(this.collection))throw new Error(\"No collection associated with collection view \"+e.name);if(this.collection=e.ctl.ctx.collections[this.collection],!this.collection)throw new Error(\"Could not resolve collection \"+this.collection+\" for collection view \"+e.name)}t.CollectionView.call(this,e)},eventNameSpace:\"lazo:colection:view\",getInnerHtml:function(e){var n=this;t.CollectionView.prototype.getInnerHtml.call(this,{success:function(t){n.getWidgetsHtml(t,{success:e.success,error:e.error})},error:e.error})},addItemView:function(e,t,n){var r=this;n=o(n),e.append(t.$el),t.attach(t.$el[0],{success:function(){n.success(t),t.afterRender(),r.trigger(this.eventNameSpace+\":itemView:added\",t)},error:n.error})},addEmptyView:function(e,t,n){var r=this;n=o(n),e.append(t.$el),t.attach(t.$el[0],{success:function(){n.success(t),t.afterRender(),r.trigger(this.eventNameSpace+\":emptyView:added\",t)},error:n.error})},attach:function(e,n){t.CollectionView.prototype.attach.call(this,e,n),this.$el.removeClass(this._getStateClass(\"detached\")).addClass(this._getStateClass(\"attached\")),this._uiStates=this._getStates()},attachItemEmptyViews:function(e){function t(){c++,a===c&&e.success(c)}for(var r=n.size(this.collections)?n.toArray(this.collections):[this.collection],i=this._findCollectionNames(this.$el.html()),s=r.length,o=this,a=0,c=0,l=0;l<i.length;l++)this._addCollection(i[l],this._getCollection(i[l]));for(var u=0;s>u;u++)!function(n){if(r[n].length)r[n].each(function(i){var s=o._getViewEl(i);a++,o._itemViews[i.cid]?o._itemViews[i.cid].attach(s[0],{error:e.error,success:function(){o._itemViews[i.cid].afterRender(),t()}}):o.getItemView(i,r[n],{error:e.error,success:function(a){var c=o.createItemView(a,i,r[n]);c.attach(s[0],{error:e.error,success:function(){c.afterRender(),t()}})}})});else{var i=o._getCollectionTarget(r[n]);a++,r[n].emptyView?(r[n].emptyView.attach(i[0]),r[n].emptyView.afterRender(),t()):o.getEmptyView(r[n],{error:e.error,success:function(e){if(e){var s=o.createEmptyView(e,r[n]);s.setElement(i[0]),s.afterRender()}t()}})}}(u)},resolveCollection:function(e,t){var n=this.collection.models?this.collection:this.ctl.ctx.collections[e];return n?t.success(n):t.error(new Error(\"Could not resolve collection \"+e+\" in view \"+this.name))},getViewName:function(e,t){var n=this[e+\"s\"]&&this[e+\"s\"][this._findCollection(t).name];return n||(n=this[e]),n},getItemView:function(e,t,n){this._resolveView(\"itemView\",t,n)},getEmptyView:function(e,t){this._resolveView(\"emptyView\",e,t)},getItemViewOptions:function(e,t,r,i){var o=this.getViewName(e,r);return this._getItemViewOptions(n.extend({},{name:this.getViewName(e,r),ctl:this.ctl,collection:r,ref:this.ctl._getPath(o,\"view\"),baseBath:this.ctl._getBasePath(o,\"view\"),cid:s(\"view\")},i))},_getCollection:function(e){return\"collection\"===e?this.collection:this.ctl.ctx.collections[e]},_getViewEl:function(e){return this.$('[lazo-model-id=\"'+e.cid+'\"]')},_getCollectionTarget:function(e){var t=this._findCollection(e);return t?$('[lazo-collection-target=\"'+t+'\"]').first():this.$el},_resolveView:function(e,t,n){var r=this.getViewName(e,t);return r||\"itemView\"!==e?r?void this._loadView(r,{error:n.error,success:function(e){n.success(e)}}):n.success(null):n.error(new Error(\"Could not resolve \"+e+\" for collection \"+this._findCollection(t).name))},_onRemove:function(){var e=this;return t.View.prototype._onRemove.call(this),this._removeWidgets(),n.each(this._itemViews,function(t,n){t.remove(),delete e._itemViews[n]}),n.each(this._emptyViews,function(t,n){t.remove(),delete e._emptyViews[n]}),this}},e,i))}),define(\"lazoView\",[\"flexo\",\"lazoViewMixin\",\"underscore\",\"lazoWidgetMixin\"],function(e,t,n,r){return e.View.extend(n.extend({getInnerHtml:function(t){var n=this;e.View.prototype.getInnerHtml.call(this,{success:function(e){n.getWidgetsHtml(e,{success:t.success,error:t.error})},error:t.error})},attach:function(t,n){e.View.prototype.attach.call(this,t,n),this.$el.removeClass(this._getStateClass(\"detached\")).addClass(this._getStateClass(\"attached\")),this._uiStates=this._getStates()},_onRemove:function(){this._removeWidgets(),this._removeChildViews()},_removeChildViews:function(){if(this.children)for(var e in this.children)this.children[e].remove()}},t,r))}),define(\"utils/ctlSerializor\",[\"underscore\",\"lazoModel\"],function(e,t){return{serialize:function(n,r){var i,s={},o=r?[\"cookies\",\"_request\",\"_reply\",\"models\",\"collections\",\"location\",\"userAgent\",\"headers\",\"response\"]:[\"cookies\",\"_request\",\"_reply\",\"models\",\"collections\",\"_rootCtx\",\"location\",\"userAgent\",\"headers\",\"response\"];s.cid=n.cid,s.ctx=e.omit(n.ctx,o),e.each(s.ctx.params,function(e,t){delete s.ctx.params[t],s.ctx.params[encodeURIComponent(t)]=encodeURIComponent(e)}),s.ctx.models={},s.ctx.collections={},s.isBase=n.isBase,s.name=n.name,n.currentView&&n.currentView&&(i=n.currentView.ref,s.currentView={cid:n.currentView.cid,name:n.currentView.name,ref:n.currentView.ref,templatePath:n.currentView.templatePath,compiledTemplatePath:n.currentView.compiledTemplatePath,basePath:n.currentView.basePath,isBase:n.currentView.isBase,hasTemplate:n.currentView.hasTemplate});var a={};return e.each(n.children,function(t,n){var r=[];e.each(t,function(e){r.push(e.toJSON())}),a[n]=r}),s.children=a,t._serialize(n.ctx.models,s.ctx.models),t._serialize(n.ctx.collections,s.ctx.collections),e.each(n.ctx.collections,function(e,t){s.ctx.collections[t]=e._getGlobalId()}),s},deserialize:function(){}}}),define(\"utils/prune\",[\"lazoModel\"],function(e){function t(n,r){var i,s,o,a=n.ctx,c=a.models,l=a.collections,u=0;for(i in c)c[i]&&c[i].name&&(s=e._getGlobalId(c[i].name,c[i].params),r[s]=!0);for(i in l)l[i]&&l[i].name&&(s=e._getGlobalId(l[i].name,l[i].params),r[s]=!0);if(n.children)for(i in n.children)for(o=n.children[i],u=0;u<o.length;u++)t(o[u],r);return r}return function(e){var n,r=t(e,{}),i=e.ctx._rootCtx.modelInstances,s=e.ctx._rootCtx.modelList;for(n in i)r[n]||delete i[n];for(n in s)r[n]||delete s[n]}}),define(\"destroyCmp\",[\"renderer\"],function(e){return function(t){for(var n=e.getList(\"component\",t),r=n.length;r;){r--;try{n[r].currentView.remove(),n[r]._getEl().remove()}catch(i){LAZO.logger.warn(\"[client.destroy] Error while destroying component %s: %s\",t.name,i.message)}}}}),define(\"lazoCtl\",[\"underscore\",\"backbone\",\"base\",\"resolver/main\",\"utils/module\",\"lazoCollectionView\",\"lazoView\",\"utils/ctlSerializor\",\"context\",\"async\",\"utils/template\",\"l!viewManager\",\"utils/prune\",\"bundler\",\"jquery\",\"renderer\",\"l!destroyCmp\",\"utils/uniqueId\",\"l!jquerycookie\"],function(e,t,n,r,i,s,o,a,c,l,u,h,p,d,f,m,g,v){var y=new d,x=n.extend(e.extend({constructor:function(e){if(!e)throw new TypeError(\"The options parameter is mandatory.\");if(!e.name||\"string\"!=typeof e.name)throw new TypeError(\"The options.name parameter is mandatory.\");this.cid=v(e.name),this.ctx=e.ctx,this.name=e.name},orderedCss:[],addChild:function(t,n,r){var s=this,o=r.action||\"index\",a=e.isNumber(r.index)?r.index:this.children&&this.children[t]?this.children[t].length:0;r=this._setOptions(r),i.addChild(t,n,this,{index:a,params:r.params,action:o,success:function(e){if(e.parent=s,LAZO.app.isClient){var n=s._getEl().find('[lazo-cmp-container=\"'+t+'\"]'),i=n.children(\"[lazo-cmp-name]\");m.getNodeHtml(e,function(t){if(i.length){var s=f(i[a]);s.length?s.before(t):i.last().after(t)}else n.append(t);r.render?e.currentView.render({success:function(){r.success(e)},error:r.error}):r.success(e)})}else r.success(e)},error:r.error||function(){throw error}})},removeChild:function(e,t){var n=function(e,t){for(var n in e)for(var r=0;r<e[n].length;r++)if(e[n][r]===t)return{container:n,index:r}}(this.children,e);return t=this._setOptions(t),e?n?(LAZO.app.isClient&&n&&g(e),this.children[n.container].splice(n.index,1),void this.onChildRemove(e,t)):(LAZO.logger.warn(\"[controller.removeChild] could not locate child, %s, of parent, %s\",e.name,this.name),t.success()):(LAZO.logger.warn(\"[controller.removeChild], %s, child is argument is required.\",this.name),t.success())},remove:function(e){var t=this,n=this.parent;return e=this._setOptions(e),this.parent?void n.removeChild(t,e):(LAZO.logger.warn(\"[controller.remove] could not locate child, %s, of parent, %s\",t.name,this.name),e.success())},onChildRemove:function(e,t){t=this._setOptions(t),t.success()},index:function(e){return e.success(\"index\")},navigate:function(t,n){var r=this,i=this.children;n=n||{},n=e.defaults(n||{},{error:function(){},success:function(){}}),this.ctx=new c({_rootCtx:this.ctx._rootCtx,params:e.extend(this.ctx.params,n.params),assets:this.ctx.assets,css:this.ctx.css,headers:this.ctx.headers,meta:this.ctx.meta}),LAZO.app.isClient&&this._getEl().addClass(\"lazo-navigating\"),delete this.children,this._execute(t,{ctlNavigate:!0,prevChildren:i,error:function(e){return n.error(e)},success:function(){r._getEl().removeClass(\"lazo-navigating\").addClass(\"lazo-navigated\"),n.success()}})},transition:function(e,t){var n=this;if(LAZO.app.isClient&&this.currentView&&(h.cleanup(this,this.currentView.cid),t.children))for(var r in children)if(children[r].length)for(var i=0;i<children[r].length;i++)h.cleanup(children[r][i],children[r][i].currentView.cid);this.currentView=e,LAZO.app.isClient&&t.ctlNavigate?e.render({error:t.error,success:function(){t.success(n)}}):t.success(n)},setCookie:function(e,t,n){this.ctx.setCookie(e,t,n)},clearCookie:function(e,t){this.ctx.clearCookie(e,t)},loadModel:function(t,n){LAZO.app.loadModel(t,e.extend(n,{ctx:this.ctx}))},loadCollection:function(t,n){LAZO.app.loadCollection(t,e.extend(n,{ctx:this.ctx}))},createModel:function(t,n,r){LAZO.app.createModel(t,n,e.extend(r,{ctx:this.ctx}))},createCollection:function(t,n,r){LAZO.app.createCollection(t,n,e.extend(r,{ctx:this.ctx}))},setSharedData:function(e,t){return this.ctx.setSharedData(e,t),this},getSharedData:function(e){return this.ctx.getSharedData(e)\n},toJSON:function(e){return a.serialize(this,e)},serialize:function(){return JSON.stringify(this.toJSON())},setPageTitle:function(e){return this.ctx._rootCtx.pageTitle=e,this},getPageTitle:function(){return this.ctx._rootCtx.pageTitle},addPageTag:function(e,t,n){return LAZO.app.addPageTag(this.ctx,e,t,n),this},getPageTags:function(){return LAZO.app.getPageTags(this.ctx)},getPath:function(){function e(e,t){var n=t.children;for(var r in n)for(var i=0;i<n[r].length;i++)if(n[r][i]===e)return{name:e.name,container:r,position:i}}var t=this.parent,n=[],r=this;if(!t)return[{name:this.name,container:null,position:0}];for(;t;)n.unshift(e(r,t)),r=t,t=t.parent;return n.unshift({name:r.name,container:null,position:0}),n},augmentImportLink:function(e){return e},augmentCssLink:function(e){return e},getImport:function(e){return y.resolveImport(e,this.name)},setHttpStatusCode:function(t){if(LAZO.app.isClient)return this;if(!e.isFinite(t)||0>t)throw new Error(\"statusCode is invalid, it must be a positive integer.\");return this.ctx.response.statusCode=t,this},getHttpStatusCode:function(){return LAZO.app.isClient?null:this.ctx.response.statusCode||200},addHttpHeader:function(e,t,n){return LAZO.app.isClient?this:(this.ctx.response.httpHeaders.push({name:e,value:t,options:n||null}),this)},getHttpHeaders:function(){return LAZO.app.isClient?[]:this.ctx.response.httpHeaders||[]},addHttpVaryParam:function(e){return LAZO.app.isClient?this:(this.ctx.response.varyParams.push(e),this)},getHttpVaryParams:function(){return LAZO.app.isClient?[]:this.ctx.response.varyParams||[]},_setOptions:function(t){var n={success:function(){},error:function(e){throw e}};return t=t||{},e.defaults(t,n)},_getEl:function(){return LAZO.app.isClient?f('[lazo-cmp-id=\"'+this.cid+'\"]'):void 0},_execute:function(e,t){var n=this._buildExecTaskList(e),r=this;l.waterfall(n,function(e,n){e?t.error(e):r.transition(n,t)})},_createView:function(t,n){try{return new t(e.extend({ref:r.getPath(n.name,this.name,\"view\"),basePath:r.getBasePath(n.name,this.name,\"view\"),ctl:this,cid:v(\"view\")},n))}catch(i){throw i}},_buildExecTaskList:function(t){var n=[];return n.push(function(e){e(null,t)}),n.push(e.bind(this._action,this)),n.push(e.bind(this._getCss,this)),n.push(e.bind(this._getImports,this)),n.push(e.bind(this._getView,this)),n},_action:function(t,n){if(\"function\"!=typeof this[t])return n(new Error(\"The given action is not implemented.\"));try{var r=!1;this[t]({error:function(e){return e=e||new Error(\"The component action failed and an error object was not passed\"),r=!0,n(e,null)},success:function(t){return e.isString(t)||n(new Error(\"Controller action method options.success requires a view or template name\"),null),r=!0,n(null,t)}})}catch(i){if(r)throw i;n(i)}},_getCss:function(e,t){this._getLinks(\"css\"),t(null,e)},_getImports:function(e,t){this._getLinks(\"imports\"),t(null,e)},_getLinks:function(t){var n=this,i=this.ctx._rootCtx,s=\"imports\"===t?\"getComponentImports\":\"getComponentCss\",o=\"imports\"===t?\"augmentImportLink\":\"augmentCssLink\",a=e.map(r[s](n.name),function(e){var t=n[o]({href:\"/\"+e});return t[\"lazo-link-ctx\"]=n.name,t});i.dependencies=i.dependencies||{},i.dependencies[t]=i.dependencies[t]||[],a=e.filter(a,function(n){return!e.find(i.dependencies[t],function(e){return e.href===n.href})}),i.dependencies[t]=i.dependencies[t].concat(a)},_getView:function(e,t){var n=this,s=r.getPath(e,this.name,\"view\");r.isBase(s,\"view\",function(r){return r?t(null,n._createView(o,{name:e,isBase:!0})):void i.getView(s,function(r,o){return r?t(new Error(\"Controller _getView failed for \"+s+\" : \"+r.message),null):(i.addPath(s,n.ctx),t(null,n._createView(o,{name:e,isBase:!1})))})})},_getPath:function(e,t){return r.getPath(e,this.name,t)},_getBasePath:function(e,t){return r.getBasePath(e,this.name,t)}},t.Events),{create:function(t,n,s){function o(){var e=new x(n);return e.isBase=!0,s.success(e)}function a(){LAZO.require([c],function(t){var r=new t(n);return i.addPath(c,n.ctx),n.ctx&&r.config&&r.config.params&&e.defaults(r.ctx.params,r.config.params),r.isBase=!1,s.success(r)},function(e){return s.error(new Error(\"Controller create LAZO.require failed for \"+c+\" : \"+e.message))})}var c=\"components/\"+t+\"/controller\";return e.isBoolean(n.isBase)?n.isBase?o():a():void r.isBase(c,\"controller\",function(e){e?o():a()})},deserialize:function(t,n){return a.deserialize(t,e.extend({},n,{Controller:x}))}});return x}),define(\"hermes\",[],function(){function e(e,t,n){for(var r in t)n&&n[r]||(e[r]=t[r]);return e}function t(e){return\"[object RegExp]\"===Object.prototype.toString.call(e)}function n(e){return\"function\"==typeof e}var r,i=/\\((.*?)\\)/g,s=/(\\(\\?)?:\\w+/g,o=/\\*\\w+/g,a=/[\\-{}\\[\\]+?.,\\\\\\^$|#\\s]/g,c=/^\\/+|\\/+$/g,l=/\\/$/;return r={start:function(t){var n=this;return this._started||!window.history.pushState?this:(t=t||{},this._handlers=this._handlers||[],this._cache=this._cache||{},t.routeOnHashChange=t.routeOnHashChange||!1,e(this,t,{state:!0,title:!0}),this.root=this.root?(\"/\"+this.root+\"/\").replace(c,\"/\"):void 0,t.routeOnHashChange=t.routeOnHashChange||!1,t.state=t.state||{},t.state.title=t.title=t.title||document.title,window.history.replaceState(t.state||{},t.title,this._getUrl()),document.title=t.title,this._setCacheItem(t.title,t.state),this._currentUrl={pathname:window.location.pathname,search:window.location.search},n._backboneEvents(),n._bindRoutes(),setTimeout(function(){n._bindPopState()},0),this._started=!0,this)},getPreviousUrl:function(){return this._lastUrl?this._lastUrl.pathname+this._lastUrl.search:\"\"},stop:function(){window.removeEventListener(\"popstate\",this._popstateListener),this._started=!1},route:function(e,r,i){var s,o=this,a=e.match(/\\*\\w+/g)||[],c=(e.match(/:\\w*/g)||[]).concat(a);return e=t(e)?e:this._routeToRegExp(e),n(r)&&(i=r,r=\"\"),this._handlers=this._handlers||[],this._handlers.unshift({route:e,callback:function(t){s=o._getParams(e,c),n(i)&&i.apply(o,[window.location.pathname,s,t]),o._backboneEventsAugmented&&(o.trigger.apply(o,[\"route:\"+r].concat(s,t)),o.trigger(\"route\",r,s,t))}}),this},destroyRoutes:function(){this._handlers=[]},navigate:function(e,t){return window.history.pushState?(t=t||{},t.state=t.state||{},t.state.title=t.title=t.title||document.title,window.history[t.replace?\"replaceState\":\"pushState\"](t.state,t.title,e),document.title=t.title,this._setCacheItem(t.title,t.state),void((void 0===t.trigger||t.trigger)&&this._loadUrl(t.state))):void(window.location=e)},getItem:function(e){return this._cache[e||this._getUrl()]},clearCache:function(){return this._cache={},this},updateState:function(e,t){var n=this.getItem(t),r=n?n.title:e.title;this._setCacheItem(r,e,t),window.history.replaceState(e,r,t||this._getUrl())},routeNotMatched:function(){},_setCacheItem:function(e,t,n){var r=this._cache[n||this._getUrl()]={title:e};return this.cache&&(r.state=t),this},_getUrl:function(){return window.location.pathname+window.location.search},_getParams:function(e,t){var n,r,i=/\\+/g,s=/([^&=]+)=?([^&]*)/g,o=function(e){return decodeURIComponent(e.replace(i,\" \"))},a=window.location.search.substring(1),c={};r=e.exec(this._stripRoot(window.location.pathname)).slice(1);for(var l=0;l<t.length;l++)c[t[l].substring(1)]=r[l]||null;for(;n=s.exec(a);)c[o(n[1])]=o(n[2]);return c},_routeToRegExp:function(e){return e=e.replace(a,\"\\\\$&\").replace(i,\"(?:$1)?\").replace(s,function(e,t){return t?e:\"([^/]+)\"}).replace(o,\"(.*?)\"),new RegExp(\"^\"+e+\"$\")},_stripRoot:function(e){var t;return e=\"/\"===e.substring(0,1)?e.substring(1):e,this.root?(t=this.root.replace(l,\"\"),e=0===e.indexOf(t)?e.substr(t.length):void 0):e},_backboneEvents:function(){return!this.Backbone||this._backboneEventsAugmented?this:(e(this,Backbone.Events),this._backboneEventsAugmented=!0,this)},_bindPopState:function(){var e=this;return this._popstateListener=window.addEventListener(\"popstate\",function(t){var n=e.getItem();e._loadUrl(t.state),document.title=n?n.title:document.title}),this},_bindRoutes:function(){var e;if(!this.routes||this._routesBound)return this;e=n(this.routes)?this.routes():this.routes;for(var t in this.routes)this.route(t,this.routes[t]);return this._routesBound=!0,this},_loadUrl:function(e){var t=this._handlers,n=this._stripRoot(window.location.pathname),r=t.length;if(!this.routeOnHashChange&&this._currentUrl.pathname===window.location.pathname&&this._currentUrl.search===window.location.search)return this;e=e||{};for(var i=0;r>i;i++)if(t[i].route.test(n))return t[i].callback(e),this._lastUrl={pathname:this._currentUrl.pathname,search:this._currentUrl.search},this._currentUrl={pathname:window.location.pathname,search:window.location.search},this;return this.routeNotMatched(n),this}}}),define(\"rehydrate/view\",[\"lazoView\"],function(e){return function(t,n,r){return n.currentView.isBase?(t.currentView=t._createView(e,n.currentView),r(null)):void LAZO.require([n.currentView.ref],function(e){t.currentView=t._createView(e,n.currentView),r(null)},function(e){return r(new Error(\"rehydrate load view failed for \"+n.currentView.ref+\": \"+e.message))})}}),define(\"rehydrate/model\",[\"lazoModel\"],function(e){return function(t,n,r){e._deserialize(t,n,{success:function(){r(null)},error:function(e){r(e)}})}}),define(\"rehydrate/main\",[\"lazoCtl\",\"context\",\"rehydrate/view\",\"rehydrate/model\"],function(e,t,n,r){function i(n,r,o){r.components++,e.create(n.name,_.pick(n,\"name\",\"isBase\"),{success:function(e){var a,c=n.children;n.ctx._rootCtx=n._rootCtx,e.ctx=new t(n.ctx),_.each(e.ctx.params,function(t,n){delete e.ctx.params[n],e.ctx.params[decodeURIComponent(n)]=decodeURIComponent(t)}),e.cid=n.cid,a=e.children={};for(var l in c)!function(e){a[e]=[];for(var t=0;t<c[e].length;t++)!function(t){var o=c[e][t];o._rootCtx=n._rootCtx,i(o,r,function(n){a[e][t]=n,s(n,o,r)})}(t)}(l);o(e)},error:function(){}})}function s(e,t,i){i.components--,i.models++,r(e,t.ctx._rootCtx,function(){i.models--,i.views++,n(e,t,function(){i.views--,o(i)}),o(i)}),o(i)}function o(e){return e.components||e.models||e.views||!a?!1:(a(c),a=void 0,c=void 0,!0)}var a,c;return function(e,t,n){var r={components:0,models:0,views:0};a=n,e._rootCtx=t,i(e,r,function(t){c=t,s(t,e,r)})}}),define(\"lib/client/state\",[],function(){return{get:function(e){return e=e||window.location.pathname+window.location.search,LAZO.router.getItem(e)},set:function(e){var t=window.location.pathname+window.location.search;LAZO.router.updateState(this.createStateObj(e),t)},getAddRemoveLinks:function(e){return{add:this._getRequestLinks(e),remove:this._getRequestLinks(e,LAZO.router.getPreviousUrl())}},_getRequestLinks:function(e,t){var n=this.get(t);return n=n?n.state:{},n.dependencies&&n.dependencies[e]?n.dependencies[e].slice(0):[]},createStateObj:function(e){var t={css:e.dependencies.css.slice(0),imports:e.dependencies.imports.slice(0)};return{dependencies:t}},cleanUpLinkDependencies:function(e,t){for(var n=[],r=0;r<e.length;r++)0!==e[r].href.indexOf(\"/components/\")&&n.push(e[r]);return n.concat(t)}}}),define(\"lib/client/prime\",[\"jquery\"],function(e){function t(t,n,r){var i=0,s=t.length;if(!LAZO.app.prefetchCss)return r?r(null):void 0;for(var o=0;s>o;o++)e.ajax({url:t[o].href,dataType:\"text\",success:function(){i++,n&&i===s&&r&&r(null)},error:function(e,t,n){r&&r(n)}});!n&&r&&r(null)}function n(e,t,n){LAZO.require(e,function(){t&&n&&n()}),!t&&n&&n(null)}return function(e,r,i,s){\"css\"===r&&t(e,i,s),\"js\"===r&&n(e,i,s)}}),define(\"utils/cmpProcessor\",[\"underscore\",\"utils/loader\",\"context\",\"resolver/component\",\"utils/assetsMixin\"],function(e,t,n,r,i){return e.extend({getRootCtxForReply:function(t,n){for(var r=this.getComponents(n,[]),i={},s=r.length;s--;)i[r[s].name]=r[s].ctx.assets;return e.extend(e.omit(t._rootCtx,\"modelInstances\"),{dependencies:t._rootCtx.dependencies,assets:i,modelInstances:{}})},getDef:function(e){return r.getDef(e)},createCtx:function(e){return new n(e)},getComponents:function(t,n){if(n.push(t),e.size(t.children))for(var r in t.children)for(var i=0;i<t.children[r].length;i++)this.getComponents(t.children[r][i],n);return n},getComponentNames:function(t){return e.map(this.getComponents(t,[]),function(e){return e.name})},process:function(e){function n(t){return e.error(t)}var r=e.def,i=e.ctx,s=r.layout&&r.layout===LAZO.layout?!1:!0,o=s&&r.layout?r.layout:r.name;return LAZO.isClient&&!s&&r.layout?LAZO.ctl.addChild(\"lazo-layout-body\",r.name,{params:i.params,action:r.action,success:function(t){e.success(t,i,r,e)},error:n}):void this.getAssets(r.name,i,{success:function(a){i.assets=a,t(o,{ctx:i,action:s&&r.layout?\"index\":r.action,error:n,success:function(t){r.layout?t.addChild(\"lazo-layout-body\",r.name,{params:i.params,action:r.action,success:function(){e.success(t,i,r,e)},error:n}):e.success(t,i,r,e)}})},error:n})}},i)}),define(\"execute\",[\"jquery\",\"underscore\",\"rehydrate/main\",\"utils/prune\",\"lib/client/state\",\"utils/document\",\"lib/client/prime\",\"renderer\",\"context\",\"utils/cmpProcessor\",\"requestFilters\",\"resolver/file\",\"l!viewManager\",\"bundler\",\"l!destroyCmp\",\"jquerycookie\"],function(e,t,n,r,i,s,o,a,c,l,u,h,p,d,f){var m=new d,g={dependencies:{modules:{css:[],js:[]}}};return function(n){function c(n,c){var d=l.getDef(n.route),v={params:n.parameters,_rootCtx:LAZO.ctl.ctx._rootCtx},y=l.createCtx(v);u.apply(n.route,n.parameters,y,function(u){return u?LAZO.app.navigate(y,u):void l.process({ctx:y,def:d,error:function(e){LAZO.logger.error(\"[client.execute]\",\"Error executing component action: \"+e),LAZO.error.render({statusCode:\"500\",error:\"Internal Server Error\",message:\"An internal server error occurred\"}),LAZO.app.trigger(\"navigate:application:error\",n)},success:function(u,d,v){var y=!v.layout||v.layout!==LAZO.layout,x=e(y?\"body\":'[lazo-cmp-container=\"lazo-layout-body\"]'),b=0;a.getTreeHtml(u,null,null,function(e){function a(t){2===t&&(y?(x.find(\"[lazo-cmp-name]\").remove(),x.append(e)):x.html(e),setTimeout(function(){LAZO.error.clear(),x.css({visibility:\"visible\"}),p.attachViews(u,function(e){e&&LAZO.logger.error(\"[LAZO.navigate] Error attaching views\",e),s.updatePageTags(LAZO.ctl.ctx,function(e){e&&LAZO.logger.error(\"[LAZO.navigate] Error updating page tags\",e),s.setTitle(LAZO.ctl.ctx._rootCtx.pageTitle),LAZO.app.trigger(\"navigate:application:complete\",n)})})},0))}if(c)delete d._rootCtx.dependencies;else{for(var w=l.getComponents(y?u:LAZO.ctl,[]),_={},C=0;C<w.length;C++)_[w[C].name]={css:null,imports:null},_[w[C].name].css=h.getComponentFiles([w[C].name],function(e){return\".css\"===e.substr(-4,4)&&-1===e.indexOf(\"/imports/\")}),_[w[C].name].imports=h.getComponentFiles([w[C].name],function(e){return-1!==e.indexOf(\"/imports/\")&&\".html\"===e.substr(-5,5)});var S=[],k=[];for(var T in _){for(var E=0;E<_[T].css.length;E++)S.push({\"lazo-link-ctx\":T,href:\"/\"+_[T].css[E]});for(var A=0;A<_[T].imports.length;A++)k.push({\"lazo-link-ctx\":T,href:\"/\"+_[T].imports[A]})}S=m._createCSSLinks(S),d._rootCtx.dependencies.css=m._createCSSLinks(d._rootCtx.dependencies.css),d._rootCtx.dependencies.css=m.sortCss(i.cleanUpLinkDependencies(d._rootCtx.dependencies.css,S)),k=m._createImportLinks(k),d._rootCtx.dependencies.imports=m._createImportLinks(d._rootCtx.dependencies.imports),d._rootCtx.dependencies.imports=m.sortImports(i.cleanUpLinkDependencies(d._rootCtx.dependencies.imports,k))}LAZO.layout=v.layout,g=t.extend({},g,d._rootCtx),LAZO.app.trigger(\"navigate:application:response\",n),LAZO.layout=v.layout,i.set(g);var N=i.getAddRemoveLinks(\"css\"),O=i.getAddRemoveLinks(\"imports\");o(N.add,\"css\",!1),y?(f(LAZO.ctl),delete LAZO.ctl,LAZO.ctl=u):(f(LAZO.ctl.children[\"lazo-layout-body\"][0]),LAZO.ctl.children[\"lazo-layout-body\"].shift(),t.extend(LAZO.ctl.ctx.params,u.ctx.params),LAZO.ctl.ctx.meta||(LAZO.ctl.ctx.meta={}),t.extend(LAZO.ctl.ctx.meta,u.ctx.meta||{})),r(LAZO.ctl),x.css({visibility:\"hidden\"}),s.updateLinks(O.add,O.remove,\"import\",function(){b++,a(b)}),s.updateLinks(N.add,N.remove,\"css\",function(){b++,a(b)})})}})})}!function(){g={dependencies:{modules:{css:[],js:[]}}},\"1\"!==e.cookie(\"development\")?m.response(n.route,window.location.pathname,{success:function(e){e?(g.dependencies.modules=e.js,g.dependencies.css=m.sortCss(m._createCSSLinks(e.css)),g.dependencies.imports=m.sortImports(m._createImportLinks(e.imports)),LAZO.require(e.js,function(){c(n,!0)})):c(n)},error:function(e){throw e instanceof Error?e:new Error(e)}}):c(n)}()}}),define(\"clientApp\",[\"jquery\",\"underscore\",\"backbone\",\"lazoCtl\",\"viewManager\",\"assetsProvider\",\"async\",\"hermes\",\"rehydrate/main\",\"execute\",\"lib/client/state\",\"lib/client/prime\"],function(e,t,n,r,i,s,o,a,c,l,u,h){return LAZO.app._getModules=function(e){var t=e.dependencies.modules?e.dependencies.modules:e.modules,n=e.dependencies.modules?!0:!1;return{modules:t,wait:n}},{initialize:function(e){LAZO.logger.debug(\"[client.app.initialize] Initializing client...\",e);var t=this,n=LAZO.app._getModules(LAZO.initConf.rootCtx);return this.currentLayout=LAZO.initConf.layout,n.wait?t._initialize(e):void h(n.modules,\"js\",n.wait,function(n){n||t._initialize(e)})},_initialize:function(){this._clickHandler(),this._defineRoutes(),a.start({state:u.createStateObj(LAZO.initConf.rootCtx),cache:!0,routeNotMatched:function(){LAZO.error.render({statusCode:404,error:\"Not found\",message:\"This is not the page you are looking for.\"})}}),LAZO.app.trigger(\"application:initialize\"),LAZO.files=LAZO.initConf.files,c(LAZO.initConf.rootCtl,LAZO.initConf.rootCtx,function(e){LAZO.ctl=e,LAZO.layout=LAZO.initConf.layout,i.attachViews(e,function(e){e&&LAZO.logger.error(\"[client.app.initialize] Error attaching views\",e),LAZO.app.trigger(\"application:ready\"),delete LAZO.initConf})})},_clickHandler:function(){e(\"body\").on(\"click\",\"[lazo-navigate]\",function(t){var n=e(t.currentTarget),r=n.attr(n.attr(\"lazo-navigate\").length&&\"lazo-navigate\"!==n.attr(\"lazo-navigate\")?\"lazo-navigate\":\"href\");r&&(t.preventDefault(),LAZO.app.navigate(null,r))})},_defineRoutes:function(){LAZO.router=a,t.each(LAZO.routes,function(e,n){a.route(n,n,function(e,r,i){var s={route:n,pathname:e,parameters:t.extend(r,i.parameters)};LAZO.app.trigger(\"navigate:application:begin\",s),l(s)})})}}}),define(\"logger\",[\"l!loggerUtils\"],function(e){var t={DEBUG:\"debug\",ERROR:\"error\",INFO:\"info\",WARN:\"warn\"},n=function(){console&&\"function\"==typeof console.log&&console.log.apply(console,arguments)},r=function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1),n=t.length,r=0,i=null;if(\"string\"!=typeof e)return e;for(i=e.replace(/%([difjs])/g,function(e,n){var i=t[r++],s=typeof i;if(\"undefined\"===s)return s;switch(n){case\"d\":case\"i\":return\"number\"===s?i.toFixed():i;case\"f\":return\"number\"===s?i.toPrecision():i;case\"j\":return o(i);case\"s\":return i}});n>r;r++)i+=\" \"+o(t[r]);return i},i=function(){var t=LAZO.app&&LAZO.app.isServer&&e.getRequest();return t&&t.id||\"-\"},s=function(){},o=function(t){try{return t instanceof Error?a(t):t&&JSON.stringify(t)}catch(n){return LAZO.app&&LAZO.app.isServer?e.serverStringify(t):t}},a=function(e){var t=LAZO.app&&LAZO.app.isServer&&e?{message:e.message,stack:e.stack}:e;return JSON.stringify(t)},c=function(e,t){var n=Array.prototype.slice.call(e,0);return n.unshift(t),n},l=function(e){var o=this,a=e&&e.level,l=e&&e.sinks||{console:n},u=function(){var e=(new Date).toISOString(),t=arguments[0]&&arguments[0].toUpperCase(),n=Array.prototype.slice.call(arguments,1),s=i(),a=[e,t,s,r.apply(o,n)],c=a.join(\"\t\");for(var u in l)l.hasOwnProperty(u)&&!function(e){setTimeout(function(){l[e]&&l[e](c)},0)}(u);return c},h=function(){return u.apply(o,c(arguments,t.DEBUG))},p=function(){return u.apply(o,c(arguments,t.ERROR))},d=function(){return u.apply(o,c(arguments,t.INFO))},f=function(){return u.apply(o,c(arguments,t.WARN))};o.addSink=function(e,t){if(\"string\"!=typeof e||\"function\"!=typeof t)throw new TypeError;l[e]=t},o.consoleSink=n,o.getLevel=function(){return a},o.getSinks=function(){return l},o.removeSink=function(e){l[e]&&delete l[e]},o.setLevel=function(e){switch(e){case t.DEBUG:o[t.DEBUG]=h,o[t.ERROR]=p,o[t.INFO]=d,o[t.WARN]=f;break;case t.ERROR:o[t.DEBUG]=s,o[t.INFO]=s,o[t.WARN]=s,o[t.ERROR]=p;break;case t.INFO:o[t.DEBUG]=s,o[t.INFO]=d,o[t.WARN]=f,o[t.ERROR]=p;break;case t.WARN:o[t.DEBUG]=s,o[t.INFO]=s,o[t.WARN]=f,o[t.ERROR]=p;break;default:return o.setLevel(t.ERROR)}return d(\"[common.logger.setLevel] Changing logging level to %s\",e),a=e},o.setLevel(a)};return new l}),define(\"lazoWidget\",[\"base\",\"uiStateMixin\",\"underscore\",\"backbone\"],function(e,t,n,r){return e.extend(n.extend({constructor:function(t){this.view=t.view,this._setAttributes(n.omit(t,\"view\")),e.call(this,{}),this.initialize.apply(this)},attrValCoercion:!0,loadCss:!1,initialize:function(){},render:function(e){e.success(\"\")},afterRender:function(e){e.success()},createWidget:function(){this.view.createWidget.apply(this,Array.prototype.slice.call(arguments))},getWidgetByEl:function(e){return this.view.getWidgetByEl.call(this,e)},getWidgetsByName:function(e){return this.view.getWidgetsByName.call(this,e)},attach:function(){},detach:function(){},attached:function(){},detached:function(){},attributeChanged:function(){},created:function(){},_setAttributes:function(e){this.attrValCoercion&&(e=this._coerce(e)),this.attributes=this.attributes||{},this.attributes=n.extend(this.attributes,n.omit(this._resolveAttributes(e),\"view\"))},_coerce:function(e){var t;for(var r in e)if(n.isString(e[r]))if(t=e[r],\"[\"===t.charAt(0)||\"{\"===t.charAt(0))try{e[r]=JSON.parse(t)}catch(i){LAZO.logger.warn(\"[lazoWidget] Error while parsing attribute value\",i)}else n.isNumber(parseFloat(t))&&!n.isNaN(parseFloat(t))?e[r]=parseFloat(t):\"true\"===t?e[r]=!0:\"false\"===t&&(e[r]=!1);return e},_resolveAttributes:function(e){var t=this,r={},i={};return n.each(e,function(e,t){var s=n.isString(e)&&!e.indexOf(\"$\");return s?i[t]=e:r[t]=e,s}),n.each(i,function(e,n){t._resolveCtxVal(r,e,n)}),r},_resolveCtxVal:function(e,t,n){for(var r,i=t.split(\".\").slice(1),s=this.view.ctl.ctx,o=0;o<i.length&&(r=o?r[i[o]]:s[i[o]],e[n]=r,e);o++);return e}},t,r.Events))});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/public/bundle.js":"define(['underscore', 'base', 'resolver/component', 'jquery'], function (_, Base, cmpResolver, $) {\n\n    'use strict';\n\n    var supportsImports = (function () {\n        return LAZO.isClient && 'import' in document.createElement('link');\n    })();\n\n    return Base.extend({\n\n        response: function (route, uri, options) {\n            options.success(null);\n        },\n\n        getLibPath: function () {\n            return LAZO.conf.libPath;\n        },\n\n        resolveBundleUrl: function (bundle) {\n            return bundle;\n        },\n\n        getComponentDef: function (route) {\n            return cmpResolver.getDef(route);\n        },\n\n        getComponentCss: function (name) {\n            return cmpResolver.getLinks(name, 'css');\n        },\n\n        // TODO: deprecate next major\n        getComponentCSS: function (name) {\n            return cmpResolver.getLinks(name, 'css');\n        },\n\n        getComponentImports: function (name) {\n            return cmpResolver.getLinks(name, 'import');\n        },\n\n        sortCss: function (links) {\n            return links;\n        },\n\n        sortImports: function (links) {\n            return links;\n        },\n\n        resolveImport: function (relativePath, namespace) {\n            if (LAZO.app.isServer) {\n                LAZO.logger.warn('bundle.resolveImport', 'Cannot call on server.');\n                return null;\n            }\n\n            var path = namespace === 'application' ? relativePath :\n                'components/' + namespace + '/imports/' + relativePath;\n            var $import = $('link[href*=\"' + path + '\"][lazo-link-ctx=\"' + namespace + '\"]');\n            var linkNode = $import[0];\n\n            return linkNode ? (supportsImports ? linkNode.import : linkNode) : null;\n        },\n\n        _createLink: function (link, defaults) {\n            if (_.isString(link)) {\n                return _.extend({ href: link }, defaults);\n            } else {\n                return _.extend(defaults, link);\n            }\n        },\n\n        _createCSSLink: function (link) {\n            return this._createLink(link, {\n                rel: 'stylesheet',\n                type: 'text/css',\n                'lazo-link': 'css',\n                'lazo-link-ctx': 'application'\n            });\n        },\n\n        _createCSSLinks: function (links) {\n            return _.map(links, _.bind(this._createCSSLink, this));\n        },\n\n        _createImportLink: function (link) {\n            return this._createLink(link, {\n                rel: 'import',\n                'lazo-link': 'import',\n                'lazo-link-ctx': 'application'\n            });\n        },\n\n        _createImportLinks: function (links) {\n            return _.map(links, _.bind(this._createImportLink, this));\n        }\n\n    });\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/public/collection.js":"define(['underscore', 'backbone', 'proxy', 'lazoModel'], function (_, Backbone, Proxy, LazoModel) {\n    'use strict';\n\n    /**\n     * A base class for collections\n     *\n     * @class LazoCollection\n     * @constructor\n     * @param {Array Models} models An array of models\n     * @param {Object} options\n     *      @param {String} options.name The name of the collection in the repo\n     *      @param {Object} options.params A hash of name-value pairs used in url substitution\n     *      @param {Context} options.ctx The current context for the request\n     *      @param {String} [options.modelName] Specify the LazoModel class that the collection contains.  This\n     *      should be the name of the model in the repo.  This *MUST* be used with the Backbone.Collection model property.\n     * @extends Backbone.Collection\n     */\n    var Collection = Backbone.Collection.extend({\n\n        constructor: function(attributes, options) {\n            this._initialize(attributes, options);\n            this.cid = _.uniqueId('c');\n            if (options.modelName) {\n                this.modelName = options.modelName;\n            }\n            Backbone.Collection.apply(this, arguments);\n        },\n\n        sync: function(method, model, options) {\n            var self = this,\n                success = options.success;\n\n            options.success = function (resp) {\n                self._resp = resp;\n\n                if (success) {\n                    success(resp);\n                }\n            };\n\n            Proxy.prototype.sync.call(this, method, options);\n        },\n\n        call: function(fname, args, options) {\n            Proxy.prototype.callSyncher.call(this, fname, args, options);\n        },\n\n        _initialize: function(attributes, options) {\n            LazoModel.prototype._initialize.apply(this, arguments);\n        },\n\n        _getGlobalId: function() {\n            return LazoModel.prototype._getGlobalId.apply(this);\n        },\n\n        // taken directly from Backbone.Collection._prepareModel, except where noted by comments\n        _prepareModel: function(attrs, options) {\n\n            // begin lazo specific overrides\n            var modelName = null;\n            if (this.modelName) {\n                if (_.isFunction(this.modelName)) {\n                    modelName = this.modelName(attrs, options);\n                }\n                else {\n                    modelName = this.modelName;\n                }\n            }\n            // end lazo specific overrides\n\n            if (attrs instanceof Backbone.Model) {\n                if (!attrs.collection) attrs.collection = this;\n                if (!attrs.name && modelName) attrs.name = modelName; // lazo specific\n                return attrs;\n            }\n            options || (options = {});\n            options.collection = this;\n\n            // begin lazo specific overrides\n            if (modelName) {\n                options.name = modelName;\n            }\n\n            options.ctx = this.ctx;\n            // end lazo specific overrides\n\n            var model = new this.model(attrs, options);\n            if (!model._validate(attrs, options)) {\n                this.trigger('invalid', this, attrs, options);\n                return false;\n            }\n            return model;\n        }\n\n    });\n\n    return Collection;\n});\n","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/public/controller.js":"define([\n    'underscore',\n    'backbone',\n    'base',\n    'resolver/main',\n    'utils/module',\n    'lazoCollectionView',\n    'lazoView',\n    'utils/ctlSerializor',\n    'context',\n    'async',\n    'utils/template',\n    'l!viewManager',\n    'utils/prune',\n    'bundler',\n    'jquery',\n    'renderer',\n    'l!destroyCmp',\n    'utils/uniqueId',\n    'l!jquerycookie'],\n    function (\n        _,\n        Backbone,\n        Base,\n        resolver,\n        module,\n        LazoCollectionView,\n        LazoBaseView,\n        serializor,\n        Context,\n        async,\n        template,\n        viewManager,\n        prune,\n        Bundler,\n        $,\n        renderer,\n        destroyCmp,\n        uniqueId) {\n\n    'use strict';\n\n    var bundle = new Bundler();\n\n    var Controller = Base.extend(_.extend({\n\n        constructor: function (options) {\n            if (!options) {\n                throw new TypeError('The options parameter is mandatory.'); // TODO: error handling\n            }\n\n            if (!options.name || typeof options.name !== 'string') {\n                throw new TypeError('The options.name parameter is mandatory.'); // TODO: error handling\n            }\n\n            this.cid = uniqueId(options.name);\n            this.ctx = options.ctx;\n            this.name = options.name;\n        },\n\n        orderedCss: [],\n\n        addChild: function (container, cmpName, options) {\n            var self = this;\n            var action = options.action || 'index';\n            var index = _.isNumber(options.index) ? options.index :\n                (this.children && this.children[container] ? this.children[container].length : 0);\n            options = this._setOptions(options);\n\n            module.addChild(container, cmpName, this, {\n                index: index,\n                params: options.params,\n                action: action,\n                success: function (child) {\n                    child.parent = self;\n                    if (LAZO.app.isClient) {\n                        var $container = self._getEl()\n                            .find('[lazo-cmp-container=\"' + container + '\"]');\n                        var $components = $container.children('[lazo-cmp-name]');\n                        renderer.getNodeHtml(child, function (html) {\n                            if (!$components.length) {\n                                $container.append(html);\n                            } else {\n                                var $component = $($components[index]);\n\n                                if ($component.length) {\n                                    $component.before(html);\n                                } else {\n                                    $components.last().after(html);\n                                }\n                            }\n\n                            if (options.render) {\n                                child.currentView.render({\n                                    success: function () {\n                                        options.success(child);\n                                    },\n                                    error: options.error\n                                });\n                            } else {\n                                options.success(child);\n                            }\n                        });\n                    } else {\n                        options.success(child);\n                    }\n                },\n                error: options.error || function (err) {\n                    throw error;\n                }\n            });\n        },\n\n        removeChild: function (child, options) {\n            var location = (function (children, child) {\n                for (var k in children) {\n                    for (var i = 0; i < children[k].length; i++) {\n                        if (children[k][i] === child) {\n                            return {\n                                container: k,\n                                index: i\n                            };\n                        }\n                    }\n                }\n            })(this.children, child);\n            options = this._setOptions(options);\n\n            if (!child) {\n                LAZO.logger.warn('[controller.removeChild], %s, child is argument is required.', this.name);\n                return options.success();\n            }\n\n            if (!location) {\n                LAZO.logger.warn('[controller.removeChild] could not locate child, %s, of parent, %s', child.name, this.name);\n                return options.success();\n            }\n\n            if (LAZO.app.isClient && location) {\n                destroyCmp(child);\n            }\n\n            this.children[location.container].splice(location.index, 1);\n            this.onChildRemove(child, options);\n        },\n\n        remove: function (options) {\n            var child = this;\n            var parent = this.parent;\n            options = this._setOptions(options);\n\n            if (!this.parent) {\n                LAZO.logger.warn('[controller.remove] could not locate child, %s, of parent, %s', child.name, this.name);\n                return options.success();\n            }\n\n            parent.removeChild(child, options);\n        },\n\n        onChildRemove: function (child, options) {\n            options = this._setOptions(options);\n            options.success();\n        },\n\n        index: function (options) {\n            return options.success('index');\n        },\n\n        navigate: function (action, options) {\n            var self = this;\n            var children = this.children;\n            options = options || {};\n\n            options = _.defaults(options || {}, { error: function () {\n                return;\n            }, success: function () {\n                return;\n            }});\n\n            // create a new context on navigation;\n            // inherit all previous properties that\n            // will not change and are not created by the\n            // context\n            this.ctx = new Context({\n                _rootCtx: this.ctx._rootCtx,\n                params: _.extend(this.ctx.params, options.params),\n                assets: this.ctx.assets,\n                css: this.ctx.css,\n                headers: this.ctx.headers,\n                meta: this.ctx.meta\n            });\n\n            if (LAZO.app.isClient) {\n                this._getEl().addClass('lazo-navigating');\n            }\n\n            // delete children, so that they do not get rendered\n            delete this.children;\n            this._execute(action, {\n                ctlNavigate: true,\n                // pass children from previous execution\n                // so that they can be cleaned up by this.transition\n                prevChildren: children,\n                error: function (err) {\n                    return options.error(err);\n                },\n                success: function () {\n                    self._getEl().removeClass('lazo-navigating').addClass('lazo-navigated');\n                    options.success();\n                }\n            });\n        },\n\n        transition: function (view, options) {\n            var self = this;\n            if (LAZO.app.isClient && this.currentView) {\n                viewManager.cleanup(this, this.currentView.cid);\n                // clean up children from previous execution\n                if (options.children) {\n                    for (var k in children) {\n                        if (children[k].length) {\n                            for (var i = 0; i < children[k].length; i++) {\n                                viewManager.cleanup(children[k][i], children[k][i].currentView.cid);\n                            }\n                        }\n                    }\n                }\n            }\n\n            this.currentView = view;\n            // only render html if ctl.navigate was called\n            // TODO: ensure views are getting attached\n            if (LAZO.app.isClient && options.ctlNavigate) {\n                view.render({\n                    error: options.error,\n                    success: function (html) {\n                        options.success(self);\n                    }\n                });\n            } else {\n                options.success(self);\n            }\n        },\n\n        setCookie: function (name, value, options) {\n            this.ctx.setCookie(name, value, options);\n        },\n\n        clearCookie: function (name, options) {\n            this.ctx.clearCookie(name, options);\n        },\n\n        loadModel: function (modelName, options) {\n            LAZO.app.loadModel(modelName, _.extend(options, { ctx: this.ctx }));\n        },\n\n        loadCollection: function (collectionName, options) {\n            LAZO.app.loadCollection(collectionName, _.extend(options, { ctx: this.ctx }));\n        },\n\n        createModel: function (modelName, attributes, options) {\n            LAZO.app.createModel(modelName, attributes, _.extend(options, { ctx: this.ctx }));\n        },\n\n        createCollection: function (collectionName, attributes, options) {\n            LAZO.app.createCollection(collectionName, attributes, _.extend(options, { ctx: this.ctx }));\n        },\n\n        setSharedData: function (key, val) {\n            this.ctx.setSharedData(key, val);\n            return this;\n        },\n\n        getSharedData: function (key) {\n            return this.ctx.getSharedData(key);\n        },\n\n        toJSON: function (rootCtx) {\n            return serializor.serialize(this, rootCtx);\n        },\n\n        serialize: function () {\n            return JSON.stringify(this.toJSON());\n        },\n\n        setPageTitle: function (title) {\n            this.ctx._rootCtx.pageTitle = title;\n            return this;\n        },\n\n        getPageTitle: function () {\n            return this.ctx._rootCtx.pageTitle;\n        },\n\n        addPageTag: function (name, attributes, content) {\n            LAZO.app.addPageTag(this.ctx, name, attributes, content);\n            return this;\n        },\n\n        getPageTags: function () {\n            return LAZO.app.getPageTags(this.ctx);\n        },\n\n        getPath: function () {\n            var parent = this.parent;\n            var path = [];\n            var node = this;\n\n            if (!parent) {\n                return [{ name: this.name, container: null, position: 0 }];\n            }\n\n            function getPosition(node, parent) {\n                var children = parent.children;\n\n                for (var k in children) {\n                    for (var i = 0; i < children[k].length; i++) {\n                        if (children[k][i] === node) {\n                            return { name: node.name, container: k, position: i };\n                        }\n                    }\n                }\n            }\n\n            while (parent) {\n                path.unshift(getPosition(node, parent));\n                node = parent;\n                parent = parent.parent;\n            }\n\n\n            path.unshift({ name: node.name, container: null, position: 0 });\n            return path;\n        },\n\n        augmentImportLink: function (link) {\n            return link;\n        },\n\n        augmentCssLink: function (link) {\n            return link;\n        },\n\n        getImport: function (relativePath) {\n            return bundle.resolveImport(relativePath, this.name);\n        },\n\n        setHttpStatusCode: function (statusCode) {\n            if (LAZO.app.isClient) {\n                return this;\n            }\n\n            if (!_.isFinite(statusCode) || statusCode < 0) {\n                throw new Error('statusCode is invalid, it must be a positive integer.');\n            }\n\n            this.ctx.response.statusCode = statusCode;\n            return this;\n        },\n\n        getHttpStatusCode: function () {\n            if (LAZO.app.isClient) {\n                return null;\n            }\n\n            return this.ctx.response.statusCode || 200;\n        },\n\n        addHttpHeader: function (name, value, options) {\n            if (LAZO.app.isClient) {\n                return this;\n            }\n\n            this.ctx.response.httpHeaders.push({ name: name, value: value, options: options || null });\n            return this;\n        },\n\n        getHttpHeaders: function () {\n            if (LAZO.app.isClient) {\n                return [];\n            }\n\n            return this.ctx.response.httpHeaders || [];\n        },\n\n        addHttpVaryParam: function (varyParam) {\n            if (LAZO.app.isClient) {\n                return this;\n            }\n\n            this.ctx.response.varyParams.push(varyParam);\n            return this;\n        },\n\n        getHttpVaryParams: function () {\n            if (LAZO.app.isClient) {\n                return [];\n            }\n\n            return this.ctx.response.varyParams || [];\n        },\n\n        _setOptions: function (options) {\n            var defaultOptions = {\n                success: function () {},\n                error: function (err) {\n                    throw err;\n                }\n            };\n            options = options || {};\n\n            return _.defaults(options, defaultOptions);\n        },\n\n        _getEl: function () {\n            if (LAZO.app.isClient) {\n                return $('[lazo-cmp-id=\"' + this.cid + '\"]');\n            }\n        },\n\n        _execute: function (action, options) {\n            var tasks = this._buildExecTaskList(action);\n            var self = this;\n\n            async.waterfall(tasks, function (err, view) {\n                if (err) {\n                    options.error(err);\n                } else {\n                    self.transition(view, options);\n                }\n            });\n        },\n\n        _createView: function (View, options) {\n            try {\n                return new View(_.extend({\n                    ref: resolver.getPath(options.name, this.name, 'view'),\n                    basePath: resolver.getBasePath(options.name, this.name, 'view'),\n                    ctl: this,\n                    cid: uniqueId('view')\n                }, options));\n            } catch (e) {\n                throw e;\n            }\n        },\n\n        _buildExecTaskList: function (action) {\n            var tasks = [];\n            var self = this;\n\n            tasks.push(function (callback) {\n                callback(null, action);\n            });\n            tasks.push(_.bind(this._action, this));\n            tasks.push(_.bind(this._getCss, this));\n            tasks.push(_.bind(this._getImports, this));\n            tasks.push(_.bind(this._getView, this));\n            return tasks;\n        },\n\n        _action: function (action, callback) {\n            if (typeof this[action] !== 'function') {\n                return callback(new Error('The given action is not implemented.'));\n            }\n\n            try {\n                var actionCalled = false;\n                this[action]({\n                    error: function (err) {\n                        err = err || new Error('The component action failed and an error object was not passed');\n                        actionCalled = true;\n                        return callback(err, null);\n                    },\n                    success: function (viewName) {\n                        if (!_.isString(viewName)) {\n                            callback(new Error('Controller action method options.success requires a view or template name'), null);\n                        }\n                        actionCalled = true;\n                        return callback(null, viewName);\n                    }\n                });\n            } catch (error) {\n                if (!actionCalled) {\n                    callback(error);\n                } else { // What can we do?  THe error was in the callback, so let's not call that again!\n                    throw error;\n                }\n            }\n        },\n\n        _getCss: function (viewName, callback) {\n            this._getLinks('css');\n            callback(null, viewName);\n        },\n\n        _getImports: function (viewName, callback) {\n            this._getLinks('imports');\n            callback(null, viewName);\n        },\n\n        _getLinks: function (type) {\n            var self = this;\n            var rootCtx = this.ctx._rootCtx;\n            var getMethod = type === 'imports' ? 'getComponentImports' : 'getComponentCss';\n            var augmentMethod = type === 'imports' ? 'augmentImportLink' : 'augmentCssLink';\n            var links = _.map(resolver[getMethod](self.name), function (link) {\n                var augmentedLink = self[augmentMethod]({ href: '/' + link });\n                augmentedLink['lazo-link-ctx'] = self.name;\n                return augmentedLink;\n            });\n\n            rootCtx.dependencies = rootCtx.dependencies || {};\n            rootCtx.dependencies[type] = rootCtx.dependencies[type] || [];\n            links = _.filter(links, function (link) {\n                return !_.find(rootCtx.dependencies[type], function (l) {\n                    return l.href === link.href;\n                });\n            });\n            rootCtx.dependencies[type] = rootCtx.dependencies[type].concat(links);\n        },\n\n        _getView: function (viewName, callback) {\n            var self = this,\n                path = resolver.getPath(viewName, this.name, 'view');\n\n            resolver.isBase(path, 'view', function (isBase) {\n                if (isBase) {\n                    return callback(null, self._createView(LazoBaseView, { name: viewName, isBase: true }));\n                } else {\n                    module.getView(path, function (err, View) {\n                        if (err) {\n                            return callback(new Error('Controller _getView failed for ' + path + ' : ' + err.message), null);\n                        }\n                        module.addPath(path, self.ctx);\n                        return callback(null, self._createView(View, { name: viewName, isBase: false }));\n                    });\n                }\n            });\n        },\n\n        _getPath: function (moduleName, moduleType) { // used by collection view\n            return resolver.getPath(moduleName, this.name, moduleType);\n        },\n\n        _getBasePath: function (moduleName, moduleType) { // used by collection view\n            return resolver.getBasePath(moduleName, this.name, moduleType);\n        }\n\n    }, Backbone.Events),\n    {\n\n        create: function (cmpName, ctlOptions, options) {\n            var ctlPath = 'components/' + cmpName + '/controller';\n\n            function loadBase() {\n                var instance = new Controller(ctlOptions);\n                instance.isBase = true;\n                return options.success(instance);\n            }\n\n            function loadCtl() {\n                LAZO.require([ctlPath], function (Ctl) {\n                    var instance = new Ctl(ctlOptions);\n\n                    module.addPath(ctlPath, ctlOptions.ctx);\n                    // Initialize default params, but only if context is set (otherwise we are deserializing,\n                    // so the context will be set later with the params already set.\n                    if (ctlOptions.ctx && instance.config && instance.config.params) {\n                        _.defaults(instance.ctx.params, instance.config.params);\n                    }\n\n                    instance.isBase = false;\n                    return options.success(instance);\n                }, function (err) {\n                    return options.error(new Error('Controller create LAZO.require failed for ' + ctlPath + ' : ' + err.message));\n                });\n            }\n\n            // client rehydration\n            if (_.isBoolean(ctlOptions.isBase)) {\n                if (ctlOptions.isBase) {\n                    return loadBase();\n                } else {\n                    return loadCtl();\n                }\n            }\n\n            // server\n            resolver.isBase(ctlPath, 'controller', function (isBase) {\n                if (isBase) {\n                    loadBase();\n                } else {\n                    loadCtl();\n                }\n            });\n        },\n\n        deserialize: function (ctl, options) { // TODO: implement\n            return serializor.deserialize(ctl, _.extend({}, options, { Controller: Controller }));\n        }\n\n    });\n\n    return Controller;\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/public/model.js":"define(['underscore', 'backbone', 'proxy', 'resolver/model', 'async', 'utils/dataschema-json'], function (_, Backbone, Proxy, helpers, async, SchemaJSON) {\n\n    'use strict';\n\n    /**\n     * A base class for models\n     *\n     * @class LazoModel\n     * @constructor\n     * @param {Object} attributes A hash of name-value pairs that will be the model's state\n     * @param {Object} options\n     *      @param {String} options.name The name of the model in the repo\n     *      @param {Object} options.params A hash of name-value pairs used in url substitution\n     *      @param {Context} options.ctx The current context for the request\n     * @extends Backbone.Model\n     */\n    var LazoModel = Backbone.Model.extend({\n\n            constructor: function (attributes, options) {\n                this._initialize(attributes, options);\n                Backbone.Model.apply(this, arguments);\n            },\n\n            save: function (key, val, options) {\n                var attrs;\n\n                // Handle both `\"key\", value` and `{key: value}` -style arguments.\n                if (key == null || typeof key === 'object') {\n                    attrs = key;\n                    options = val;\n                } else {\n                    (attrs = {})[key] = val;\n                }\n\n                options || (options = {});\n                \n                if (options.persist === false) {\n                    // no-op, just skip the saving.\n                    return;\n                }\n\n                if (options.syncDataFromChildren !== false && this.modelsSchema && this.modelsSchema.length > 0) {\n                    for (var i = 0, il = this.modelsSchema.length; i < il; i++) {\n                        var schema = this.modelsSchema[i],\n                            paths = SchemaJSON.getPath(schema.locator),\n                            parentData;\n                        if (paths && paths.length && this[schema.prop]) {\n                            (parentData = {})[paths[0]] = this.get(paths[0]);\n                            SchemaJSON.setLocationValue(schema.locator, parentData, this[schema.prop].toJSON());\n                        }\n                        \n                    }                        \n                }\n                \n                return Backbone.Model.prototype.save.apply(this, arguments);\n            },\n\n            set: function (key, val, options) {\n                var attr, attrs;\n\n                if (Backbone.Model.prototype.set.apply(this, arguments) == false) return false;\n\n                // Handle both `\"key\", value` and `{key: value}` -style arguments.\n                if (typeof key === 'object') {\n                    attrs = key;\n                    options = val;\n                } else {\n                    (attrs = {})[key] = val;\n                }\n\n                options || (options = {});\n\n                if (key === null || !this.modelsSchema || options.syncDataToChildren === false) return this;\n\n                for (attr in attrs) {\n                    for (var i = 0, il = this.modelsSchema.length; i < il; i++) {\n                        var schema = this.modelsSchema[i],\n                            paths = SchemaJSON.getPath(schema.locator);\n                        \n                        // if an attribute being set is part of a schema definition, set the data into the child model\n                        if (attr == paths[0] && this[schema.prop]) {\n                            var submodeldata = SchemaJSON.apply({resultListLocator: schema.locator}, attrs);\n                            this[schema.prop].set(submodeldata.results);\n                        }\n                    }\n                }\n\n                return this;\n            },\n            \n            sync: function (method, model, options) {\n                var self = this,\n                    success = options.success;\n\n                options.success = function (resp) {\n                    self._resp = resp;\n\n                    if (success) {\n                        success(resp);\n                    }\n                };\n\n                //ignoring model since this==model passed by backbone sync\n                return Proxy.prototype.sync.call(this, method, options);\n            },\n\n            call: function (fname, args, options) {\n                Proxy.prototype.callSyncher.call(this, fname, args, options);\n            },\n\n            _initialize: function (attributes, options) {\n                if (options.name) {\n                    this.name = options.name;\n                }\n                this.params = options.params;\n                this.ctx = options.ctx;\n            },\n\n            _getGlobalId: function () {\n                return LazoModel._getGlobalId(this.name, this.params);\n            }\n\n        },\n        {\n            _serialize: function (models, serModelObj) {\n                _.each(models, function (value, key, list) {\n                    serModelObj[key] = value._getGlobalId();\n                });\n            },\n\n            _deserialize: function (ctl, _rootCtx, options) {\n                LAZO.require(['utils/modelLoader'], function (modelLoader) {\n                    var processModel = function (processFuncs, value, key, type, child) {\n                        var glMdlMeta = _rootCtx.modelList[value],\n                            modelInstances = _rootCtx.modelInstances;\n\n                        processFuncs[processFuncs.length] = function (asyncCb) {\n                            var gid = LazoModel._getGlobalId(glMdlMeta.name, glMdlMeta.params);\n\n                            function checkProcessing() {\n                                if (modelInstances[gid].processing) {\n                                    setTimeout(checkProcessing, 50);\n                                }\n                                else {\n                                    ctl.ctx[type + 's'][key] = modelInstances[gid];\n                                    asyncCb(null, modelInstances[gid]);\n                                }\n                                return;\n                            }\n\n                            if (modelInstances[gid]) {\n                                checkProcessing();\n                                return;\n                            }\n                            else {\n                                modelInstances[gid] = {};\n                                modelInstances[gid].processing = true;\n\n                                var _initModel = function (Model, _default) {\n                                                    var m = new Model(glMdlMeta.data, {name: glMdlMeta.name, ctx: ctl.ctx, params: glMdlMeta.params, parse: true});\n                                                    modelInstances[gid] = m;\n                                                    m.cid = glMdlMeta.cid;\n                                                    m._default = _default;\n                \n                                                    if (glMdlMeta.idMap) {\n                                                        _.each(glMdlMeta.idMap, function (elem) {\n                                                            var modelItem = m.get(elem.id);\n                                                            if (modelItem) {\n                                                                modelItem.cid = elem.cid;\n                                                            }\n                                                        });\n                                                    }\n                \n                                                    ctl.ctx[type + 's'][key] = m;\n\n                                                    if (child && child.parentModel) {\n                                                        m.lazoParent = child.parentModel;\n                                                        child.parentModel.lazoChildren = child.parentModel.lazoChildren || {};\n                                                        child.parentModel.lazoChildren[glMdlMeta.name] = m;\n\n                                                        if (child.schema && child.schema.prop) {\n                                                            child.parentModel[child.schema.prop] = m;\n\n                                                            child.parentModel._childNames = child.parentModel._childNames || [];\n                                                            child.parentModel._childNames.push(child.schema.prop);\n                                                        }\n                                                    }\n\n\n                                                    if (m.modelsSchema) {\n                                                        var subtasks = [];\n                                                        \n                                                        _.each(m.modelsSchema, function (modelSchemaDef) {\n                \n                                                            var subgid = LazoModel._getGlobalId(modelSchemaDef.name, glMdlMeta.params),\n                                                                submodeldata = _rootCtx.modelList[subgid].data,\n                                                                subtype = _.isArray(submodeldata) ? 'collection' : 'model';\n                \n                                                            processModel(subtasks, subgid, modelSchemaDef.name, subtype,\n                                                                {\n                                                                    parentModel: m,\n                                                                    data: submodeldata,\n                                                                    schema: modelSchemaDef\n                                                                });\n                                                            \n                                                        });\n\n                                                        async.parallel(subtasks, function (err, results) {\n                                                            return asyncCb(null, m);\n                                                        });\n\n                                                    }\n                                                    else {\n                                                        return asyncCb(null, m);\n                                                    }\n                \n                                                };\n\n                                modelLoader(glMdlMeta.name, type, _initModel);\n                            }\n                        };\n                    };\n\n                    var mdlFuncs = [];\n\n                    // models\n                    _.each(ctl.ctx.models, function (value, key, list) {\n                        processModel(mdlFuncs, value, key, 'model');\n                    });\n                    // collections\n                    _.each(ctl.ctx.collections, function (value, key, list) {\n                        processModel(mdlFuncs, value, key, 'collection');\n                    });\n                    // load models and collections in parallel\n                    async.parallel(\n                        mdlFuncs,\n                        function (err, results) {\n                            if (err) {\n                                return options.error(err);\n                            }\n                            return options.success();\n                        }\n                    );\n                });\n            },\n\n            _getGlobalId: function (modelName, params) {\n                var globalModelId = 'GET:'+modelName;\n\n                if (modelName.indexOf(\"u:\") === 0 || modelName.indexOf(\"http\") === 0) {\n                    if (params) {\n                        globalModelId = helpers.substitute(globalModelId, params);\n                    }\n                }\n                else {\n                    if (params) {\n                        var props = _.keys(params);\n                        props.sort();\n                        _.each(props, function(element, index, list) {\n                            globalModelId = globalModelId + \"|\" + element + \"=\" + params[element];\n                        });\n                    }\n                }\n\n                return globalModelId;\n            }\n        }\n\n    );\n\n    return LazoModel;\n});\n","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/public/widget.js":"define(['base', 'uiStateMixin', 'underscore', 'backbone'], function (Base, uiStateMixin, _, Backbone) {\n\n    'use strict';\n\n    return Base.extend(_.extend({\n\n        constructor: function (options) {\n            this.view = options.view;\n            this._setAttributes(_.omit(options, 'view'));\n            Base.call(this, {});\n            this.initialize.apply(this);\n        },\n\n        attrValCoercion: true,\n\n        loadCss: false,\n\n        initialize: function () {},\n\n        render: function (options) {\n            options.success('');\n        },\n\n        afterRender: function (options) {\n            options.success();\n        },\n\n        createWidget: function (el, name, options) {\n            this.view.createWidget.apply(this, Array.prototype.slice.call(arguments));\n        },\n\n        getWidgetByEl: function (el) {\n            return this.view.getWidgetByEl.call(this, el);\n        },\n\n        getWidgetsByName: function (name) {\n            return this.view.getWidgetsByName.call(this, name);\n        },\n\n        attach: function (el) {},\n\n        detach: function (el) {},\n\n        attached: function () {},\n\n        detached: function () {},\n\n        attributeChanged: function () {},\n\n        created: function () {},\n\n        _setAttributes: function (attributes) {\n            if (this.attrValCoercion) {\n                attributes = this._coerce(attributes);\n            }\n\n            this.attributes = this.attributes || {};\n            this.attributes = _.extend(this.attributes, _.omit(this._resolveAttributes(attributes), 'view'));\n        },\n\n        // coerce values, e.g, '[\"foo\", \"bar\"]' to an array\n        _coerce: function (attributes) {\n            var val;\n\n            for (var k in attributes) {\n                // programtically created attribute\n                if (!_.isString(attributes[k])) {\n                    continue;\n                }\n\n                val = attributes[k];\n                if (val.charAt(0) === '[' || val.charAt(0) === '{') {\n                    try {\n                        attributes[k] = JSON.parse(val);\n                    } catch (e) {\n                        LAZO.logger.warn('[lazoWidget] Error while parsing attribute value', e);\n                    }\n                } else if (_.isNumber(parseFloat(val)) && !_.isNaN(parseFloat(val))) {\n                    attributes[k] = parseFloat(val);\n                } else if (val === 'true') {\n                    attributes[k] = true;\n                } else if (val === 'false') {\n                    attributes[k] = false;\n                }\n            }\n\n            return attributes;\n        },\n\n        // map $.* values to context properties\n        _resolveAttributes: function (attributes) {\n            var self = this;\n            var retVal = {};\n            var ctxMappings = {};\n             _.each(attributes, function (attribute, k) {\n                var isCtxMapping = _.isString(attribute) && !attribute.indexOf('$');\n                if (isCtxMapping) {\n                    ctxMappings[k] = attribute;\n                } else {\n                    retVal[k] = attribute;\n                }\n\n                return isCtxMapping;\n            });\n\n            _.each(ctxMappings, function (val, k) {\n                self._resolveCtxVal(retVal, val, k);\n            });\n\n            return retVal;\n        },\n\n        _resolveCtxVal: function (attrCtx, val, key) {\n            var keys = val.split('.').slice(1);\n            var ctx = this.view.ctl.ctx;\n            var struct;\n            var retVal;\n\n            for (var i = 0; i < keys.length; i++) {\n                struct = !i ? ctx[keys[i]] : struct[keys[i]];\n                attrCtx[key] = struct;\n                if (!attrCtx) {\n                    break;\n                }\n            }\n\n            return attrCtx;\n        }\n\n    }, uiStateMixin, Backbone.Events));\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/server/app.js":"var scan = require('./scanner');\n\nscan(process.env.FILE_REPO_DIR, function (appFiles) {\n    var fs = require('fs');\n    var path = require('path');\n    var requirejs = require('requirejs');\n    var http = require('http');\n    var _ = require('lodash');\n    var bootstrap;\n    var appJSON = fs.readFileSync(path.normalize(process.env.FILE_REPO_DIR + '/app/app.json'));\n    var routes = {};\n\n    try {\n        appJSON = JSON.parse(appJSON);\n        routes = appJSON.routes;\n    } catch (e) {\n        console.log('Error reading app/routes.json: ' + e);\n        process.exit(code=0);\n    }\n\n    function mergeArrays(a, b) {\n        if (_.isArray(a)) {\n            return a.concat(b);\n        }\n    }\n\n    function resolveConf(conf, env) {\n        return _.merge(conf.requirejs.common || {}, conf.requirejs[env] || {}, mergeArrays);\n    }\n\n    var conf = (function() {\n        var conf = JSON.parse(fs.readFileSync(path.normalize(process.env.BASE_PATH + '/' + 'conf.json')));\n\n        var appConfPath = path.normalize(process.env.FILE_REPO_DIR + '/conf.json');\n        var appConf = fs.existsSync(appConfPath) ? fs.readFileSync(appConfPath) : null;\n\n        if (appConf) {\n            try {\n                appConf = JSON.parse(appConf);\n            } catch (e) {\n                console.log('Error reading conf.json: ' + e);\n                process.exit(code=0);\n            }\n\n            _.merge(conf, appConf, mergeArrays);\n        }\n\n        return conf;\n    })();\n\n    global.LAZO = {\n        BASE_PATH: process.env.BASE_PATH,\n        FILE_REPO_DIR: process.env.FILE_REPO_DIR,\n        SHARED_REPO_DIR: process.env.SHARED_REPO_DIR,\n        FILE_REPO_PATH: path.resolve(process.env.FILE_REPO_DIR),\n        PORT: process.env.PORT ? parseInt(process.env.PORT, 10) : conf.server.port,\n        CLUSTER: process.env.CLUSTER === '1',\n        ROBUST: process.env.ROBUST === '1',\n        conf: conf,\n        routes: routes,\n        files: appFiles\n    };\n\n    bootstrap = requirejs.config({\n        baseUrl: LAZO.BASE_PATH,\n        context: 'bootstrap',\n        paths: {\n            'json': 'lib/vendor/json',\n            'text': 'lib/vendor/text',\n            'common': 'lib/common',\n            'base': 'lib/common/base',\n            'resolver': 'lib/common/resolver'\n        }\n    });\n\n    // load requireConfigure directly as opposed to resolver/main because resolver\n    // sub modules have need requirejs to be configured prior to being loaded\n    bootstrap(['resolver/requireConfigure'], function (requireConfigure) {\n\n        'use strict';\n\n        var options = {\n            basePath: LAZO.BASE_PATH,\n            baseUrl: LAZO.FILE_REPO_DIR\n        };\n\n        requireConfigure.get('server', _.merge(_.clone(options), resolveConf(conf, 'server')), function (err, serverConf) {\n            if (err) {\n                throw new Error(err);\n            }\n\n            requireConfigure.get('client', _.merge(_.clone(options), resolveConf(conf, 'client')), function (err, clientConf) {\n                if (err) {\n                    throw new Error(err);\n                }\n\n                function addPaths(serverConf) {\n                    var customBundlerPath = path.normalize(LAZO.FILE_REPO_DIR + path.sep + 'app' + path.sep + 'bundle.js');\n                    var customAssetPath = path.normalize(LAZO.FILE_REPO_DIR + path.sep + 'app' + path.sep + 'assets.js');\n                    var customServerSetup = path.normalize(LAZO.FILE_REPO_DIR + path.sep + 'app' + path.sep +\n                        'server' + path.sep + 'server.js');\n                    var customPageTemplate = path.normalize(LAZO.FILE_REPO_DIR + path.sep + 'app' + path.sep + 'views' +\n                        path.sep + 'page.hbs');\n\n                    if (fs.existsSync(customBundlerPath)) {\n                        serverConf.paths.bundler = path.resolve(path.normalize(LAZO.FILE_REPO_DIR + '/app/bundle'));\n                    } else {\n                        serverConf.paths.bundler = serverConf.paths.lazoBundle;\n                    }\n                    if (fs.existsSync(customAssetPath)) {\n                        serverConf.paths.assets = path.resolve(path.normalize(LAZO.FILE_REPO_DIR + '/app/assets'));\n                    }\n                    if (fs.existsSync(customServerSetup)) {\n                        serverConf.paths.appServerSetup = path.resolve(path.normalize(LAZO.FILE_REPO_DIR + '/app/server/server'));\n                    }\n                    if (fs.existsSync(customPageTemplate)) {\n                        serverConf.paths.pageTemplate = path.resolve(path.normalize(LAZO.FILE_REPO_DIR + '/app/views/page.hbs'));\n                    }\n\n                    return serverConf;\n                }\n\n                LAZO.require = requirejs.config(addPaths(serverConf));\n                LAZO.contexts = {\n                    request: JSON.parse(JSON.stringify(clientConf)), // request combo handling\n                    lib: JSON.parse(JSON.stringify(clientConf)), // lib combo handling\n                    server: JSON.parse(JSON.stringify(serverConf)), // paths are used for generating combo handled file\n                    app: _.omit(clientConf, 'basePath')\n                };\n\n                // these are needed by dependencies of lazoApp\n                LAZO.isServer = true;\n                LAZO.isClient = false;\n                // these cannot be loaded until the requirejs app config has been set\n                LAZO.require(['config'], function (config) {\n                    LAZO.config = config;\n                    LAZO.require(['app/application'], function (LazoApp) {\n                        LAZO.app = new LazoApp();\n                        LAZO.app.isServer = LAZO.isServer;\n                        LAZO.app.isClient = LAZO.isClient;\n                        LAZO.app.css = appJSON.css || [];\n                        LAZO.app.js = appJSON.js || [];\n                        LAZO.app.imports = appJSON.imports || [];\n                        LAZO.app.getAssets = appJSON.assets || false;\n                        LAZO.app.defaultLayout = appJSON.defaultLayout;\n\n                        // these are dependent on the\n                        LAZO.require(['server', 'resolver/file', 'error', 'logger'], function (server, file, err, logger) {\n\n                            LAZO.error = err;\n                            LAZO.logger = logger;\n\n                            // process appArgs command line argument into application.args\n                            var args = process.argv.filter(function (elem) {\n                                return elem.indexOf('--appArgs') !== -1;\n                            });\n\n                            if (args.length) {\n                                LAZO.app.args = {};\n                                var appArgs = args[0].split('='),\n                                    args = appArgs[1].split(';');\n                                for (var i = 0, il = args.length; i < il; i++) {\n                                    var arg = args[i].split(':');\n                                    LAZO.app.args[arg[0]] = arg[1];\n                                }\n                            }\n\n                            LAZO.logger.warn(['server.app'], 'Initializing with arguments: %j', LAZO.app.args);\n\n                            http.globalAgent.maxSockets = LAZO.conf.server.maxSockets;\n                            LAZO.conf.server.instances.primary.port = LAZO.PORT || LAZO.conf.server.instances.primary.port;\n\n                            LAZO.app.initialize(function () {\n                                file.getErrorTemplatePaths(function (err, templates) {\n                                    if (err) {\n                                        throw err;\n                                    }\n\n                                    LAZO.errorTemplates = templates;\n                                    server.initialize(templates);\n                                });\n                            });\n                        });\n                    });\n                });\n            });\n        });\n\n    });\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/server/scanner.js":"// returns a hash used to determine if the base class should be loaded\nvar fs = require('fs');\nvar path = require('path');\nvar dir = require('node-dir');\n\nfunction scan(appPath, callback) {\n    var processed = 0;\n    var retVal = {\n        components: { subdir: '/components', filters: ['controller.js', path.sep + 'views' + path.sep, '.css', path.sep + 'imports' + path.sep] },\n        models: { subdir: '/models', filters: ['model.js', 'collection.js'] },\n        appViews: { subdir: '/app/views', filters: [] }\n    };\n\n    function getRelativePath(appPath, absolutePath) {\n        return absolutePath.replace(appPath + path.sep, '').replace(/\\\\/g, '/');\n    }\n\n    console.log('Scanning application directory. Please wait...');\n\n    for (var k in retVal) {\n        (function (k, retVal) {\n            var subdir = path.normalize(appPath + retVal[k].subdir);\n            var filesHash = {};\n            dir.files(subdir, function (err, files) {\n                if (err) {\n                    console.log('INFO: ' + err.path + ' does not exist');\n                } else {\n                    files.forEach(function (file) {\n                        if (retVal[k].filters.length) {\n                            retVal[k].filters.forEach(function (filter) {\n                                if (file.indexOf(filter) !== -1) {\n                                    filesHash[getRelativePath(appPath, file)] = true;\n                                }\n                            });\n                        } else {\n                            filesHash[getRelativePath(appPath, file)] = true;\n                        }\n                    });\n                }\n\n                retVal[k] = filesHash;\n                processed++;\n                if (processed === 3) {\n                    callback(retVal);\n                }\n            });\n        })(k, retVal);\n    }\n}\n\nmodule.exports = scan;","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/server/assetsProvider.js":"define(['underscore', 'resolver/assets', 'node-dir', 'path', 'fs'],\n    function (_, utils, dir, path, fs) {\n\n    'use strict';\n\n    return _.extend({\n\n        _cache: {\n\n        },\n\n        // resolve component path for listing assets directory contents\n        _resolvePath: function (component) {\n            var pathParts = component === 'app' ? ['app'] : ['components'];\n            if (component !== 'app') {\n                pathParts.push(component);\n            }\n            pathParts.push('assets');\n\n            return path.resolve(LAZO.FILE_REPO_PATH + path.sep + path.join.apply(this, pathParts));\n        },\n\n        _getLocaleFromPath: function (assetPath) {\n            var pathParts = assetPath.split(path.sep);\n            return pathParts.length > 1 ? pathParts[0] : 'defaults';\n        },\n\n        // transform windows path for web url\n        _transformPath: function (path) {\n            return path.replace(/\\\\/g, '/');\n        },\n\n        // strip  ABSOLUTE_PATH/assets from path\n        _getRelativePaths: function (files, component) {\n            var self = this;\n            return files.map(function (file) {\n                return file.replace(path.normalize(self._resolvePath(component) + path.sep), '');\n            });\n        },\n\n        // iterate over component map and resolve assets\n        _resolveComponentsAssets: function (map, ctx) {\n            for (var k in map) {\n                map[k] = this.resolveAssets(map[k], ctx);\n            }\n\n            return map;\n        },\n\n        get: function (components, ctx, options) {\n            var loaded = 0;\n            var assets = {};\n            var self = this;\n\n            function onDone(assets, ctx) {\n                assets = self._resolveComponentsAssets(assets, ctx);\n                _.extend(self._cache, assets);\n                return assets;\n            }\n\n            for (var i = 0; i < components.length; i++) {\n                assets[components[i]] = {};\n                if (this._cache[components[i]]) {\n                    assets[components[i]] = this._cache[components[i]];\n                    loaded++;\n                    if (loaded === components.length) {\n                        return options.success(assets);\n                    }\n                    continue;\n                }\n\n                (function (i) {\n                    var cmpPath = self._resolvePath(components[i]);\n\n                    fs.exists(cmpPath, function (exists) {\n                        if (exists) {\n                            dir.files(cmpPath, function (err, files) {\n                                loaded++;\n\n                                if (err) {\n                                    LAZO.logger.warn('[assets.get] error reading component directory.', err);\n                                } else {\n                                    var j = files.length;\n                                    // remove 'assets[path.sep]'\n                                    files = self._getRelativePaths(files, components[i]);\n\n                                    while (j--) {\n                                        var locale = self._getLocaleFromPath(files[j]);\n                                        if (_.isUndefined(assets[components[i]][locale])) {\n                                            assets[components[i]][locale] = {};\n                                        }\n\n                                        if (/strings\\.json$/.test(files[j])) { // read assets property file\n                                            loaded--;\n                                            (function (locale, cmpPath) {\n                                                fs.readFile(path.resolve(cmpPath + path.sep + files[j]), function (err, strings) {\n                                                    loaded++;\n                                                    if (err) {\n                                                        LAZO.logger.warn('[assets.get] error reading component property file.', err);\n                                                    } else {\n                                                        try {\n                                                            strings = JSON.parse(strings);\n                                                            _.extend(assets[components[i]][locale], strings);\n                                                        } catch (e) {\n                                                            LAZO.logger.warn('[assets.get] error parsing component property file.', e);\n                                                        }\n                                                    }\n\n                                                    if (loaded === components.length) {\n                                                        options.success(onDone(assets, ctx));\n                                                    }\n                                                });\n                                            })(locale, cmpPath);\n                                        } else { // add assets file\n                                            files[j] = self._transformPath(files[j]);\n                                            assets[components[i]][locale][self.resolveAssetKey(files[j])] = self.resolveAssetPath(files[j], components[i], ctx);\n                                        }\n                                    }\n                                }\n\n                                if (loaded === components.length) {\n                                    options.success(onDone(assets, ctx));\n                                }\n                            });\n                        } else {\n                            loaded++;\n                            if (loaded === components.length) {\n                                options.success(onDone(assets, ctx));\n                            }\n                        }\n                    });\n\n\n                })(i);\n            }\n        }\n\n    }, utils);\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/server/backbone.js":"define(['backboneServer'], function (Backbone) {\n\n    function noop() {\n        return this;\n    }\n\n    // ignore client events on server\n    Backbone.Events.on = noop;\n    Backbone.Events.off = noop;\n    Backbone.Events.trigger = noop;\n    Backbone.Events.once = noop;\n    Backbone.Events.listenTo = noop;\n    Backbone.Events.stopListening = noop;\n    Backbone.Events.listenToOnce = noop;\n\n    Backbone.Model.prototype.on = noop;\n    Backbone.Model.prototype.off = noop;\n    Backbone.Model.prototype.trigger = noop;\n    Backbone.Model.prototype.once = noop;\n    Backbone.Model.prototype.listenTo = noop;\n    Backbone.Model.prototype.stopListening = noop;\n    Backbone.Model.prototype.listenToOnce = noop;\n\n    Backbone.Collection.prototype.on = noop;\n    Backbone.Collection.prototype.off = noop;\n    Backbone.Collection.prototype.trigger = noop;\n    Backbone.Collection.prototype.once = noop;\n    Backbone.Collection.prototype.listenTo = noop;\n    Backbone.Collection.prototype.stopListening = noop;\n    Backbone.Collection.prototype.listenToOnce = noop;\n\n    Backbone.View.prototype.on = noop;\n    Backbone.View.prototype.off = noop;\n    Backbone.View.prototype.trigger = noop;\n    Backbone.View.prototype.once = noop;\n    Backbone.View.prototype.listenTo = noop;\n    Backbone.View.prototype.stopListening = noop;\n    Backbone.View.prototype.listenToOnce = noop;\n\n    // Do not use Backbone history on server\n    Backbone.history.start = noop;\n\n    // Disable view events on server\n    Backbone.View.prototype._ensureElement = noop;\n    Backbone.View.prototype.delegateEvents = noop;\n    Backbone.View.prototype.undelegateEvents = noop;\n\n    return Backbone;\n\n});\n","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/server/forbidden.js":"define(function () {\n\n    'use strict';\n\n    var regexes = [/\\/server(\\/)?/, /\\/node_modules(\\/)?/];\n\n    return function (path) {\n        var i = 0;\n        var len = regexes.length;\n\n        for (i; i < len; i++) {\n            if (path.match(regexes[i])) {\n                return true;\n            }\n        }\n\n        return false;\n    };\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/server/httpResponse.js":"define(['underscore'], function (_) {\n\n    'use strict';\n\n    var httpHeaders = [],\n        varyHeader = [];\n\n    return {\n\n        addHttpHeader: function (name, value, options) {\n            httpHeaders.push({ name: name, value: value, options: options || null });\n            return this;\n        },\n\n        getHttpHeaders: function () {\n            return httpHeaders;\n        },\n\n        addVaryParam: function (varyParam) {\n            varyHeader.push(varyParam);\n            return this;\n        },\n\n        getVaryParams: function () {\n            return varyHeader;\n        },\n\n        mergeHttpResponseData: function (ctl) {\n            return {\n                statusCode: ctl.getHttpStatusCode() || null,\n                httpHeaders: httpHeaders.concat(ctl.getHttpHeaders()),\n                varyParams: _.union(varyHeader, ctl.getHttpVaryParams())\n            };\n        },\n\n        applyHttpResponseData: function (response, httpResponseData) {\n            if (httpResponseData.statusCode) {\n                response.code(httpResponseData.statusCode);\n            }\n\n            _.each(httpResponseData.httpHeaders, function (header) {\n                response.header(header.name, header.value, header.options || { override: true });\n            });\n\n            _.each(httpResponseData.varyParams, function (headerName) {\n                response.vary(headerName);\n            });\n        }\n\n    }\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/server/jquery.js":"define('jquery', [], function () { return function () {}; }); // noop on server","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/server/loader.js":"define(['module'], function (mod) {\n\n    'use strict';\n\n    var path = require('path');\n\n    var paths = [];\n\n    paths.push(LAZO.FILE_REPO_PATH);\n    paths.push(LAZO.FILE_REPO_PATH + path.sep + 'node_modules');\n    paths.push(process.cwd() + path.sep + 'node_modules');\n    paths.push(LAZO.BASE_PATH + path.sep + 'node_modules');\n\n    function isClientOnly(name, paths) {\n        var names = name.indexOf('/') ? name.split('/') : [name];\n        for (var i = 0; i < names.length; i++) {\n            if (paths[names[i]] && paths[names[i]].indexOf('/client/') !== -1) {\n                return true;\n            }\n        }\n\n        if (LAZO.conf &&\n            LAZO.conf.requirejs &&\n            LAZO.conf.requirejs.client &&\n            LAZO.conf.requirejs.client.paths &&\n            LAZO.conf.requirejs.client.paths[name]) {\n            \n            return true;\n            \n        }\n        \n        return false;\n    }\n\n    function resolvePath(baseUrl, relativePath) {\n        // requirejs adds a \"/\" to the end of the baseUrl regardless of the OS\n        baseUrl = baseUrl.substr(0, baseUrl.length - 1) + path.sep;\n        return path.normalize(baseUrl + relativePath);\n    }\n\n    function logInfo(modulePath) {\n        if (LAZO && LAZO.logger && LAZO.logger.info) {\n            LAZO.logger.info(['server.loader'], 'Tried loading module from path %s', modulePath);\n        }\n    }\n    \n    function logError(err) {\n        if (LAZO && LAZO.logger && LAZO.logger.error) {\n            LAZO.logger.error(['server.loader'], '%s', err);\n        } else {\n            console.error('[server.loader] ' + err);\n        }\n    }\n\n    function injectNodeModules(modulePath) {\n        var parts = modulePath.split(path.sep);\n        var partsLength = parts.length;\n        var isPrivate = partsLength > 2 && /^@/.test(parts[partsLength - 2]);\n        var offset = isPrivate ? 2 : 1;\n\n        parts.splice(partsLength - offset, 0, 'node_modules');\n\n        return parts.join(path.sep);\n    }\n\n    return {\n        load: function (name, req, onload, config) {\n            var nodeModule;\n            var modulePath;\n            var loaded = true;\n\n            //req has the same API as require().\n            if (name !== null && name.indexOf('/client/') === -1 && !isClientOnly(name, config.paths)) {\n                req([name], function (value) {\n                    onload(value);\n                }, function (err) {\n                    // try to load node module using absolute path\n                    modulePath = resolvePath(config.baseUrl, name);\n\n                    try {\n                        nodeModule = require.nodeRequire(modulePath);\n                        onload(nodeModule);\n                    } catch (err) {\n                        loaded = false;\n                        logInfo(modulePath);\n                        try {\n                            loaded = true;\n                            // try injecting node_modules directory\n                            nodeModule = require.nodeRequire(injectNodeModules(modulePath));\n                            onload(nodeModule);\n                        } catch (err) {\n                            loaded = false;\n                            logInfo(modulePath);\n                        }\n                    }\n\n                    // try other common paths\n                    for (var i = 0; i < paths.length; i++) {\n                        if (loaded) {\n                            break;\n                        }\n\n                        for (var j = 0; j < 2; j++) {\n                            try {\n                                loaded = true;\n                                modulePath = paths[i] + path.sep + name;\n                                nodeModule = require.nodeRequire(j ? injectNodeModules(modulePath) : modulePath);\n                            } catch (err) {\n                                logInfo(modulePath);\n                                loaded = false;\n                            }\n                        }\n                    }\n                    \n                    if(!loaded){\n                        logError(err);\n                    }\n                });\n            } else {\n                //Returning null for client side dependencies on server\n                onload(null);\n            }\n        }\n    };\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/server/proxy.js":"define(['base', 'underscore', 'serviceProxy', 'fs', 'path'], function (Base, _, ServiceProxy, fs, path) {\n\n    var Proxy = Base.extend({\n        sync: function (method, options) {\n            var model = this;\n            var validationResp = doValidate(model);\n            if (validationResp) {\n                if (options.error) {\n                    return options.error(validationResp);\n                } else {\n                    throw new Error('Error back not defined');\n                }\n            }\n\n            findSyncer(model, {\n                success: function (Syncher) {\n                    var sync = new Syncher();\n                    sync.proxy.ctx = model.ctx;\n\n                    var opts = _.extend({ params: model.params || {} }, options, { model: model });\n\n                    LAZO.logger.debug('[server.proxy.sync] Calling CRUD syncher...', model.name);\n\n                    switch (method) {\n                        case 'read':\n                            sync.fetch(opts);\n                            break;\n                        case 'create':\n                            sync.add(model.attributes, opts);\n                            break;\n                        case 'update':\n                            sync.update(model.attributes, opts);\n                            break;\n                        case 'delete':\n                            sync.destroy(model.attributes, opts);\n                            break;\n                    }\n                },\n                error: function (err) {\n                    LAZO.logger.debug('[server.proxy.sync] Error calling CRUD syncher...', model.name, err);\n\n                    ServiceProxy.prototype.sync.call(this, method, model, options);\n                }\n            });\n        },\n\n        callSyncher: function (fname, args, options) {\n            var model = this;\n            var validationResp = doValidate(model);\n            if (validationResp) {\n                if (options.error) {\n                    return options.error(validationResp);\n                } else {\n                    throw new Error('Error back not defined');\n                }\n            }\n\n            findSyncer(model, {\n                success: function (Syncher) {\n                    var sync = new Syncher();\n                    sync.proxy.ctx = model.ctx;\n\n                    var opts = _.extend(options, { ctx: model.ctx });\n\n                    LAZO.logger.debug('[server.proxy.callSyncher] Calling NON-CRUD syncher...', fname);\n\n                    if (typeof(sync[fname]) === 'function') {\n                        return sync[fname](args, opts);\n                    }\n\n                    return options.error({error: 'Method not found in syncher: ' + fname});\n                },\n                error: function (err) {\n                    return options.error({error: 'No syncher defined for model: ' + model.name});\n                }\n            });\n        }\n    });\n\n    function doValidate(model) {\n        if (!model.name) {\n            return {error: 'model does not have a name'};\n        }\n        if (!model.ctx) {\n            return {error: 'model does not have a context'};\n        }\n        return null;\n    }\n\n    function findSyncer(model, options) {\n        var exists = fs.existsSync(path.join(LAZO.FILE_REPO_PATH, 'models', model.name, 'server', 'syncher.js'));\n        if (!exists) {\n            return options.error(Error(\"syncher.js not found for model \" + model.name));\n        }\n        LAZO.require(['models/' + model.name + '/server/syncher'], options.success, options.error);\n    }\n\n    return Proxy;\n});\n","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/server/server.js":"define([\n    'handlers/app/main',\n    'handlers/assets',\n    'continuation-local-storage',\n    'cluster',\n    'fs',\n    'hapi',\n    'path',\n    'resolver/main',\n    'handlers/safe',\n    'handlers/stream',\n    'handlers/tunnel',\n    'lodash',\n    'forbidden',\n    'appServerSetup'\n], function (appHandler, assetsHandler, cls, cluster, fs, hapi, path, resolver, safeHandler, streamHandler, tunnelHandler, _, forbidden, AppServerSetup) {\n\n    'use strict';\n\n    var lazoNs = cls.createNamespace('lazojs');\n    var appServerSetup = new AppServerSetup();\n\n    return {\n\n        initialize: function (errHandlers) {\n            LAZO.logger.info(['server.initialize'], 'Initializing server...');\n\n            this.errHandlers = errHandlers;\n            this._cluster(); // cluster server if specified else execute this._worker once\n        },\n\n        _servers: {},\n\n        _worker: function () {\n            var self = this;\n\n            this._create(function () {\n                self._extensions() // server extensions\n                ._routes() // define app routes and add app handlers\n                ._handlers() // add all other route handlers\n                ._error() // init logger & error handling\n                ._start();\n            });\n        },\n\n        _create: function (callback) {\n            var servers = LAZO.conf.server.instances;\n            var serverDefaults = LAZO.conf.server.defaults;\n            var self = this;\n            var options;\n            var port;\n\n            function getSslCerts(tls) {\n                for (var k in tls) {\n                    try {\n                        tls[k] = fs.readFileSync(path.resolve(LAZO.FILE_REPO_DIR + '/' + tls[k]));\n                    } catch (e) {\n                        throw new Error('could not find ssl ' + k + ' at ' + tls[k]);\n                    }\n                }\n            }\n\n            this.pack = new hapi.Pack();\n            LAZO._servers = {};\n            for (var k in servers) {\n                options = _.merge({ labels: [k] }, servers[k], serverDefaults);\n                port = options.port;\n                options = _.omit(options, ['port', 'maxBytes']);\n                options.views = {\n                    engines: {\n                        hbs: {\n                            module: require('handlebars')\n                        }\n                    },\n                    allowAbsolutePaths: true\n                };\n                options.maxSockets = LAZO.conf.server.maxSockets;\n\n                if (options.tls) {\n                    getSslCerts(options.tls);\n                }\n\n                LAZO._servers[k] = this._servers[k] = this.pack.server(port, options);\n                LAZO.logger.info(['server._create'], 'Lazo created server on port %d', port);\n            }\n\n            appServerSetup.setup(hapi, this.pack, this._servers, {\n                success: function () {\n                    callback();\n                },\n                error: function (err) {\n                    LAZO.logger.warn(['server.setup'], 'Error: ', err);\n                    callback();\n                }\n            });\n        },\n\n        _extensions: function () {\n            var self = this;\n\n            function preResponseHandler (request, reply) {\n                var response = request.response;\n\n                if (forbidden(request.url.path)) {\n                    return reply(hapi.error.forbidden());\n                } else if (response.isBoom) {\n                    if (LAZO.CLUSTER && !LAZO.ROBUST && response.output.statusCode >= 500 && response.output.statusCode <= 599) {\n                        LAZO.logger.warn('[server._extensions]', 'Internal server error', request.url.href, response.response.code, response.message, response.trace);\n                        self._stop();\n                    }\n\n                    var errHandler = self.errHandlers[response.output.statusCode];\n                    if (errHandler) {\n                        return reply.view(errHandler.server, response.output.payload)\n                            .code(response.output.statusCode);\n                    }\n                }\n\n                return reply();\n            }\n\n            function onRequest(request, next) {\n                lazoNs.run(function () {\n                    lazoNs.set('request', request);\n                    process.nextTick(function () {\n                        next();\n                    });\n                });\n            }\n\n            for (var k in this._servers) {\n                this._servers[k].ext('onPreResponse', preResponseHandler);\n                this._servers[k].ext('onRequest', onRequest);\n                this._servers[k].ext('onPreHandler', onRequest);\n            }\n\n            return this;\n        },\n\n        _routes: function () {\n            var self = this;\n            var routeDefs = LAZO.routes;\n            var serverRoutDefs;\n            var s;\n            var r;\n\n            // TODO: do we still need to handle POST request for routes?\n            function processRoute(route, tags) {\n                var routes = resolver.transformRoute(route);\n\n                if (routes.routeTrailingSlash) {\n                    self._addAppRouteHandler('GET', routes.routeTrailingSlash, route, tags);\n                    self._addAppRouteHandler('POST', routes.routeTrailingSlash, route, tags);\n                }\n\n                self._addAppRouteHandler('GET', routes.route, route, tags);\n                self._addAppRouteHandler('POST', routes.route, route, tags);\n            }\n\n            // add default server tag if it does not exist\n            function setTags(routeDefs) {\n                for (var k in routeDefs) {\n                    if (_.isObject(routeDefs[k])) {\n                        if (!_.isArray(routeDefs[k].servers)) {\n                            routeDefs[k].servers = ['primary'];\n                        }\n                    } else {\n                        routeDefs[k] = {\n                            component: routeDefs[k],\n                            servers: ['primary']\n                        };\n                    }\n                }\n\n                return routeDefs;\n            }\n\n            serverRoutDefs = setTags(routeDefs);\n            for (r in serverRoutDefs) {\n                processRoute(r, serverRoutDefs[r].servers);\n            }\n            for (s in this._servers) {\n                // give server a reference to routes, used later when handling the routes\n                this._servers[s]._routes = serverRoutDefs;\n            }\n\n            return this;\n        },\n\n        _addAppRouteHandler: function (method, path, route, tags) {\n            var self = this,\n                definition = { method: method, path: path };\n\n            if (method === 'GET') {\n                definition.config = {\n                    tags: tags,\n                    handler: function (request, reply) {\n                        appHandler(request, reply, route);\n                    }\n                };\n            } else {\n                definition.config = {\n                    tags: tags,\n                    handler: function (request, reply) {\n                        appHandler(request, reply, route);\n                    },\n                    payload: { parse: true }\n                };\n            }\n\n            this._setServerRoute(definition);\n\n            return this;\n        },\n\n        _handlers: function () {\n            this._tunnelHandler()\n                ._assetsHandler()\n                ._staticFilesHandler();\n\n            return this;\n        },\n\n        _tunnelHandler: function () {\n            var self = this;\n            var tunnelOptions = {\n                method: 'POST',\n                path: '/tunnel/{extras*}',\n                config: {\n                    handler: tunnelHandler,\n                    payload: { parse: true }\n                }\n            };\n\n            this._setServerRoute(tunnelOptions);\n\n            var postFcaFileOptions = {\n                method: 'POST',\n                path: '/fn/{compName}/upload',\n                config: {\n                    handler: streamHandler,\n                    payload: {\n                        parse: true,\n                        output: 'file'\n                    }\n                }\n            };\n            this._setServerRoute(postFcaFileOptions);\n\n            var postFaFileOptions = {\n                method: 'POST',\n                path: '/fn/upload',\n                config: {\n                    handler: streamHandler,\n                    payload: {\n                        parse: true,\n                        output: 'file'\n                    }\n                }\n            };\n            this._setServerRoute(postFaFileOptions);\n\n            var postFcaOptions = {\n                method: 'POST',\n                path: '/fn/{compName}/{action}',\n                config: {\n                    handler: streamHandler,\n                    payload: { parse: true }\n                }\n            };\n            this._setServerRoute(postFcaOptions);\n\n            var postFaOptions = {\n                method: 'POST',\n                path: '/fn/{action}',\n                config: {\n                    handler: streamHandler,\n                    payload: { parse: true }\n                }\n            };\n            this._setServerRoute(postFaOptions);\n\n            var getFcaOptions = {\n                method: 'GET',\n                path: '/fn/{compName}/{action}',\n                config: {\n                    handler: streamHandler\n                }\n            };\n            this._setServerRoute(getFcaOptions);\n\n            var getFaOptions = {\n                method: 'GET',\n                path: '/fn/{action}',\n                config: {\n                    handler: streamHandler\n                }\n            };\n            this._setServerRoute(getFaOptions);\n\n            return this;\n        },\n\n        _assetsHandler: function () {\n            var assetOptions = {\n                method: 'GET',\n                path: '/assets',\n                handler: assetsHandler\n            };\n\n            this._setServerRoute(assetOptions);\n\n            return this;\n        },\n\n        _staticFilesHandler: function () {\n            var pathsOptions = {\n                method: 'GET',\n                path: '/{path*}',\n                handler: {\n                    directory: {\n                        path: [\n                            LAZO.FILE_REPO_DIR,\n                            LAZO.BASE_PATH,\n                            LAZO.BASE_PATH + '/lib'\n                        ],\n                        listing: false,\n                        index: true\n                    }\n                }\n            };\n\n            this._setServerRoute(pathsOptions);\n\n            var libOptions = {\n                method: 'GET',\n                path: '/lib/{path*}',\n                handler: {\n                    directory: { path: [LAZO.BASE_PATH + '/lib'], listing: false, index: true }\n                }\n            };\n\n            this._setServerRoute(libOptions);\n\n            return this;\n        },\n\n        _error: function () {\n            var ev;\n\n            for (var k in this._servers) {\n                ev = this._servers[k].on ? this._servers[k] : this._servers[k].events;\n                ev.on('internalError', function (request, error) {\n                    LAZO.logger.debug('[server._error]', 'Internal server error', request, error);\n                });\n            }\n\n            return this;\n        },\n\n        _start: function () {\n            var self = this;\n\n            this.pack.register({\n                plugin: require('crumb'),\n                options: { ext: true }\n            }, function (err) {\n                if (!err) {\n                    self.pack.start(function () {\n                        appServerSetup.afterInitialize(hapi, self.pack, self.servers, {\n                            success: function () {\n                                LAZO.logger.info(['server.afterInitialize'], 'Server initialized...');\n                            },\n                            error: function (err) {\n                                LAZO.logger.warn('[server.afterInitialize]', 'Error while Initializing...', err);\n                            }\n                        });\n                    });\n                } else {\n                    LAZO.logger.error('[server._start]', 'Error while starting %s server...', k, err);\n                }\n            });\n\n            return this;\n        },\n\n        _stop: function () {\n            var self = this;\n\n            try {\n                if (cluster.isWorker) {\n                    cluster.worker.disconnect();\n                }\n\n                this.pack.stop(function () {\n                    process.exit(1);\n                });\n            } catch (err) {\n                LAZO.logger.error('[server._stop]', 'Error while stopping server and disconnecting worker.', err);\n            }\n        },\n\n        _cluster: function () {\n            var cpus;\n            var k;\n            var port;\n\n            if (!LAZO.CLUSTER) {\n                this._worker();\n                for (k in this._servers) {\n                    port = LAZO.conf.server.instances[k].port || LAZO.conf.server.defaults.port;\n                    LAZO.logger.warn('[server._cluster]', 'Server %s started with single process, listening on port %d...', port, k);\n                }\n\n                return this;\n            }\n\n            cpus = process.env['CLUSTER'];\n\n            if (cluster.isMaster) {\n                for (var i = 0; i < cpus; i++) {\n                    cluster.fork();\n                }\n\n                cluster.on('online', function (worker) {\n                    LAZO.logger.warn('[server._cluster]', 'Worker %d:%d is online.', worker.id, worker.process.pid);\n                });\n\n                cluster.on('disconnect', function (worker) {\n                    LAZO.logger.warn('[server._cluster]', 'Worker %d:%d was disconnected.', worker.id,\n                        worker.process.pid);\n                    cluster.fork();\n                });\n            } else {\n                this._worker();\n                for (k in this._servers) {\n                    port = LAZO.conf.server.instances[k].port || LAZO.conf.server.defaults.port;\n                    LAZO.logger.warn('[server._cluster]', 'Server %s started with %d workers, listening on port %d...', k, cpus, port);\n                }\n            }\n\n            return this;\n        },\n\n        _setServerRoute: function (options) {\n            var self = this;\n\n            for (var k in this._servers) {\n                // check for server name in application route tags\n                // if server name is not in tags then do not add route\n                if (options.config && options.config.tags &&\n                    !_.find(options.config.tags, function (tag) {\n                        return tag === k;\n                    })) {\n                    continue;\n                }\n\n                if (LAZO.ROBUST && typeof options.handler === 'function') {\n                    options.handler = safeHandler(this._servers[k], options.handler, self);\n                }\n\n                this._servers[k].route(options);\n            }\n        }\n\n    };\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/server/serviceProxy.js":"define(['base', 'request', 'underscore', 'resolver/model'], function (Base, request, _, helpers) {\n\n    /**\n     * A utility class that can be used to call service endpoints.\n     * @class ServiceProxy\n     */\n    var ServiceProxy = Base.extend({\n\n        /**\n         * Constructor used internally.\n         * @constructor\n         * @private\n         */\n        constructor: function (ctx) {\n            this.ctx = ctx;\n        },\n\n        /**\n         * Use to send a GET request to a service\n         * @method get\n         * @param {String} svc The url for a given service endpoint\n         * @param {Object} options\n         *      @param {Object} [options.params] A hash containing name-value pairs used in url substitution.\n         *      @param {Function} options.success Callback function to be called when fetch succeeds, passed <code>(response)</code> as argument.\n         *      @param {Function} options.error Callback function to be called when fetch fails, passed <code>(response)</code> as argument.\n         *      @param {Object} [options.headers] A hash containing name-value pairs of headers to be sent to the service.\n         *      @param {Boolean} [options.raw] A boolean that if set to true will return a unparsed response.\n         * @async\n         */\n        get: function (svc, options) {\n            options = options || {};\n            options.raw = !!options.raw;\n\n            if (!options.success) {\n                throw new Error('Success callback undefined for service call svc: ' + svc);\n            }\n\n            var error = options.error;\n            options.error = function (err) {\n                if (error) {\n                    error(err);\n                }\n            };\n            // use the backbone verbs\n            return this.sync(\n                'read',\n                {\n                    name: svc,\n                    url: svc,\n                    params: options.params,\n                    ctx: this.ctx\n                },\n                options);\n        },\n\n        /**\n         * Used to send a POST request to a service\n         * @method post\n         * @param {String} svc The url for a given service endpoint\n         * @param {Object} attributes A hash containing name-value pairs used to be sent as the payload to the server\n         * @param {Object} options\n         *      @param {Object} [options.params] A hash containing name-value pairs used in url substitution.\n         *      @param {Function} options.success Callback function to be called when fetch succeeds, passed <code>(response)</code> as argument.\n         *      @param {Function} options.error Callback function to be called when fetch fails, passed <code>(response)</code> as argument.\n         * @async\n         */\n        post: function (svc, attributes, options) {\n            options = options || {};\n            if (!options.success) {\n                throw new Error('Success callback undefined for service call svc: ' + svc);\n            }\n\n            var error = options.error;\n            options.error = function (err) {\n                if (error) {\n                    error(err);\n                }\n            };\n            // use the backbone verbs\n            return this.sync(\n                'create',\n                {\n                    name: svc,\n                    url: svc,\n                    params: options.params,\n                    ctx: this.ctx,\n                    toJSON: function () {\n                        return attributes;\n                    }\n                },\n                options);\n        },\n\n        /**\n         * Used to send a PUT request to a service\n         * @method put\n         * @param {String} svc The url for a given service endpoint\n         * @param {Object} attributes A hash containing name-value pairs used to be sent as the payload to the server\n         * @param {Object} options\n         *      @param {Object} [options.params] A hash containing name-value pairs used in url substitution.\n         *      @param {Function} options.success Callback function to be called when fetch succeeds, passed <code>(response)</code> as argument.\n         *      @param {Function} options.error Callback function to be called when fetch fails, passed <code>(response)</code> as argument.\n         * @async\n         */\n        put: function (svc, attributes, options) {\n            options = options || {};\n            if (!options.success) {\n                throw new Error('Success callback undefined for service call svc: ' + svc);\n            }\n\n            var error = options.error;\n            options.error = function (err) {\n                if (error) {\n                    error(err);\n                }\n            };\n            // use the backbone verbs\n            return this.sync(\n                'update',\n                {\n                    name: svc,\n                    url: svc,\n                    params: options.params,\n                    ctx: this.ctx,\n                    toJSON: function () {\n                        return attributes;\n                    }\n                },\n                options);\n        },\n\n        /**\n         * Used to send a DELETE request to a service\n         * @method destroy\n         * @param {String} svc The url for a given service endpoint\n         * @param {Object} attributes A hash containing name-value pairs used to be sent as the payload to the server\n         * @param {Object} options\n         *      @param {Object} [options.params] A hash containing name-value pairs used in url substitution.\n         *      @param {Function} options.success Callback function to be called when fetch succeeds, passed <code>(response)</code> as argument.\n         *      @param {Function} options.error Callback function to be called when fetch fails, passed <code>(response)</code> as argument.\n         * @async\n         */\n        destroy: function (svc, attributes, options) {\n            options = options || {};\n            if (!options.success) {\n                throw new Error('Success callback undefined for service call svc: ' + svc);\n            }\n\n            var error = options.error;\n            options.error = function (err) {\n                if (error) {\n                    error(err);\n                }\n            };\n            // use the backbone verbs\n            return this.sync(\n                'delete',\n                {\n                    name: svc,\n                    url: svc,\n                    params: options.params,\n                    ctx: this.ctx\n                },\n                options);\n        },\n\n        sync: function (method, model, options) {\n            options = _(options).clone();\n            method = helpers.methodMap[method]; // convert backbone verbs to http\n\n            LAZO.logger.debug('[server.serviceProxy.sync] Begin %s request', method, model.url);\n\n            var errorWrapper = function (err, requestOptions, response, body) {\n                var uri = requestOptions && requestOptions.uri ? requestOptions.uri : 'uri not defined';\n                LAZO.logger.debug('[server.serviceProxy.sync] %s request failed', method, uri, err);\n\n                var resp = {\n                    statusCode: (response && response.statusCode ? response.statusCode : 500),\n                    headers: (response && response.headers ? response.headers : {}),\n                    body: body\n                };\n\n                response = response || {};\n\n                if (err instanceof Error) {\n                    resp.error = err.message;\n                }\n                else {\n                    resp.error = err;\n                }\n\n                options.error(resp);\n            };\n\n            try {\n                if (model._default) {\n                    throw new Error('No model defined in repo for ' + model.name);\n                }\n\n                // throw error if no url\n                if (!model.urlRoot && !model.url) {\n                    throw new Error('Error: ServiceProxy failed.  No url or urlRoot for ' + model.name + ' type: ' + method);\n                }\n\n                // setup options for request call\n                var requestOptions = {\n                    method: method,\n                    headers: ServiceProxy._mergeHeaders(options.headers),\n                    timeout: options.timeout || 30000\n                };\n\n                if (method === 'POST' || method === 'PUT' || method === 'PATCH') {\n                    requestOptions.body = model.toJSON(options);\n                }\n\n                requestOptions.uri = helpers.substitute(_.result(model, 'url'), model.params);\n\n                // make the request\n                return request(requestOptions,\n                    function (error, response, body) {\n                        if (error) {\n                            return errorWrapper(error, requestOptions, response, body);\n                        }\n                        else if (response && (response.statusCode && response.statusCode >= 200 && response.statusCode < 300 || response.statusCode === 304)) {\n                            LAZO.logger.debug('[server.serviceProxy.sync] %s request succeed', method, model.url);\n\n                            var data = body || '';\n\n                            if (!options.raw) {\n                                data = JSON.parse(body);\n                            }\n\n                            if (response.headers) {\n                                model.responseHeaders = response.headers;\n                            }\n\n                            if (options.success) {\n                                return options.success(data);\n                            }\n                        }\n                        else {\n                            return errorWrapper(new Error(response.statusCode), requestOptions, response, body);\n                        }\n\n                    }\n                );\n\n            } catch (e) {\n                errorWrapper(e, requestOptions, {}, '');\n            }\n        }\n\n    }, {\n\n        _includedHeaders: [],\n\n        _mergeHeaders: function (headers) {\n            var mapped = _.map(this._includedHeaders, function (header) {\n                return typeof header === 'function' ? header() : header;\n            });\n\n            var result = _.extend({}, headers);\n\n            _.each(mapped, function (header) {\n                _.defaults(result, header);\n            });\n\n            return result;\n        },\n\n        /**\n         * Include custom headers for every outgoing request.\n         * @method includeHeaders\n         * @param headers {Object|Function} an object containing the custom headers or a function that returns them when evaluated.\n         */\n        includeHeaders: function (headers) {\n            this._includedHeaders.push(headers);\n        }\n\n    });\n\n    return ServiceProxy;\n});\n","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/client/rehydrate/main.js":"define(['lazoCtl', 'context', 'rehydrate/view', 'rehydrate/model'],\n    function (LazoCtl, Context, rehydrateView, rehydrateModels) {\n\n    'use strict';\n\n    var done;\n    var rootCtl;\n\n    function rehydrateComponent(cmpDef, counters, callback) {\n        counters.components++;\n        LazoCtl.create(cmpDef.name, _.pick(cmpDef, 'name', 'isBase'), {\n            success: function (ctl) {\n                var children = cmpDef.children,\n                    kids;\n                cmpDef.ctx._rootCtx = cmpDef._rootCtx;\n                ctl.ctx = new Context(cmpDef.ctx);\n                _.each(ctl.ctx.params, function (param, k) {\n                    delete ctl.ctx.params[k];\n                    ctl.ctx.params[decodeURIComponent(k)] = decodeURIComponent(param);\n                });\n                ctl.cid = cmpDef.cid;\n\n                kids = ctl.children = {};\n                for (var container in children) {\n                    (function (container) {\n                        kids[container] = [];\n                        for (var i = 0; i < children[container].length; i++) {\n                            (function (i) {\n                                var child = children[container][i];\n                                child._rootCtx = cmpDef._rootCtx;\n                                rehydrateComponent(child, counters, function (ctl) {\n                                    kids[container][i] = ctl;\n                                    rehydrate(ctl, child, counters);\n                                });\n                            })(i);\n                        }\n                    })(container);\n                }\n                callback(ctl);\n            },\n            error: function (err) {\n                ; // TODO: error loading component\n            }\n        });\n    }\n\n    function rehydrate(ctl, cmpDef, counters) {\n        counters.components--;\n        counters.models++;\n\n        rehydrateModels(ctl, cmpDef.ctx._rootCtx, function () {\n            counters.models--;\n            counters.views++;\n            // views are dependent on models & collections so views cannot load in parallel;\n            // we could get clever, setInterval and catch errors, but there is no way to determine\n            // what is causing the type error, so it would not be a reliable approach; additionally,\n            // in production these will be combo handled so it will not have a big impact on performance\n            rehydrateView(ctl, cmpDef, function () {\n                counters.views--;\n                isDone(counters);\n            });\n            isDone(counters);\n        });\n\n        isDone(counters);\n    }\n\n    function isDone(counters) {\n        if (!counters.components && !counters.models &&\n            !counters.views && done) {\n            done(rootCtl);\n            done = void 0;\n            rootCtl = void 0;\n            return true;\n        }\n\n        return false;\n    }\n\n    return function (cmpDef, ctx, callback) {\n        var counters = {\n            components: 0,\n            models: 0,\n            views: 0\n        };\n\n        done = callback;\n        cmpDef._rootCtx = ctx;\n        rehydrateComponent(cmpDef, counters, function (ctl) {\n            rootCtl = ctl;\n            rehydrate(ctl, cmpDef, counters);\n        });\n    };\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/client/rehydrate/model.js":"define(['lazoModel'], function (LazoModel) {\n\n    'use strict';\n\n    return function (ctl, rootCtx, callback) {\n\n        LazoModel._deserialize(ctl, rootCtx, {\n            success: function () {\n                callback(null);\n            },\n\n            error: function (err) {\n                callback(err);\n            }\n        });\n\n    };\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/client/rehydrate/view.js":"define(['lazoView'], function (LazoView) {\n\n    'use strict';\n\n    return function (ctl, cmpDef, callback) {\n        if (cmpDef.currentView.isBase) {\n            ctl.currentView = ctl._createView(LazoView, cmpDef.currentView);\n            return callback(null);\n        }\n\n        LAZO.require([cmpDef.currentView.ref], function (View) {\n            ctl.currentView = ctl._createView(View, cmpDef.currentView);\n            callback(null);\n        }, function (err) {\n            return callback(new Error('rehydrate load view failed for ' + cmpDef.currentView.ref + ': ' + err.message));\n        });\n    };\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/common/resolver/component.js":"define(['underscore', 'resolver/file'], function (_, file) {\n\n    'use strict';\n\n    return {\n\n        getDef: function (route) {\n            var defaultLayout = LAZO.app.defaultLayout;\n            var def = LAZO.routes[route];\n            var isObj;\n            var name = (isObj = _.isObject(def)) ? def.component : def;\n            var compParts = name.split('#');\n            var action;\n            var layout;\n\n            name = compParts.length ? compParts[0] : name;\n            action = compParts.length && compParts[1] ? compParts[1] : 'index';\n            // possible scenarios\n            // 1. no layout: def is a string, e.g. foo#baz, foo\n            // 2. layout: def is an object with a layout\n            // 3. default layout and layout: def is an object, app has a default layout\n            // 4. default layout and layout === false: def is an object, app has a default layout, but route def def.layout = false\n            layout = (isObj && def.layout) ? def.layout : (defaultLayout && !isObj || isObj && !_.isBoolean(def.layout)) ?\n                defaultLayout : null;\n\n            return _.extend({}, isObj ? def : {}, {\n                name: name,\n                action: action,\n                layout: layout\n            });\n        },\n\n        getLinks: function (cmpName, type) {\n            return file.getComponentFiles([cmpName], function (link) {\n                if (type === 'css') {\n                    return link.substr(-4, 4) === '.css' && link.indexOf('/imports/') === -1;\n                } else {\n                    return link.indexOf('/imports/') !== -1 && link.substr(-5, 5) === '.html';\n                }\n            });\n        }\n\n    };\n\n});\n","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/common/resolver/file.js":"define(['l!serverFileResolver', 'underscore', 'utils/template'], function (serverFileResolver, _, template) {\n\n    'use strict';\n\n    return _.extend({\n\n        getPath: function (moduleName, cmpName, moduleType) {\n            var pathPrefix = moduleName.indexOf('a:') === 0 ? 'app' : '';\n\n            moduleName = pathPrefix ? moduleName.split(':')[1] : moduleName;\n            pathPrefix = pathPrefix && (moduleType === 'view' || moduleType === 'template') ?\n                pathPrefix + '/views' : pathPrefix;\n\n            return (pathPrefix ? pathPrefix : ('components/' + cmpName)) +\n                (!pathPrefix && (moduleType === 'view' || moduleType === 'template') ? '/views' : '') +\n                '/' + moduleName;\n        },\n\n        getBasePath: function (moduleName, cmpName, moduleType) {\n            var modulePath = this.getPath(moduleName, cmpName, moduleType);\n            return modulePath.substr(0, modulePath.lastIndexOf('/'));\n        },\n\n        getTemplateName: function (view) {\n            return _.result(view, 'templateName') || view.name;\n        },\n\n        getTemplatePath: function (view) {\n            return this.getPath(this.getTemplateName(view) + '.' + template.getTemplateExt(view.templateEngine), view.ctl.name, 'template');\n        },\n\n        // TODO: deprecated, can be removed once load_view is merged to dev\n        convertTemplatePath: function (templatePath) {\n            return 'tmp/' + templatePath.substr(0, templatePath.lastIndexOf('.')) + '.js';\n        },\n\n        getComponentFiles: function (components, filter) {\n            var list = LAZO.files.components;\n            var files = [];\n\n            filter = filter || function () { return true; };\n\n            for (var i = 0; i < components.length; i++) {\n                for (var k in list) {\n                    if (k.indexOf('components/' + components[i] + '/') === 0 && filter(k)) {\n                        files.push(k);\n                    }\n                }\n            }\n\n            return files;\n        }\n\n    }, serverFileResolver);\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/common/resolver/main.js":"define(['resolver/requireConfigure', 'resolver/route', 'resolver/file', 'resolver/component'],\n    function (requireConfigure, routeRes, file, component) {\n\n    'use strict';\n\n    return {\n\n        // requirejs config generator\n        getReqConfig: function (env, options, callback) {\n            requireConfigure.get(env, options, callback);\n        },\n\n        // route transformer\n        transformRoute: function (route) {\n            return routeRes.transform(route);\n        },\n\n        // file helpers\n        isBase: function (modulePath, moduleType, callback, options) {\n            var isExtendedClass = (LAZO.files.components[modulePath + '.js'] ||\n                LAZO.files.appViews[modulePath + '.js']) ||\n                LAZO.files.models[modulePath + '.js'];\n\n            return callback(isExtendedClass ? false : true);\n        },\n\n        getPath: function (moduleName, cmpName, moduleType) {\n            return file.getPath(moduleName, cmpName, moduleType);\n        },\n\n        getBasePath: function (moduleName, cmpName, moduleType) {\n            return file.getBasePath(moduleName, cmpName, moduleType);\n        },\n\n        getTemplateName: function (view) {\n            return file.getTemplateName(view);\n        },\n\n        getTemplatePath: function (view) {\n            return file.getTemplatePath(view);\n        },\n\n        convertTemplatePath: function (templatePath) {\n            return file.convertTemplatePath(templatePath);\n        },\n\n        getComponentCss: function (cmpName) {\n            return component.getLinks(cmpName, 'css');\n        },\n\n        getComponentImports: function (cmpName) {\n            return component.getLinks(cmpName, 'import');\n        },\n\n        resolvePath: function (from, to) {\n            return file.resolvePath(from, to);\n        }\n\n    };\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/common/resolver/model.js":"define(['underscore'], function (_) {\n\n    'use strict';\n\n    var subRegEx = /\\{\\{\\s*([^|}]+?)\\s*(?:\\|([^}]*))?\\s*\\}\\}/g;\n\n    return {\n\n        methodMap: {\n            'create': 'POST',\n            'update': 'PUT',\n            'patch': 'PATCH',\n            'delete': 'DELETE',\n            'read': 'GET'\n        },\n\n        substitute: function (s, o) {\n            return s.replace ? s.replace(subRegEx, function (match, key) {\n                return _.isUndefined(o[key]) ? match : o[key];\n            }) : s;\n        }\n\n\n    };\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/common/resolver/requireConfigure.js":"define(['json!resolver/paths.json'], function (paths) {\n\n    var configs,\n        loader;\n\n    function getLoader(basePath) {\n        if (loader) {\n            return loader;\n        }\n\n        loader = requirejs.config({\n        baseUrl: basePath,\n        context: 'configloader',\n        paths: { // set paths for bootstrapping\n            'json': 'lib/vendor/json',\n            'text': 'lib/vendor/text',\n            'common': 'lib/common'\n        }});\n\n        return loader;\n    }\n\n     function resolvePath(path, env, options) {\n        var basePath;\n\n        if (env === 'server') {\n            path = (options.basePath ? options.basePath + '/' : '') + path;\n        }\n\n        return path;\n    }\n\n    function getPaths(env, options) {\n        var _paths = JSON.parse(JSON.stringify(paths)),\n            needle = '/{env}/',\n            replace = '/' + env + '/';\n\n        for (var k in _paths.common) { // update env specific implementation paths\n            _paths.common[k] = resolvePath(_paths.common[k].replace(needle, replace), env, options);\n        }\n        for (k in _paths[env]) { // merge env specific paths\n            _paths.common[k] = resolvePath(_paths[env][k], env, options);\n        }\n\n        return _paths.common;\n    }\n\n    function augment(receiver, giver) {\n        for (var key in giver) {\n            receiver[key] = giver[key];\n        }\n\n        return receiver;\n    }\n\n    configs = {\n\n        client: function (options, callback) {\n\n            function augmentConf(options) {\n                return augment(options, {\n                    baseUrl: '/',\n                    map: {\n                        '*': {\n                            'l': '/lib/client/loader.js'\n                        }\n                    },\n                    paths: augment(getPaths('client', options), options.paths),\n                    shim: options.shim\n                });\n            }\n\n            try { // client\n                window; // attempt to access window object; if server catch err & use requirejs loader\n                // use globals set by server render to simplePage.hbs, lazoShim, lazoPaths\n                callback(null, augmentConf(LAZO.initConf.config));\n            } catch (e) { // server\n                callback(null, augmentConf(options));\n            }\n        },\n\n        server: function (options, callback) {\n\n            function augmentConf(options) {\n                return augment(options, {\n                    shim: options.shim || {},\n                    baseUrl: options.baseUrl,\n                    context: 'application',\n                    map: {\n                        '*': {\n                            's': options.basePath + '/lib/server/loader.js'\n                        }\n                    },\n                    paths: augment(getPaths('server', options), options.paths)\n                });\n            }\n\n            callback(null, augmentConf(options));\n        }\n\n    };\n\n    return {\n        get: function (env, options, callback) {\n            if (arguments.length === 2) {\n                callback = arguments[1];\n            }\n            return configs[env](options, callback);\n        }\n    };\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/common/resolver/route.js":"define(function () {\n\n    'use strict';\n\n    var REGEX_QUERY_STRING = /(\\(?\\?.*)$/;\n    var REGEX_PATH_PARAM = /:(\\w+)/g;\n    var REGEX_OPT_PATH_PARAM = /\\(\\/\\{(\\w+)\\}(\\/?)\\)$/;\n    var REGEX_OPT_TRAILING_SLASH = /(.*)\\(\\/\\)$/;\n    var REGEX_DYNAMIC_PATH = /(\\*)(\\w+)/g;\n\n    return {\n\n        transform: function (route) {\n            var routeTrailingSlash = null;\n\n            route = '/' + route;\n            route = route.replace(REGEX_QUERY_STRING, '');\n            route = route.replace(REGEX_PATH_PARAM, '{$1}');\n            route = route.replace(REGEX_OPT_PATH_PARAM, '/{$1?}$2');\n\n            if (REGEX_OPT_TRAILING_SLASH.test(route)) {\n                route = route.replace(REGEX_OPT_TRAILING_SLASH, '$1');\n                // handle case of developer adding a trailing slash to a dynamic path:\n                // test-dynamic-routes/*nodes(/)\n                if (!REGEX_DYNAMIC_PATH.test(route)) {\n                    routeTrailingSlash = route + '/';\n                }\n            }\n\n            // transform backbone style splats to hapi splats:\n            // test-dynamic-routes/*nodes -> test-dynamic-routes/{nodes*}\n            if (LAZO.app.isServer) {\n                route = route.replace(REGEX_DYNAMIC_PATH, '{$2$1}');\n            }\n\n            return {\n                routeTrailingSlash: routeTrailingSlash,\n                route: route\n            };\n        }\n\n    };\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/common/utils/assetsMixin.js":"define(['assets'], function (LazoAssets) {\n\n    'use strict';\n\n    var assets = new LazoAssets();\n\n    return {\n\n        getAssets: function (cmpName, ctx, options) {\n            if (!LAZO.app.getAssets) {\n                return options.success({});\n            }\n\n            assets.get([cmpName], ctx, {\n                success: function (assets) {\n                    options.success(assets[cmpName]);\n                },\n                error: function (err) {\n                    options.error(err);\n                }\n            });\n        }\n\n    };\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/common/utils/cmpProcessor.js":"define(['underscore', 'utils/loader', 'context', 'resolver/component', 'utils/assetsMixin'],\n    function (_, loader, Context, cmpResolver, assetsMixin) {\n\n    'use strict';\n\n    return _.extend({\n\n        getRootCtxForReply: function (ctx, ctl) {\n            var components = this.getComponents(ctl, []);\n            var assets = {};\n            var i = components.length;\n\n            while (i--) {\n                assets[components[i].name] = components[i].ctx.assets;\n            }\n\n            return _.extend(_.omit(ctx._rootCtx, 'modelInstances'), {\n                dependencies: ctx._rootCtx.dependencies,\n                assets: assets,\n                modelInstances: {}\n            });\n        },\n\n        getDef: function (route) {\n            return cmpResolver.getDef(route);\n        },\n\n        createCtx: function (options) {\n            return new Context(options);\n        },\n\n        getComponents: function (ctl, list) {\n            list.push(ctl);\n\n            if (_.size(ctl.children)) {\n                for (var k in ctl.children) {\n                    for (var i = 0; i < ctl.children[k].length; i++) {\n                        this.getComponents(ctl.children[k][i], list);\n                    }\n                }\n            }\n\n            return list;\n        },\n\n        getComponentNames: function (ctl) {\n            return _.map(this.getComponents(ctl, []), function (ctl) {\n                return ctl.name;\n            });\n        },\n\n        process: function (options) {\n            var self = this;\n            var cmpDef = options.def;\n            var ctx = options.ctx;\n            var hasLayoutChanged = !cmpDef.layout || (cmpDef.layout !== LAZO.layout) ? true : false;\n            var cmpToLoad = (hasLayoutChanged && cmpDef.layout) ? cmpDef.layout : cmpDef.name;\n\n            function onError(err) {\n                return options.error(err);\n            }\n\n            if (LAZO.isClient && !hasLayoutChanged && cmpDef.layout) {\n                return LAZO.ctl.addChild('lazo-layout-body', cmpDef.name, {\n                    params: ctx.params,\n                    action: cmpDef.action,\n                    success: function (ctl) {\n                        options.success(ctl, ctx, cmpDef, options);\n                    },\n                    error: onError\n                });\n            }\n\n            this.getAssets(cmpDef.name, ctx, {\n                success: function (assets) {\n                    ctx.assets = assets;\n                    loader(cmpToLoad, {\n                        ctx: ctx,\n                        action: hasLayoutChanged && cmpDef.layout ? 'index' : cmpDef.action,\n                        error: onError,\n                        success: function (ctl) {\n                            if (cmpDef.layout) {\n                                ctl.addChild('lazo-layout-body', cmpDef.name, {\n                                    params: ctx.params,\n                                    action: cmpDef.action,\n                                    success: function () {\n                                        options.success(ctl, ctx, cmpDef, options);\n                                    },\n                                    error: onError\n                                });\n                            } else {\n                                options.success(ctl, ctx, cmpDef, options);\n                            }\n                        }\n                    });\n                },\n                error: onError\n            });\n        }\n\n    }, assetsMixin);\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/common/utils/ctlSerializor.js":"define(['underscore', 'lazoModel'], function (_, Model) {\n\n    'use strict';\n\n    return {\n\n        serialize: function (ctl, rootCtx) {\n            var serObj = {},\n                viewRef,\n                omit = rootCtx ? ['cookies', '_request', '_reply', 'models', 'collections', 'location', 'userAgent', 'headers', 'response'] :\n                    ['cookies', '_request', '_reply', 'models', 'collections', '_rootCtx', 'location', 'userAgent', 'headers', 'response'];\n\n            serObj.cid = ctl.cid;\n            serObj.ctx = _.omit(ctl.ctx, omit);\n            _.each(serObj.ctx.params, function (param, k) {\n                delete serObj.ctx.params[k];\n                // encode to prevent xss of serialized context\n                serObj.ctx.params[encodeURIComponent(k)] = encodeURIComponent(param);\n            });\n\n            serObj.ctx.models = {};\n            serObj.ctx.collections = {};\n            serObj.isBase = ctl.isBase;\n            serObj.name = ctl.name;\n            if (ctl.currentView && ctl.currentView) {\n                viewRef = ctl.currentView.ref;\n\n                serObj.currentView = {\n                    cid: ctl.currentView.cid,\n                    name: ctl.currentView.name,\n                    ref: ctl.currentView.ref,\n                    templatePath: ctl.currentView.templatePath,\n                    compiledTemplatePath: ctl.currentView.compiledTemplatePath,\n                    basePath: ctl.currentView.basePath,\n                    isBase: ctl.currentView.isBase,\n                    hasTemplate: ctl.currentView.hasTemplate\n                };\n            }\n\n            //children\n            var serializedKids = {};\n            _.each(ctl.children, function (regionChildren, region) {\n                var comps = [];\n                _.each(regionChildren, function (child) {\n                    comps.push(child.toJSON());\n                });\n                serializedKids[region] = comps;\n            });\n            serObj.children = serializedKids;\n\n            //models\n            Model._serialize(ctl.ctx.models, serObj.ctx.models);\n            Model._serialize(ctl.ctx.collections, serObj.ctx.collections);\n\n            _.each(ctl.ctx.collections, function (value, key, list) {\n                serObj.ctx.collections[key] = value._getGlobalId();\n            });\n\n            return serObj;\n        },\n\n        deserialize: function (ctl, options) {\n\n        }\n\n    };\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/common/utils/dataschema-json.js":"/*\n Software License Agreement (BSD License)\n ========================================\n\n Copyright (c) 2013, Yahoo! Inc. All rights reserved.\n ----------------------------------------------------\n\n Redistribution and use of this software in source and binary forms, with or\n without modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright notice, this\n list of conditions and the following disclaimer.\n * Redistributions in binary form must reproduce the above copyright notice,\n this list of conditions and the following disclaimer in the documentation\n and/or other materials provided with the distribution.\n * Neither the name of Yahoo! Inc. nor the names of YUI's contributors may be\n used to endorse or promote products derived from this software without\n specific prior written permission of Yahoo! Inc.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\n Sources of Intellectual Property Included from the YUI Library\n ------------------------------------------------------------\n * this is a port of yui3/src/dataschema/js/dataschema-json.js\n * \n * modifications\n *   * made into AMD module\n *   * parse method is from the 'base' yui3/src/dataschema/js/dataschema-base.js\n *   * underscore methods used in place of Y.Lang.is*\n *   * commented out Y.log statements\n *   * _parseResults modified to return objects as valid results\n *   * added setLocationValue method\n */\ndefine(['underscore'], function (_) {\n\n    'use strict';\n\n/**\n Provides a DataSchema implementation which can be used to work with JSON data.\n\n @module dataschema\n @submodule dataschema-json\n **/\n\n/**\n Provides a DataSchema implementation which can be used to work with JSON data.\n\n See the `apply` method for usage.\n\n @class DataSchema.JSON\n @extends DataSchema.Base\n @static\n **/\n            // should be safe. I'm not sure what makes a locator invalid.\n                //if (!/[^\\w\\.\\$@]/.test(locator)) {\nvar isFunction = _.isFunction,\n    isObject   = _.isObject,\n    isArray    = _.isArray,\n// TODO: I don't think the calls to Base.* need to be done via Base since\n// Base is mixed into SchemaJSON.  Investigate for later.\n    //Base       = Y.DataSchema.Base,\n\n        SchemaJSON;\n\n    SchemaJSON = {\n\n        /**\n         * Applies field parser, if defined\n         *\n         * @method parse\n         * @param value {Object} Original value.\n         * @param field {Object} Field.\n         * @return {Object} Type-converted value.\n         */\n        parse: function(value, field) {\n            if(field.parser) {\n                var parser = (isFunction(field.parser)) ?\n                    field.parser : null;//Y.Parsers[field.parser+''];\n                if(parser) {\n                    value = parser.call(this, value);\n                }\n                else {\n                    //Y.log(\"Could not find parser for field \" + Y.dump(field), \"warn\", \"dataschema-json\");\n                }\n            }\n            return value;\n        },\n\n\n/////////////////////////////////////////////////////////////////////////////\n//\n// DataSchema.JSON static methods\n//\n/////////////////////////////////////////////////////////////////////////////\n        /**\n         * Utility function converts JSON locator strings into walkable paths\n         *\n         * @method getPath\n         * @param locator {String} JSON value locator.\n         * @return {String[]} Walkable path to data value.\n         * @static\n         */\n        getPath: function(locator) {\n            var path = null,\n                keys = [],\n                i = 0;\n\n            if (locator) {\n                // Strip the [\"string keys\"] and [1] array indexes\n                // TODO: the first two steps can probably be reduced to one with\n                // /\\[\\s*(['\"])?(.*?)\\1\\s*\\]/g, but the array indices would be\n                // stored as strings.  This is not likely an issue.\n                locator = locator.\n                    replace(/\\[\\s*(['\"])(.*?)\\1\\s*\\]/g,\n                    function (x,$1,$2) {keys[i]=$2;return '.@'+(i++);}).\n                    replace(/\\[(\\d+)\\]/g,\n                    function (x,$1) {keys[i]=parseInt($1,10)|0;return '.@'+(i++);}).\n                    replace(/^\\./,''); // remove leading dot\n\n                // Validate against problematic characters.\n                // commented out because the path isn't sent to eval, so it\n                path = locator.split('.');\n            for (i=path.length-1; i >= 0; --i) {\n                if (path[i].charAt(0) === '@') {\n                    path[i] = keys[parseInt(path[i].substr(1),10)];\n                }\n            }\n            /*}\n             else {\n             Y.log(\"Invalid locator: \" + locator, \"error\", \"dataschema-json\");\n             }\n             */\n        }\n        return path;\n    },\n\n    /**\n     * Utility function to walk a path and return the value located there.\n     *\n     * @method getLocationValue\n     * @param path {String[]} Locator path.\n     * @param data {String} Data to traverse.\n     * @return {Object} Data value at location.\n     * @static\n     */\n    getLocationValue: function (path, data) {\n        var i = 0,\n            len = path.length;\n        for (;i<len;i++) {\n            if (isObject(data) && (path[i] in data)) {\n                data = data[path[i]];\n            } else {\n                data = undefined;\n                break;\n            }\n        }\n        return data;\n    },\n\n    setLocationValue: function(locator, data, value) {\n        var path = SchemaJSON.getPath(locator),\n            i = 0,\n            len = path.length,\n            retVal;\n        for (;i<len;i++) {\n            if (i == len - 1 && isObject(data) && (path[i] in data)) {\n                data[path[i]] = value;\n                retVal = value;\n            }\n            else if (isObject(data) && (path[i] in data)) {\n                data = data[path[i]];\n            }\n            else {\n                break;\n            }\n        }\n        return retVal;\n    },\n\n        /**\n     Applies a schema to an array of data located in a JSON structure, returning\n     a normalized object with results in the `results` property. Additional\n     information can be parsed out of the JSON for inclusion in the `meta`\n     property of the response object.  If an error is encountered during\n     processing, an `error` property will be added.\n\n     The input _data_ is expected to be an object or array.  If it is a string,\n     it will be passed through `Y.JSON.parse()`.\n\n     If _data_ contains an array of data records to normalize, specify the\n     _schema.resultListLocator_ as a dot separated path string just as you would\n     reference it in JavaScript.  So if your _data_ object has a record array at\n     _data.response.results_, use _schema.resultListLocator_ =\n     \"response.results\". Bracket notation can also be used for array indices or\n     object properties (e.g. \"response['results']\");  This is called a \"path\n     locator\"\n\n     Field data in the result list is extracted with field identifiers in\n     _schema.resultFields_.  Field identifiers are objects with the following\n     properties:\n\n     * `key`   : <strong>(required)</strong> The path locator (String)\n     * `parser`: A function or the name of a function on `Y.Parsers` used\n     to convert the input value into a normalized type.  Parser\n     functions are passed the value as input and are expected to\n     return a value.\n\n     If no value parsing is needed, you can use path locators (strings)\n     instead of field identifiers (objects) -- see example below.\n\n     If no processing of the result list array is needed, _schema.resultFields_\n     can be omitted; the `response.results` will point directly to the array.\n\n     If the result list contains arrays, `response.results` will contain an\n     array of objects with key:value pairs assuming the fields in\n     _schema.resultFields_ are ordered in accordance with the data array\n     values.\n\n     If the result list contains objects, the identified _schema.resultFields_\n     will be used to extract a value from those objects for the output result.\n\n     To extract additional information from the JSON, include an array of\n     path locators in _schema.metaFields_.  The collected values will be\n     stored in `response.meta`.\n\n\n     @example\n     // Process array of arrays\n     var schema = {\n                resultListLocator: 'produce.fruit',\n                resultFields: [ 'name', 'color' ]\n            },\n     data = {\n                produce: {\n                    fruit: [\n                        [ 'Banana', 'yellow' ],\n                        [ 'Orange', 'orange' ],\n                        [ 'Eggplant', 'purple' ]\n                    ]\n                }\n            };\n\n     var response = Y.DataSchema.JSON.apply(schema, data);\n\n     // response.results[0] is { name: \"Banana\", color: \"yellow\" }\n\n\n     // Process array of objects + some metadata\n     schema.metaFields = [ 'lastInventory' ];\n\n     data = {\n            produce: {\n                fruit: [\n                    { name: 'Banana', color: 'yellow', price: '1.96' },\n                    { name: 'Orange', color: 'orange', price: '2.04' },\n                    { name: 'Eggplant', color: 'purple', price: '4.31' }\n                ]\n            },\n            lastInventory: '2011-07-19'\n        };\n\n     response = Y.DataSchema.JSON.apply(schema, data);\n\n     // response.results[0] is { name: \"Banana\", color: \"yellow\" }\n     // response.meta.lastInventory is '2001-07-19'\n\n\n     // Use parsers\n     schema.resultFields = [\n     {\n         key: 'name',\n         parser: function (val) { return val.toUpperCase(); }\n     },\n     {\n         key: 'price',\n         parser: 'number' // Uses Y.Parsers.number\n     }\n     ];\n\n     response = Y.DataSchema.JSON.apply(schema, data);\n\n     // Note price was converted from a numeric string to a number\n     // response.results[0] looks like { fruit: \"BANANA\", price: 1.96 }\n\n     @method apply\n     @param {Object} [schema] Schema to apply.  Supported configuration\n     properties are:\n     @param {String} [schema.resultListLocator] Path locator for the\n     location of the array of records to flatten into `response.results`\n     @param {Array} [schema.resultFields] Field identifiers to\n     locate/assign values in the response records. See above for\n     details.\n     @param {Array} [schema.metaFields] Path locators to extract extra\n     non-record related information from the data object.\n     @param {Object|Array|String} data JSON data or its string serialization.\n     @return {Object} An Object with properties `results` and `meta`\n     @static\n     **/\n    apply: function(schema, data) {\n        var data_in = data,\n            data_out = { results: [], meta: {} };\n\n        // Convert incoming JSON strings\n        if (!isObject(data)) {\n            try {\n                data_in = JSON.parse(data);\n            }\n            catch(e) {\n                data_out.error = e;\n                return data_out;\n            }\n        }\n\n        if (isObject(data_in) && schema) {\n            // Parse results data\n            data_out = SchemaJSON._parseResults.call(this, schema, data_in, data_out);\n\n            // Parse meta data\n            if (schema.metaFields !== undefined) {\n                data_out = SchemaJSON._parseMeta(schema.metaFields, data_in, data_out);\n            }\n        }\n        else {\n            //Y.log(\"JSON data could not be schema-parsed: \" + Y.dump(data) + \" \" + Y.dump(data), \"error\", \"dataschema-json\");\n            data_out.error = new Error(\"JSON schema parse failure\");\n        }\n\n        return data_out;\n    },\n\n    /**\n     * Schema-parsed list of results from full data\n     *\n     * @method _parseResults\n     * @param schema {Object} Schema to parse against.\n     * @param json_in {Object} JSON to parse.\n     * @param data_out {Object} In-progress parsed data to update.\n     * @return {Object} Parsed data object.\n     * @static\n     * @protected\n     */\n    _parseResults: function(schema, json_in, data_out) {\n        var getPath  = SchemaJSON.getPath,\n            getValue = SchemaJSON.getLocationValue,\n            path     = getPath(schema.resultListLocator),\n            results  = path ?\n                (getValue(path, json_in) ||\n                    // Fall back to treat resultListLocator as a simple key\n                json_in[schema.resultListLocator]) :\n                // Or if no resultListLocator is supplied, use the input\n                json_in;\n\n        if (isArray(results)) {\n            // if no result fields are passed in, then just take\n            // the results array whole-hog Sometimes you're getting\n            // an array of strings, or want the whole object, so\n            // resultFields don't make sense.\n            if (isArray(schema.resultFields)) {\n                data_out = SchemaJSON._getFieldValues.call(this, schema.resultFields, results, data_out);\n            } else {\n                data_out.results = results;\n            }\n        } else if (!results) { //else if (schema.resultListLocator) {\n            data_out.results = [];\n            data_out.error = new Error(\"JSON results retrieval failure\");\n            //Y.log(\"JSON data could not be parsed: \" + Y.dump(json_in), \"error\", \"dataschema-json\");\n        }\n        else {\n            data_out.results = results;\n        }\n\n        return data_out;\n    },\n\n    /**\n     * Get field data values out of list of full results\n     *\n     * @method _getFieldValues\n     * @param fields {Array} Fields to find.\n     * @param array_in {Array} Results to parse.\n     * @param data_out {Object} In-progress parsed data to update.\n     * @return {Object} Parsed data object.\n     * @static\n     * @protected\n     */\n    _getFieldValues: function(fields, array_in, data_out) {\n        var results = [],\n            len = fields.length,\n            i, j,\n            field, key, locator, path, parser, val,\n            simplePaths = [], complexPaths = [], fieldParsers = [],\n            result, record;\n\n        // First collect hashes of simple paths, complex paths, and parsers\n        for (i=0; i<len; i++) {\n            field = fields[i]; // A field can be a simple string or a hash\n            key = field.key || field; // Find the key\n            locator = field.locator || key; // Find the locator\n\n            // Validate and store locators for later\n            path = SchemaJSON.getPath(locator);\n            if (path) {\n                if (path.length === 1) {\n                    simplePaths.push({\n                        key : key,\n                        path: path[0]\n                    });\n                } else {\n                    complexPaths.push({\n                        key    : key,\n                        path   : path,\n                        locator: locator\n                    });\n                }\n            } else {\n                //Y.log(\"Invalid key syntax: \" + key, \"warn\", \"dataschema-json\");\n            }\n\n            // Validate and store parsers for later\n            //TODO: use Y.DataSchema.parse?\n            parser = (isFunction(field.parser)) ?\n                field.parser :\n                null;//Y.Parsers[field.parser + ''];\n\n            if (parser) {\n                fieldParsers.push({\n                    key   : key,\n                    parser: parser\n                });\n            }\n        }\n\n        // Traverse list of array_in, creating records of simple fields,\n        // complex fields, and applying parsers as necessary\n        for (i=array_in.length-1; i>=0; --i) {\n            record = {};\n            result = array_in[i];\n            if(result) {\n                // Cycle through complexLocators\n                for (j=complexPaths.length - 1; j>=0; --j) {\n                    path = complexPaths[j];\n                    val = SchemaJSON.getLocationValue(path.path, result);\n                    if (val === undefined) {\n                        val = SchemaJSON.getLocationValue([path.locator], result);\n                        // Fail over keys like \"foo.bar\" from nested parsing\n                        // to single token parsing if a value is found in\n                        // results[\"foo.bar\"]\n                        if (val !== undefined) {\n                            simplePaths.push({\n                                key:  path.key,\n                                path: path.locator\n                            });\n                            // Don't try to process the path as complex\n                            // for further results\n                            complexPaths.splice(i,1);\n                            continue;\n                        }\n                    }\n\n                    record[path.key] = this.parse(\n                        (SchemaJSON.getLocationValue(path.path, result)), path);\n                }\n\n                // Cycle through simpleLocators\n                for (j = simplePaths.length - 1; j >= 0; --j) {\n                    path = simplePaths[j];\n                    // Bug 1777850: The result might be an array instead of object\n                    record[path.key] = this.parse(\n                        ((result[path.path] === undefined) ?\n                            result[j] : result[path.path]), path);\n                }\n\n                // Cycle through fieldParsers\n                for (j=fieldParsers.length-1; j>=0; --j) {\n                    key = fieldParsers[j].key;\n                    record[key] = fieldParsers[j].parser.call(this, record[key]);\n                    // Safety net\n                    if (record[key] === undefined) {\n                        record[key] = null;\n                    }\n                }\n                results[i] = record;\n            }\n        }\n        data_out.results = results;\n        return data_out;\n    },\n\n    /**\n     * Parses results data according to schema\n     *\n     * @method _parseMeta\n     * @param metaFields {Object} Metafields definitions.\n     * @param json_in {Object} JSON to parse.\n     * @param data_out {Object} In-progress parsed data to update.\n     * @return {Object} Schema-parsed meta data.\n     * @static\n     * @protected\n     */\n    _parseMeta: function(metaFields, json_in, data_out) {\n        if (isObject(metaFields)) {\n            var key, path;\n            for(key in metaFields) {\n                if (metaFields.hasOwnProperty(key)) {\n                    path = SchemaJSON.getPath(metaFields[key]);\n                    if (path && json_in) {\n                        data_out.meta[key] = SchemaJSON.getLocationValue(path, json_in);\n                    }\n                }\n            }\n        }\n        else {\n            data_out.error = new Error(\"JSON meta data retrieval failure\");\n        }\n        return data_out;\n    }\n};\n\n    return SchemaJSON;\n    \n// TODO: Y.Object + mix() might be better here\n//Y.DataSchema.JSON = Y.mix(SchemaJSON, Base);\n});\n\n","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/common/utils/document.js":"define(['jquery', 'async', 'underscore', 'utils/sanitizer'], function ($, async, _, sanitizer) {\n\n    'use strict';\n\n    var htmlTag = '',\n        bodyClass = '',\n        tags = [],\n        tagAttributeDefaults = {\n            script: {\n                type: 'text/javascript',\n                'lazo-application': '1'\n            },\n            link: {\n                rel: 'stylesheet',\n                type: 'text/css',\n                'lazo-application': '1'\n            }\n        };\n\n    return {\n\n        setHtmlTag: function (val) {\n            htmlTag = val;\n            return this;\n        },\n\n        setBodyClass: function (val) {\n            bodyClass = val;\n            return this;\n        },\n\n        getHtmlTag: function () {\n            return htmlTag;\n        },\n\n        getBodyClass: function () {\n            return bodyClass;\n        },\n\n        addTag: function (name, attributes, content) {\n            var tag = this._createTag(name, attributes, content);\n            tags.push(tag);\n\n            if (LAZO.app.isClient) {\n                this._addTagToDOM(tag);\n            }\n\n            return this;\n        },\n\n        getTags: function () {\n            return tags;\n        },\n\n        setTitle: function (title) {\n            var t = _.find(tags, function (tag) { return tag.name === 'title'; }),\n                $title;\n\n            var titleTag = this._createTag('title', {}, title);\n\n            if (t) {\n                t.content = titleTag.content;\n            } else {\n                tags.push(titleTag); // prevent duplicate title tags in header\n            }\n\n            if (LAZO.app.isClient) {\n                $title = $('title');\n                if ($title.length) {\n                    $title.html(titleTag.content); // TODO: Ensure script injection prevention, test with IE (IE Bug may prevent title being set correctly)\n                } else {\n                    this._addTagToDOM(titleTag);\n                }\n            }\n\n            return this;\n        },\n\n        updateLinks: function (add, remove, type, callback) {\n            var i;\n            var tasks = [];\n            var self = this;\n\n            this.$head = this.$head || $('head');\n\n            for (i = 0; i < add.length; i++) {\n                (function (i) {\n                    tasks.push(function (callback) {\n                        var link  = document.createElement('link');\n                        var head = self.$head[0];\n\n                        for (var k in add[i]) {\n                            link.setAttribute(k, add[i][k]);\n                        }\n                        link.setAttribute('lazo-link', type);\n                        link.onload = function () {\n                            callback(null);\n                        };\n                        link.onerror = function (e) {\n                            LAZO.logger.warn('[application.navigate] Error while loading link %s', add[i], e);\n                            callback(null);\n                        };\n\n                        head.appendChild(link);\n                    });\n                })(i);\n            }\n\n            async.parallel(tasks, function (err) {\n                // remove previous links after the new links have been added\n                // to prevent fousc when layout has not changed\n                for (i = 0; i < remove.length; i++) {\n                    self.$head.find('[href=\"' + remove[i].href + '\"][lazo-link=\"' + type + '\"]:first').remove();\n                }\n                callback();\n            });\n        },\n\n        setsDefaultTitle: function (title) {\n            this.defaultTitle = title;\n            return this;\n        },\n\n        addPageTag: function (ctx, isServer, name, attributes, content) {\n\n            var pageTag = this._createPageTag(name, attributes, content);\n\n            if (isServer) {\n                // Serialize the page tags to the client\n                ctx._rootCtx.pageTags = ctx._rootCtx.pageTags || [];\n                ctx._rootCtx.pageTags.push(pageTag);\n            }\n            else {\n                ctx.meta = ctx.meta || {};\n                ctx.meta.pageTags = ctx.meta.pageTags || [];\n                ctx.meta.pageTags.push(pageTag);\n            }\n        },\n\n        getPageTags: function (ctx, isServer) {\n\n            if (isServer) {\n                return ctx._rootCtx.pageTags || [];\n            }\n\n            ctx.meta = ctx.meta || {};\n            return ctx.meta.pageTags || [];\n        },\n\n        updatePageTags: function (ctx, callback) {\n\n            if (!LAZO.app.isClient) {\n                return callback();\n            }\n\n            var self = this;\n            var addTasks = [];\n\n            ctx._rootCtx.pageTags = ctx._rootCtx.pageTags || [];\n            while (ctx._rootCtx.pageTags.length > 0) {\n                self._removeTagFromDOM(ctx._rootCtx.pageTags.pop());\n            }\n\n            ctx.meta = ctx.meta || {};\n            ctx.meta.pageTags = ctx.meta.pageTags || [];\n            while (ctx.meta.pageTags.length > 0) {\n                var tag = ctx.meta.pageTags.pop();\n\n                // Add to root ctx\n                ctx._rootCtx.pageTags.push(tag);\n\n                (function (pageTag) {\n                    addTasks.push(function (callback) {\n                        // Render\n                        self._addTagToDOM(pageTag);\n                        callback();\n                    });\n                })(tag);\n\n            }\n\n            async.parallel(addTasks, function (err) {\n                if (err) {\n                    LAZO.logger.error('Failed adding page tags. %s', err);\n                    return callback(err);\n                }\n\n                callback();\n            });\n\n        },\n\n        _createPageTag: function (name, attributes, content) {\n            return this._encodeTag(name, attributes, content);\n        },\n\n        _createTag: function (name, attributes, content) {\n            var defaults;\n\n            content = content || null;\n            defaults = _.clone(tagAttributeDefaults[name] || {});\n\n            return this._encodeTag(name, _.extend(defaults, attributes), content);\n        },\n\n        _encodeTag: function (name, attributes, content) {\n\n            attributes = attributes || [];\n            var keys = _.keys(attributes);\n            var encodedAttributes = {};\n            for (var i = 0; i < keys.length; i++) {\n                var key = keys[i];\n                encodedAttributes[key] = sanitizer.encode(attributes[key]);\n            }\n\n            var encodedContent = null;\n            if (content) {\n                encodedContent = sanitizer.encode(content);\n            }\n\n            return { name: name, attributes: encodedAttributes, content: encodedContent };\n\n        },\n\n        _addTagToDOM: function (tag) {\n\n            if (!LAZO.app.isClient) {\n                return;\n            }\n\n            var self = this;\n            self.$head = self.$head || $('head');\n\n            var selector = self._getTagSelector(tag);\n            var attrStr = _.reduce(tag.attributes || [], function(memo, val, key){\n                return memo + (' ' + key + '=\"' + val + '\"');\n            }, '');\n\n            // determine if the tag already exists\n            if (self.$head.find(selector).length) {\n                LAZO.logger.debug('Duplicate tag will not be added: %s, %s, %s', tag.name, attrStr, tag.content);\n                return;\n            }\n\n            self.$head.append('<' + tag.name + attrStr + '>' + (tag.content || '') + '</' + tag.name + '>');\n        },\n\n        _removeTagFromDOM: function (tag) {\n\n            if (!LAZO.app.isClient) {\n                return;\n            }\n\n            var self = this;\n            self.$head = self.$head || $('head');\n\n            var selector = self._getTagSelector(tag);\n            self.$head.find(selector).remove();\n\n        },\n\n        _getTagSelector: function (tag) {\n            var attrStr = _.reduce(tag.attributes, function(memo, val, key){\n                return memo + ('[' + key + '=\"' + val + '\"]');\n            }, '');\n            return tag.name + attrStr + ':first';\n        }\n\n    };\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/common/utils/handlebarsEngine.js":"define(['handlebars'], function (Handlebars) {\n\n    return {\n        compile: function(template) {\n            return Handlebars.default.compile(template);\n        },\n        precompile: function (template) {\n            return Handlebars.default.precompile(template);\n        },\n        execute: function(template, context, templateName) {\n            return template(context);\n        },\n        engine: Handlebars.default\n    };\n});\n","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/common/utils/loader.js":"define(['underscore'], function (_) {\n\n    'use strict';\n\n    return function (cmpName, options) {\n        if (typeof cmpName !== 'string') { // TODO: better error handling??? just prints the stack to the screen\n            return onError(new Error('The parameter \"cmpName\" must be a string'));\n        }\n\n        function onError(error) {\n            _.delay(options.error, 0, error);\n        }\n\n        function onCtlLoad(controller) {\n            try {\n                controller._execute(options.action, {\n                    success: function (controller) {\n                        _.delay(options.success, 0, controller);\n                    },\n                    error: function (err) {\n                        return onError(err);\n                    }\n                });\n            } catch (error) {\n                return onError(error);\n            }\n        }\n\n        options = _.defaults(options || {}, {\n            action: 'index',\n            name: cmpName,\n            error: function () {\n                return;\n            },\n            success: function () {\n                return;\n        }});\n\n        // loader is used by ctl.addChild; requiring at run time prevents the circular dependency\n        LAZO.require(['lazoCtl'], function (Ctl) {\n            Ctl.create(cmpName, _.pick(options, 'ctx', 'name'), {\n                success: onCtlLoad,\n                error: onError\n            });\n        });\n    };\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/common/utils/model.js":"define(['lazoModel', 'utils/modelLoader', 'utils/module', 'async', 'underscore', 'utils/dataschema-json'], function (LazoModel, modelLoader, module, async, _, SchemaJSON) {\n\n    'use strict';\n\n    var UtilModel = {\n\n        process: function (modelName, options, type, child) {\n            var modelInstances = options.ctx._rootCtx.modelInstances,\n                modelList = options.ctx._rootCtx.modelList,\n                gid = LazoModel._getGlobalId(modelName, options.params),\n                path = 'models/' + modelName + '/' + type;\n\n            function checkProcessing() {\n                if (modelInstances[gid] === null) {\n                    return;\n                }\n                else if (modelInstances[gid].processing) {\n                    setTimeout(checkProcessing, 0);\n                }\n                else if (options.success) {\n                    _.defer(options.success, modelInstances[gid]);\n                }\n            }\n\n            options.error = options.error || function (err) {\n                throw err;\n            }; // user did not define error bubble up 500\n\n            if (modelInstances[gid]) {\n                checkProcessing();\n                return;\n            }\n\n            modelInstances[gid] = {};\n            modelInstances[gid].processing = true;\n            var _fetch = function (Model, _default) {\n                var data = child ? child.data : (modelList[gid] && modelList[gid].data ? modelList[gid].data : null);\n                var m = new Model(data, {name: modelName, ctx: options.ctx, params: options.params, parse: data !== null});\n\n                var registerModel = function (m, options, gid) {\n                                        // add model meta info to modelList\n                                        var modelMeta = {\n                                            data: m._resp,\n                                            cid: m.cid,\n                                            id: m.id,\n                                            name: m.name,\n                                            params: options.params\n                                        };\n\n                                        if (type === 'collection') {\n                                            modelMeta.idMap = [];\n                                            m.each(function (model) {\n                                                modelMeta.idMap.push({cid: model.cid, id: model.id});\n                                            });\n                                        }\n\n                                        m.ctx._rootCtx.modelList[gid] = modelMeta;\n                                        m.ctx._rootCtx.modelInstances[gid] = m;\n\n\n                                        if (m.modelsSchema) {\n                                            var tasks = [],\n                                                success = options.success;\n\n\n                                            _.each(m.modelsSchema, function (modelSchemaDef) {\n\n                                                var submodeldata = SchemaJSON.apply({resultListLocator: modelSchemaDef.locator}, modelMeta.data),\n                                                    subtype = submodeldata && submodeldata.results\n                                                        ? (_.isArray(submodeldata.results) ? 'collection' : 'model') : 'model';\n\n                                                tasks.push(function (cb) {\n                                                    options.success = function () {cb();};\n                                                    UtilModel.process(modelSchemaDef.name, options, subtype,\n                                                        {\n                                                            parentModel: m,\n                                                            data: submodeldata.results,\n                                                            schema: modelSchemaDef\n                                                        });\n                                                });\n\n                                            });\n\n                                            async.parallel(tasks, function (err, results) {\n                                                if (success) {\n                                                    return success(m);\n                                                }\n                                            });\n                                        }\n                                        else {\n                                            if (options.success) {\n                                                return options.success(m);\n                                            }\n                                        }\n                                    };\n\n                m._default = _default;\n                if (options.params && type === 'model') {\n                    m.id = _.result(options.params, m.idAttribute);\n                }\n                if (!_default) {\n                    module.addPath(path, options.ctx);\n                }\n\n                if (child && child.parentModel) {\n                    m.lazoParent = child.parentModel;\n                    child.parentModel.lazoChildren = child.parentModel.lazoChildren || {};\n                    child.parentModel.lazoChildren[modelName] = m;\n\n                    if (child.schema && child.schema.prop) {\n                        child.parentModel[child.schema.prop] = m;\n\n                        child.parentModel._childNames = child.parentModel._childNames || [];\n                        child.parentModel._childNames.push(child.schema.prop);\n                    }\n                }\n\n                // if data in list don't make tunnel call\n                if (modelList[gid]) {\n                    m.cid = modelList[gid].cid;\n                    m._default = _default;\n                    if (modelList[gid].idMap) {\n                        _.each(modelList[gid].idMap, function (elem) {\n                            var modelItem = m.get(elem.id);\n                            if (modelItem) {\n                                modelItem.cid = elem.cid;\n                            }\n                        });\n                    }\n\n                    modelInstances[gid] = m;\n                    if (options.success) {\n                        options.success(m);\n                    }\n                    return;\n                }\n                else if (options.fetch === false || child) {\n                    if (child && child.data) {\n                        m._resp = child.data;\n                    }\n                    registerModel(m, options, gid);\n                }\n                else {\n                    m.fetch({\n                        success: function (m) {\n                            registerModel(m, options, gid);\n                        },\n                        error: function (model, response, opts) {\n                            modelInstances[gid] = null;\n                            LAZO.logger.debug('[common.utils.model.process] Error loading model %s', modelName);\n                            if (options.error) { // TODO: error handling\n                                return options.error(model, response, opts);\n                            }\n                        }\n                    });\n                }\n\n            };\n\n            modelLoader(modelName, type, _fetch);\n        },\n\n        create: function (name, attributes, options, type) {\n            var _create = function (Model, _default) {\n\n                var modelInstances = options.ctx._rootCtx.modelInstances,\n                    gid = LazoModel._getGlobalId(name, options.params);\n\n                if (modelInstances[gid]) {\n                    options.success(modelInstances[gid]);\n                    return;\n                }\n\n                var m = new Model((type === 'model' ? attributes : null), {name: name, ctx: options.ctx, params: options.params, parse: true});\n                m._default = _default;\n                var modelMeta = {\n                    data: (type === 'model' ? attributes : null),\n                    cid: m.cid,\n                    id: m.id,\n                    name: m.name,\n                    params: options.params\n                };\n                m.ctx._rootCtx.modelList[gid] = modelMeta;\n                m.ctx._rootCtx.modelInstances[gid] = m;\n\n                if (type === 'model') {\n\n                    if (options.persist == false) {\n                        options.success(m);\n                    }\n                    else {\n                        m.save({}, {\n                            success: function (model) {\n                                if (options.success) {\n                                    options.success(model);\n                                }\n                            },\n                            error: function (model, xhr, opts) {\n                                LAZO.logger.warn('[common.utils.model.createModel] Error creating model %s', name);\n                                if (options.error) {\n                                    return options.error(model, xhr, opts);\n                                }\n                            }\n                        });\n                    }\n                }\n                else {\n                    if (!_.isArray(attributes)) {\n                        if (options.error) {\n                            options.error(m, 'attributes must be an array', options);\n                        }\n                        return;\n                    }\n                    var modelMetaData = m.ctx._rootCtx.modelList[gid];\n                    var modelInstance = m.ctx._rootCtx.modelInstances[gid];\n                    var modelOptions = {};\n                    if (options && options.persist !== void 0) {\n                        modelOptions.persist = options.persist;\n                    }\n\n                    _.each(attributes, function (modelData) {\n                        m.create(modelData, modelOptions);\n                    });\n\n                    // wait for all the models to be created\n                    setTimeout(function () {\n                        // ensures that collections that are created get serialized correctly\n                        // this is a temporary workaround until createCollection and createModel\n                        // can be refactored\n                        modelMetaData.data = modelInstance.toJSON();\n                        modelMeta.idMap = [];\n                        modelInstance.each(function (model) {\n                            modelMeta.idMap.push({ cid: model.cid, id: model.id });\n                        });\n\n                        if (options.success) {\n                            options.success(m);\n                        }\n                    }, 0);\n                }\n            };\n\n            modelLoader(name, type, _create);\n        }\n\n    };\n\n    return UtilModel;\n});\n","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/common/utils/modelLoader.js":"define(['lazoModel', 'lazoCollection', 'resolver/main'], function (LazoModel, LazoCollection, resolver) {\n    'use strict';\n\n    var modelLoader = function (name, type, cb) {\n        resolver.isBase(('models/' + name + '/' + type), 'model', function (isBase) {\n            if (isBase) {\n                cb(type === 'model' ? LazoModel : LazoCollection, true);\n            } else {\n                LAZO.require(['models/' + name + '/' + type],\n                    function (model) {\n                        // https://github.com/jrburke/requirejs/issues/922\n                        if (typeof model === 'function') {\n                            cb(model);\n                        }\n                    }\n                );\n            }\n        });\n    };\n\n    return modelLoader;\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/common/utils/module.js":"define(['resolver/file', 'underscore', 'text', 'context', 'utils/loader', 'async', 'utils/assetsMixin'],\n    function (file, _, text, Context, loader, async, assetsMixin) {\n\n    'use strict';\n\n    return _.extend({\n\n        addPath: function (path, ctx) {\n            var modules;\n            if (LAZO.app.isServer) {\n                modules = ctx._rootCtx.modules = ctx._rootCtx.modules || [];\n                modules.push(path);\n                ctx.js = ctx.js || [];\n                ctx.js.push(path);\n            }\n\n            return this;\n        },\n\n        getView: function (path, callback) {\n            LAZO.require([path], function (View) {\n                return callback(null, View);\n            }, function (err) { // TODO: error handling\n                return callback(new Error('module.getView failed for ' + path + ' : ' + err.message), null);\n            });\n        },\n\n        getTemplate: function (templatePath, callback) {\n            LAZO.require(['text!' + templatePath], function (template) {\n                return callback(null, template);\n            }, function (err) { // TODO: error handling\n                return callback(new Error('Controller _getTemplate failed for ' + templatePath + ' : ' + err.message), null);\n            });\n        },\n\n        addChild: function (container, cmpName, parent, options) {\n            var childOptions,\n                childContext,\n                defaults = {\n                    action: 'index',\n                    render: false\n                };\n\n            function onError(error) {\n                _.delay(options.error, 0, error);\n            }\n\n            function onComponentLoad(child) {\n                if (!parent.children) {\n                    parent.children = {};\n                }\n\n                if (!parent.children[container]) {\n                    parent.children[container] = [];\n                }\n\n                if (_.isNumber(options.index)) {\n                    parent.children[container].splice(options.index, 0, child);\n                } else {\n                    parent.children[container].push(child);\n                }\n\n                _.delay(options.success, 0, child);\n            }\n\n            options = _.defaults(options || {}, {\n                error: function () {\n                    return;\n                },\n                success: function () {\n                    return;\n                }\n            });\n\n            if (typeof container !== 'string' || !container) {\n                return onError(new TypeError()); // TODO: error handling\n            }\n\n            if (typeof cmpName !== 'string' || !cmpName) {\n                return onError(new TypeError()); // TODO: error handling\n            }\n\n            childOptions = _.defaults(_.pick(options, 'action', 'rootComponent'), defaults);\n            childContext = new Context(_.extend({}, _.pick(parent.ctx, ['_rootCtx', '_request', '_reply', 'headers', 'meta', 'response']), {\n                params : options.params }));\n\n            if (parent.ctx && parent.ctx._rootCtx) {\n                childContext._rootCtx = parent.ctx._rootCtx;\n            }\n\n            this.getAssets(cmpName, childContext, {\n                success: function (assets) {\n                    childContext.assets = assets;\n                    childOptions.ctx = childContext;\n                    loader(cmpName, _.extend({}, childOptions, {\n                        success: onComponentLoad, error: onError\n                    }));\n                },\n                error: onError\n            });\n        }\n\n    }, assetsMixin);\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/common/utils/prune.js":"define(['lazoModel'], function (LazoModel) {\n\n    'use strict';\n\n    function getRefs(ctl, refs) {\n        var ctx = ctl.ctx;\n        var models = ctx.models;\n        var collections = ctx.collections;\n        var k;\n        var gid;\n        var i = 0;\n        var child;\n\n        for (k in models) {\n            if (models[k] && models[k].name) {\n                gid = LazoModel._getGlobalId(models[k].name, models[k].params);\n                refs[gid] = true;\n            }\n        }\n\n        for (k in collections) {\n            if (collections[k] && collections[k].name) {\n                gid = LazoModel._getGlobalId(collections[k].name, collections[k].params);\n                refs[gid] = true;\n            }\n        }\n\n        if (ctl.children) {\n            for (k in ctl.children) {\n                child = ctl.children[k];\n                for (i = 0; i < child.length; i++) {\n                    getRefs(child[i], refs);\n                }\n            }\n        }\n\n        return refs;\n    }\n\n    return function (ctl) {\n        var refs = getRefs(ctl, {});\n        var modelInstances = ctl.ctx._rootCtx.modelInstances;\n        var modelList = ctl.ctx._rootCtx.modelList;\n        var k;\n\n        for (k in modelInstances) {\n            if (!refs[k]) {\n                delete modelInstances[k];\n            }\n        }\n        for (k in modelList) {\n            if (!refs[k]) {\n                delete modelList[k];\n            }\n        }\n\n    };\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/common/utils/sanitizer.js":"define([], function () {\n\n    'use strict';\n\n    return {\n\n        /**\n         * Encodes an entity for safe display in html element text or attributes\n         */\n        encode: function (value) {\n\n            // TODO: This should be expanded to include other scenarios.\n            // See: https://github.com/angular/angular.js/blob/v1.3.14/src/ngSanitize/sanitize.js#L435\n\n            return String(value)\n                .replace(/&/g, '&amp;')\n                .replace(/\"/g, '&quot;')\n                .replace(/'/g, '&#39;')\n                .replace(/</g, '&lt;')\n                .replace(/>/g, '&gt;')\n                .replace(/`/g, '&#x60;');\n        }\n\n    };\n\n});\n","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/common/utils/template.js":"define(['utils/handlebarsEngine'], function (handlebarsEngine) {\n\n    'use strict';\n\n    var defaultExt = {\n\n        handlebars: 'hbs',\n        micro: 'mt'\n\n    };\n\n    var defaultTemplateEngineName = 'handlebars',\n        _engines = {\n            handlebars: {\n                extension: 'hbs',\n                handler: handlebarsEngine,\n                exp: 'Handlebars'\n            }\n        };\n\n    function resolveEnginePath(engineDef) {\n        if (engineDef.path) {\n            return engineDef.path;\n        }\n\n        switch (engineDef.name) {\n            case 'micro':\n                return 'underscore';\n        }\n    }\n\n    return {\n\n        getDefaultExt: function (engineName) {\n            return this.getTemplateExt() || defaultExt[engineName];\n        },\n\n        setTemplateExt: function (engineName, ext) {\n            var engineDef = this.getTemplateEngineDef(engineName);\n            if (engineDef) {\n                engineDef.extension = ext;\n            }\n        },\n\n        registerTemplateEngine: function (name, extension, handler, path, exp) {\n            return (_engines[name] = { extension: extension, handler: handler, path: path, exp: exp });\n        },\n\n        getTemplateEngine: function (engineName) {\n            var engine = _engines[engineName];\n            return engine ? engine.handler : undefined;\n        },\n\n        getTemplateExt: function (engineName) {\n            var engineDef = this.getTemplateEngineDef(engineName);\n            return engineDef ? engineDef.extension : undefined;\n        },\n\n        getTemplateEngineDef: function (engineName) {\n            return _engines[engineName];\n        },\n\n        getDefaultTemplateEngine: function () {;\n            return this.getTemplateEngine(defaultTemplateEngineName);\n        },\n\n        getDefaultTemplateEngineName: function () {\n            return defaultTemplateEngineName;\n        },\n\n        setDefaultTemplateEngine: function (engineName) {\n            var engine = _engines[engineName];\n            if (!engine) {\n                throw new Error('Invalid template engine name, ' + engineName);\n            }\n\n            defaultTemplateEngineName = engineName;\n        },\n\n        loadTemplateEngine: function (engineDef, options) {\n            var engine,\n                self = this;\n\n            options.error = options.error || function (err) { throw err; };\n\n            if ((engine = this.getTemplateEngine(engineDef.name))) {\n                options.success(engine);\n            } else {\n                LAZO.require([resolveEnginePath(engineDef)], function (engine) {\n                    self.registerTemplateEngine(engineDef.name, engineDef.extension, engineDef.handler(engine), engineDef.exp);\n                    options.success(self.getTemplateEngine(engineDef.name));\n                }, function (err) {\n                    options.error(err);\n                });\n            }\n        },\n\n        engHandlerMaker: function (engineName) {\n            switch (engineName) {\n                case 'micro':\n                    return function (engine) {\n                        return {\n                            compile: function (template) {\n                                return _.template(template);\n                            },\n                            execute: function (compiledTemplate, data) {\n                                return compiledTemplate(data);\n                            },\n                            engine: _.template\n                        };\n                    };\n            }\n        }\n\n    };\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/common/utils/treeMixin.js":"define(['underscore'], function (_, $) {\n\n    'use strict';\n\n    return {\n\n        getList: function (nodeType, rootNode) {\n            var self = this;\n\n            return (function flatten(nodeType, node, nodes) {\n                var children;\n\n                if (nodeType === 'view' && node.currentView) {\n                    nodes.push(node.currentView);\n                } else if (nodeType === 'component') {\n                    nodes.push(node);\n                }\n\n                if ((children = self.getNodeChildren(node)).length) {\n                    _.each(children, function (child) {\n                        nodes = flatten(nodeType, child, nodes);\n                    });\n                }\n\n                return nodes;\n            })(nodeType, rootNode, []);\n        },\n\n        getNodeType: function (node) {\n            var ret;\n\n            if (!node) {\n                ret = null;\n            } else if (node.currentView) {\n                ret = 'component';\n            } else if (node.setElement) {\n                ret = 'view';\n            }\n\n            return ret;\n        },\n\n        getNodeChildren: function (node) {\n            var nodeType = this.getNodeType(node);\n            if (nodeType !== 'component') {\n                return [];\n            }\n\n            var children = node.children;\n            var child;\n            var nodes = [];\n            node.currentView.parent = node;\n            // nodes.push(node.currentView);\n            for (var k in children) {\n                for (var i = 0; i < children[k].length; i++) {\n                    child = children[k][i];\n                    child.parent = node;\n                    nodes.push(child);\n                }\n            }\n\n            return nodes;\n        },\n\n        _attrs: {\n            cmpName: 'lazo-cmp-name',\n            cmpId: 'lazo-cmp-id',\n            compContainerName: 'lazo-cmp-container',\n            viewId: 'lazo-view-id'\n        }\n\n    };\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/common/utils/uniqueId.js":"define(function () {\n\n    'use strict';\n\n    var idCounter = LAZO && LAZO.initConf ? LAZO.initConf.rootCtx.idCounter : 0;\n\n    return function (prefix) {\n        var id = ++idCounter + '';\n        return prefix ? prefix + id : id;\n    };\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/public/server/server.js":"define(['base'], function (Base) {\n\n    'use strict';\n\n    return Base.extend({\n\n        setup: function (hapi, pack, servers, options) {\n            options.success();\n        },\n\n        afterInitialize: function (hapi, pack, servers, options) {\n            options.success();\n        }\n\n    });\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/public/server/syncher.js":"define(['l!base', 'l!serviceProxy'], function (Base, ServiceProxy) {\n\n    /**\n     * By extending the Syncher class developers are able write code that can directly\n     * interact with any data store.  All methods on the Syncher are expected to be asynchronous.\n     *\n     * If a Syncher exists it will be used by the framework to back a Backbone model or collection.\n     * Essentially becoming the sync for the model or collection.\n     *\n     * If you need to connect to a standard REST endpoint consider using {{#crossLink \"LazoModel\"}}{{/crossLink}}\n     * or {{#crossLink \"LazoCollection\"}}{{/crossLink}}.\n     *\n     * @class Syncher\n     * @constructor\n     */\n    var Syncher = Base.extend({\n\n        /**\n         * Handle to service proxy which can be used to fetch data from services. See {{#crossLink \"ServiceProxy\"}}{{/crossLink}}\n         *\n         * @property proxy\n         * @type ServiceProxy\n         */\n        proxy: new ServiceProxy(),\n\n        /**\n         * The fetch method will be called when the LAZO.app's or LazoController's loadModel or loadCollection method is executed.\n         * @method fetch\n         * @param {Object} options The options specified in a call to loadModel or loadCollection\n         *      @param {Function} options.success Callback function to be called when fetch succeeds, passed <code>(response)</code> as argument.\n         *      @param {Function} options.error Callback function to be called when fetch fails, passed <code>(response)</code> as argument.\n         * @return must call the success or error callback passing the response\n         */\n        fetch: function(options) {\n            throw new Error('fetch method not implemented provided');\n        },\n\n        /**\n         * The add method will be called when the LAZO.app's or LazoController's create method is executed.\n         * @method add\n         * @param {Object} attributes A hash of the model's state that will be the attributes a new model\n         * @param {Object} options  The options specified in a call to a model's save method\n         *      @param {Function} options.success Callback function to be called when add succeeds, passed <code>(response)</code> as argument.\n         *      @param {Function} options.error Callback function to be called when add fails, passed <code>(response)</code> as argument.\n         * @return must call the success or error callback passing the response\n         */\n        add: function(attributes, options) {\n            throw new Error('add method not implemented provided');\n        },\n\n        /**\n         * The update method will be called when the LazoModel's save method is executed.\n         * @method update\n         * @param {Object} attributes A hash of the model's state that will update the attributes of a model\n         * @param {Object} options  The options specified in a call to a model's save method\n         *      @param {Function} options.success Callback function to be called when update succeeds, passed <code>(response)</code> as argument.\n         *      @param {Function} options.error Callback function to be called when update fails, passed <code>(response)</code> as argument.\n         * @return must call the success or error callback passing the response\n         */\n        update: function (attributes, options) {\n            throw new Error('update method not implemented provided');\n        },\n\n        /**\n         * The destroy method will be called when the LazoModel's destroy method is executed.\n         * @method destroy\n         * @param {Object} options  The options specified in a call to a model's destroy method\n         *      @param {Function} options.success Callback function to be called when destroy succeeds, passed <code>(response)</code> as argument.\n         *      @param {Function} options.error Callback function to be called when destroy fails, passed <code>(response)</code> as argument.\n         * @return must call the success or error callback passing the response\n         */\n        destroy: function (options) {\n            throw new Error('destroy method not implemented provided');\n        }\n\n    });\n\n    return Syncher;\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/public/views/base.js":"define(['flexo', 'lazoViewMixin', 'underscore', 'lazoWidgetMixin'], function (flexo, lazoViewMixin, _, lazoWidgetMixin) {\n\n    'use strict';\n\n    return flexo.View.extend(_.extend({\n\n        getInnerHtml: function (options) {\n            var self = this;\n            flexo.View.prototype.getInnerHtml.call(this, {\n                success: function (html) {\n                    self.getWidgetsHtml(html, {\n                        success: options.success,\n                        error: options.error\n                    });\n                },\n                error: options.error\n            });\n        },\n\n        attach: function (el, options) {\n            flexo.View.prototype.attach.call(this, el, options);\n            this.$el.removeClass(this._getStateClass('detached')).addClass(this._getStateClass('attached'));\n            this._uiStates = this._getStates();\n        },\n\n        _onRemove: function () {\n            var self = this;\n\n            this._removeWidgets();\n            this._removeChildViews();\n        },\n\n        _removeChildViews: function () {\n            if (!this.children) {\n                return;\n            }\n\n            for (var k in this.children) {\n                this.children[k].remove();\n            }\n        }\n\n    }, lazoViewMixin, lazoWidgetMixin));\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/public/views/collection.js":"define(['lazoViewMixin', 'flexo', 'underscore', 'l!viewManager', 'lazoWidgetMixin', 'utils/uniqueId'],\n    function (lazoViewMixin, flexo, _, viewManager, lazoWidgetMixin, uniqueId) {\n\n    'use strict';\n\n    function setOptions(options) {\n        var defaultOptions = {\n            success: function () {},\n            error: function (err) {\n                throw err;\n            }\n        };\n\n        return _.defaults(options, defaultOptions);\n    }\n\n    return flexo.CollectionView.extend(_.extend({\n\n        // example item and empty view schema\n        // itemViews: {\n        //     collectionName: 'item/view/path'\n        // },\n\n        // itemView: 'item/view/path',\n\n        // emptyViews: {\n        //     collectionName: 'empty/view/path'\n        // },\n\n        // emptyView: 'empty/view/path',\n\n        constructor: function (options) {\n            var collections = {};\n\n            if (_.size(this.collections)) {\n                for (var i = 0; i < this.collections.length; i++) {\n                    collections[this.collections[i]] = options.ctl.ctx.collections[this.collections[i]];\n                    if (!collections[this.collections[i]]) {\n                        throw new Error('Could not resolve collection ' + this.collections[i] + ' for collection view ' + options.name);\n                    }\n                }\n                this.collections = collections;\n            } else if (_.isString(this.collection)) {\n                this.collection = options.ctl.ctx.collections[this.collection];\n                if (!this.collection) {\n                    throw new Error('Could not resolve collection ' + this.collection + ' for collection view ' + options.name);\n                }\n            } else {\n                throw new Error('No collection associated with collection view ' + options.name);\n            }\n            flexo.CollectionView.call(this, options);\n        },\n\n        eventNameSpace: 'lazo:colection:view',\n\n        getInnerHtml: function (options) {\n            var self = this;\n            flexo.CollectionView.prototype.getInnerHtml.call(this, {\n                success: function (html) {\n                    self.getWidgetsHtml(html, {\n                        success: options.success,\n                        error: options.error\n                    });\n                },\n                error: options.error\n            });\n        },\n\n        addItemView: function ($target, view, options) {\n            var self = this;\n            options = setOptions(options);\n            $target.append(view.$el);\n            view.attach(view.$el[0], {\n                success: function () {\n                    options.success(view);\n                    view.afterRender();\n                    self.trigger(this.eventNameSpace + ':itemView:added', view);\n                },\n                error: options.error\n            });\n        },\n\n        addEmptyView: function ($target, view, options) {\n            var self = this;\n            options = setOptions(options);\n            $target.append(view.$el);\n            view.attach(view.$el[0], {\n                success: function () {\n                    options.success(view);\n                    view.afterRender();\n                    self.trigger(this.eventNameSpace + ':emptyView:added', view);\n                },\n                error: options.error\n            });\n        },\n\n        attach: function (el, options) {\n            flexo.CollectionView.prototype.attach.call(this, el, options);\n            this.$el.removeClass(this._getStateClass('detached')).addClass(this._getStateClass('attached'));\n            this._uiStates = this._getStates();\n        },\n\n        attachItemEmptyViews: function (options) {\n            var collections = _.size(this.collections) ? _.toArray(this.collections) : [this.collection];\n            var collectionNames = this._findCollectionNames(this.$el.html());\n            var len = collections.length;\n            var self = this;\n            var loading = 0;\n            var loaded = 0;\n\n            function isDone() {\n                loaded++;\n                if (loading === loaded) {\n                    options.success(loaded);\n                }\n            }\n\n            for (var j = 0; j < collectionNames.length; j++) {\n                this._addCollection(collectionNames[j], this._getCollection(collectionNames[j]));\n            }\n\n            for (var i = 0; i < len; i++) {\n                (function (i) {\n                    if (collections[i].length) {\n                        collections[i].each(function (model) {\n                            var $el = self._getViewEl(model);\n                            loading++;\n                            if (self._itemViews[model.cid]) {\n                                self._itemViews[model.cid].attach($el[0], {\n                                    error: options.error,\n                                    success: function () {\n                                        self._itemViews[model.cid].afterRender();\n                                        isDone();\n                                    }\n                                });\n                            } else {\n                                self.getItemView(model, collections[i], {\n                                    error: options.error,\n                                    success: function (View) {\n                                        var view = self.createItemView(View, model, collections[i]);\n                                        view.attach($el[0], {\n                                            error: options.error,\n                                            success: function () {\n                                                view.afterRender();\n                                                isDone();\n                                            }\n                                        });\n                                    }\n                                });\n                            }\n                        });\n                    } else {\n                        var $el = self._getCollectionTarget(collections[i]);\n                        loading++;\n                        if (collections[i].emptyView) {\n                            collections[i].emptyView.attach($el[0]);\n                            collections[i].emptyView.afterRender();\n                            isDone();\n                        } else {\n                            self.getEmptyView(collections[i], {\n                                error: options.error,\n                                success: function (View) {\n                                    if (View) {\n                                        var view = self.createEmptyView(View, collections[i]);\n                                        view.setElement($el[0]);\n                                        view.afterRender();\n                                    }\n                                    isDone();\n                                }\n                            });\n                        }\n                    }\n                })(i);\n            }\n        },\n\n        resolveCollection: function (name, options) {\n            var collection = this.collection.models ? this.collection : this.ctl.ctx.collections[name];\n            if (!collection) {\n                return options.error(new Error('Could not resolve collection ' + name + ' in view ' + this.name));\n            }\n\n            return options.success(collection);\n        },\n\n        getViewName: function (type, collection) {\n            var viewName = this[type + 's'] && this[type + 's'][this._findCollection(collection).name];\n            if (!viewName) {\n                viewName = this[type];\n            }\n\n            return viewName;\n        },\n\n        getItemView: function (model, collection, options) {\n            this._resolveView('itemView', collection, options);\n        },\n\n        getEmptyView: function (collection, options) {\n            this._resolveView('emptyView', collection, options);\n        },\n\n        getItemViewOptions: function (type, model, collection, options) {\n            var name = this.getViewName(type, collection);\n\n            return this._getItemViewOptions(_.extend({}, {\n                name: this.getViewName(type, collection),\n                ctl: this.ctl,\n                collection: collection,\n                ref: this.ctl._getPath(name, 'view'),\n                baseBath: this.ctl._getBasePath(name, 'view'),\n                cid: uniqueId('view')\n            }, options));\n        },\n\n        _getCollection: function (name) {\n            return name === 'collection' ? this.collection : this.ctl.ctx.collections[name];\n        },\n\n        _getViewEl: function (model) {\n            return this.$('[lazo-model-id=\"' + model.cid + '\"]');\n        },\n\n        _getCollectionTarget: function (collection) {\n            var name = this._findCollection(collection);\n            return name ? $('[lazo-collection-target=\"' + name + '\"]').first() : this.$el;\n        },\n\n        _resolveView: function (type, collection, options) {\n            var viewName = this.getViewName(type, collection);\n            if (!viewName && type === 'itemView') {\n                return options.error(new Error('Could not resolve ' + type + ' for collection ' + this._findCollection(collection).name));\n            } else if (!viewName) {\n                return options.success(null);\n            }\n\n            this._loadView(viewName, {\n                error: options.error,\n                success: function (View) {\n                    options.success(View);\n                }\n            });\n        },\n\n        _onRemove: function () {\n            var self = this;\n\n            flexo.View.prototype._onRemove.call(this);\n            this._removeWidgets();\n\n            _.each(this._itemViews, function (view, key) {\n                view.remove();\n                delete self._itemViews[key];\n            });\n\n            _.each(this._emptyViews, function (view, key) {\n                view.remove();\n                delete self._emptyViews[key];\n            });\n\n            return this;\n        }\n\n    }, lazoViewMixin, lazoWidgetMixin));\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/public/views/state.js":"define(['jquery', 'underscore'], function ($, _) {\n\n    var prefix = 'lazo';\n    var states = {\n        focus: true,\n        disabled: true,\n        visible: true,\n        hidden: true\n    };\n\n    return {\n\n        stateClassPrefix: 'lazo',\n\n        _getStateClass: function (state) {\n            return this.stateClassPrefix + '-' + state;\n        },\n\n        _getValidStates: function () {\n            return states;\n        },\n\n        _getStates: function () {\n            if (LAZO.app.isServer) {\n                LAZO.logger.warn('[getStates] Client only method');\n            }\n\n            var self = this;\n            var retVal = {};\n            var state;\n            var classNames = this.el ? this.el.className.split(' ') : [];\n            var validStates = this._getValidStates();\n            var states = _.filter(classNames, function (className) {\n                var classNameParts = className.split('-');\n                return classNameParts[0] === self.stateClassPrefix && validStates[classNameParts[1]] &&\n                    classNameParts.length === 2;\n            });\n\n            for (var i = 0; i < states.length; i++) {\n                state = states[i].split('-')[1];\n                retVal[state] = state;\n            }\n\n            return retVal;\n        },\n\n        setState: function (state, on) {\n            if (!states[state]) {\n                LAZO.logger.warn('[setState] Invalid state, ' + state);\n                return;\n            }\n\n            if (LAZO.app.isClient) {\n                $(this.el)[on ? 'addClass' : 'removeClass'](this._getStateClass(state));\n            }\n\n            this._uiStates = this._uiStates || {};\n            if (on) {\n                this._uiStates[state] = state;\n            } else {\n                delete this._uiStates[state];\n            }\n        }\n\n    };\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/public/views/view.js":"define(['underscore', 'backbone', 'utils/template', 'resolver/main', 'flexo', 'renderer', 'l!viewManager', 'uiStateMixin', 'utils/uniqueId'],\n    function (_, Backbone, template, resolver, flexo, renderer, viewManager, uiStateMixin, uniqueId) {\n\n    'use strict';\n\n    var viewOptions = [\n        'model', 'collection', 'el', 'id', 'attributes', 'className', 'tagName', 'events',\n        'ctl', 'cid', 'template', 'name', 'render', 'templateEngine', 'templatePath', 'ref',\n        'basePath', 'isBase', 'hasTemplate', 'getInnerHtml', 'compiledTemplatePath', 'viewDefinitions',\n        'getTemplate', 'itemViewOptions', 'itemView', 'itemViews', 'emptyView', 'emptyViews'\n    ];\n\n    return _.extend({\n\n        hasTemplate: false,\n\n        templateEngine: 'handlebars',\n\n        eventNameSpace: 'lazo:view',\n\n        attributeNameSpace: 'lazo',\n\n        render: function (options) {\n            if (this.isServer) {\n                throw 'view, ' + this.name + ', attempted to call render on the server.';\n            }\n            var self = this;\n\n            renderer.getTreeHtml(this.ctl, this.cid, 'view', function (html) {\n                viewManager.cleanup(self.ctl);\n                self.ctl._getEl().html(html);\n                self.trigger(self.eventNameSpace + ':rendered', self);\n                viewManager.attachViews(self.ctl, function (err, result) {\n                    if (err && options && _.isFunction(options.error)) {\n                        return options.error(err);\n                    }\n                    if (options && _.isFunction(options.success)) {\n                        options.success(html);\n                    }\n                });\n            });\n\n            return this;\n        },\n\n        getWidgetByEl: function (el) {\n            var widgets = this._getWidgetInstances(this);\n\n            for (var k in widgets) {\n                for (var i = 0; i < widgets[k].length; i++) {\n                    if (widgets[k][i].el === el) {\n                        return widgets[k][i];\n                    }\n                }\n            }\n        },\n\n        getWidgetsByName: function (name) {\n            var widgets = this._getWidgetInstances(this);\n            return widgets[name] || [];\n        },\n\n        getAttributes: function () {\n            var keys;\n            var val;\n            var retVal = {};\n            var attributes = {\n                'lazo-view-name': 'name',\n                'lazo-view-id': 'cid',\n                'lazo-model-name': 'model.name',\n                'lazo-model-id': 'model.cid',\n                'lazo-collection-name': 'collection.name',\n                'lazo-collection-id': 'collection.cid'\n            };\n\n            for (var k in attributes) {\n                val = this;\n                keys = attributes[k].split('.');\n                for (var i = 0; i < attributes[k].length; i++) {\n                    if (!(val = val[keys[i]])) {\n                        delete attributes[k];\n                        break;\n                    } else {\n                        retVal[k] = val;\n                    }\n                }\n            }\n\n            return retVal;\n        },\n\n        getExclusions: function () {\n            return { ctl: true, $el: true, el: true, parent: true, options: true }; // properties that are not serialized\n        },\n\n        serializeData: function (options) { // serialize data for rendering\n            var data = _.extend(this._serialize(this.ctl.ctx, this.getExclusions()), this._serialize(this, this.getExclusions()));\n            this.transformData(data, options);\n        },\n\n        augment: function (options) {\n            // TODO: temporary work around for nested collections\n            options.collection = this.collection || options.collection;\n            _.extend(this, _.pick(options, viewOptions));\n        },\n\n        getTemplateEngine: function (options) {\n            var engineName = this.templateEngine;\n\n            template.loadTemplateEngine({\n                name: engineName,\n                handler: template.engHandlerMaker(engineName),\n                exp: null,\n                extension: template.getDefaultExt(engineName)\n            }, {\n                error: function (err) {\n                    options.error(err);\n                },\n                success: function (engine) {\n                    options.success(engine);\n                }\n            });\n        },\n\n        getRenderer: function (options) {\n            var self = this;\n\n            if (this.renderer) {\n                return options.success(this.renderer);\n            }\n\n            this.getTemplateEngine({\n                error: options.error,\n                success: function (engine) {\n                    self.renderer = engine;\n\n                    self.getTemplate({\n                        error: options.error,\n                        success: function (template) {\n                            var compiledTemplate = engine.compile(template);\n                            self.template = template;\n\n                            self.renderer = function (context, options) {\n                                options.success(compiledTemplate(context));\n                            };\n\n                            options.success(self.renderer);\n                        }\n                    });\n                }\n            });\n        },\n\n        getTemplate: function (options) {\n            var self = this;\n            this.templatePath =  this.templatePath || resolver.getTemplatePath(this);\n\n            LAZO.require(['text!' + self.templatePath], function (template) {\n                self.hasTemplate = true;\n                options.success(template);\n            }, function (err) {\n                options.error(err);\n            });\n        },\n\n        loadChild: function (viewName, options) {\n            this._loadView(viewName, {\n                error: options.error,\n                success: function (View) {\n                    options.success(View);\n                }\n            });\n        },\n\n        resolveChild: function (viewName, options) {\n            var self = this;\n            self.getChildren({\n                success: function (views) {\n                    var viewNameVal = views[viewName];\n                    if (!viewNameVal) {\n                        options.error(new Error('Could not resolve child view, ' + viewName));\n                    }\n\n                    viewNameVal = _.isObject(viewNameVal) && viewNameVal.cid ? viewNameVal.name : viewNameVal;\n                    self.loadChild(viewNameVal, {\n                        error: options.error,\n                        success: function (View) {\n                            self.children = self.children || {};\n                            var view = self.children[viewName] = new View(self.getChildOptions({\n                                name: viewNameVal\n                            }));\n                            options.success(view);\n                        }\n                    });\n                },\n                error: options.error\n            });\n        },\n\n        getChildOptions: function (options) {\n            return this._getChildOptions(_.extend({\n                ctl: this.ctl,\n                ref: this.ctl._getPath(options.name, 'view'),\n                baseBath: this.ctl._getBasePath(options.name, 'view'),\n                cid: uniqueId('view')\n            }, options));\n        },\n\n        getChildren: function (options) {\n            if (!this.viewDefinitions) {\n                this.viewDefinitions = _.result(this, 'viewDefinitions', {});\n            }\n\n            options.success(this.viewDefinitions);\n        },\n\n        attachChildren: function (options) {\n            var $views = this.$('[lazo-view-name]');\n            var self = this;\n            var $viewContainers;\n\n            function isDone() {\n                attached++;\n                if (attached >= expected) {\n                    self.trigger(self.eventNameSpace + ':children:attached', self);\n                    options.success(true);\n                }\n            }\n\n            // get child view containers that are direct descendants of view\n            $viewContainers = this.$('[lazo-view]').filter(function () {\n                var childViewContainerNode = this;\n                var directDescendantOfSelf = true;\n                $views.each(function () {\n                    if ($.contains(this, childViewContainerNode)) {\n                        directDescendantOfSelf = false;\n                        return false;\n                    }\n                });\n\n                return directDescendantOfSelf;\n            });\n\n            var expected = $viewContainers.length;\n            var attached = 0;\n            this.attachWidgets({\n                success: isDone,\n                error: options.error\n            });\n\n            $viewContainers.each(function () {\n                var $container = $(this);\n                var viewName = $container.attr('lazo-view');\n                if (!viewName) {\n                    return options.error(new Error('View ' + self.name + ' child [lazo-view=\"' + viewName + '\"] is empty'));\n                }\n\n                self.resolveChild(viewName, {\n                    error: options.error,\n                    success: function (view) {\n                        // wait for widgets\n                        view.once(view.eventNameSpace + ':children:attached', function (view) {\n                            view.afterRender();\n                        });\n                        view.attach($container.find('> [lazo-view-name]')[0], {\n                            error: options.error,\n                            success: isDone\n                        });\n                    }\n                });\n            });\n        },\n\n        _serialize: function (obj, exceptions) { // serialize an object\n            var data = {};\n\n            var serializeModelCollection = function (morc) {\n                var obj;\n                if (morc instanceof Backbone.Collection) {\n                    obj = morc.map(function (model) {\n                        var o = model.toJSON();\n                        if (model.id) {\n                            o.id = model.id;\n                        }\n                        return o;\n                    });\n                }\n                else {\n                    obj = morc.toJSON();\n                    if (morc.id) {\n                        obj.id = morc.id;\n                    }\n                }\n                return obj;\n            };\n\n            var addChildren = function (data, mdl) {\n                for (var i = 0, il = mdl._childNames.length; i < il; i++) {\n                    var name = mdl._childNames[i];\n                    if (mdl[name].toJSON) {\n                        data[name] = serializeModelCollection(mdl[name]);\n                    }\n                    else {\n                        data[name] = mdl[name];\n                    }\n\n                    if (mdl[name]._childNames) {\n                        addChildren(data[name], mdl[name]);\n                    }\n                }\n            };\n\n            for (var k in obj) { // do not use _.each; it uses hasOwnProp;\n                if (!exceptions[k] && !_.isFunction(obj[k])) {\n                    if (k === 'models' || k === 'collections') { // serialize the models and collections from ctl.ctx\n                        data[k] = {};\n                        for (var j in obj[k]) {\n                            if (obj[k][j].toJSON) {\n                                data[k][j] = serializeModelCollection(obj[k][j]);\n                            } else {\n                                data[k][j] = obj[k][j];\n                            }\n\n                            if (obj[k][j]._childNames) {   // serialize parsed sub models and collections\n                                addChildren(data[k][j], obj[k][j]);\n                            }\n                        }\n                    } else if (obj[k] instanceof Backbone.Collection || obj[k] instanceof Backbone.Model) {\n                        data[k] = serializeModelCollection(obj[k]);\n                    } else {\n                        data[k] = obj[k];\n                    }\n                }\n            }\n\n            if (obj._rootCtx) {\n                data.crumb = obj.getCookie('crumb');\n                // work around; need to define a better way of serializing assets and other objects\n                // for rendering\n                data.assets = _.clone(data.assets);\n                data.assets.app = {};\n                _.extend(data.assets.app, _.clone(LAZO.app.assets));\n                _.extend(data, obj._rootCtx.data);\n            }\n\n            return data;\n        },\n\n        _loadView: function (viewName, options) {\n            LAZO.require([resolver.getPath(viewName, this.ctl.name, 'view')], function (View) {\n                options.success(View);\n            },\n            function (err) {\n                options.error(err);\n            });\n        },\n\n        _getAttributes: function () {\n            var self = this;\n            var attrs = flexo.View.prototype._getAttributes.call(this);\n            attrs.class = attrs.class || '';\n\n            if (this._uiStates) {\n                attrs.class += _.reduce(this._uiStates, function (memo, state) {\n                    return memo + (memo.length ? ' ' : '') + self._getStateClass(state);\n                }, attrs.class);\n            }\n\n            attrs.class += (attrs.class.length ? ' ' : '' + self._getStateClass('detached'));\n\n            return attrs;\n        }\n\n    }, uiStateMixin);\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/public/views/widget.js":"define(['underscore', 'htmlparser', 'htmlparserToString', 'utils/module', 'jquery', 'uiStateMixin', 'async', 'backbone', 'utils/document'],\n    function (_, htmlParser, toString, module, $, uiStateMixin, async, Backbone, doc) {\n\n    'use strict';\n\n    return _.extend({\n\n        getWidgetsHtml: function (viewHtml, options) {\n            var self = this;\n            if (!_.size(this._getWidgetDefs(this))) {\n                return options.success(viewHtml);\n            }\n\n            this._parse(viewHtml, {\n                success: function (list) {\n                    self._addWidgetsToList(list, {\n                        success: function (list) {\n                            options.success(toString(list));\n                        },\n                        error: options.error\n                    });\n                },\n                error: options.error\n            });\n        },\n\n        attachWidgets: function (options) {\n            var parent = options.parent || this;\n            var $root = $(parent.el);\n            var $descViews = $root.find('[lazo-view-name]');\n            var $widgets = $root.find('[lazo-widget]');\n            var self = this;\n            var tasks = [];\n\n            function attach(widget, parent, name, render, $widget, callback) {\n                widget.name = name;\n                widget.cid = $widget.attr('lazo-widget-id');\n                widget.el = $widget[0];\n\n                function done() {\n                    self._attachWidget(widget, parent);\n                    self.attachWidgets({\n                        success: function () {\n                            callback(null);\n                        },\n                        error: function (err) {\n                            callback(err);\n                        },\n                        parent: widget,\n                        render: render\n                    });\n                }\n\n                // render is ONLY used if createWidget called attachWidgets\n                if (render && !widget.el.hasChildNodes()) {\n                    widget.render({\n                        success: function (html) {\n                            $(widget.el).html(html);\n                            done();\n                        },\n                        error: function (err) {\n                            callback(err);\n                        },\n                    });\n                } else {\n                    done();\n                }\n            }\n\n            // filter out widgets that are descendants of other views\n            // and other widgets\n            _.each([$descViews, $widgets], function ($collection) {\n                $widgets = $widgets.filter(function () {\n                    var widgetEl = this;\n                    var isDescendent = false;\n                    $collection.each(function () {\n                        if ($.contains(this, widgetEl)) {\n                           isDescendent = true;\n                           return false;\n                        }\n                    });\n\n                    return !isDescendent;\n                });\n            });\n\n            // cache widgets from rendering\n            parent._widgetInstances = this._getWidgetInstances(parent);\n            parent[self._getWidgetInstancesKey(parent)] = {};\n\n            $widgets.each(function () {\n                var $widget = $(this);\n                tasks.push(function (callback) {\n                    var name = $widget.attr('lazo-widget');\n                    var widget = self.getWidgetByIdName($widget.attr('lazo-widget-id'), name, parent._widgetInstances);\n\n                    if (widget) {\n                        attach(widget, parent, name, options.render, $widget, callback);\n                    } else {\n                        self._resolveWidget(name, {\n                            parent: parent,\n                            success: function (Widget) {\n                                var widget = new Widget(_.extend({\n                                    view: self },\n                                    self._resolveWidgetElAttrs($widget[0])));\n\n                                widget.created();\n                                attach(widget, parent, name, options.render, $widget, callback);\n                            },\n                            error: options.error\n                        });\n                    }\n                });\n            });\n\n            async.parallel(tasks, function (err) {\n                if (err) {\n                    return options.error(err);\n                }\n\n                options.success(parent);\n            });\n\n            // clear widgets cache\n            delete parent._widgetInstances;\n        },\n\n        getWidgetByIdName: function (id, name, widgets) {\n            widgets = widgets || this._getWidgetInstances(this);\n            widgets = widgets[name] || [];\n\n            for (var i = 0; i < widgets.length; i++) {\n                if (widgets[i].cid === id) {\n                    return widgets[i];\n                }\n            }\n        },\n\n        createWidget: function (el, name, options) {\n            var self = this;\n            // if called by widget then self.view else self is the view\n            var view = self.view || self;\n            options.error = options.error || function (err) {\n                throw err;\n            };\n\n            function attach(el, widget, options) {\n                var $el = $(el);\n                var view = self.view || self;\n                // wait to update the DOM until widget has been loaded and rendered\n                $el.attr('lazo-widget', widget.name);\n                $el.attr('lazo-widget-id', widget.attributes['lazo-widget-id']);\n                view._attachWidget(widget, self, name);\n            }\n\n            function getCss(widget, css) {\n                var children = widget[view._getWidgetInstancesKey(widget)];\n                css = css.concat(view._getWidgetCss(widget));\n                if (children) {\n                    for (var k in children) {\n                        for (var i = 0; i < children[k].length; i++) {\n                            css = getCss(children[k][i], css);\n                        }\n                    }\n                }\n\n                return _.uniq(css);\n            }\n\n            if (!el) {\n                return options.error(new Error('[createWidget] requires an element.'));\n            }\n\n            view._resolveWidget(name, {\n                parent: this,\n                success: function (Widget) {\n                    var widget = new Widget(_.extend({\n                        view: view },\n                        view._resolveWidgetElAttrs(el), options.attributes));\n\n                    widget.name = name;\n                    widget.el = el;\n                    widget.attributes['lazo-widget'] = name;\n                    widget.cid = widget.attributes['lazo-widget-id'] = _.uniqueId('widget');\n                    widget.created();\n                    if (el.hasChildNodes()) {\n                        attach(el, widget);\n                        $(el).css({ visibility: 'hidden' });\n                        return view.attachWidgets(_.extend({ parent: widget, render: true }, {\n                            success: function () {\n                                if (!widget.loadCss) {\n                                    setTimeout(function () {\n                                        $(el).css({ visibility: 'visible' });\n                                        options.success(widget);\n                                    }, 0);\n                                    return;\n                                }\n\n                                var css = getCss(widget, []);\n                                doc.updateLinks(css, [], 'css', function () {\n                                    setTimeout(function () {\n                                        $(el).css({ visibility: 'visible' });\n                                        options.success(widget);\n                                    }, 0);\n                                });\n                            },\n                            error: options.error\n\n                        }));\n                    }\n                    widget.render({\n                        success: function (html) {\n                            $(el).css({ visibility: 'hidden' });\n                            $(widget.el).html(html);\n                            attach(el, widget);\n                            view.attachWidgets(_.extend({ parent: widget, render: true }, {\n                                success: function () {\n                                    if (!widget.loadCss) {\n                                        setTimeout(function () {\n                                            $(el).css({ visibility: 'visible' });\n                                            options.success(widget);\n                                        }, 0);\n                                        return;\n                                    }\n\n                                    var css = getCss(widget, []);\n                                    doc.updateLinks(css, [], 'css', function () {\n                                        setTimeout(function () {\n                                            $(el).css({ visibility: 'visible' });\n                                            options.success(widget);\n                                        }, 0);\n                                    });\n                                },\n                                error: options.error\n                            }));\n                        },\n                        error: options.error\n                    });\n                },\n                error: options.error\n            });\n        },\n\n        _attachWidget: function (widget, parent) {\n            // if called by widget then self.view else self is the view\n            var view = this.view || this;\n            var instancesKey = this._getWidgetInstancesKey(parent);\n            // deprecating widget.bind; transition support\n            if (!widget.bind.prototype.isPrototypeOf(new Backbone.Events.on())) {\n                widget.bind(widget.el);\n            } else {\n                widget.attach(widget.el);\n            }\n            widget.attached();\n            $(widget.el).removeClass(view._getStateClass('detached')).addClass(view._getStateClass('attached'));\n            widget._uiStates = widget._getStates();\n\n            widget.afterRender({\n                success: function () {\n                    $(widget.el).removeClass(view._getStateClass('rendering')).addClass(view._getStateClass('rendered'));\n                },\n                error: function (err) {\n                    LAZO.logger.warn('[lazoWidget] Error while executing widget afterRender', err);\n                }\n            });\n\n            parent[instancesKey][widget.name] = _.isArray(parent[instancesKey][widget.name]) ?\n                parent[instancesKey][widget.name] : [];\n            parent[instancesKey][widget.name].push(widget);\n        },\n\n        _resolveWidgetElAttrs: function (el) {\n            var retVal = {};\n            for (var i = 0; i < el.attributes.length; i++) {\n                retVal[el.attributes[i].name] = el.attributes[i].value;\n            }\n            return retVal;\n        },\n\n        _parse: function (html, options) {\n            var handler = new htmlParser.DefaultHandler(function (err, list) {\n                if (err) {\n                    return options.error(err);\n                }\n\n                options.success(list);\n            });\n            var parser = new htmlParser.Parser(handler);\n            parser.parseComplete(html);\n        },\n\n        _addWidgetsToList: function (list, options) {\n            var self = this;\n            var expected = 0;\n            var resolved = 0;\n\n            function shouldTraverse(node, parent) {\n                    // no attributes\n                return ((!node.attribs ||\n                    // not a view or widget\n                    (!node.attribs['lazo-view-id'] && !node.attribs['lazo-widget'])) ||\n                    // widget and children created\n                    (node.attribs['lazo-widget'] && parent.view && self._getWidgetInstances(parent)) ||\n                    // widget is descendant of a view and has a definition\n                    node.attribs && node.attribs['lazo-widget'] && parent.ref &&\n                    parent[self._getWidgetDefsKey(parent)][node.attribs['lazo-widget']]);\n            }\n\n            for (var i = 0; i < list.length; i++) {\n                (function getWidget(node, parent, root) {\n                    var widgetId = _.uniqueId('widget');\n                    // if the node is a widget container and the container is empty then render widget node\n                    if (node.attribs && node.attribs['lazo-widget']) {\n                        node.attribs.class = (node.attribs.class ? node.attribs.class + ' ' : '') + self._getStateClass('detached');\n                        node.attribs.class += ' ' + self._getStateClass('rendering');\n                        node.attribs['lazo-widget-id'] = widgetId;\n                            expected++;\n                            self._resolveWidget(node.attribs['lazo-widget'], {\n                                parent: parent,\n                                success: function (Widget) {\n                                    var name = node.attribs['lazo-widget'];\n                                    var widget = new Widget(_.extend({\n                                        view: self\n                                    }, node.attribs));\n\n                                    widget.created();\n                                    if (widget._uiStates) {\n                                        node.attribs.class = _.reduce(widget._uiStates, function (memo, state) {\n                                            return memo + ' ' + self._getStateClass(state);\n                                        }, node.attribs.class);\n                                    }\n                                    widget.name = name;\n                                    widget.cid = widgetId;\n                                    self._getWidgetCss(widget);\n                                    if (LAZO.app.isClient) {\n                                        var instancesKey = self._getWidgetInstancesKey(parent);\n                                        parent[instancesKey] = parent[instancesKey] || {};\n                                        parent[instancesKey][name] = _.isArray(parent[instancesKey][name]) ?\n                                            parent[instancesKey][name] : [];\n                                        parent[instancesKey][name].push(widget);\n                                    }\n                                    if (node.children) {\n                                        for (var j = 0; j < node.children.length; j++) {\n                                            getWidget(node.children[j], widget, false);\n                                        }\n                                        // ensure expected count is done\n                                        setTimeout(function () {\n                                            resolved++;\n                                            if (resolved === expected) {\n                                                options.success(list);\n                                            }\n                                        }, 0);\n                                    } else {\n                                        widget.render({\n                                            success: function (html) {\n                                                self._parse(html, {\n                                                    success: function (widgetNodeList) {\n                                                        node.children = widgetNodeList;\n                                                        for (var k = 0; k < widgetNodeList.length; k++) {\n                                                            getWidget(widgetNodeList[k], widget, false);\n                                                        }\n                                                        // ensure expected count is done\n                                                        setTimeout(function () {\n                                                            resolved++;\n                                                            if (resolved === expected) {\n                                                                options.success(list);\n                                                            }\n                                                        }, 0);\n                                                    },\n                                                    error: options.error\n                                                });\n                                            },\n                                            error: options.error\n                                        });\n                                    }\n                                },\n                                error: options.error\n                            });\n                    }\n                    if (node.children) {\n                        for (var i = 0; i < node.children.length; i++) {\n                            if (shouldTraverse(node.children[i], parent || self)) {\n                                getWidget(node.children[i], parent || self, false);\n                            }\n                        }\n                    }\n                })(list[i], self, true);\n            }\n\n            if (!expected) {\n                options.success(list);\n            }\n        },\n\n        // deprecated: widgets or children\n        // new: widgetDefinitions\n        _getWidgetDefs: function (parent) {\n            return parent.widgetDefinitions || (parent.widgets || parent.children);\n        },\n\n        // deprecated: widgetInstances\n        // new: widgets, children\n        _getWidgetInstances: function (parent) {\n            return parent.widgetDefinitions ? (parent.widgets || parent.children) : parent.widgetInstances;\n        },\n\n        // deprecated: widgetInstances\n        // new: widgets, children\n        _getWidgetInstancesKey: function (parent) {\n            return parent.widgetDefinitions ? (parent.view ? 'children' : 'widgets')\n                : 'widgetInstances';\n        },\n\n        // deprecated: widgets or children\n        // new: widgetDefinitions\n        _getWidgetDefsKey: function (parent) {\n            return parent.widgetDefinitions ? 'widgetDefinitions' : (parent.view ? 'children' : 'widgets');\n        },\n\n        _resolveWidget: function (name, options) {\n            var self = this;\n            var parent = options.parent;\n            var definitions = this._getWidgetDefs(parent);\n            var view = parent.view || parent;\n            var err = new Error('[lazoWidget] Could not resolve widget \"' + name + '\".');\n\n            // def doesn't exist\n            if (!definitions || !definitions[name]) {\n                // parent is a view\n                if (parent.ref) {\n                    return options.error(err);\n                // parent is a widget; attempt to resolve definition to view\n                } else {\n                    definitions = this._getWidgetDefs(parent.view);\n                }\n            }\n\n            // definition cannot be resolved throw error\n            if (!definitions[name]) {\n                return options.error(err);\n            }\n\n            // widget has already been resolved\n            if (_.isFunction(definitions[name])) {\n                return options.success(definitions[name]);\n            }\n            // widget is a path\n            if (_.isString(definitions[name])) {\n                view._loadWidget(definitions[name], {\n                    success: function (Widget) {\n                        definitions[name] = Widget;\n                        options.success(Widget);\n                    },\n                    error: options.error\n                });\n            // widget is a constructor\n            } else {\n                options.success(definitions[name]);\n            }\n        },\n\n        _getWidgetCss: function (widget) {\n            var self = this;\n            var ctx = this.ctl.ctx;\n            var rootCtx = ctx._rootCtx;\n            var widgetCss;\n\n            // add widget css to route\n            if (widget.css) {\n                widgetCss = _.map(_.isArray(widget.css) ? widget.css : [widget.css], function (href) {\n                    return self.ctl.augmentCssLink({\n                        href: href,\n                        'lazo-link-ctx': self.ctl.name,\n                        rel: 'stylesheet',\n                        type: 'text/css'\n                    });\n                });\n\n                // ensure dependencies property exists\n                if (!rootCtx.dependencies) {\n                    rootCtx.dependencies = {\n                        css: [],\n                        js: [],\n                        imports: []\n                    };\n                }\n                rootCtx.dependencies.css = _.uniq(widgetCss.concat(rootCtx.dependencies.css), function (link) {\n                    return link.href;\n                });\n\n\n                return widgetCss;\n            }\n        },\n\n        _loadWidget: function (path, options) {\n            var ctx = this.ctl.ctx;\n\n            LAZO.require([path], function (Widget) {\n                if (LAZO.app.isServer) {\n                    module.addPath(path, ctx);\n                }\n                options.success(Widget);\n            },\n            function (err) {\n                options.error(err);\n            });\n        },\n\n        _removeWidgets: function (widgets) {\n            var children;\n            widgets = widgets || this._getWidgetInstances(this);\n\n            for (var k in widgets) {\n                for (var i = 0; i < widgets[k].length; i++) {\n                    // new markup already exists so new instances already exist\n                    // if instance has an el and a parent node then it is the DOM\n                    // from the previous render; else continue\n                    if (!widgets[k][i].el || !widgets[k][i].el.parentNode) {\n                        continue;\n                    }\n                    // deprecating widget.unbind; transition support\n                    if (!widgets[k][i].unbind.prototype.isPrototypeOf(new Backbone.Events.off())) {\n                        widgets[k][i].unbind(widgets[k][i].el);\n                    } else {\n                        widgets[k][i].detach(widgets[k][i].el);\n                    }\n                    widgets[k][i].detached();\n                    if ((children = this._getWidgetInstances(widgets[k][i]))) {\n                        this._removeWidgets(children);\n                    }\n                }\n            }\n        }\n\n    }, uiStateMixin);\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/server/handlers/safe.js":"define(['continuation-local-storage', 'cluster', 'domain', 'hapi'], function (cls, cluster, domain, hapi) {\n\n    var onServerStop = function () {\n        LAZO.logger.error('[server.handlers.safe] Server stopped. Killing process...');\n        process.exit(1);\n    };\n\n    return function (server, handler, context) {\n        var lazoNs = cls.getNamespace('lazojs') || cls.createNamespace('lazojs');\n\n        if (!server || server.constructor !== hapi.Server) {\n            throw new TypeError();\n        }\n\n        if (typeof handler !== 'function') {\n            throw new TypeError();\n        }\n\n        return function (request, reply) {\n            var handlerArgs = arguments;\n            var handlerDomain = domain.create();\n            var uncaughtCount = 0;\n\n            var onError = function (error) {\n                lazoNs.run(function () {\n                    lazoNs.set('request', request);\n\n                    LAZO.logger.warn('[server.handlers.safe] Unhandled error: %s %j', error.message, error.stack);\n\n                    switch (uncaughtCount++) {\n                        case 0:\n                            reply(error);\n                            break;\n                        case 1:\n                            if (cluster.isWorker) {\n                                cluster.worker.disconnect();\n                            }\n                            LAZO.logger.error('[server.handlers.safe] Stopping server...');\n                            server.stop(onServerStop);\n                            break;\n                        default:\n                            // Ignore\n                            break;\n                    }\n                });\n            };\n\n            handlerDomain.on('error', onError);\n\n            handlerDomain.run(function () {\n                handler.apply(context || this, handlerArgs);\n            });\n        };\n    };\n\n});\n","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/server/handlers/stream.js":"define(['hapi'], function (Hapi) {\n\n    'use strict';\n\n    return function (req, reply) {\n        var payload = req.payload;\n        var componentName = req.params.compName;\n        var callback = payload ? payload.callback : null;\n        var fn_name = req.params.action || 'upload';\n        var _path = (componentName ? 'components/' + componentName : 'app') + '/server/utilActions';\n        LAZO.require([_path], function (util) {\n            var fn = util[fn_name];\n            if (fn) {\n                fn(req, {\n                    success: function (ret) {\n                        var resp = [];\n                        if (callback) {\n                            resp.push(\"<html><head><script>window.parent.\");\n                            resp.push(callback);\n                            resp.push('(');\n                        }\n                        resp.push(JSON.stringify(ret));\n                        if (callback) {\n                            resp.push(');');\n                            resp.push(\"</script></head><body></body></html>\");\n                        }\n                        reply(resp.join(''));\n                    },\n                    error: function (ret, options) {\n                        var error = Hapi.error.internal(ret);\n\n                        if (options && options.statusCode) {\n                            error.response.code = options.statusCode;\n                        }\n\n                        reply(error);\n                    },\n                    done: function () {\n                        LAZO.logger.debug('[server.handlers.stream] Handled by application...', _path);\n                    }\n                });\n            }\n\n        }, function (err) {\n            LAZO.logger.error('[server.handlers.stream] Error loading \"%s\" module.', _path, err);\n            reply(err);\n        });\n    };\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/server/handlers/tunnel.js":"define(['utils/modelLoader', 'context', 'handlers/utils'], function (modelLoader, Context, utils) {\n\n    'use strict';\n\n    return function (req, reply) {\n        var handleTunnelError = function (req, response) {\n            var respText = response.body || response.error || '';\n            var resp = reply(respText);\n            resp.code(response.statusCode || 500);\n        };\n\n        var method = req.payload.method;\n        if (method === 'GET') {\n            var loadFunc,\n                loadName;\n            if (req.payload.model) {\n                loadFunc = LAZO.app.loadModel;\n                loadName = req.payload.model;\n            }\n            else if (req.payload.collection) {\n                loadFunc = LAZO.app.loadCollection;\n                loadName = req.payload.collection;\n            }\n            loadFunc.call(LAZO.app,\n                loadName,\n                {\n                    ctx: new Context(utils.createCtxOptions(req, reply, {\n                        isTunnelRequest: true\n                    })),\n                    params: req.payload.params,\n                    success: function (model) {\n                        reply({ gmid: model._getGlobalId(), data: model.toJSON() });\n                    },\n                    error: function (model, response, options) {\n                        LAZO.logger.error('[server.handlers.tunnel] Loading %s, error processing request %j', loadName, response);\n                        handleTunnelError(req, response);\n                    }\n                }\n            );\n\n        }\n        else if (method === 'POST' || method === 'PUT' || method === 'DELETE' || method === 'NONCRUD') {\n            var type,\n                modelName,\n                payload = req.payload;\n            if (payload.model) {\n                type = 'model';\n                modelName = payload.model;\n            }\n            else if (payload.collection) {\n                type = 'collection';\n                modelName = payload.collection;\n            }\n\n            var _handleModel = function (Model) {\n                var m = new Model(payload.attributes,\n                    {\n                        name: modelName,\n                        ctx: new Context(utils.createCtxOptions(req, reply, {\n                            isTunnelRequest: true\n                        })),\n                        params: payload.params,\n                        parse: true\n                    });\n\n                if (method === 'DELETE') {\n                    m.destroy({\n                        success: function (model, response, options) {\n                            reply({ gmid: model._getGlobalId(), data: model.toJSON() });\n                        },\n                        error: function (model, response, options) {\n                            handleTunnelError(req, response);\n                        }\n                    });\n                }\n                else if (method === 'NONCRUD') {\n                    var fname = payload.fname,\n                        args = payload.args;\n                    m.call(fname, args, {\n                        success: function (response) {\n                            reply(response);\n                        },\n                        error: function (response) {\n                            handleTunnelError(req, response);\n                        }\n                    });\n                }\n                else {\n                    m.save({},\n                        {\n                            success: function (model, response, options) {\n                                reply({ gmid: model._getGlobalId(), data: model.toJSON() });\n                            },\n                            error: function (model, response, options) {\n                                handleTunnelError(req, response);\n                            }\n                        });\n                }\n            };\n\n            modelLoader(modelName, type, _handleModel);\n\n        } else {\n            LAZO.logger.debug('[server.handlers.tunnel] Error processing request method %s', method);\n            var resp = req.reply({ error: 'Error processing request method: ' + method });\n            resp.code(500);\n        }\n    };\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/server/handlers/utils.js":"define(['underscore'], function (_) {\n\n    'use strict';\n\n    return {\n\n        getParams: function (request) {\n            var params = {},\n                reqParams,\n                qryParams,\n                key;\n\n            if ((reqParams = _.extend(request.params, request.payload ? request.payload : {}))) {\n                for (key in reqParams) {\n                    params[key] = reqParams[key];\n                }\n            }\n            if ((qryParams = request.query)) {\n                for (key in qryParams) {\n                    params[key] = qryParams[key];\n                }\n            }\n\n            return params;\n        },\n\n        getCookies: function (request) {\n            var cookies = {},\n                state;\n            if (!(state = request.state)) {\n                return cookies;\n            }\n\n            for (var key in state) {\n                cookies[key] = state[key];\n            }\n\n            return cookies;\n        },\n\n        getHeaders: function (request) {\n            return request.raw.req.headers;\n        },\n\n        getParsedUrl: function (request) {\n            return request.url;\n        },\n\n        createCtxOptions: function (request, reply, options) {\n            return _.extend({\n                params: this.getParams(request),\n                cookies: this.getCookies(request),\n                _request: request,\n                _reply: reply,\n                headers: this.getHeaders(request),\n                url: this.getParsedUrl(request),\n                response: {\n                    statusCode: null,\n                    httpHeaders: [],\n                    varyParams: []\n                }\n            }, options);\n        }\n\n    };\n\n});","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/server/logger/fileSink.js":"/*global __dirname:false*/\n\ndefine(['underscore', 'fs', 'moment', 'os', 'path', 'util'], function (_, fs, moment, os, path, util) {\n\n    var DEFAULT_FILE_NAME = 'lazojs.log';\n\n    var DEFAULT_FILE_PATH = path.join(process.cwd(), DEFAULT_FILE_NAME);\n\n    var MB = 1024 * 1024;\n\n    var DEFAULT_MAX_SIZE = 10 * MB;\n\n    var DEFAULT = {\n        filePath: DEFAULT_FILE_PATH,\n        maxFiles: 10,\n        maxSize: DEFAULT_MAX_SIZE,\n        roll: true\n    };\n\n    var dateChanged = function (a, b) {\n        return a === null || b === null ||\n            a.getUTCFullYear() !== b.getUTCFullYear() ||\n            a.getUTCMonth() !== b.getUTCMonth() ||\n            a.getUTCDate() !== b.getUTCDate();\n    };\n\n    var getFilename = function (filePath) {\n        return _.last(filePath.split(path.sep));\n    };\n\n    var getNextFilePath = function (filePath, maxFiles) {\n        var dirPath = path.dirname(filePath);\n        var files = fs.readdirSync(dirPath);\n        var fileName = getFilename(filePath);\n        var regExp = new RegExp('^' + fileName + '\\\\.(\\\\d+)$');\n        var filtered = _.filter(files, function (file) {\n            return regExp.test(file);\n        });\n        var last = _.max(filtered, function (fileName) {\n            var filePath = path.join(dirPath, fileName);\n            return fs.existsSync(filePath) ? fs.statSync(filePath).mtime : 0;\n        });\n        var match = last && regExp.exec(last);\n        var pointer = match && match[1] ? parseInt(match[1]) : 0;\n        var sequence = pointer >= 1 && pointer < maxFiles ? pointer + 1 : 1;\n\n        return util.format('%s.%d', filePath, sequence);\n    };\n\n    var rollFileSync = function (filePath, maxFiles) {\n        try {\n            if (!fs.existsSync(filePath)) {\n                return;\n            }\n\n            var nextFilePath = getNextFilePath(filePath, maxFiles);\n            fs.renameSync(filePath, nextFilePath);\n        } catch (error) {\n            console.error(util.format('FileSink, error while rolling file \"%s\": %s', filePath, error.message));\n        }\n    };\n\n    var FileSink = function (options) {\n\n        var _options = _.defaults({}, options, DEFAULT);\n\n        // Check if directory exists\n\n        var dirPath = path.dirname(_options.filePath);\n\n        if (!fs.existsSync(dirPath)) {\n            throw new Error(util.format('FileSink, given path does not exist: %s', dirPath));\n        }\n\n        // Check if can write file\n\n        fs.closeSync(fs.openSync(_options.filePath, 'a'));\n\n        // Initial status\n\n        var stats = fs.statSync(_options.filePath);\n        var fileSize = stats.size;\n        var lastModified = stats.mtime;\n\n        // Sink function\n\n        return function (message) {\n            var now = new Date();\n            var messageBuffer = new Buffer(message + os.EOL);\n            var messageLength = messageBuffer.length;\n\n            if ((fileSize + messageLength) > _options.maxSize || (_options.roll && dateChanged(lastModified, now))) {\n                rollFileSync(_options.filePath, _options.maxFiles);\n                fileSize = 0;\n            }\n\n            fs.appendFile(_options.filePath, messageBuffer, function (error) {\n                if (error) {\n                    return console.error(util.format('FileSink, error while appending to \"%s\": %s', _options.filePath, error.message));\n                }\n\n                fileSize += messageLength;\n                lastModified = now;\n            });\n        };\n    };\n\n    return FileSink;\n\n});\n","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/server/logger/utils.js":"define(['continuation-local-storage', 'util'], function (cls, util) {\n\n    var getRequest = function () {\n        var lazoNs = cls.getNamespace('lazojs');\n        var request = lazoNs && lazoNs.get('request');\n        return request;\n    };\n\n    var serverStringify = function (object) {\n        var options = {\n            depth: 1\n        };\n\n        return util.inspect(object, options).replace(/\\s+/g, ' ');\n    };\n\n    return {\n        getRequest: getRequest,\n        serverStringify: serverStringify\n    };\n\n});\n","/home/travis/build/npmtest/node-npmtest-lazo/node_modules/lazo/lib/server/resolver/file.js":"define(function () {\n\n    'use strict';\n\n    var fs = require('fs'),\n        path = require('path'),\n        dir = require('node-dir');\n\n    return {\n\n        getErrorTemplatePaths: function (callback) {\n            var templatePaths = {\n                    '404': {\n                        server: LAZO.BASE_PATH + '/lib/common/templates/404.hbs',\n                        client: 'lib/common/templates/404.hbs'\n                    },\n                    '500': {\n                        server: LAZO.BASE_PATH + '/lib/common/templates/500.hbs',\n                        client: 'lib/common/templates/500.hbs'\n                    }\n                },\n                basename,\n                clientPath,\n                serverPath,\n                directory = path.normalize(LAZO.FILE_REPO_PATH + '/app/' + 'views');\n\n            this.list(directory, { ext: '.hbs' }, function (err, files) {\n                if (err) {\n                    throw err;\n                }\n\n                for (var i = 0; i < files.length; i++) {\n\n                    basename = path.basename(files[i], '.hbs');\n                    serverPath = path.normalize(files[i]);\n                    clientPath = path.normalize(serverPath.replace(LAZO.FILE_REPO_PATH, '/'));\n                    if (basename === '404' || basename === '500') {\n                        templatePaths[basename] = {\n                            server: serverPath,\n                            client: clientPath\n                        };\n                    }\n                }\n\n                callback(null, templatePaths);\n            });\n        },\n\n        resolvePath: function (from, to) {\n            if (LAZO.app.isClient) {\n                LAZO.logger.warn('[server.resolver.resolvePath]', 'Should not be called on client.');\n                return from;\n            }\n\n            return path.resolve(from, to);\n        },\n\n        list: function (directory, options, callback) {\n            var filtered = [];\n\n            if (LAZO.app.isClient) {\n                LAZO.logger.warn('[server.resolver.resolvePath]', 'Should only be called on the server.');\n                return callback(null, []);\n            }\n\n            directory = options.basePath ? path.resolve(options.basePath, directory) : directory;\n            fs.exists(directory, function (exists) {\n                if (!exists) {\n                    return callback(null, []);\n                }\n\n                dir.files(directory, function (err, files) {\n                    if (err) { // TODO: error handling\n                        throw err;\n                    }\n\n                    if (!options.basePath && !options.ext) {\n                        return files;\n                    }\n\n                    for (var i = 0; i < files.length; i++) {\n                        if (options.ext && path.extname(files[i]) !== options.ext) {\n                            continue;\n                        }\n                        files[i] = options.basePath ? files[i].replace(options.basePath + '/', '') : files[i];\n                        filtered.push(files[i]);\n                    }\n\n                    callback(err, filtered || []);\n                });\n            });\n        }\n\n    };\n\n});"}